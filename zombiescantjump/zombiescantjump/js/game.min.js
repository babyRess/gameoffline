(function(a,E){function f(a){switch(a.id){case 0:a=new Windows.Foundation.Uri("ms-windows-store:REVIEW?PFN="+Windows.ApplicationModel.Package.current.id.familyName),Windows.System.Launcher.launchUriAsync(a)}}function c(){k=r.isTrial}var k=!1,m="undefined"!==typeof window.external&&"undefined"!==typeof window.external.notify,l="undefined"!==typeof Windows,t,r;a.setTrialLicense=function(a){k="false"===a?!1:!0};a.isTrialLicense=function(){return k};a.buyGame=function(){if(m)window.external.notify("commandBuyGame");
else if(l){var a=new Windows.Foundation.Uri("ms-windows-store:PDP?PFN="+Windows.ApplicationModel.Package.current.id.familyName);Windows.System.Launcher.launchUriAsync(a)}};a.reviewGame=function(){if(m)window.external.notify("commandReviewGame");else if(l){var a=new Windows.UI.Popups.MessageDialog("Please feel free to rate this game if you like it.\n\nPress 'OK' if you wish to rate the game now, press 'Cancel' to continue playing.","We greatly welcome your feedback.");a.commands.append(new Windows.UI.Popups.UICommand("OK",
f,0));a.commands.append(new Windows.UI.Popups.UICommand("Cancel",f,1));a.cancelCommandIndex=1;a.defaultCommandIndex=0;a.showAsync()}};m?window.external.notify("commandGetTrialLicense"):l&&(t=Windows.ApplicationModel.Store.CurrentApp,r=t.licenseInformation,k=r.isTrial,r.addEventListener("licensechanged",c))})(window.OkijinGame=window.OkijinGame||{});function setTrialLicense(a){window.OkijinGame.setTrialLicense(a)}function setData(a){window.OkijinGame.loadData(a)}
function onNavigateBack(){if(!0===window.OkijinGame.getShowCredits()||window.OkijinGame.getCurrentGameState()===window.OkijinGame.GameStateEnum.GameStart||window.OkijinGame.getCurrentGameState()===window.OkijinGame.GameStateEnum.GameIntro||window.OkijinGame.getCurrentGameState()===window.OkijinGame.GameStateEnum.GameMenu||window.OkijinGame.getCurrentGameState()===window.OkijinGame.GameStateEnum.GameLoading)return!0===window.OkijinGame.getShowCredits()?(window.OkijinGame.setShowCredits(!1),"stay"):
window.OkijinGame.getCurrentGameState()===window.OkijinGame.GameStateEnum.GameMenu&&window.OkijinGame.getCurrentMenuType()!==window.OkijinGame.MenuTypeEnum.ShowMain&&window.OkijinGame.getCurrentMenuType()!==window.OkijinGame.MenuTypeEnum.None?(window.OkijinGame.showMainScreen(),"stay"):"exit";if(5<window.OkijinGame.getCurrentLevel()&&window.OkijinGame.isTrialLicense())return window.OkijinGame.showMainScreen(),"stay";window.OkijinGame.displayMenuConfirmDialog();return"stay"};(function(a,E){function f(c,b,f,l){f=new a.ZombieEntity(f,c.maxY,.4);f.direction=b;f.scaleFactor=l;f.hitPoints=10;f.maxHitPoints=10;f.armorCoefficient=.5;c.entities.push(f)}function c(c,b,f,l){f=new a.ZombieEntity(f,c.maxY,.4);f.direction=b;f.scaleFactor=l;f.hitPoints=30;f.maxHitPoints=30;f.armorCoefficient=0;f.damageFactor=1.5;f.headStyle=a.HeadStyleEnum.Bandaged;c.entities.push(f)}function k(c,b,f,l){f=new a.ZombieEntity(f,c.maxY,.4);f.direction=b;f.scaleFactor=l;f.hitPoints=50;f.maxHitPoints=50;
f.armorCoefficient=0;f.damageFactor=3;f.headStyle=a.HeadStyleEnum.Police;c.entities.push(f)}function m(c,b,f,l){f=new a.ZombieEntity(f,c.maxY,.4);f.direction=b;f.scaleFactor=l;f.hitPoints=20;f.maxHitPoints=20;f.armorCoefficient=.3;f.damageFactor=3;f.headStyle=a.HeadStyleEnum.Punk;c.entities.push(f)}function l(c,b,f,l){f=new a.ZombieEntity(f,c.maxY,.4);f.direction=b;f.scaleFactor=l;f.hitPoints=20;f.maxHitPoints=20;f.armorCoefficient=.3;f.damageFactor=2;f.speed=.7;f.baseSpeed=.7;f.headStyle=a.HeadStyleEnum.Bandit;
c.entities.push(f)}function t(c,b,f,l){f=new a.ZombieEntity(f,c.maxY,.4);f.direction=b;f.scaleFactor=l;f.hitPoints=35;f.maxHitPoints=35;f.armorCoefficient=.5;f.speed=.45;f.baseSpeed=.45;f.headStyle=a.HeadStyleEnum.Tourist;c.entities.push(f)}a.AI=function(){if(!(this instanceof a.AI))throw Error("Constructor called as a function.");this.lastUpdate=0;this.nextUpdateTime=2;this.phase=0;this.canStartWaves=!1;this.absoluteTime=0};a.AI.prototype.update=function(c,b){b.primaryWeaponAssignmentDone&&b.secondaryWeaponAssignmentDone&&
(this.absoluteTime+=c);b.currentLevelTip=3>this.absoluteTime&&b.primaryWeaponAssignmentDone&&b.secondaryWeaponAssignmentDone?a.LevelTipEnum.TipFive:a.LevelTipEnum.None;!this.canStartWaves&&1<b.currentLevel&&(0<b.leftPlayer.stack.objects.length||0<b.rightPlayer.stack.objects.length)&&(this.canStartWaves=!0);if(0===b.levelStartCooldown&&b.primaryWeaponAssignmentDone&&b.secondaryWeaponAssignmentDone&&b.newItem===a.StackObjectTypeEnum.None)switch(b.currentLevel){case 1:this.updateLevelOne(c,b);break;
case 2:this.updateLevelTwo(c,b);break;case 3:this.updateLevelThree(c,b);break;case 4:this.updateLevelFour(c,b);break;case 5:this.updateLevelFive(c,b);break;case 6:this.updateLevelSix(c,b);break;case 7:this.updateLevelSeven(c,b);break;case 8:this.updateLevelEight(c,b);break;case 9:this.updateLevelNine(c,b);break;case 10:this.updateLevelTen(c,b);break;case 11:this.updateLevelEleven(c,b);break;case 12:this.updateLevelTwelve(c,b);break;case 13:this.updateLevelThirteen(c,b);break;case 14:this.updateLevelFourteen(c,
b);break;case 15:this.updateLevelFifteen(c,b);break;case 16:this.updateLevelSixteen(c,b);break;case 17:this.updateLevelSeventeen(c,b);break;case 18:this.updateLevelEighteen(c,b);break;case 19:this.updateLevelNineteen(c,b);break;case 20:this.updateLevelTwenty(c,b);break;case 1E3:this.updateChallenge1(c,b);break;case 1001:this.updateChallenge2(c,b);break;default:this.updateTestLevel(c,b)}};a.AI.prototype.updateChallenge2=function(c,b){b.currentLevelTip=a.LevelTipEnum.None;this.lastUpdate>=this.nextUpdateTime&&
1<b.mountedCrateCount&&(k(b,a.DirectionEnum.Right,b.minX-1.7,1.1),k(b,a.DirectionEnum.Right,b.minX-5,1),k(b,a.DirectionEnum.Left,b.maxX+1,1.1),k(b,a.DirectionEnum.Left,b.maxX+2.1,1.1));if(8===this.phase&&3>b.entities.length){this.phase=1;this.lastUpdate=0;this.nextUpdateTime=2;b.daysCount++;a.getSavedData().daysCountHighScore=Math.max(a.getSavedData().daysCountHighScore,b.daysCount);var f=!1;b.showHighScoreEffect&&0<b.daysCount&&b.daysCount>a.getSavedData().daysCountHighScore&&(f=new a.ProjectileEffect(b.leftPlayer.x+
(b.rightPlayer.x-b.leftPlayer.x)/2,b.maxY-1,.5,0,0,-3,a.EffectTypeEnum.HighScore,0),f.selfDestroyTime=1.5,f.startFadeTime=.7,b.effects.push(f),a.SoundManager.playHighScoreSound(),b.showHighScoreEffect=!1,f=!0);f||(f=new a.ProjectileEffect(b.leftPlayer.x+(b.rightPlayer.x-b.leftPlayer.x)/2,b.maxY-1,.5,0,0,-3,a.EffectTypeEnum.Checkpoint,0),f.selfDestroyTime=1.5,f.startFadeTime=.7,b.effects.push(f),a.SoundManager.playCheckpointSound());k(b,a.DirectionEnum.Right,b.minX-1.7,1.05);k(b,a.DirectionEnum.Right,
b.minX-2.7,1.05);k(b,a.DirectionEnum.Left,b.maxX+1,1.05);k(b,a.DirectionEnum.Left,b.maxX+2,1.05)}switch(b.daysCount+6){case 1:this.updateLevelOne(c,b);break;case 2:this.updateLevelTwo(c,b);break;case 3:this.updateLevelThree(c,b);break;case 4:this.updateLevelFour(c,b);break;case 5:this.updateLevelFive(c,b);break;case 6:this.updateLevelSix(c,b);break;case 7:this.updateLevelSeven(c,b);break;case 8:this.updateLevelEight(c,b);break;case 9:this.updateLevelNine(c,b);break;case 10:this.updateLevelTen(c,b);
break;case 11:this.updateLevelEleven(c,b);break;case 12:this.updateLevelTwelve(c,b);break;case 13:this.updateLevelThirteen(c,b);break;case 14:this.updateLevelFourteen(c,b);break;case 15:this.updateLevelFifteen(c,b);break;case 16:this.updateLevelSixteen(c,b);break;case 17:this.updateLevelSeventeen(c,b);break;case 18:this.updateLevelEighteen(c,b);break;case 19:this.updateLevelNineteen(c,b);break;case 20:this.updateLevelTwenty(c,b);break;default:this.updateChallenge1(c,b)}};a.AI.prototype.updateChallenge1=
function(r,b){b.currentLevelTip=a.LevelTipEnum.None;!this.canStartWaves&&(0<b.leftPlayer.stack.objects.length||0<b.rightPlayer.stack.objects.length)?this.canStartWaves=!0:0===this.phase&&0===b.leftPlayer.stack.objects.length&&0===b.rightPlayer.stack.objects.length&&(b.currentLevelTip=3>this.absoluteTime?a.LevelTipEnum.TipFive:a.LevelTipEnum.TipOne);if(this.canStartWaves){if(this.lastUpdate>this.nextUpdateTime){var C=2,J=3<b.mountedCrateCount;20>b.killCount?(C=.7<Math.random()?3:2,this.nextUpdateTime=
6):40>b.killCount?(C=.7<Math.random()?4:2,this.nextUpdateTime=5):60>b.killCount?(C=.5<Math.random()?4:2,this.nextUpdateTime=5):(C=80>b.killCount?.3<Math.random()?4:2:.1<Math.random()?4:2,this.nextUpdateTime=4);for(var Q=1,E=0;E<C;E+=1){var e=.5<Math.random()?a.DirectionEnum.Left:a.DirectionEnum.Right,g=Math.random(),p=0,p=a.DirectionEnum.Left===e?b.maxX+Q:b.minX-Q;.95<g?J?k(b,e,p,1):t(b,e,p,1):.85<g?J?k(b,e,p,1):l(b,e,p,1):.8<g?k(b,e,p,1):.7<g?m(b,e,p,1):.6<g?c(b,e,p,1):J?k(b,e,p,1):f(b,e,p,1);Q+=
1}a.SoundManager.playZombieComing();this.lastUpdate=0}this.lastUpdate+=r}};a.AI.prototype.updateLevelTwenty=function(c,b){3<this.absoluteTime&&0===this.phase&&0===b.leftPlayer.stack.objects.length&&0===b.rightPlayer.stack.objects.length?b.currentLevelTip=a.LevelTipEnum.TipOne:4>b.entities.length&&7===this.phase&&(b.currentLevelTip=a.LevelTipEnum.TipThree);if(this.canStartWaves){if(this.lastUpdate>this.nextUpdateTime||0===b.entities.length){switch(this.phase){case 0:m(b,a.DirectionEnum.Right,b.minX-
1,1.1);k(b,a.DirectionEnum.Right,b.minX-2,1);k(b,a.DirectionEnum.Right,b.minX-3,1.1);this.nextUpdateTime=15;a.SoundManager.playZombieComing();break;case 1:k(b,a.DirectionEnum.Left,b.maxX+1,1);m(b,a.DirectionEnum.Left,b.maxX+2,1);this.nextUpdateTime=20;a.SoundManager.playZombieComing();break;case 2:m(b,a.DirectionEnum.Right,b.minX-1,1.1);m(b,a.DirectionEnum.Right,b.minX-1.7,1);k(b,a.DirectionEnum.Right,b.minX-2.4,1.1);k(b,a.DirectionEnum.Left,b.maxX+1,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();
break;case 3:m(b,a.DirectionEnum.Left,b.maxX+1,1.1);m(b,a.DirectionEnum.Left,b.maxX+1.7,1);m(b,a.DirectionEnum.Left,b.maxX+2.4,1);k(b,a.DirectionEnum.Left,b.maxX+3,1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 4:m(b,a.DirectionEnum.Right,b.minX-1,1);m(b,a.DirectionEnum.Right,b.minX-1.7,1.1);m(b,a.DirectionEnum.Right,b.minX-2.1,1);m(b,a.DirectionEnum.Left,b.maxX+1,1.1);m(b,a.DirectionEnum.Left,b.maxX+2,1.1);this.nextUpdateTime=12;a.SoundManager.playZombieComing();break;case 5:k(b,
a.DirectionEnum.Left,b.maxX+1,1);m(b,a.DirectionEnum.Left,b.maxX+1.7,1.1);m(b,a.DirectionEnum.Left,b.maxX+2.1,1);this.nextUpdateTime=18;a.SoundManager.playZombieComing();break;case 6:m(b,a.DirectionEnum.Right,b.minX-1,1);m(b,a.DirectionEnum.Right,b.minX-1.7,1.1);m(b,a.DirectionEnum.Right,b.minX-2.4,1.1);m(b,a.DirectionEnum.Left,b.maxX+1,1.1);m(b,a.DirectionEnum.Left,b.maxX+1.7,1);m(b,a.DirectionEnum.Left,b.maxX+2,1);k(b,a.DirectionEnum.Left,b.maxX+3,1);this.nextUpdateTime=35;a.SoundManager.playZombieComing();
break;case 7:m(b,a.DirectionEnum.Right,b.minX-1,1),m(b,a.DirectionEnum.Right,b.minX-1.7,1.1),k(b,a.DirectionEnum.Right,b.minX-5,1),k(b,a.DirectionEnum.Left,b.maxX+1,1.1),k(b,a.DirectionEnum.Left,b.maxX+2.1,1.1),m(b,a.DirectionEnum.Left,b.maxX+3.1,1.1),m(b,a.DirectionEnum.Left,b.maxX+5,1.1),m(b,a.DirectionEnum.Left,b.maxX+5,1.1),a.SoundManager.playZombieComing()}this.phase+=1;this.lastUpdate=0}this.lastUpdate+=c}};a.AI.prototype.updateLevelNineteen=function(f,b){3<this.absoluteTime&&0===this.phase&&
0===b.leftPlayer.stack.objects.length&&0===b.rightPlayer.stack.objects.length?b.currentLevelTip=a.LevelTipEnum.TipOne:4>b.entities.length&&7===this.phase&&(b.currentLevelTip=a.LevelTipEnum.TipThree);if(this.canStartWaves){if(this.lastUpdate>this.nextUpdateTime||0===b.entities.length){switch(this.phase){case 0:m(b,a.DirectionEnum.Right,b.minX-1,1.1);k(b,a.DirectionEnum.Right,b.minX-2,1);k(b,a.DirectionEnum.Right,b.minX-3,1.1);k(b,a.DirectionEnum.Right,b.minX-4,1.1);this.nextUpdateTime=15;a.SoundManager.playZombieComing();
break;case 1:k(b,a.DirectionEnum.Left,b.maxX+1,1);m(b,a.DirectionEnum.Left,b.maxX+2,1);this.nextUpdateTime=20;a.SoundManager.playZombieComing();break;case 2:m(b,a.DirectionEnum.Right,b.minX-1,1.1);l(b,a.DirectionEnum.Right,b.minX-1.7,1);l(b,a.DirectionEnum.Right,b.minX-2.4,1.1);k(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+2,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 3:l(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+1.7,
1);l(b,a.DirectionEnum.Left,b.maxX+2.4,1);c(b,a.DirectionEnum.Left,b.maxX+3,1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 4:l(b,a.DirectionEnum.Right,b.minX-1,1);l(b,a.DirectionEnum.Right,b.minX-1.7,1.1);m(b,a.DirectionEnum.Right,b.minX-2.1,1);l(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+2,1.1);c(b,a.DirectionEnum.Left,b.maxX+3,1.1);this.nextUpdateTime=12;a.SoundManager.playZombieComing();break;case 5:k(b,a.DirectionEnum.Left,b.maxX+1,1);m(b,a.DirectionEnum.Left,
b.maxX+1.7,1.1);l(b,a.DirectionEnum.Left,b.maxX+2.1,1);this.nextUpdateTime=18;a.SoundManager.playZombieComing();break;case 6:l(b,a.DirectionEnum.Right,b.minX-1,1);l(b,a.DirectionEnum.Right,b.minX-1.7,1.1);l(b,a.DirectionEnum.Right,b.minX-2.4,1.1);c(b,a.DirectionEnum.Left,b.maxX+1,1.1);m(b,a.DirectionEnum.Left,b.maxX+1.7,1);m(b,a.DirectionEnum.Left,b.maxX+2,1);k(b,a.DirectionEnum.Left,b.maxX+3,1);this.nextUpdateTime=35;a.SoundManager.playZombieComing();break;case 7:l(b,a.DirectionEnum.Right,b.minX-
1,1),l(b,a.DirectionEnum.Right,b.minX-1.7,1.1),k(b,a.DirectionEnum.Right,b.minX-5,1),k(b,a.DirectionEnum.Left,b.maxX+1,1.1),k(b,a.DirectionEnum.Left,b.maxX+2.1,1.1),m(b,a.DirectionEnum.Left,b.maxX+3.1,1.1),m(b,a.DirectionEnum.Left,b.maxX+5,1.1),m(b,a.DirectionEnum.Left,b.maxX+5,1.1),a.SoundManager.playZombieComing()}this.phase+=1;this.lastUpdate=0}this.lastUpdate+=f}};a.AI.prototype.updateLevelEighteen=function(r,b){3<this.absoluteTime&&0===this.phase&&0===b.leftPlayer.stack.objects.length&&0===b.rightPlayer.stack.objects.length?
b.currentLevelTip=a.LevelTipEnum.TipOne:4>b.entities.length&&7===this.phase&&(b.currentLevelTip=a.LevelTipEnum.TipThree);if(this.canStartWaves){if(this.lastUpdate>this.nextUpdateTime||0===b.entities.length){switch(this.phase){case 0:f(b,a.DirectionEnum.Right,b.minX-1,1.1);k(b,a.DirectionEnum.Right,b.minX-2,1);k(b,a.DirectionEnum.Right,b.minX-3,1.1);k(b,a.DirectionEnum.Right,b.minX-4,1.1);this.nextUpdateTime=15;a.SoundManager.playZombieComing();break;case 1:k(b,a.DirectionEnum.Left,b.maxX+1,1);m(b,
a.DirectionEnum.Left,b.maxX+2,1);this.nextUpdateTime=20;a.SoundManager.playZombieComing();break;case 2:c(b,a.DirectionEnum.Right,b.minX-1,1.1);l(b,a.DirectionEnum.Right,b.minX-1.7,1);l(b,a.DirectionEnum.Right,b.minX-2.4,1.1);k(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+2,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 3:l(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+1.7,1);l(b,a.DirectionEnum.Left,b.maxX+2.4,1);c(b,a.DirectionEnum.Left,
b.maxX+3,1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 4:l(b,a.DirectionEnum.Right,b.minX-1,1);l(b,a.DirectionEnum.Right,b.minX-1.7,1.1);l(b,a.DirectionEnum.Right,b.minX-2.1,1);l(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+2,1.1);c(b,a.DirectionEnum.Left,b.maxX+3,1.1);this.nextUpdateTime=12;a.SoundManager.playZombieComing();break;case 5:k(b,a.DirectionEnum.Left,b.maxX+1,1);l(b,a.DirectionEnum.Left,b.maxX+1.7,1.1);l(b,a.DirectionEnum.Left,b.maxX+2.1,
1);this.nextUpdateTime=18;a.SoundManager.playZombieComing();break;case 6:l(b,a.DirectionEnum.Right,b.minX-1,1);l(b,a.DirectionEnum.Right,b.minX-1.7,1.1);l(b,a.DirectionEnum.Right,b.minX-2.4,1.1);c(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+1.7,1);l(b,a.DirectionEnum.Left,b.maxX+2,1);k(b,a.DirectionEnum.Left,b.maxX+3,1);this.nextUpdateTime=35;a.SoundManager.playZombieComing();break;case 7:l(b,a.DirectionEnum.Right,b.minX-1,1),l(b,a.DirectionEnum.Right,b.minX-1.7,1.1),l(b,
a.DirectionEnum.Right,b.minX-2.1,1),l(b,a.DirectionEnum.Right,b.minX-2.9,1),k(b,a.DirectionEnum.Right,b.minX-5,1),k(b,a.DirectionEnum.Left,b.maxX+1,1.1),k(b,a.DirectionEnum.Left,b.maxX+2.1,1.1),k(b,a.DirectionEnum.Left,b.maxX+3.1,1.1),k(b,a.DirectionEnum.Left,b.maxX+5,1.1),m(b,a.DirectionEnum.Left,b.maxX+5,1.1),a.SoundManager.playZombieComing()}this.phase+=1;this.lastUpdate=0}this.lastUpdate+=r}};a.AI.prototype.updateLevelSeventeen=function(f,b){3<this.absoluteTime&&0===this.phase&&0===b.leftPlayer.stack.objects.length&&
0===b.rightPlayer.stack.objects.length?b.currentLevelTip=a.LevelTipEnum.TipOne:4>b.entities.length&&7===this.phase&&(b.currentLevelTip=a.LevelTipEnum.TipThree);if(this.canStartWaves){if(this.lastUpdate>this.nextUpdateTime||0===b.entities.length){switch(this.phase){case 0:k(b,a.DirectionEnum.Right,b.minX-1,1);k(b,a.DirectionEnum.Right,b.minX-2,1.1);k(b,a.DirectionEnum.Right,b.minX-3,1.1);this.nextUpdateTime=15;a.SoundManager.playZombieComing();break;case 1:k(b,a.DirectionEnum.Left,b.maxX+1,1);k(b,
a.DirectionEnum.Left,b.maxX+2,1);this.nextUpdateTime=20;a.SoundManager.playZombieComing();break;case 2:c(b,a.DirectionEnum.Right,b.minX-1,1.1);l(b,a.DirectionEnum.Right,b.minX-1.7,1);l(b,a.DirectionEnum.Right,b.minX-2.4,1.1);k(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+2,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 3:l(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+1.7,1);l(b,a.DirectionEnum.Left,b.maxX+2.4,1);this.nextUpdateTime=
10;a.SoundManager.playZombieComing();break;case 4:l(b,a.DirectionEnum.Right,b.minX-1,1);l(b,a.DirectionEnum.Right,b.minX-1.7,1.1);l(b,a.DirectionEnum.Right,b.minX-2.1,1);l(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+2,1.1);this.nextUpdateTime=12;a.SoundManager.playZombieComing();break;case 5:k(b,a.DirectionEnum.Left,b.maxX+1,1);l(b,a.DirectionEnum.Left,b.maxX+1.7,1.1);l(b,a.DirectionEnum.Left,b.maxX+2.1,1);this.nextUpdateTime=18;a.SoundManager.playZombieComing();break;case 6:l(b,
a.DirectionEnum.Right,b.minX-1,1);l(b,a.DirectionEnum.Right,b.minX-1.7,1.1);l(b,a.DirectionEnum.Right,b.minX-2.4,1.1);c(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+1.7,1);l(b,a.DirectionEnum.Left,b.maxX+2,1);k(b,a.DirectionEnum.Left,b.maxX+3,1);this.nextUpdateTime=35;a.SoundManager.playZombieComing();break;case 7:l(b,a.DirectionEnum.Right,b.minX-1,1),l(b,a.DirectionEnum.Right,b.minX-1.7,1.1),l(b,a.DirectionEnum.Right,b.minX-2.1,1),l(b,a.DirectionEnum.Right,b.minX-2.9,1),k(b,
a.DirectionEnum.Right,b.minX-5,1),k(b,a.DirectionEnum.Left,b.maxX+1,1.1),k(b,a.DirectionEnum.Left,b.maxX+2.1,1.1),k(b,a.DirectionEnum.Left,b.maxX+3.1,1.1),k(b,a.DirectionEnum.Left,b.maxX+5,1.1),a.SoundManager.playZombieComing()}this.phase+=1;this.lastUpdate=0}this.lastUpdate+=f}};a.AI.prototype.updateLevelSixteen=function(f,b){3<this.absoluteTime&&0===this.phase&&0===b.leftPlayer.stack.objects.length&&0===b.rightPlayer.stack.objects.length?b.currentLevelTip=a.LevelTipEnum.TipOne:4>b.entities.length&&
7===this.phase&&(b.currentLevelTip=a.LevelTipEnum.TipThree);if(this.canStartWaves){if(this.lastUpdate>this.nextUpdateTime||0===b.entities.length){switch(this.phase){case 0:k(b,a.DirectionEnum.Right,b.minX-1,1);k(b,a.DirectionEnum.Right,b.minX-2,1.1);c(b,a.DirectionEnum.Right,b.minX-3,1.1);this.nextUpdateTime=15;a.SoundManager.playZombieComing();break;case 1:k(b,a.DirectionEnum.Left,b.maxX+1,1);k(b,a.DirectionEnum.Left,b.maxX+2,1);this.nextUpdateTime=20;a.SoundManager.playZombieComing();break;case 2:c(b,
a.DirectionEnum.Right,b.minX-1,1.1);l(b,a.DirectionEnum.Right,b.minX-1.7,1);l(b,a.DirectionEnum.Right,b.minX-2.4,1.1);c(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+2,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 3:l(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+1.7,1);l(b,a.DirectionEnum.Left,b.maxX+2.4,1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 4:l(b,a.DirectionEnum.Right,b.minX-1,1);l(b,a.DirectionEnum.Right,
b.minX-1.7,1.1);l(b,a.DirectionEnum.Right,b.minX-2.1,1);l(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+2,1.1);this.nextUpdateTime=12;a.SoundManager.playZombieComing();break;case 5:c(b,a.DirectionEnum.Left,b.maxX+1,1);l(b,a.DirectionEnum.Left,b.maxX+1.7,1.1);l(b,a.DirectionEnum.Left,b.maxX+2.1,1);this.nextUpdateTime=18;a.SoundManager.playZombieComing();break;case 6:l(b,a.DirectionEnum.Right,b.minX-1,1);l(b,a.DirectionEnum.Right,b.minX-1.7,1.1);l(b,a.DirectionEnum.Right,b.minX-
2.4,1.1);c(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+1.7,1);l(b,a.DirectionEnum.Left,b.maxX+2,1);k(b,a.DirectionEnum.Left,b.maxX+3,1);this.nextUpdateTime=35;a.SoundManager.playZombieComing();break;case 7:l(b,a.DirectionEnum.Right,b.minX-1,1),l(b,a.DirectionEnum.Right,b.minX-1.7,1.1),l(b,a.DirectionEnum.Right,b.minX-2.1,1),l(b,a.DirectionEnum.Right,b.minX-2.9,1),l(b,a.DirectionEnum.Right,b.minX-5,1),k(b,a.DirectionEnum.Left,b.maxX+1,1.1),k(b,a.DirectionEnum.Left,b.maxX+2.1,
1.1),k(b,a.DirectionEnum.Left,b.maxX+3.1,1.1),k(b,a.DirectionEnum.Left,b.maxX+5,1.1),a.SoundManager.playZombieComing()}this.phase+=1;this.lastUpdate=0}this.lastUpdate+=f}};a.AI.prototype.updateLevelFifteen=function(c,b){3<this.absoluteTime&&0===this.phase&&0===b.leftPlayer.stack.objects.length&&0===b.rightPlayer.stack.objects.length?b.currentLevelTip=a.LevelTipEnum.TipOne:4>b.entities.length&&7===this.phase&&(b.currentLevelTip=a.LevelTipEnum.TipThree);if(this.canStartWaves){if(this.lastUpdate>this.nextUpdateTime||
0===b.entities.length){switch(this.phase){case 0:k(b,a.DirectionEnum.Right,b.minX-1,1);k(b,a.DirectionEnum.Right,b.minX-2,1.1);this.nextUpdateTime=15;a.SoundManager.playZombieComing();break;case 1:k(b,a.DirectionEnum.Left,b.maxX+1,1);k(b,a.DirectionEnum.Left,b.maxX+2,1);this.nextUpdateTime=20;a.SoundManager.playZombieComing();break;case 2:l(b,a.DirectionEnum.Right,b.minX-1,1.1);l(b,a.DirectionEnum.Right,b.minX-1.7,1);l(b,a.DirectionEnum.Right,b.minX-2.4,1.1);l(b,a.DirectionEnum.Left,b.maxX+1,1.1);
l(b,a.DirectionEnum.Left,b.maxX+2,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 3:l(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+1.7,1);l(b,a.DirectionEnum.Left,b.maxX+2.4,1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 4:l(b,a.DirectionEnum.Right,b.minX-1,1);l(b,a.DirectionEnum.Right,b.minX-1.7,1.1);l(b,a.DirectionEnum.Right,b.minX-2.1,1);l(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+2,1.1);this.nextUpdateTime=
12;a.SoundManager.playZombieComing();break;case 5:l(b,a.DirectionEnum.Left,b.maxX+1,1);l(b,a.DirectionEnum.Left,b.maxX+1.7,1.1);l(b,a.DirectionEnum.Left,b.maxX+2.1,1);this.nextUpdateTime=18;a.SoundManager.playZombieComing();break;case 6:l(b,a.DirectionEnum.Right,b.minX-1,1);l(b,a.DirectionEnum.Right,b.minX-1.7,1.1);l(b,a.DirectionEnum.Right,b.minX-2.4,1.1);l(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+1.7,1);l(b,a.DirectionEnum.Left,b.maxX+2,1);this.nextUpdateTime=35;a.SoundManager.playZombieComing();
break;case 7:l(b,a.DirectionEnum.Right,b.minX-1,1),l(b,a.DirectionEnum.Right,b.minX-1.7,1.1),l(b,a.DirectionEnum.Right,b.minX-2.1,1),l(b,a.DirectionEnum.Right,b.minX-2.9,1),l(b,a.DirectionEnum.Right,b.minX-5,1),k(b,a.DirectionEnum.Left,b.maxX+1,1.1),k(b,a.DirectionEnum.Left,b.maxX+2.1,1.1),k(b,a.DirectionEnum.Left,b.maxX+3.1,1.1),k(b,a.DirectionEnum.Left,b.maxX+5,1.1),a.SoundManager.playZombieComing()}this.phase+=1;this.lastUpdate=0}this.lastUpdate+=c}};a.AI.prototype.updateLevelFourteen=function(c,
b){3<this.absoluteTime&&0===this.phase&&0===b.leftPlayer.stack.objects.length&&0===b.rightPlayer.stack.objects.length?b.currentLevelTip=a.LevelTipEnum.TipOne:4>b.entities.length&&7===this.phase&&(b.currentLevelTip=a.LevelTipEnum.TipThree);if(this.canStartWaves){if(this.lastUpdate>this.nextUpdateTime||0===b.entities.length){switch(this.phase){case 0:t(b,a.DirectionEnum.Right,b.minX-1,1);t(b,a.DirectionEnum.Right,b.minX-2,1.1);this.nextUpdateTime=2;a.SoundManager.playZombieComing();break;case 1:t(b,
a.DirectionEnum.Left,b.maxX+1,1);t(b,a.DirectionEnum.Left,b.maxX+2,1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 2:t(b,a.DirectionEnum.Right,b.minX-1,1.1);t(b,a.DirectionEnum.Right,b.minX-1.7,1);t(b,a.DirectionEnum.Left,b.maxX+1,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 3:t(b,a.DirectionEnum.Left,b.maxX+1,1.1);t(b,a.DirectionEnum.Left,b.maxX+1.7,1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 4:t(b,a.DirectionEnum.Right,
b.minX-1,1);t(b,a.DirectionEnum.Right,b.minX-1.7,1.1);t(b,a.DirectionEnum.Left,b.maxX+1,1.1);t(b,a.DirectionEnum.Left,b.maxX+2,1.1);this.nextUpdateTime=12;a.SoundManager.playZombieComing();break;case 5:k(b,a.DirectionEnum.Left,b.maxX+1,1);k(b,a.DirectionEnum.Left,b.maxX+1.7,1.1);this.nextUpdateTime=18;a.SoundManager.playZombieComing();break;case 6:k(b,a.DirectionEnum.Right,b.minX-1,1);k(b,a.DirectionEnum.Left,b.maxX+1,1.1);this.nextUpdateTime=35;a.SoundManager.playZombieComing();break;case 7:t(b,
a.DirectionEnum.Right,b.minX-1,1),t(b,a.DirectionEnum.Right,b.minX-1.7,1.1),k(b,a.DirectionEnum.Right,b.minX-2.9,1),k(b,a.DirectionEnum.Right,b.minX-5,1),t(b,a.DirectionEnum.Left,b.maxX+1,1.1),t(b,a.DirectionEnum.Left,b.maxX+2.1,1.1),k(b,a.DirectionEnum.Left,b.maxX+3.1,1.1),a.SoundManager.playZombieComing()}this.phase+=1;this.lastUpdate=0}this.lastUpdate+=c}};a.AI.prototype.updateLevelThirteen=function(c,b){3<this.absoluteTime&&0===this.phase&&0===b.leftPlayer.stack.objects.length&&0===b.rightPlayer.stack.objects.length?
b.currentLevelTip=a.LevelTipEnum.TipOne:4>b.entities.length&&7===this.phase&&(b.currentLevelTip=a.LevelTipEnum.TipThree);if(this.canStartWaves){if(this.lastUpdate>this.nextUpdateTime||0===b.entities.length){switch(this.phase){case 0:l(b,a.DirectionEnum.Right,b.minX-1,1);l(b,a.DirectionEnum.Right,b.minX-2,1.1);this.nextUpdateTime=2;a.SoundManager.playZombieComing();break;case 1:l(b,a.DirectionEnum.Left,b.maxX+1,1);l(b,a.DirectionEnum.Left,b.maxX+2,1);l(b,a.DirectionEnum.Right,b.minX-1,1.1);this.nextUpdateTime=
10;a.SoundManager.playZombieComing();break;case 2:l(b,a.DirectionEnum.Right,b.minX-1,1.1);l(b,a.DirectionEnum.Right,b.minX-1.7,1);l(b,a.DirectionEnum.Right,b.minX-2.4,1.1);l(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+2,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 3:l(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+1.7,1);l(b,a.DirectionEnum.Left,b.maxX+2.4,1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 4:l(b,
a.DirectionEnum.Right,b.minX-1,1);l(b,a.DirectionEnum.Right,b.minX-1.7,1.1);l(b,a.DirectionEnum.Right,b.minX-2.1,1);l(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+2,1.1);this.nextUpdateTime=12;a.SoundManager.playZombieComing();break;case 5:k(b,a.DirectionEnum.Left,b.maxX+1,1);k(b,a.DirectionEnum.Left,b.maxX+1.7,1.1);this.nextUpdateTime=18;a.SoundManager.playZombieComing();break;case 6:k(b,a.DirectionEnum.Right,b.minX-1,1);k(b,a.DirectionEnum.Left,b.maxX+1,1.1);this.nextUpdateTime=
35;a.SoundManager.playZombieComing();break;case 7:l(b,a.DirectionEnum.Right,b.minX-1,1),l(b,a.DirectionEnum.Right,b.minX-1.7,1.1),k(b,a.DirectionEnum.Right,b.minX-2.9,1),k(b,a.DirectionEnum.Right,b.minX-5,1),l(b,a.DirectionEnum.Left,b.maxX+1,1.1),l(b,a.DirectionEnum.Left,b.maxX+2.1,1.1),k(b,a.DirectionEnum.Left,b.maxX+3.1,1.1),k(b,a.DirectionEnum.Left,b.maxX+5,1.1),a.SoundManager.playZombieComing()}this.phase+=1;this.lastUpdate=0}this.lastUpdate+=c}};a.AI.prototype.updateLevelTwelve=function(c,b){3<
this.absoluteTime&&0===this.phase&&0===b.leftPlayer.stack.objects.length&&0===b.rightPlayer.stack.objects.length?b.currentLevelTip=a.LevelTipEnum.TipOne:4>b.entities.length&&7===this.phase&&(b.currentLevelTip=a.LevelTipEnum.TipThree);if(this.canStartWaves){if(this.lastUpdate>this.nextUpdateTime||0===b.entities.length){switch(this.phase){case 0:l(b,a.DirectionEnum.Right,b.minX-1,1);l(b,a.DirectionEnum.Right,b.minX-2,1.1);this.nextUpdateTime=2;a.SoundManager.playZombieComing();break;case 1:l(b,a.DirectionEnum.Left,
b.maxX+1,1);l(b,a.DirectionEnum.Left,b.maxX+2,1);l(b,a.DirectionEnum.Right,b.minX-1,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 2:l(b,a.DirectionEnum.Right,b.minX-1,1.1);l(b,a.DirectionEnum.Right,b.minX-1.7,1);l(b,a.DirectionEnum.Right,b.minX-2.4,1.1);l(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+2,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 3:l(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+1.7,
1);l(b,a.DirectionEnum.Left,b.maxX+2.4,1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 4:l(b,a.DirectionEnum.Right,b.minX-1,1);l(b,a.DirectionEnum.Right,b.minX-1.7,1.1);l(b,a.DirectionEnum.Right,b.minX-2.1,1);l(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+2,1.1);this.nextUpdateTime=12;a.SoundManager.playZombieComing();break;case 5:l(b,a.DirectionEnum.Left,b.maxX+1,1);l(b,a.DirectionEnum.Left,b.maxX+1.7,1.1);l(b,a.DirectionEnum.Left,b.maxX+2.1,1);this.nextUpdateTime=
18;a.SoundManager.playZombieComing();break;case 6:l(b,a.DirectionEnum.Right,b.minX-1,1);l(b,a.DirectionEnum.Right,b.minX-1.7,1.1);l(b,a.DirectionEnum.Right,b.minX-2.4,1.1);l(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+1.7,1);l(b,a.DirectionEnum.Left,b.maxX+2,1);this.nextUpdateTime=35;a.SoundManager.playZombieComing();break;case 7:l(b,a.DirectionEnum.Right,b.minX-1,1),l(b,a.DirectionEnum.Right,b.minX-1.7,1.1),l(b,a.DirectionEnum.Right,b.minX-2.1,1),l(b,a.DirectionEnum.Right,
b.minX-2.9,1),l(b,a.DirectionEnum.Right,b.minX-5,1),l(b,a.DirectionEnum.Left,b.maxX+1,1.1),l(b,a.DirectionEnum.Left,b.maxX+2.1,1.1),l(b,a.DirectionEnum.Left,b.maxX+3.1,1.1),l(b,a.DirectionEnum.Left,b.maxX+5,1.1),a.SoundManager.playZombieComing()}this.phase+=1;this.lastUpdate=0}this.lastUpdate+=c}};a.AI.prototype.updateLevelEleven=function(f,b){3<this.absoluteTime&&0===this.phase&&0===b.leftPlayer.stack.objects.length&&0===b.rightPlayer.stack.objects.length?b.currentLevelTip=a.LevelTipEnum.TipOne:
4>b.entities.length&&7===this.phase&&(b.currentLevelTip=a.LevelTipEnum.TipThree);if(this.canStartWaves){if(this.lastUpdate>this.nextUpdateTime||0===b.entities.length){switch(this.phase){case 0:c(b,a.DirectionEnum.Right,b.minX-1,1);c(b,a.DirectionEnum.Right,b.minX-2,1.1);this.nextUpdateTime=2;a.SoundManager.playZombieComing();break;case 1:c(b,a.DirectionEnum.Left,b.maxX+1,1);c(b,a.DirectionEnum.Right,b.minX-1,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 2:c(b,a.DirectionEnum.Right,
b.minX-1,1.1);c(b,a.DirectionEnum.Left,b.maxX+1,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 3:c(b,a.DirectionEnum.Left,b.maxX+1,1.1);c(b,a.DirectionEnum.Left,b.maxX+1.7,1);c(b,a.DirectionEnum.Left,b.maxX+2.4,1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 4:c(b,a.DirectionEnum.Right,b.minX-1,1);c(b,a.DirectionEnum.Right,b.minX-1.7,1.1);this.nextUpdateTime=12;a.SoundManager.playZombieComing();break;case 5:c(b,a.DirectionEnum.Left,b.maxX+1,1);c(b,
a.DirectionEnum.Left,b.maxX+1.7,1.1);this.nextUpdateTime=18;a.SoundManager.playZombieComing();break;case 6:c(b,a.DirectionEnum.Right,b.minX-1,1);c(b,a.DirectionEnum.Right,b.minX-1.7,1.1);c(b,a.DirectionEnum.Right,b.minX-2.4,1.1);c(b,a.DirectionEnum.Left,b.maxX+1,1.1);c(b,a.DirectionEnum.Left,b.maxX+1.7,1);c(b,a.DirectionEnum.Left,b.maxX+2,1);this.nextUpdateTime=35;a.SoundManager.playZombieComing();break;case 7:c(b,a.DirectionEnum.Right,b.minX-1,1),c(b,a.DirectionEnum.Right,b.minX-1.7,1.1),c(b,a.DirectionEnum.Right,
b.minX-2.1,1),c(b,a.DirectionEnum.Right,b.minX-2.9,1),c(b,a.DirectionEnum.Right,b.minX-5,1),c(b,a.DirectionEnum.Left,b.maxX+1,1.1),c(b,a.DirectionEnum.Left,b.maxX+2.1,1.1),c(b,a.DirectionEnum.Left,b.maxX+3.1,1.1),c(b,a.DirectionEnum.Left,b.maxX+5,1.1),a.SoundManager.playZombieComing()}this.phase+=1;this.lastUpdate=0}this.lastUpdate+=f}};a.AI.prototype.updateLevelTen=function(r,b){3<this.absoluteTime&&0===this.phase&&0===b.leftPlayer.stack.objects.length&&0===b.rightPlayer.stack.objects.length?b.currentLevelTip=
a.LevelTipEnum.TipOne:4>b.entities.length&&7===this.phase&&(b.currentLevelTip=a.LevelTipEnum.TipThree);if(this.canStartWaves){if(this.lastUpdate>this.nextUpdateTime||0===b.entities.length){switch(this.phase){case 0:f(b,a.DirectionEnum.Right,b.minX-1,1);f(b,a.DirectionEnum.Right,b.minX-2,1.1);this.nextUpdateTime=2;a.SoundManager.playZombieComing();break;case 1:t(b,a.DirectionEnum.Left,b.maxX+1,1);f(b,a.DirectionEnum.Left,b.maxX+2,1);f(b,a.DirectionEnum.Left,b.maxX+2.4,1.1);f(b,a.DirectionEnum.Right,
b.minX-1,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 2:l(b,a.DirectionEnum.Right,b.minX-1,1.1);l(b,a.DirectionEnum.Right,b.minX-1.7,1);l(b,a.DirectionEnum.Right,b.minX-2.4,1.1);l(b,a.DirectionEnum.Left,b.maxX+1,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 3:l(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+1.7,1);l(b,a.DirectionEnum.Left,b.maxX+2.4,1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 4:c(b,
a.DirectionEnum.Right,b.minX-1,1);c(b,a.DirectionEnum.Right,b.minX-1.7,1.1);c(b,a.DirectionEnum.Right,b.minX-2.1,1);c(b,a.DirectionEnum.Left,b.maxX+1,1.1);this.nextUpdateTime=12;a.SoundManager.playZombieComing();break;case 5:c(b,a.DirectionEnum.Left,b.maxX+1,1);c(b,a.DirectionEnum.Left,b.maxX+1.7,1.1);c(b,a.DirectionEnum.Left,b.maxX+2.1,1);this.nextUpdateTime=18;a.SoundManager.playZombieComing();break;case 6:k(b,a.DirectionEnum.Right,b.minX-1,1);k(b,a.DirectionEnum.Right,b.minX-1.7,1.1);k(b,a.DirectionEnum.Right,
b.minX-2.4,1.1);k(b,a.DirectionEnum.Left,b.maxX+1,1.1);k(b,a.DirectionEnum.Left,b.maxX+1.7,1);this.nextUpdateTime=35;a.SoundManager.playZombieComing();break;case 7:f(b,a.DirectionEnum.Right,b.minX-1,1),c(b,a.DirectionEnum.Right,b.minX-1.7,1.1),l(b,a.DirectionEnum.Right,b.minX-2.1,1),c(b,a.DirectionEnum.Right,b.minX-2.9,1),k(b,a.DirectionEnum.Right,b.minX-5,1),c(b,a.DirectionEnum.Left,b.maxX+1,1.1),m(b,a.DirectionEnum.Left,b.maxX+2.1,1.1),m(b,a.DirectionEnum.Left,b.maxX+3.1,1.1),k(b,a.DirectionEnum.Left,
b.maxX+5,1.1),a.SoundManager.playZombieComing()}this.phase+=1;this.lastUpdate=0}this.lastUpdate+=r}};a.AI.prototype.updateLevelNine=function(r,b){3<this.absoluteTime&&0===this.phase&&0===b.leftPlayer.stack.objects.length&&0===b.rightPlayer.stack.objects.length?b.currentLevelTip=a.LevelTipEnum.TipOne:4>b.entities.length&&7===this.phase&&(b.currentLevelTip=a.LevelTipEnum.TipThree);if(this.canStartWaves){if(this.lastUpdate>this.nextUpdateTime||0===b.entities.length){switch(this.phase){case 0:f(b,a.DirectionEnum.Right,
b.minX-1,1);f(b,a.DirectionEnum.Right,b.minX-2,1.1);this.nextUpdateTime=2;a.SoundManager.playZombieComing();break;case 1:f(b,a.DirectionEnum.Left,b.maxX+1,1);f(b,a.DirectionEnum.Left,b.maxX+2,1);f(b,a.DirectionEnum.Left,b.maxX+2.4,1.1);f(b,a.DirectionEnum.Right,b.minX-1,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 2:l(b,a.DirectionEnum.Right,b.minX-1,1.1);l(b,a.DirectionEnum.Right,b.minX-1.7,1);l(b,a.DirectionEnum.Right,b.minX-2.4,1.1);l(b,a.DirectionEnum.Left,b.maxX+1,
1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 3:l(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+1.7,1);l(b,a.DirectionEnum.Left,b.maxX+2.4,1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 4:c(b,a.DirectionEnum.Right,b.minX-1,1);c(b,a.DirectionEnum.Right,b.minX-1.7,1.1);c(b,a.DirectionEnum.Right,b.minX-2.1,1);c(b,a.DirectionEnum.Left,b.maxX+1,1.1);this.nextUpdateTime=12;a.SoundManager.playZombieComing();break;case 5:c(b,a.DirectionEnum.Left,
b.maxX+1,1);c(b,a.DirectionEnum.Left,b.maxX+1.7,1.1);c(b,a.DirectionEnum.Left,b.maxX+2.1,1);this.nextUpdateTime=18;a.SoundManager.playZombieComing();break;case 6:k(b,a.DirectionEnum.Right,b.minX-1,1);k(b,a.DirectionEnum.Right,b.minX-1.7,1.1);k(b,a.DirectionEnum.Right,b.minX-2.4,1.1);k(b,a.DirectionEnum.Left,b.maxX+1,1.1);k(b,a.DirectionEnum.Left,b.maxX+1.7,1);this.nextUpdateTime=35;a.SoundManager.playZombieComing();break;case 7:f(b,a.DirectionEnum.Right,b.minX-1,1),c(b,a.DirectionEnum.Right,b.minX-
1.7,1.1),l(b,a.DirectionEnum.Right,b.minX-2.1,1),c(b,a.DirectionEnum.Right,b.minX-2.9,1),c(b,a.DirectionEnum.Left,b.maxX+1,1.1),m(b,a.DirectionEnum.Left,b.maxX+2.1,1.1),m(b,a.DirectionEnum.Left,b.maxX+3.1,1.1),c(b,a.DirectionEnum.Left,b.maxX+4,1.1),a.SoundManager.playZombieComing()}this.phase+=1;this.lastUpdate=0}this.lastUpdate+=r}};a.AI.prototype.updateLevelEight=function(r,b){3<this.absoluteTime&&0===this.phase&&0===b.leftPlayer.stack.objects.length&&0===b.rightPlayer.stack.objects.length?b.currentLevelTip=
a.LevelTipEnum.TipOne:4>b.entities.length&&7===this.phase&&(b.currentLevelTip=a.LevelTipEnum.TipThree);if(this.canStartWaves){if(this.lastUpdate>this.nextUpdateTime||0===b.entities.length){switch(this.phase){case 0:f(b,a.DirectionEnum.Right,b.minX-1,1);f(b,a.DirectionEnum.Right,b.minX-2,1.1);this.nextUpdateTime=2;a.SoundManager.playZombieComing();break;case 1:f(b,a.DirectionEnum.Left,b.maxX+1,1);f(b,a.DirectionEnum.Left,b.maxX+2,1);f(b,a.DirectionEnum.Left,b.maxX+2.4,1.1);f(b,a.DirectionEnum.Right,
b.minX-1,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 2:l(b,a.DirectionEnum.Right,b.minX-1,1.1);l(b,a.DirectionEnum.Right,b.minX-1.7,1);l(b,a.DirectionEnum.Right,b.minX-2.4,1.1);l(b,a.DirectionEnum.Left,b.maxX+1,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 3:l(b,a.DirectionEnum.Left,b.maxX+1,1.1);l(b,a.DirectionEnum.Left,b.maxX+1.7,1);l(b,a.DirectionEnum.Left,b.maxX+2.4,1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 4:c(b,
a.DirectionEnum.Right,b.minX-1,1);c(b,a.DirectionEnum.Right,b.minX-1.7,1.1);c(b,a.DirectionEnum.Right,b.minX-2.1,1);c(b,a.DirectionEnum.Left,b.maxX+1,1.1);this.nextUpdateTime=12;a.SoundManager.playZombieComing();break;case 5:f(b,a.DirectionEnum.Left,b.maxX+1,1);c(b,a.DirectionEnum.Left,b.maxX+1.7,1.1);c(b,a.DirectionEnum.Left,b.maxX+2.1,1);this.nextUpdateTime=18;a.SoundManager.playZombieComing();break;case 6:f(b,a.DirectionEnum.Right,b.minX-1,1);f(b,a.DirectionEnum.Right,b.minX-1.7,1.1);k(b,a.DirectionEnum.Right,
b.minX-2.4,1.1);k(b,a.DirectionEnum.Left,b.maxX+1,1.1);k(b,a.DirectionEnum.Left,b.maxX+1.7,1);this.nextUpdateTime=35;a.SoundManager.playZombieComing();break;case 7:f(b,a.DirectionEnum.Right,b.minX-1,1),c(b,a.DirectionEnum.Right,b.minX-1.7,1.1),l(b,a.DirectionEnum.Right,b.minX-2.1,1),c(b,a.DirectionEnum.Right,b.minX-2.9,1),c(b,a.DirectionEnum.Left,b.maxX+1,1.1),c(b,a.DirectionEnum.Left,b.maxX+2.1,1.1),m(b,a.DirectionEnum.Left,b.maxX+3.1,1.1),c(b,a.DirectionEnum.Left,b.maxX+4,1.1),a.SoundManager.playZombieComing()}this.phase+=
1;this.lastUpdate=0}this.lastUpdate+=r}};a.AI.prototype.updateLevelSeven=function(r,b){3<this.absoluteTime&&0===this.phase&&0===b.leftPlayer.stack.objects.length&&0===b.rightPlayer.stack.objects.length?b.currentLevelTip=a.LevelTipEnum.TipOne:4>b.entities.length&&7===this.phase&&(b.currentLevelTip=a.LevelTipEnum.TipThree);if(this.canStartWaves){if(this.lastUpdate>this.nextUpdateTime||0===b.entities.length){switch(this.phase){case 0:l(b,a.DirectionEnum.Right,b.minX-1,1);l(b,a.DirectionEnum.Right,b.minX-
2,1.1);this.nextUpdateTime=4;a.SoundManager.playZombieComing();break;case 1:f(b,a.DirectionEnum.Left,b.maxX+1,1);f(b,a.DirectionEnum.Left,b.maxX+2,1);c(b,a.DirectionEnum.Left,b.maxX+2.4,1.1);l(b,a.DirectionEnum.Right,b.minX-1,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 2:c(b,a.DirectionEnum.Right,b.minX-1,1.1);f(b,a.DirectionEnum.Right,b.minX-1.7,1);l(b,a.DirectionEnum.Right,b.minX-2.4,1.1);k(b,a.DirectionEnum.Left,b.maxX+1,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();
break;case 3:c(b,a.DirectionEnum.Left,b.maxX+1,1.1);f(b,a.DirectionEnum.Left,b.maxX+1.7,1);f(b,a.DirectionEnum.Left,b.maxX+2.4,1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 4:f(b,a.DirectionEnum.Right,b.minX-1,1);f(b,a.DirectionEnum.Right,b.minX-1.7,1.1);c(b,a.DirectionEnum.Right,b.minX-2.1,1);c(b,a.DirectionEnum.Left,b.maxX+1,1.1);this.nextUpdateTime=12;a.SoundManager.playZombieComing();break;case 5:l(b,a.DirectionEnum.Left,b.maxX+1,1);k(b,a.DirectionEnum.Left,b.maxX+1.7,
1.1);c(b,a.DirectionEnum.Left,b.maxX+2.1,1);this.nextUpdateTime=18;a.SoundManager.playZombieComing();break;case 6:l(b,a.DirectionEnum.Right,b.minX-1,1);f(b,a.DirectionEnum.Right,b.minX-1.7,1.1);f(b,a.DirectionEnum.Right,b.minX-2.4,1.1);c(b,a.DirectionEnum.Left,b.maxX+1,1.1);f(b,a.DirectionEnum.Left,b.maxX+1.7,1);c(b,a.DirectionEnum.Left,b.maxX+2.1,1.1);this.nextUpdateTime=35;a.SoundManager.playZombieComing();break;case 7:f(b,a.DirectionEnum.Right,b.minX-1,1),c(b,a.DirectionEnum.Right,b.minX-1.7,1.1),
l(b,a.DirectionEnum.Right,b.minX-2.1,1),c(b,a.DirectionEnum.Right,b.minX-2.9,1),c(b,a.DirectionEnum.Left,b.maxX+1,1.1),m(b,a.DirectionEnum.Left,b.maxX+2.1,1.1),m(b,a.DirectionEnum.Left,b.maxX+3.1,1.1),a.SoundManager.playZombieComing()}this.phase+=1;this.lastUpdate=0}this.lastUpdate+=r}};a.AI.prototype.updateLevelSix=function(l,b){3<this.absoluteTime&&0===this.phase&&0===b.leftPlayer.stack.objects.length&&0===b.rightPlayer.stack.objects.length?b.currentLevelTip=a.LevelTipEnum.TipOne:4>b.entities.length&&
7===this.phase&&(b.currentLevelTip=a.LevelTipEnum.TipThree);if(this.canStartWaves){if(this.lastUpdate>this.nextUpdateTime||0===b.entities.length){switch(this.phase){case 0:c(b,a.DirectionEnum.Right,b.minX-1,1);c(b,a.DirectionEnum.Right,b.minX-2,1.1);this.nextUpdateTime=4;a.SoundManager.playZombieComing();break;case 1:f(b,a.DirectionEnum.Left,b.maxX+1,1);f(b,a.DirectionEnum.Left,b.maxX+2,1);c(b,a.DirectionEnum.Left,b.maxX+2.4,1.1);c(b,a.DirectionEnum.Right,b.minX-1,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();
break;case 2:c(b,a.DirectionEnum.Right,b.minX-1,1.1);f(b,a.DirectionEnum.Right,b.minX-1.7,1);f(b,a.DirectionEnum.Right,b.minX-2.4,1.1);k(b,a.DirectionEnum.Left,b.maxX+1,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 3:c(b,a.DirectionEnum.Left,b.maxX+1,1.1);f(b,a.DirectionEnum.Left,b.maxX+1.7,1);f(b,a.DirectionEnum.Left,b.maxX+2.4,1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 4:f(b,a.DirectionEnum.Right,b.minX-1,1);f(b,a.DirectionEnum.Right,b.minX-
1.7,1.1);c(b,a.DirectionEnum.Right,b.minX-2.1,1);c(b,a.DirectionEnum.Left,b.maxX+1,1.1);this.nextUpdateTime=12;a.SoundManager.playZombieComing();break;case 5:f(b,a.DirectionEnum.Left,b.maxX+1,1);k(b,a.DirectionEnum.Left,b.maxX+1.7,1.1);c(b,a.DirectionEnum.Left,b.maxX+2.1,1);this.nextUpdateTime=18;a.SoundManager.playZombieComing();break;case 6:f(b,a.DirectionEnum.Right,b.minX-1,1);f(b,a.DirectionEnum.Right,b.minX-1.7,1.1);f(b,a.DirectionEnum.Right,b.minX-2.4,1.1);c(b,a.DirectionEnum.Left,b.maxX+1,
1.1);f(b,a.DirectionEnum.Left,b.maxX+1.7,1);c(b,a.DirectionEnum.Left,b.maxX+2.1,1.1);this.nextUpdateTime=35;a.SoundManager.playZombieComing();break;case 7:f(b,a.DirectionEnum.Right,b.minX-1,1),c(b,a.DirectionEnum.Right,b.minX-1.7,1.1),f(b,a.DirectionEnum.Right,b.minX-2.1,1),c(b,a.DirectionEnum.Right,b.minX-2.9,1),c(b,a.DirectionEnum.Left,b.maxX+1,1.1),m(b,a.DirectionEnum.Left,b.maxX+2.1,1.1),m(b,a.DirectionEnum.Left,b.maxX+3.1,1.1),a.SoundManager.playZombieComing()}this.phase+=1;this.lastUpdate=0}this.lastUpdate+=
l}};a.AI.prototype.updateLevelFive=function(l,b){3<this.absoluteTime&&0===this.phase&&0===b.leftPlayer.stack.objects.length&&0===b.rightPlayer.stack.objects.length?b.currentLevelTip=a.LevelTipEnum.TipOne:4>b.entities.length&&7===this.phase&&(b.currentLevelTip=a.LevelTipEnum.TipThree);if(this.canStartWaves){if(this.lastUpdate>this.nextUpdateTime||0===b.entities.length){switch(this.phase){case 0:c(b,a.DirectionEnum.Right,b.minX-1,1);f(b,a.DirectionEnum.Right,b.minX-2,1.1);this.nextUpdateTime=4;a.SoundManager.playZombieComing();
break;case 1:f(b,a.DirectionEnum.Left,b.maxX+1,1);f(b,a.DirectionEnum.Left,b.maxX+2,1);c(b,a.DirectionEnum.Left,b.maxX+2.4,1.1);c(b,a.DirectionEnum.Right,b.minX-1,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 2:c(b,a.DirectionEnum.Right,b.minX-1,1.1);f(b,a.DirectionEnum.Right,b.minX-1.7,1);f(b,a.DirectionEnum.Right,b.minX-2.4,1.1);c(b,a.DirectionEnum.Left,b.maxX+1,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 3:c(b,a.DirectionEnum.Left,b.maxX+
1,1.1);f(b,a.DirectionEnum.Left,b.maxX+1.7,1);c(b,a.DirectionEnum.Left,b.maxX+2.4,1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 4:f(b,a.DirectionEnum.Right,b.minX-1,1);f(b,a.DirectionEnum.Right,b.minX-1.7,1.1);c(b,a.DirectionEnum.Right,b.minX-2.1,1);c(b,a.DirectionEnum.Left,b.maxX+1,1.1);this.nextUpdateTime=12;a.SoundManager.playZombieComing();break;case 5:f(b,a.DirectionEnum.Left,b.maxX+1,1);f(b,a.DirectionEnum.Left,b.maxX+1.7,1.1);c(b,a.DirectionEnum.Left,b.maxX+2.1,1);
this.nextUpdateTime=18;a.SoundManager.playZombieComing();break;case 6:f(b,a.DirectionEnum.Right,b.minX-1,1);f(b,a.DirectionEnum.Right,b.minX-1.7,1.1);f(b,a.DirectionEnum.Right,b.minX-2.4,1.1);c(b,a.DirectionEnum.Left,b.maxX+1,1.1);f(b,a.DirectionEnum.Left,b.maxX+1.7,1);c(b,a.DirectionEnum.Left,b.maxX+2.1,1.1);this.nextUpdateTime=35;a.SoundManager.playZombieComing();break;case 7:f(b,a.DirectionEnum.Right,b.minX-1,1),c(b,a.DirectionEnum.Right,b.minX-1.7,1.1),f(b,a.DirectionEnum.Right,b.minX-2.1,1),
c(b,a.DirectionEnum.Right,b.minX-2.9,1),f(b,a.DirectionEnum.Left,b.maxX+1,1.1),m(b,a.DirectionEnum.Left,b.maxX+2.1,1.1),m(b,a.DirectionEnum.Left,b.maxX+3.1,1.1),a.SoundManager.playZombieComing()}this.phase+=1;this.lastUpdate=0}this.lastUpdate+=l}};a.AI.prototype.updateLevelFour=function(l,b){3<this.absoluteTime&&0===this.phase&&0===b.leftPlayer.stack.objects.length&&0===b.rightPlayer.stack.objects.length?b.currentLevelTip=a.LevelTipEnum.TipOne:4>b.entities.length&&7===this.phase&&(b.currentLevelTip=
a.LevelTipEnum.TipThree);if(this.canStartWaves){if(this.lastUpdate>this.nextUpdateTime||0===b.entities.length){switch(this.phase){case 0:f(b,a.DirectionEnum.Right,b.minX-1,1);f(b,a.DirectionEnum.Right,b.minX-2,1.1);this.nextUpdateTime=4;a.SoundManager.playZombieComing();break;case 1:f(b,a.DirectionEnum.Left,b.maxX+1,1);f(b,a.DirectionEnum.Left,b.maxX+2,1);c(b,a.DirectionEnum.Left,b.maxX+2.4,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 2:c(b,a.DirectionEnum.Right,b.minX-
1,1.1);f(b,a.DirectionEnum.Right,b.minX-1.7,1);c(b,a.DirectionEnum.Right,b.minX-2.4,1.1);c(b,a.DirectionEnum.Left,b.maxX+1,1);c(b,a.DirectionEnum.Left,b.maxX+1,1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 3:c(b,a.DirectionEnum.Left,b.maxX+1,1.1);f(b,a.DirectionEnum.Left,b.maxX+1.7,1);c(b,a.DirectionEnum.Left,b.maxX+2.4,1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 4:f(b,a.DirectionEnum.Right,b.minX-1,1);f(b,a.DirectionEnum.Right,b.minX-1.7,1.1);c(b,
a.DirectionEnum.Right,b.minX-2.1,1);c(b,a.DirectionEnum.Left,b.maxX+1,1.1);f(b,a.DirectionEnum.Left,b.maxX+1,1);this.nextUpdateTime=12;a.SoundManager.playZombieComing();break;case 5:f(b,a.DirectionEnum.Left,b.maxX+1,1);f(b,a.DirectionEnum.Left,b.maxX+1.7,1.1);c(b,a.DirectionEnum.Left,b.maxX+2.1,1);this.nextUpdateTime=18;a.SoundManager.playZombieComing();break;case 6:f(b,a.DirectionEnum.Right,b.minX-1,1);f(b,a.DirectionEnum.Right,b.minX-1.7,1.1);f(b,a.DirectionEnum.Right,b.minX-2.4,1.1);c(b,a.DirectionEnum.Left,
b.maxX+1,1.1);f(b,a.DirectionEnum.Left,b.maxX+1.7,1);c(b,a.DirectionEnum.Left,b.maxX+2.1,1.1);this.nextUpdateTime=35;a.SoundManager.playZombieComing();break;case 7:f(b,a.DirectionEnum.Right,b.minX-1,1),c(b,a.DirectionEnum.Right,b.minX-1.7,1.1),f(b,a.DirectionEnum.Right,b.minX-2.1,1),c(b,a.DirectionEnum.Right,b.minX-2.9,1),c(b,a.DirectionEnum.Left,b.maxX+1,1),f(b,a.DirectionEnum.Left,b.maxX+1.7,1.1),m(b,a.DirectionEnum.Left,b.maxX+2.1,1.1),a.SoundManager.playZombieComing()}this.phase+=1;this.lastUpdate=
0}this.lastUpdate+=l}};a.AI.prototype.updateLevelThree=function(l,b){3<this.absoluteTime&&0===this.phase&&0===b.leftPlayer.stack.objects.length&&0===b.rightPlayer.stack.objects.length?b.currentLevelTip=a.LevelTipEnum.TipOne:4>b.entities.length&&7===this.phase?b.currentLevelTip=a.LevelTipEnum.TipThree:2<this.phase&&4>b.leftPlayer.stack.objects.length+b.rightPlayer.stack.objects.length&&(b.currentLevelTip=a.LevelTipEnum.TipTwo);if(this.canStartWaves){if(this.lastUpdate>this.nextUpdateTime||0===b.entities.length){switch(this.phase){case 0:f(b,
a.DirectionEnum.Right,b.minX-1,1);f(b,a.DirectionEnum.Right,b.minX-2,1.1);this.nextUpdateTime=4;a.SoundManager.playZombieComing();break;case 1:f(b,a.DirectionEnum.Left,b.maxX+1,1);f(b,a.DirectionEnum.Left,b.maxX+2,1);c(b,a.DirectionEnum.Left,b.maxX+2.4,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 2:c(b,a.DirectionEnum.Right,b.minX-1,1.1);f(b,a.DirectionEnum.Right,b.minX-1.7,1);c(b,a.DirectionEnum.Right,b.minX-2.4,1.1);c(b,a.DirectionEnum.Left,b.maxX+1,1);this.nextUpdateTime=
10;a.SoundManager.playZombieComing();break;case 3:c(b,a.DirectionEnum.Left,b.maxX+1,1.1);f(b,a.DirectionEnum.Left,b.maxX+1.7,1);c(b,a.DirectionEnum.Left,b.maxX+2.4,1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 4:f(b,a.DirectionEnum.Right,b.minX-1,1);f(b,a.DirectionEnum.Right,b.minX-1.7,1.1);c(b,a.DirectionEnum.Right,b.minX-2.1,1);c(b,a.DirectionEnum.Left,b.maxX+1,1.1);this.nextUpdateTime=12;a.SoundManager.playZombieComing();break;case 5:f(b,a.DirectionEnum.Left,b.maxX+1,1);
f(b,a.DirectionEnum.Left,b.maxX+1.7,1.1);c(b,a.DirectionEnum.Left,b.maxX+2.1,1);this.nextUpdateTime=18;a.SoundManager.playZombieComing();break;case 6:f(b,a.DirectionEnum.Right,b.minX-1,1);f(b,a.DirectionEnum.Right,b.minX-1.7,1.1);c(b,a.DirectionEnum.Right,b.minX-2.4,1.1);c(b,a.DirectionEnum.Left,b.maxX+1,1.1);c(b,a.DirectionEnum.Left,b.maxX+2.1,1.1);this.nextUpdateTime=35;a.SoundManager.playZombieComing();break;case 7:f(b,a.DirectionEnum.Right,b.minX-1,1),c(b,a.DirectionEnum.Right,b.minX-1.7,1.1),
f(b,a.DirectionEnum.Right,b.minX-2.1,1),m(b,a.DirectionEnum.Right,b.minX-2.5,1),c(b,a.DirectionEnum.Left,b.maxX+1,1),f(b,a.DirectionEnum.Left,b.maxX+1.7,1.1),m(b,a.DirectionEnum.Left,b.maxX+2.1,1.1),a.SoundManager.playZombieComing()}this.phase+=1;this.lastUpdate=0}this.lastUpdate+=l}};a.AI.prototype.updateLevelTwo=function(l,b){3<this.absoluteTime&&0===this.phase&&0===b.leftPlayer.stack.objects.length&&0===b.rightPlayer.stack.objects.length?b.currentLevelTip=a.LevelTipEnum.TipOne:4>b.entities.length&&
7===this.phase?b.currentLevelTip=a.LevelTipEnum.TipThree:2<this.phase&&4>b.leftPlayer.stack.objects.length+b.rightPlayer.stack.objects.length&&(b.currentLevelTip=a.LevelTipEnum.TipTwo);if(this.canStartWaves){if(this.lastUpdate>this.nextUpdateTime||0===b.entities.length){switch(this.phase){case 0:f(b,a.DirectionEnum.Right,b.minX-1,1);f(b,a.DirectionEnum.Right,b.minX-2,1.1);this.nextUpdateTime=4;a.SoundManager.playZombieComing();break;case 1:f(b,a.DirectionEnum.Left,b.maxX+1,1);c(b,a.DirectionEnum.Left,
b.maxX+1.2,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 2:f(b,a.DirectionEnum.Right,b.minX-1,1);c(b,a.DirectionEnum.Right,b.minX-1.7,1.1);c(b,a.DirectionEnum.Left,b.maxX+1,1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 3:f(b,a.DirectionEnum.Left,b.maxX+1.7,1.1);c(b,a.DirectionEnum.Left,b.maxX+1,1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 4:f(b,a.DirectionEnum.Right,b.minX-1,1);f(b,a.DirectionEnum.Right,b.minX-1.7,1.1);
c(b,a.DirectionEnum.Right,b.minX-2.1,1);this.nextUpdateTime=12;a.SoundManager.playZombieComing();break;case 5:f(b,a.DirectionEnum.Left,b.maxX+1,1);f(b,a.DirectionEnum.Left,b.maxX+1.7,1.1);c(b,a.DirectionEnum.Left,b.maxX+2.1,1);this.nextUpdateTime=18;a.SoundManager.playZombieComing();break;case 6:f(b,a.DirectionEnum.Right,b.minX-1,1);f(b,a.DirectionEnum.Right,b.minX-1.7,1.1);f(b,a.DirectionEnum.Left,b.maxX+1,1);c(b,a.DirectionEnum.Left,b.maxX+1.7,1.1);c(b,a.DirectionEnum.Left,b.maxX+2.1,1.1);this.nextUpdateTime=
35;a.SoundManager.playZombieComing();break;case 7:f(b,a.DirectionEnum.Right,b.minX-1,1),m(b,a.DirectionEnum.Right,b.minX-1.7,1.1),f(b,a.DirectionEnum.Right,b.minX-2.1,1),f(b,a.DirectionEnum.Left,b.maxX+1.7,1.1),c(b,a.DirectionEnum.Left,b.maxX+1,1),a.SoundManager.playZombieComing()}this.phase+=1;this.lastUpdate=0}this.lastUpdate+=l}};a.AI.prototype.updateLevelOne=function(l,b){var k;switch(b.currentLevelStage){case a.LevelStageEnum.TutorialZombiesComing:0===b.entities.length&&(f(b,a.DirectionEnum.Right,
b.minX-4.2,1),f(b,a.DirectionEnum.Right,b.minX-5,1.1),a.SoundManager.playZombieComing());break;case a.LevelStageEnum.TutorialHitBuildButton:case a.LevelStageEnum.TutorialHitCrateButton:case a.LevelStageEnum.TutorialBuildingFirstCrate:case a.LevelStageEnum.TutorialTapToContinue:case a.LevelStageEnum.TutorialTurnRight:for(k=0;k<b.entities.length;k+=1)b.entities[k].moveCooldown=.2;break;case a.LevelStageEnum.TutorialMoreZombiesComing:0===b.entities.length&&(b.survivalPoints=40,f(b,a.DirectionEnum.Left,
b.maxX+3.2,1),f(b,a.DirectionEnum.Left,b.maxX+3.5,1),f(b,a.DirectionEnum.Left,b.maxX+5,1.1),c(b,a.DirectionEnum.Left,b.maxX+6,1.1),m(b,a.DirectionEnum.Left,b.maxX+7,1),a.SoundManager.playZombieComing());break;case a.LevelStageEnum.TutorialFirstWave:0===b.entities.length&&(b.currentLevelStage=a.LevelStageEnum.TutorialFirstWaveDone);break;case a.LevelStageEnum.TutorialFirstWaveFinishJob:0===b.entities.length&&(b.currentLevelStage=a.LevelStageEnum.TutorialSecondWaveDone);break;case a.LevelStageEnum.TutorialThirdWave:0===
b.entities.length&&(b.survivalPoints=60,f(b,a.DirectionEnum.Right,b.minX-1,1+.15*Math.random()),f(b,a.DirectionEnum.Right,b.minX-2,1+.15*Math.random()),m(b,a.DirectionEnum.Right,b.minX-3,1+.15*Math.random()),c(b,a.DirectionEnum.Right,b.minX-4,1+.15*Math.random()),f(b,a.DirectionEnum.Left,b.maxX+4,1+.15*Math.random()),f(b,a.DirectionEnum.Left,b.maxX+4.7,1+.15*Math.random()),b.currentLevelStage=a.LevelStageEnum.None,a.SoundManager.playZombieComing())}this.lastUpdate+=l};a.AI.prototype.updateTestLevel=
function(l,b){3<this.absoluteTime&&0===this.phase&&0===b.leftPlayer.stack.objects.length&&0===b.rightPlayer.stack.objects.length?b.currentLevelTip=a.LevelTipEnum.TipOne:4>b.entities.length&&7===this.phase&&(b.currentLevelTip=a.LevelTipEnum.TipThree);if(this.canStartWaves){if(this.lastUpdate>this.nextUpdateTime||0===b.entities.length){switch(this.phase){case 0:f(b,a.DirectionEnum.Right,b.minX-1,1);this.nextUpdateTime=4;a.SoundManager.playZombieComing();break;case 1:f(b,a.DirectionEnum.Left,b.maxX+
1,1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 2:c(b,a.DirectionEnum.Right,b.minX-1,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 3:c(b,a.DirectionEnum.Left,b.maxX+1,1.1);this.nextUpdateTime=10;a.SoundManager.playZombieComing();break;case 4:f(b,a.DirectionEnum.Right,b.minX-1,1);this.nextUpdateTime=12;a.SoundManager.playZombieComing();break;case 5:f(b,a.DirectionEnum.Left,b.maxX+1,1);this.nextUpdateTime=18;a.SoundManager.playZombieComing();break;
case 6:f(b,a.DirectionEnum.Right,b.minX-1,1);this.nextUpdateTime=35;a.SoundManager.playZombieComing();break;case 7:f(b,a.DirectionEnum.Right,b.minX-1,1),a.SoundManager.playZombieComing()}this.phase+=1;this.lastUpdate=0}this.lastUpdate+=l}}})(window.OkijinGame=window.OkijinGame||{});(function(a,E){a.AssetResolutionEnum={ResolutionA:1,ResolutionB:2,ResolutionC:3};a.GameStateEnum={GamePreLoading:0,GameStart:1,GameIntro:2,GameMenu:3,GameLoading:4,GameRun:5,GameLost:6,GameWon:7};a.DirectionEnum={None:0,Right:1,Left:2};a.EntityStateEnum={Idle:0,Walking:1};a.EntityClassTypeEnum={None:0,Zombie:1,HumanMale:2,HumanFemale:3};a.EntitySubClassTypeEnum={None:0,WeakZombie:1,ArmorZombie:2,HeavyArmorZombie:3,FastZombie:4,VeryFastZombie:5,BomberZombie:6,SpikedZombie:7,KillerZombie:8};a.EffectTypeEnum=
{None:0,Bullet:1,HeadLimb:2,BodyLimb1:3,BodyLimb2:4,BloodSplatter:5,SmallSmoke:6,BigSmoke:7,Explosion:8,Impact:9,Warhead:10,GunFire:11,CartridgeCase:12,GainSP:13,GainMoreSP:14,MultiBullet:15,Critical:16,Checkpoint:17,HighScore:18};a.HeadStyleEnum={None:0,Punk:1,Bandaged:2,Police:3,Bandit:4,Tourist:5,Mexican:6};a.StackObjectTypeEnum={None:0,WoodCrate:1,MetalCrate:2,SpikeCrate:3,TNTCrate:4,MountedCrate:5,RepairCrate:6,DoubleWoodCrate:7,DoubleMetalCrate:8,Challenge1:9,Challenge2:10,CriticalChance:11};
a.LevelStatusEnum={None:0,Passed:1,Available:2,Locked:3};a.WeaponTypeEnum={None:0,Rifle:1,ShotGun:2,AutoRifle:3,AutoShotGun:4,Uzi:5,Rpg:6};a.WeaponCategoryEnum={Primary:0,Secondary:1};a.LevelStageEnum={None:0,TutorialStart:1,TutorialZombiesComing:2,TutorialHitBuildButton:3,TutorialHitCrateButton:4,TutorialBuildingFirstCrate:5,TutorialTapToContinue:6,TutorialFirstWave:7,TutorialFirstKill:8,TutorialFirstWaveFinishJob:9,TutorialFirstWaveDone:10,TutorialReinforceDefenses:11,TutorialMoreZombiesComing:12,
TutorialTurnRight:13,TutorialSecondWave:14,TutorialSecondWaveDone:15,TutorialHelpingHand:16,TutorialTeamCamera:17,TutorialTeamWork:18,TutorialTeamDefenses:19,TutorialThirdWave:20,TutorialSelectSurvivalRage:21};a.LevelTipEnum={None:0,TipOne:1,TipTwo:2,TipThree:3,TipFour:4,TipFive:5};a.MenuTypeEnum={None:0,ShowMain:1,ShowStoryMode:2,ShowSurvivalMode:3,ShowOptions:4,SelectLevel:5,SelectNextPage:6,SelectPrevPage:7,ShowCredits:8,ToggleSound:9,Panel:10};a.CommandEnum={None:0,Menu:1,Pause:2,Restart:3,ZoomIn:4,
ZoomOut:5,AssignWeapon:6,ShowStackObjects:7,SelectStackObject:8,Ready:9,ToggleAdrenaline:10,CancelAction:11,NextLevel:12,ConfirmYes:13,ConfirmNo:14,CrateSelectionDone:15,RewardAccepted:16,BuyGame:17}})(window.OkijinGame=window.OkijinGame||{});(function(a,E){a.Camera=function(){if(!(this instanceof a.Camera))throw Error("Constructor called as a function.");this.reset()};a.Camera.prototype.reset=function(){this.y=this.x=0;this.sy=this.sx=1;this.angle=this.ty=this.tx=0;this.matrix=[1,0,0,1,0,0]};a.Camera.prototype.update=function(){this.matrix=[1,0,0,1,0,0];this.translate(this.x,this.y);this.scale(this.sx,this.sy);this.rotate(this.angle)};a.Camera.prototype.translate=function(a,c){this.matrix[4]+=this.matrix[0]*a+this.matrix[2]*c;this.matrix[5]+=
this.matrix[1]*a+this.matrix[3]*c};a.Camera.prototype.scale=function(a,c){this.matrix[0]*=a;this.matrix[1]*=a;this.matrix[2]*=c;this.matrix[3]*=c};a.Camera.prototype.rotate=function(a){var c=Math.cos(a);a=Math.sin(a);var k=this.matrix[1]*c+this.matrix[3]*a,m=this.matrix[0]*-a+this.matrix[2]*c,l=this.matrix[1]*-a+this.matrix[3]*c;this.matrix[0]=this.matrix[0]*c+this.matrix[2]*a;this.matrix[1]=k;this.matrix[2]=m;this.matrix[3]=l};a.Camera.prototype.screenToCamera=function(a,c){var k=a,m=c,l=1/(this.matrix[0]*
this.matrix[3]-this.matrix[1]*this.matrix[2]);a=k*this.matrix[3]*l+m*-this.matrix[2]*l+l*(this.matrix[2]*this.matrix[5]-this.matrix[3]*this.matrix[4]);c=k*-this.matrix[1]*l+m*this.matrix[0]*l+l*(this.matrix[1]*this.matrix[4]-this.matrix[0]*this.matrix[5]);return{x:a,y:c}};a.Camera.prototype.cameraToScreen=function(a,c){var k=a,m=c;a=k*this.matrix[0]+m*this.matrix[2]+this.matrix[4];c=k*this.matrix[1]+m*this.matrix[3]+this.matrix[5];return{x:a,y:c}};a.Camera.prototype.multiply=function(a){var c=this.matrix[1]*
a.matrix[0]+this.matrix[3]*a.matrix[1],k=this.matrix[0]*a.matrix[2]+this.matrix[2]*a.matrix[3],m=this.matrix[1]*a.matrix[2]+this.matrix[3]*a.matrix[3],l=this.matrix[0]*a.matrix[4]+this.matrix[2]*a.matrix[5]+this.matrix[4],t=this.matrix[1]*a.matrix[4]+this.matrix[3]*a.matrix[5]+this.matrix[5];this.matrix[0]=this.matrix[0]*a.matrix[0]+this.matrix[2]*a.matrix[1];this.matrix[1]=c;this.matrix[2]=k;this.matrix[3]=m;this.matrix[4]=l;this.matrix[5]=t}})(window.OkijinGame=window.OkijinGame||{});(function(a,E,f){var c=0,k=0,m=0,l=0,t=0,r=2;a.update=function(a){0<c&&(c-=a,0>c&&(c=0));0<k&&(k-=a,0>k&&(k=0));0<m&&(m-=a,0>m&&(m=0));0<l&&(l-=a,0>l&&(l=0));0<t&&(t-=a,0>t&&(t=0))};a.getSoundsEnabled=function(){return r};a.playSound=function(a){AudioManager.playSound(a)};a.playMainMusic=function(){1<r&&(AudioManager.stopSound("music1"),AudioManager.playSound("music2"))};a.playLevelMusic=function(){1<r&&(AudioManager.stopSound("music2"),AudioManager.playSound("music1"))};a.playCritSound=function(){0<
r&&0===t&&(t=3,a.playSound("critical"))};a.playCheckpointSound=function(){0<r&&a.playSound("checkpoint")};a.playHighScoreSound=function(){0<r&&a.playSound("highscore")};a.playGunSound=function(){0<r&&0===c&&(c=.1,a.playSound("rifle"))};a.playZombieComing=function(){0<r&&a.playSound(.5<Math.random()?"zombieroar1":"zombieroar2")};a.playHumanDie=function(){0<r&&a.playSound("humandie")};a.playHumanSuccess=function(){0<r&&r&&0===l&&(l=2,a.playSound(.5<Math.random()?"humansuccess1":"humansuccess2"))};a.playHumanFailed=
function(){0<r&&a.playSound("humanfail")};a.playVictory=function(){0<r&&(AudioManager.stopSound("music1"),a.playSound("victory"))};a.playAward=function(){0<r&&a.playSound("award")};a.playZombieAttackSound=function(){0<r&&a.playSound(.5<Math.random()?"zombieattack1":"zombieattack2")};a.playZombieDieSound=function(){0<r&&a.playSound(.5<Math.random()?"zombiedie1":"zombiedie2")};a.playReloadSound=function(){0<r&&a.playSound("reload")};a.playCarSound=function(){0<r&&a.playSound("car")};a.playBlastSound=
function(){0<r&&a.playSound("blast")};a.playClickSound=function(){0<r&&a.playSound("click")};a.playHammerSound=function(){0<r&&a.playSound("hammer")};a.playMachineGunSound=function(){0<r&&0===k&&(k=.5,a.playSound("autogun1"))};a.playMachineGunSound2=function(){0<r&&0===m&&(m=.6,a.playSound("autogun1"))};a.mute=function(a){AudioManager.stopSound("music1");AudioManager.stopSound("music2");r=!0===a?0:1};a.unmute=function(a){!0===a&&AudioManager.playSound("music2");r=!0===a?2:1}})(window.OkijinGame.SoundManager=
window.OkijinGame.SoundManager||{},window.OkijinGame);(function(a,E){a.Entity=function(f,c,k){if(!(this instanceof a.Entity))throw Error("Constructor called as a function.");this.x=f;this.y=c;this.radius=k;this.vy=this.vx=0;this.scaleFactor=1;this.angle=this.rotationSpeed=this.baseSpeed=this.speed=0;this.mass=1;this.gravity=9.78;this.direction=a.DirectionEnum.None;this.classType=a.EntityClassTypeEnum.None;this.state=a.EntityStateEnum.Idle;this.isDead=!1;this.heartBeats=[{time:0,direction:0,maxTime:1.5,speed1:2.2,speed2:3.3},{time:0,direction:0,maxTime:2+
2*Math.random(),speed1:1,speed2:2},{time:0,direction:0,maxTime:1,speed1:1.5,speed2:2.5},{time:0,direction:0,maxTime:1,speed1:3,speed2:5},{time:0,direction:0,maxTime:1,speed1:1,speed2:2},{time:0,direction:0,maxTime:1,speed1:3,speed2:6},{time:0,direction:0,maxTime:1,speed1:6,speed2:12}]};a.Entity.prototype.update=function(a){var c,k,m;c=0;for(k=this.heartBeats.length;c<k;c+=1)m=this.heartBeats[c],0===m.direction&&m.time<=m.maxTime?(m.time=Math.min(m.time+a*m.speed1,m.maxTime),m.time===m.maxTime&&(m.direction=
1)):1===m.direction&&0<=m.time&&(m.time=Math.max(m.time-a*m.speed2,0),0===m.time&&(m.direction=0))};a.ZombieEntity=function(f,c,k){if(!(this instanceof a.ZombieEntity))throw Error("Constructor called as a function.");a.Entity.call(this,f,c,k);this.classType=a.EntityClassTypeEnum.Zombie;this.speed=this.baseSpeed=.55;this.heartBeats[2].time=.3*Math.random();this.heartBeats[3].time=this.heartBeats[2].time;this.heartBeats[2].direction=.5<Math.random()?0:1;this.heartBeats[3].direction=this.heartBeats[2].direction;
this.moveCooldown=0;this.bouncing=!1;this.maxHitPoints=this.hitPoints=22;this.armorCoefficient=1;this.canApplyDamage=!1;this.damageFactor=1;this.headStyle=a.HeadStyleEnum.None;this.woundedCooldown=0;this.drawHitPoints=!0;this.offScreenDirection=a.DirectionEnum.None;this.bonus=!1;this.rpgDamageCooldown=0};a.ZombieEntity.prototype=Object.create(a.Entity.prototype);a.ZombieEntity.prototype.update=function(f){0<this.woundedCooldown&&(this.woundedCooldown-=f,0>=this.woundedCooldown&&(this.woundedCooldown=
0));0<this.rpgDamageCooldown&&(this.rpgDamageCooldown-=f,0>=this.rpgDamageCooldown&&(this.rpgDamageCooldown=0));0<this.moveCooldown&&(this.moveCooldown-=f,0>this.moveCooldown&&(this.moveCooldown=0));if(this.bouncing||0!==this.moveCooldown||0===this.speed)0<this.moveCooldown&&(this.state=a.EntityStateEnum.Idle);else switch(this.direction){case a.DirectionEnum.Left:this.vx=-this.speed;this.state=a.EntityStateEnum.Walking;break;case a.DirectionEnum.Right:this.vx=this.speed;this.state=a.EntityStateEnum.Walking;
break;case a.DirectionEnum.None:this.state=a.EntityStateEnum.Idle,this.vx=0}this.bouncing&&(this.moveCooldown=.7+.5*Math.random(),0<this.vx?(this.vx-=7*f,0>=this.vx&&(this.vx=0)):0>this.vx&&(this.vx+=7*f,0<this.vx&&(this.vx=0)),0===this.vx&&0===this.vy&&(this.bouncing=!1));0<this.rotationSpeed?(this.rotationSpeed-=10*f,0>this.rotationSpeed&&(this.rotationSpeed=0)):0>this.rotationSpeed&&(this.rotationSpeed+=10*f,0<this.rotationSpeed&&(this.rotationSpeed=0));0===this.rotationSpeed&&0!==this.angle&&
(0<this.angle?(this.angle-=2*Math.PI*f,0>this.angle&&(this.angle=0)):(this.angle+=2*Math.PI*f,0<this.angle&&(this.angle=0)));this.angle=this.rotationSpeed?(this.angle+2*this.rotationSpeed*Math.PI*f)%(2*Math.PI):this.angle;this.vy+=this.gravity*f;if(0===this.moveCooldown||this.bouncing)this.y+=this.vy*f,this.x+=this.vx*f;0>=this.hitPoints&&(this.isDead=!0);a.Entity.prototype.update.call(this,f)};a.HumanEntity=function(f,c,k){if(!(this instanceof a.HumanEntity))throw Error("Constructor called as a function.");
a.Entity.call(this,f,c,k);this.targetScaleFactor=1;this.weapons=[];this.firingTimeleftOver=this.firingRecoilTime=this.firingCooldown=this.firingAngle=this.reloadCooldown=0;this.weaponOffset={x:0,y:0,tx:0,ty:0};this.currentWeaponCategory=a.WeaponCategoryEnum.Primary;this.buildDirection=a.DirectionEnum.None;this.buildData={cooldown:0,stackObjectType:a.StackObjectTypeEnum.None};this.stack={}};a.HumanEntity.prototype=Object.create(a.Entity.prototype);a.HumanEntity.prototype.update=function(f){this.targetScaleFactor!==
this.scaleFactor&&(this.scaleFactor<this.targetScaleFactor?(this.scaleFactor+=3*f,this.scaleFactor>this.targetScaleFactor&&(this.scaleFactor=this.targetScaleFactor)):this.scaleFactor>this.targetScaleFactor&&(this.scaleFactor-=3*f,this.scaleFactor<this.targetScaleFactor&&(this.scaleFactor=this.targetScaleFactor)));0<this.firingCooldown&&(this.firingCooldown-=f,0>=this.firingCooldown&&(this.firingTimeleftOver=this.firingCooldown,this.firingCooldown=0));0<this.firingRecoilTime&&(this.firingRecoilTime-=
f,0>this.firingRecoilTime&&(this.firingRecoilTime=0));0<this.reloadCooldown&&(this.reloadCooldown-=f,0>this.reloadCooldown&&(this.reloadCooldown=0));this.angle=0;this.vy+=this.gravity*f;0<this.vx?(this.vx-=2*f,0>=this.vx&&(this.vx=0)):0>this.vx&&(this.vx+=2*f,0<this.vx&&(this.vx=0));this.y+=this.vy*f;this.x+=this.vx*f;a.Entity.prototype.update.call(this,f)}})(window.OkijinGame=window.OkijinGame||{});(function(a,E){a.StackObject=function(f,c,k,m){if(!(this instanceof a.StackObject))throw Error("Constructor called as a function.");this.y=f;this.vy=0;this.radius=c;this.angle=this.rotationSpeed=0;this.gravity=9.78;this.type=k;this.strength=m;this.firingRecoilTime=this.firingAngle=this.firingCooldown=0;this.direction=a.DirectionEnum.None;this.selected=!1;this.visible=!0};a.StackObject.prototype.update=function(a){0<this.firingCooldown&&(this.firingCooldown-=a,0>this.firingCooldown&&(this.firingCooldown=
0));0<this.firingRecoilTime&&(this.firingRecoilTime-=a,0>this.firingRecoilTime&&(this.firingRecoilTime=0));0<this.rotationSpeed?(this.rotationSpeed-=2*a,0>this.rotationSpeed&&(this.rotationSpeed=0)):0>this.rotationSpeed&&(this.rotationSpeed+=2*a,0<this.rotationSpeed&&(this.rotationSpeed=0));0===this.rotationSpeed&&0!==this.angle&&(0<this.angle?(this.angle-=2*Math.PI*a,0>this.angle&&(this.angle=0)):(this.angle+=2*Math.PI*a,0<this.angle&&(this.angle=0)));this.angle=this.rotationSpeed?(this.angle+2*
this.rotationSpeed*Math.PI*a)%(2*Math.PI):this.angle;this.vy+=this.gravity*a;this.y+=this.vy*a}})(window.OkijinGame=window.OkijinGame||{});(function(a,E){a.Effect=function(f,c,k){if(!(this instanceof a.Effect))throw Error("Constructor called as a function.");this.x=f;this.y=c;this.radius=k;this.vy=this.vx=0;this.mass=this.friction=1;this.direction=a.DirectionEnum.None;this.angle=this.rotationSpeed=0;this.gravity=9.78;this.value=0;this.type=a.EffectTypeEnum.None;this.activationCooldown=0;this.selfDestroyTime=-1;this.startFadeTime=1;this.restoreBaseAngle=!1};a.Effect.prototype.update=function(f){0<this.activationCooldown&&(this.activationCooldown-=
f,0>this.activationCooldown&&(this.activationCooldown=0));0<this.selfDestroyTime&&(this.selfDestroyTime-=f,0>this.selfDestroyTime&&(this.selfDestroyTime=0));0<this.vx?(this.vx-=this.friction*f,0>this.vx&&(this.vx=0)):0>this.vx&&(this.vx+=this.friction*f,0<this.vx&&(this.vx=0));!this.restoreBaseAngle||this.restoreBaseAngle&&1<Math.abs(this.rotationSpeed)?0<this.rotationSpeed?(this.rotationSpeed-=this.friction*f,0>this.rotationSpeed&&(this.rotationSpeed=0)):0>this.rotationSpeed&&(this.rotationSpeed+=
this.friction*f,0<this.rotationSpeed&&(this.rotationSpeed=0)):this.restoreBaseAngle&&(this.rotationSpeed=0);this.restoreBaseAngle&&0===this.rotationSpeed&&0!==this.angle&&(.1<a.shortestArc(this.angle,0)?this.angle=0<this.angle?this.angle+2*Math.PI*f:this.angle-2*Math.PI*f:this.angle=0);this.angle=this.rotationSpeed?(this.angle+2*this.rotationSpeed*Math.PI*f)%(2*Math.PI):this.angle;this.vy+=this.gravity*f;this.y+=this.vy*f;this.x+=this.vx*f};a.ImpactEffect=function(f,c,k){if(!(this instanceof a.ImpactEffect))throw Error("Constructor called as a function.");
a.Effect.call(this,f,c,k);this.gravity=0;this.friction=2;this.mass=.5;this.selfDestroyTime=.3;this.startFadeTime=.2;this.type=a.EffectTypeEnum.Impact;this.value=0;this.angle=2*Math.random();this.rotationSpeed=.2*Math.PI;this.vx=.5<Math.random()?.3:-.3;this.vy=-(.5+Math.random())};a.ImpactEffect.prototype=Object.create(a.Effect.prototype);a.BloodSplatterEffect=function(f,c,k){if(!(this instanceof a.BloodSplatterEffect))throw Error("Constructor called as a function.");a.Effect.call(this,f,c,k);this.gravity=
0;this.friction=2;this.mass=.5;this.selfDestroyTime=.3;this.startFadeTime=.1;this.type=a.EffectTypeEnum.BloodSplatter;this.value=0;this.angle=2*Math.random();this.rotationSpeed=.2*Math.PI;this.vx=.5<Math.random()?.3:-.3;this.vy=-(.5+Math.random())};a.BloodSplatterEffect.prototype=Object.create(a.Effect.prototype);a.SmallSmokeEffect=function(f,c,k){if(!(this instanceof a.SmallSmokeEffect))throw Error("Constructor called as a function.");a.Effect.call(this,f,c,k);this.gravity=0;this.friction=2;this.mass=
.5;this.selfDestroyTime=.3;this.startFadeTime=.4;this.type=a.EffectTypeEnum.SmallSmoke;this.value=0;this.angle=2*Math.random();this.rotationSpeed=.2*Math.PI;this.vx=.5<Math.random()?.3:-.3;this.vy=-(.5+Math.random())};a.SmallSmokeEffect.prototype=Object.create(a.Effect.prototype);a.BigSmokeEffect=function(f,c,k){if(!(this instanceof a.BigSmokeEffect))throw Error("Constructor called as a function.");a.Effect.call(this,f,c,k);this.friction=this.gravity=0;this.mass=.5;this.selfDestroyTime=.9;this.type=
a.EffectTypeEnum.BigSmoke;this.value=0;this.angle=f+1;this.rotationSpeed=.3*Math.PI;this.vy=-(.1+.5*Math.random());this.startFadeTime=.9};a.BigSmokeEffect.prototype=Object.create(a.Effect.prototype);a.ExplosionEffect=function(f,c,k){if(!(this instanceof a.ExplosionEffect))throw Error("Constructor called as a function.");a.Effect.call(this,f,c,k);this.friction=this.gravity=0;this.mass=.5;this.selfDestroyTime=.7;this.type=a.EffectTypeEnum.Explosion;this.value=0;this.angle=f+1;this.rotationSpeed=.1*
Math.PI;this.vy=-(.1+.5*Math.random());this.startFadeTime=.4};a.ExplosionEffect.prototype=Object.create(a.Effect.prototype);a.ProjectileEffect=function(f,c,k,m,l,t,r,b){if(!(this instanceof a.ProjectileEffect))throw Error("Constructor called as a function.");a.Effect.call(this,f,c,k);this.angle=m;this.vx=l;this.vy=t;this.type=r;this.value=b;this.friction=this.gravity=0;this.selfDestroyTime=3;this.count=0};a.ProjectileEffect.prototype=Object.create(a.Effect.prototype);a.CartridgeCaseEffect=function(f,
c,k,m){if(!(this instanceof a.CartridgeCaseEffect))throw Error("Constructor called as a function.");a.Effect.call(this,f,c,k);f=2+Math.random();this.friction=1;this.mass=.7;this.selfDestroyTime=2;this.type=a.EffectTypeEnum.CartridgeCase;this.value=0;this.angle=Math.random();this.rotationSpeed=(.6+.15*Math.random())*Math.PI;this.vx=m===a.DirectionEnum.Left?-f:f;this.vy=-f;this.direction=m};a.CartridgeCaseEffect.prototype=Object.create(a.Effect.prototype)})(window.OkijinGame=window.OkijinGame||{});(function(a,E){a.levelManager=function(f){if(!(this instanceof a.levelManager))throw Error("Constructor called as a function.");this.currentLevel=f;this.currentLevelStage=a.LevelStageEnum.None;this.currentLevelTip=a.LevelTipEnum.None;this.updateFrequency=this.runningTime=0;this.lastSecondUpdate=!1;this.maxY=this.maxX=this.minX=0;this.leftPlayer={};this.rightPlayer={};this.entities=[];this.effects=[];this.backgroundEffects=[];this.stacks=[];this.maxStackSize=3;this.newItem=a.StackObjectTypeEnum.None;
this.rewardItem={crate:a.StackObjectTypeEnum.None,weapon:a.WeaponTypeEnum.None,won:!1};this.secondaryWeaponAssignmentDone=this.primaryWeaponAssignmentDone=!1;this.selectedWeaponType=a.WeaponTypeEnum.None;this.survivalPointsZoomTime=this.survivalRageTime=this.daysCount=this.killCount=this.tutorialCooldown=this.levelEndPauseCooldown=this.levelEndCooldown=this.levelStartCooldown=0;this.maxSurvivalRageTime=7;this.survivalPoints=0;this.minSurvivalPoints=50;this.checkpointFrequency=20;this.actualDayDuration=
30;this.repairKits=this.criticalChance=0;this.showHighScoreEffect=!0;this.mountedCrateCount=0;this.noScratch=!0;this.usedTurret=this.usedSpiked=this.survivalRage=!1;this.TNTCount=this.metalCount=0;this.initialize()};a.levelManager.prototype.initialize=function(){var f;this.minX=5;this.maxX=21;this.maxY=5;f=this.minX+(this.maxX-this.minX)/2;switch(this.currentLevel){case 1:this.rewardItem={crate:a.StackObjectTypeEnum.SpikeCrate,weapon:a.WeaponTypeEnum.None,won:!1};this.currentLevelStage=a.LevelStageEnum.TutorialStart;
this.secondaryWeaponAssignmentDone=this.primaryWeaponAssignmentDone=!0;this.levelStartCooldown=0;this.createPlayers(f-.6,f+100);break;case 2:this.rewardItem={crate:a.StackObjectTypeEnum.None,weapon:a.WeaponTypeEnum.ShotGun,won:!1};this.secondaryWeaponAssignmentDone=this.primaryWeaponAssignmentDone=!0;this.levelStartCooldown=0;this.createPlayers(f-.6,f+.6);this.survivalPoints=30;break;case 3:this.rewardItem={crate:a.StackObjectTypeEnum.CriticalChance,weapon:a.WeaponTypeEnum.None,won:!1};this.primaryWeaponAssignmentDone=
!1;this.secondaryWeaponAssignmentDone=!0;this.levelStartCooldown=.7;this.createPlayers(f-.6,f+.6);this.survivalPoints=30;break;case 4:this.rewardItem={crate:a.StackObjectTypeEnum.None,weapon:a.WeaponTypeEnum.AutoRifle,won:!1};this.primaryWeaponAssignmentDone=!1;this.secondaryWeaponAssignmentDone=!0;this.levelStartCooldown=.7;this.createPlayers(f-.6,f+.6);this.survivalPoints=30;this.criticalChance=.025;break;case 5:this.rewardItem={crate:a.StackObjectTypeEnum.MetalCrate,weapon:a.WeaponTypeEnum.None,
won:!1};this.secondaryWeaponAssignmentDone=this.primaryWeaponAssignmentDone=!1;this.levelStartCooldown=.7;this.createPlayers(f-.6,f+.6);this.survivalPoints=30;this.criticalChance=.025;break;case 6:this.rewardItem={crate:a.StackObjectTypeEnum.Challenge1,weapon:a.WeaponTypeEnum.None,won:!1};this.secondaryWeaponAssignmentDone=this.primaryWeaponAssignmentDone=!1;this.levelStartCooldown=.7;this.createPlayers(f-.6,f+.6);this.survivalPoints=30;this.criticalChance=.025;break;case 7:this.rewardItem={crate:a.StackObjectTypeEnum.None,
weapon:a.WeaponTypeEnum.AutoShotGun,won:!1};this.secondaryWeaponAssignmentDone=this.primaryWeaponAssignmentDone=!1;this.levelStartCooldown=.7;this.createPlayers(f-.6,f+.6);this.survivalPoints=30;this.criticalChance=.025;break;case 8:this.rewardItem={crate:a.StackObjectTypeEnum.None,weapon:a.WeaponTypeEnum.None,won:!1};this.secondaryWeaponAssignmentDone=this.primaryWeaponAssignmentDone=!1;this.levelStartCooldown=.7;this.createPlayers(f-.6,f+.6);this.survivalPoints=30;this.criticalChance=.025;break;
case 9:this.rewardItem={crate:a.StackObjectTypeEnum.TNTCrate,weapon:a.WeaponTypeEnum.None,won:!1};this.secondaryWeaponAssignmentDone=this.primaryWeaponAssignmentDone=!1;this.levelStartCooldown=.7;this.createPlayers(f-.6,f+.6);this.survivalPoints=30;this.criticalChance=.025;break;case 10:this.rewardItem={crate:a.StackObjectTypeEnum.None,weapon:a.WeaponTypeEnum.None,won:!1};this.secondaryWeaponAssignmentDone=this.primaryWeaponAssignmentDone=!1;this.levelStartCooldown=.7;this.createPlayers(f-.6,f+.6);
this.survivalPoints=30;this.criticalChance=.025;break;case 11:this.rewardItem={crate:a.StackObjectTypeEnum.DoubleWoodCrate,weapon:a.WeaponTypeEnum.None,won:!1};this.secondaryWeaponAssignmentDone=this.primaryWeaponAssignmentDone=!1;this.levelStartCooldown=.7;this.createPlayers(f-.6,f+.6);this.survivalPoints=30;this.criticalChance=.025;break;case 12:this.rewardItem={crate:a.StackObjectTypeEnum.None,weapon:a.WeaponTypeEnum.None,won:!1};this.secondaryWeaponAssignmentDone=this.primaryWeaponAssignmentDone=
!1;this.levelStartCooldown=.7;this.createPlayers(f-.6,f+.6);this.survivalPoints=30;this.criticalChance=.025;break;case 13:this.rewardItem={crate:a.StackObjectTypeEnum.Challenge2,weapon:a.WeaponTypeEnum.None,won:!1};this.secondaryWeaponAssignmentDone=this.primaryWeaponAssignmentDone=!1;this.levelStartCooldown=.7;this.createPlayers(f-.6,f+.6);this.survivalPoints=30;this.criticalChance=.025;break;case 14:this.rewardItem={crate:a.StackObjectTypeEnum.None,weapon:a.WeaponTypeEnum.None,won:!1};this.secondaryWeaponAssignmentDone=
this.primaryWeaponAssignmentDone=!1;this.levelStartCooldown=.7;this.createPlayers(f-.6,f+.6);this.survivalPoints=30;this.criticalChance=.025;break;case 15:this.rewardItem={crate:a.StackObjectTypeEnum.DoubleMetalCrate,weapon:a.WeaponTypeEnum.None,won:!1};this.secondaryWeaponAssignmentDone=this.primaryWeaponAssignmentDone=!1;this.levelStartCooldown=.7;this.createPlayers(f-.6,f+.6);this.survivalPoints=30;this.criticalChance=.025;break;case 16:this.rewardItem={crate:a.StackObjectTypeEnum.None,weapon:a.WeaponTypeEnum.None,
won:!1};this.secondaryWeaponAssignmentDone=this.primaryWeaponAssignmentDone=!1;this.levelStartCooldown=.7;this.createPlayers(f-.6,f+.6);this.survivalPoints=30;this.criticalChance=.025;break;case 17:this.rewardItem={crate:a.StackObjectTypeEnum.MountedCrate,weapon:a.WeaponTypeEnum.None,won:!1};this.secondaryWeaponAssignmentDone=this.primaryWeaponAssignmentDone=!1;this.levelStartCooldown=.7;this.createPlayers(f-.6,f+.6);this.survivalPoints=30;this.criticalChance=.025;break;case 18:this.rewardItem={crate:a.StackObjectTypeEnum.None,
weapon:a.WeaponTypeEnum.None,won:!1};this.secondaryWeaponAssignmentDone=this.primaryWeaponAssignmentDone=!1;this.levelStartCooldown=.7;this.createPlayers(f-.6,f+.6);this.survivalPoints=30;this.criticalChance=.025;break;case 19:this.rewardItem={crate:a.StackObjectTypeEnum.None,weapon:a.WeaponTypeEnum.Rpg,won:!1};this.secondaryWeaponAssignmentDone=this.primaryWeaponAssignmentDone=!1;this.levelStartCooldown=.7;this.createPlayers(f-.6,f+.6);this.survivalPoints=30;this.criticalChance=.025;break;case 20:this.rewardItem=
{crate:a.StackObjectTypeEnum.None,weapon:a.WeaponTypeEnum.None,won:!1};this.secondaryWeaponAssignmentDone=this.primaryWeaponAssignmentDone=!1;this.levelStartCooldown=.7;this.createPlayers(f-.6,f+.6);this.survivalPoints=30;this.criticalChance=.025;break;case 1E3:this.secondaryWeaponAssignmentDone=this.primaryWeaponAssignmentDone=!1;this.levelStartCooldown=.7;this.createPlayers(f-.6,f+.6);this.survivalPoints=0;this.criticalChance=.025;this.survivalPoints=30;break;case 1001:this.secondaryWeaponAssignmentDone=
this.primaryWeaponAssignmentDone=!1;this.levelStartCooldown=.7;this.createPlayers(f-.6,f+.6);this.survivalPoints=0;this.criticalChance=.025;this.survivalPoints=30;break;default:this.rewardItem={crate:a.StackObjectTypeEnum.DoubleWoodCrate,weapon:a.WeaponTypeEnum.None,won:!1},this.secondaryWeaponAssignmentDone=this.primaryWeaponAssignmentDone=!1,this.levelStartCooldown=.7,this.updateFrequency=5,this.createPlayers(f-.6,f+.6),this.survivalPoints=30}};a.levelManager.prototype.createPlayers=function(f,
c){this.leftPlayer=new a.HumanEntity(f,this.maxY,.4);this.leftPlayer.direction=a.DirectionEnum.Left;this.leftPlayer.buildDirection=a.DirectionEnum.Left;this.leftPlayer.speed=0;this.leftPlayer.baseSpeed=0;this.leftPlayer.classType=a.EntityClassTypeEnum.HumanMale;this.leftPlayer.heartBeats[1].maxTime=4+2*Math.random();this.leftPlayer.weapons[a.WeaponCategoryEnum.Primary]=a.WeaponTypeEnum.Rifle;this.leftPlayer.weapons[a.WeaponCategoryEnum.Secondary]=a.WeaponTypeEnum.Uzi;this.leftPlayer.reloadCooldown=
.5;this.rightPlayer=new a.HumanEntity(c,this.maxY,.4);this.rightPlayer.direction=a.DirectionEnum.Right;this.rightPlayer.buildDirection=a.DirectionEnum.Right;this.rightPlayer.speed=0;this.rightPlayer.baseSpeed=0;this.rightPlayer.classType=a.EntityClassTypeEnum.HumanFemale;this.rightPlayer.heartBeats[1].maxTime=4+2*Math.random();this.rightPlayer.weapons[a.WeaponCategoryEnum.Primary]=a.WeaponTypeEnum.Rifle;this.rightPlayer.weapons[a.WeaponCategoryEnum.Secondary]=a.WeaponTypeEnum.Uzi;this.rightPlayer.reloadCooldown=
.5;this.leftPlayer.stack={x:this.leftPlayer.x,vx:0,objects:[],limitX:0,direction:a.DirectionEnum.None,cooldown:0};this.rightPlayer.stack={x:this.rightPlayer.x,vx:0,objects:[],limitX:0,direction:a.DirectionEnum.None,cooldown:0};this.stacks.push(this.leftPlayer.stack);this.stacks.push(this.rightPlayer.stack);if(1!==this.currentLevel){var k={x:this.leftPlayer.x+(this.rightPlayer.x-this.leftPlayer.x)/2,vx:0,objects:[],limitX:0,direction:a.DirectionEnum.None,cooldown:0};k.objects.push(new a.StackObject(this.maxY,
.6,a.StackObjectTypeEnum.WoodCrate,100));this.stacks.push(k)}};a.levelManager.prototype.update=function(f){this.runningTime+=f;1001===this.currentLevel&&(this.runningTime=0);0<this.survivalRageTime&&(this.survivalRageTime-=f,0>this.survivalRageTime&&(this.survivalRageTime=0));0<this.survivalPointsZoomTime&&(this.survivalPointsZoomTime-=f,0>this.survivalPointsZoomTime&&(this.survivalPointsZoomTime=0));0<this.levelEndCooldown&&(this.levelEndCooldown-=f,0>this.levelEndCooldown&&(this.levelEndCooldown=
0));0<this.levelEndPauseCooldown&&(this.levelEndPauseCooldown-=f,0>this.levelEndPauseCooldown&&(this.levelEndPauseCooldown=0));this.primaryWeaponAssignmentDone&&this.secondaryWeaponAssignmentDone&&this.newItem===a.StackObjectTypeEnum.None&&(0<this.levelStartCooldown?(this.levelStartCooldown-=f,0>this.levelStartCooldown&&(this.levelStartCooldown=0)):(0<this.tutorialCooldown&&(this.tutorialCooldown-=f,0>this.tutorialCooldown&&(this.tutorialCooldown=0)),this.currentLevelStage===a.LevelStageEnum.TutorialZombiesComing?
0===this.tutorialCooldown&&(this.currentLevelStage=a.LevelStageEnum.TutorialHitBuildButton):this.currentLevelStage===a.LevelStageEnum.TutorialMoreZombiesComing&&0===this.tutorialCooldown&&(this.currentLevelStage=a.LevelStageEnum.TutorialTurnRight)))};a.levelManager.prototype.getStackObjectCreationTime=function(f){switch(f){case a.StackObjectTypeEnum.WoodCrate:return 3;case a.StackObjectTypeEnum.MetalCrate:return 5;case a.StackObjectTypeEnum.SpikeCrate:return 3;case a.StackObjectTypeEnum.TNTCrate:return 6;
case a.StackObjectTypeEnum.MountedCrate:return 8;case a.StackObjectTypeEnum.RepairCrate:return 1;case a.StackObjectTypeEnum.DoubleMetalCrate:return 3;case a.StackObjectTypeEnum.DoubleWoodCrate:return 5}return 0};a.levelManager.prototype.getStackObjectStrength=function(f){switch(f){case a.StackObjectTypeEnum.WoodCrate:return 3;case a.StackObjectTypeEnum.TNTCrate:return 5;case a.StackObjectTypeEnum.SpikeCrate:return 5;case a.StackObjectTypeEnum.MetalCrate:return 8;case a.StackObjectTypeEnum.MountedCrate:return 10}return 1}})(window.OkijinGame=
window.OkijinGame||{});(function(a,E){})(window.OkijinGame.Resources=window.OkijinGame.Resources||{});(function(a,E){var f={},c=!0,k=!1,m=navigator.userAgent.toLowerCase();if(-1<m.indexOf("firefox")||-1<m.indexOf("opera"))k=!0;m=!1;if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))m=!0;var l,t=window.AudioContext||window.webkitAudioContext;!k&&t?l=new t:"undefined"===typeof Audio?
c=!1:!k&&m&&(c=!1);a.canPlaySounds=function(){return c};a.registerSound=function(a,b,m){if(c)if(l){var t=new XMLHttpRequest;t.open("get",b,!0);t.responseType="arraybuffer";t.onload=function(){l.decodeAudioData(t.response,function(b){f[a]={buffer:b};m&&m()})};t.send()}else f[a]=new Audio,m&&(f[a].preload="auto",$(f[a]).on("loadeddata",m)),f[a].src=k?b.replace(".mp3",".ogg"):b;else m&&m()};a.playSound=function(k){try{var b;c&&(b=f[k])&&(l?(a.stopSound(k),b.sourceNode=l.createBufferSource(),b.sourceNode.buffer=
b.buffer,b.sourceNode.connect(l.destination),"undefined"!==typeof b.sourceNode.noteOn?b.sourceNode.noteOn(0):b.sourceNode.start(0)):(b.currentTime=0,b.play()))}catch(m){}};a.loopSound=function(k){var b;c&&(b=f[k])&&(l?(a.stopSound(k),b.sourceNode=l.createBufferSource(),b.sourceNode.loop=!0,b.sourceNode.buffer=b.buffer,b.sourceNode.connect(l.destination),"undefined"!==typeof b.sourceNode.noteOn?b.sourceNode.noteOn(0):b.sourceNode.start(0)):("boolean"===typeof b.loop?b.loop=!0:b.addEventListener("ended",
function(){this.currentTime=0;this.play()},!1),b.play()))};a.stopSound=function(a){c&&(a=f[a])&&(l?a.sourceNode&&("undefined"!==typeof a.sourceNode.noteOff?a.sourceNode.noteOff(0):a.sourceNode.stop(0),a.sourceNode=null):(a.pause(),a.currentTime=0))}})(window.AudioManager=window.AudioManager||{});
(function(a,E){var f=new Date,c=0,k=0;a.getFPS=function(){++c;var a=new Date;1E3<a.getTime()-f.getTime()&&(k=c,c=0,f=a);return k};a.clamp=function(a,c,f){return Math.max(c,Math.min(f,a))};a.circleRectIntersect=function(c,f,k,r,b,C,J){c-=a.clamp(c,r,C);f-=a.clamp(f,b,J);return c*c+f*f<k*k};a.distance=function(a,c,f,k){a=f-a;c=k-c;return Math.sqrt(a*a+c*c)};a.vectorAdd=function(a,c,f,k){return{x:a+f,y:c+k}};a.vectorSubstract=function(a,c,f,k){return{x:a-f,y:c-k}};a.vectorMultiply=function(a,c,f){return{x:a*
f,y:c*f}};a.vectorDivide=function(a,c,f){return 0===f?{x:a,y:c}:{x:a/f,y:c/f}};a.vectorDotProduct=function(a,c,f,k){return a*f+c*k};a.vectorLength=function(a,c){return Math.sqrt(a*a+c*c)};a.vectorNormalize=function(c,f){var k=a.vectorLength(c,f);return 0===k?{x:c,y:f}:{x:c/k,y:f/k}};a.vectorRotate=function(a,c,f){var k=Math.cos(f);f=Math.sin(f);return{x:k*a-f*c,y:f*a+k*c}};a.vectorAngle=function(a,c,f,k){return Math.atan2(k-c,f-a)};a.vectorFromAngle=function(a){return{x:Math.cos(a),y:Math.sin(a)}};
a.toDegrees=function(a){return 180/Math.PI*a};a.toRadians=function(a){return Math.PI/180*a};a.shortestArc=function(a,c){var f=Math.abs(a-c);f>Math.PI&&(f=2*Math.PI-f);return f};a.rectIntersect=function(a,c,f,k,b,C,J,Q){return!(k<C||c>Q||f<b||a>J)};a.pointInRect=function(a,c,f,k,b,C){return a>f&&a<b&&c>k&&c<C};a.loadResources=function(a,c,f){var k,b,C={},J=0,Q,E=function(){++J===b&&c&&c(C);f&&f(J,b)};k=0;for(b=a.length;k<b;k+=1)Q=a[k],"img"===Q.type?(C[Q.id]=new Image,C[Q.id].onload=E,C[Q.id].src=
Q.src):"snd"===Q.type&&AudioManager.registerSound(Q.id,Q.src,E)}})(window.OkijinGame=window.OkijinGame||{});$.fn.center=function(a){this.css("position","absolute");this.css("top",Math.max(0,($(window).height()-$(this).outerHeight())/2+$(window).scrollTop())+"px");this.css("left",Math.max(0,($(window).width()-$(this).outerWidth())/2+$(window).scrollLeft())+"px");return this};(function(a,E){var f,c,k,m,l,t,r,b,C,J,Q,za=[{x:0,y:0},{x:0,y:1},{x:0,y:2},{x:0,y:3},{x:0,y:4},{x:0,y:5},{x:0,y:6},{x:0,y:7},{x:4,y:0},{x:4,y:1},{x:4,y:2},{x:4,y:3},{x:4,y:4},{x:4,y:5},{x:4,y:6}];a.setupTileOffsets=function(){var e=1/a.getScaleUnit();f=0;c=1*e;k=2*e;m=3*e;l=4*e;t=5*e;r=6*e;b=7*e;C=8*e;J=9*e;Q=10*e};a.drawLoader=function(e){a.getLogoTime();var g=a.getGameLoadingData(),p=a.getCanvasWidth(),r=a.getCanvasHeight(),u=a.screenToHud({x:p,y:r});e.drawImage(a.Resources.loadingScreenImage,f,
f,Q,6.5*c,0,0,p,r);e.save();a.applyHudCameras();g=4*g.current/g.total;e.drawImage(a.Resources.loadingScreenImage,t,b,l,c,u.x/2-2,u.y/2,4,1);e.save();e.beginPath();e.rect(u.x/2-2,u.y/2,g,1);e.closePath();e.clip();e.drawImage(a.Resources.loadingScreenImage,t,C,l,c,u.x/2-2,u.y/2,4,1);e.restore();e.drawImage(a.Resources.loadingScreenImage,t,J,l,c,u.x/2-2,u.y-1,4,1);e.drawImage(a.Resources.loadingScreenImage,f,b,m,k,u.x/2-1.5,u.y/2-1-.5,3,2);e.restore()};a.drawIntro=function(e){var g=a.getMaxIntroTime(),
p=a.getIntroTime(),A=a.getCarHeartbeat(),u=a.getWeaponHeartbeat(),y=a.getCanvasWidth(),d=a.getCanvasHeight();e.drawImage(a.Resources.backgroundImage2,0,0,y,d);e.drawImage(a.Resources.backdrop01Image,f,l,k,k,l,c,t,t);e.save();e.translate(y/2,d/2);e.scale(1.4,1.4);for(var w=2*-r+(g-p)*c*.3,x=0;10>x;x+=1)e.drawImage(a.Resources.backdrop01Image,f,k,r,k,w,-c,r,k),w+=r;e.restore();for(var B=!1,w=2*-b+(g-p)*c*.6,x=0;10>x;x+=1)(B=!B)?(e.drawImage(a.Resources.backdrop02Image,b,l,c,k,w+c,1.5*c,c,k),e.drawImage(a.Resources.backdrop02Image,
b,l,c,k,w,k,c,k)):e.drawImage(a.Resources.backdrop02Image,b,l,c,k,w,1.5*c,c,k),w+=b;e.save();e.fillStyle="rgb(180, 134, 89)";e.fillRect(f,l,y,d);B=!1;w=2*-b+(g-p)*c;for(x=0;10>x;x+=1)(B=!B)&&2===x&&(e.drawImage(a.Resources.effectsImage,r,c,m,k,w-.2*c,1.4*c,k,1.5*c),e.drawImage(a.Resources.effectsImage,r,m,m,m,w,k,k,k)),e.drawImage(a.Resources.backdrop01Image,f,f,Q,k,w,m,Q,k),w+=b;e.restore();w=y/2-m;p>g-1?w+=(1-(g-p))*r:1>p&&(w-=(1-p)*r);e.save();e.translate(w,d/2-k);e.scale(.7,.7);x=w+t;e.save();
e.globalAlpha=Math.min(.3,u.time);e.translate(x+c,d/2+c);e.rotate(A.time*Math.PI);e.translate(-(x+c),-(d/2+c));e.drawImage(a.Resources.effectsImage,f,c,c,c,x,d/2,k,k);e.restore();x=w+t;e.save();e.globalAlpha=Math.min(.1,A.time);e.translate(x+c,d/2+c);e.rotate(-A.time*Math.PI);e.translate(-(x+c),-(d/2+c));e.drawImage(a.Resources.effectsImage,f,c,c,c,x,d/2,k,k);e.restore();x=w+5.5*c;e.save();e.globalAlpha=Math.min(.1,A.time);e.translate(x+c,d/2+c);e.rotate(-A.time*Math.PI);e.translate(-(x+c),-(d/2+
c));e.drawImage(a.Resources.effectsImage,f,c,c,c,x,d/2,k,k);e.restore();x=w+r;e.save();e.globalAlpha=Math.min(.3,u.time);e.translate(x+c,d/2+c);e.rotate(-u.time*Math.PI);e.translate(-(x+c),-(d/2+c));e.drawImage(a.Resources.effectsImage,f,c,c,c,x,d/2,k,k);e.restore();x=w+6.3*c;e.save();e.globalAlpha=Math.min(.3,u.time);e.translate(x+c,d/2+c);e.rotate(-A.time*Math.PI);e.translate(-(x+c),-(d/2+c));e.drawImage(a.Resources.effectsImage,f,c,c,c,x,d/2,k,k);e.restore();e.drawImage(a.Resources.entitiesImage,
m,t,c,c,w+3.7*c,d/2+.9*c,c,c);e.drawImage(a.Resources.entitiesImage,l,t,r,m,w,d/2-c-A.time*c*.1,r,m);e.drawImage(a.Resources.entitiesImage,m,t,c,c,w+.5*c,d/2+.9*c,c,c);e.drawImage(a.Resources.entitiesImage,c,t,k,c,w+1.7*c,d/2-.25*c-u.time*c*.1,k,c);e.drawImage(a.Resources.entitiesImage,b,l,k,c,w+3.7*c,d/2-.1*c+u.time*c*.1,k,c);e.restore();B=!1;w=2*-b+(g-p)*k;for(x=0;10>x;x+=1){if(B=!B)e.drawImage(a.Resources.backdrop02Image,b,l,c,k,w,2.7*c,1.7*c,1.7*k),e.drawImage(a.Resources.backdrop02Image,b,l,
c,k,w+c,l,1.7*c,1.7*k);w+=b}e.fillStyle="rgb(0, 0, 0)";e.fillRect(0,0,y,1.07*c);e.fillRect(0,d-1.07*c,y,1.07*c);e.fillStyle="#990000";e.fillRect(0,0,y,c);e.fillRect(0,d-c,y,c);p<g-2&&p>g-6?(e.drawImage(a.Resources.effectsImage,k,r,m,k,0,0,m,k),e.drawImage(a.Resources.effectsImage,t,r,t,c,m,0,t,c)):p<g-6&&(e.drawImage(a.Resources.effectsImage,f,r,k,k,y-k,0,k,k),e.drawImage(a.Resources.effectsImage,t,b,t,c,y-7.5*c,0,t,c));e.drawImage(a.Resources.hud3ScreenImage,C,t,k,c,C,t,k,c);1.2>p&&(e.globalAlpha=
1-(p-.2),e.fillStyle="rgb(0, 0, 0)",e.fillRect(0,0,y,d),e.globalAlpha=1)};a.draw=function(e,g){var p,A,u,y,d,w,x,B,V=a.getCurrentGameState(),X=a.getCanvasWidth(),R=a.getCanvasHeight(),v=a.screenToHud({x:X,y:R});x=a.getMenuHudItems();var n=a.getLevelHudItems();if(V===a.GameStateEnum.GameStart)e.drawImage(a.Resources.introScreenImage,0,0,X,R);else if(V===a.GameStateEnum.GameIntro)a.drawIntro(e);else if(V===a.GameStateEnum.GameMenu){var n=a.getMenuSetupTime(),M=a.getMaxMenuSetupTime();u=a.getMenuEntities();
var E=a.getMenuPageTime(),W=a.getMenuPageDirection();n>M-1&&(e.globalAlpha=M-n);e.drawImage(a.Resources.menuScreenImage,0,0,X,R);e.globalAlpha=1;a.applyHudCameras();d=0;for(w=u.length;d<w;d+=1)a.drawEntity(e,u[d]);u=.5;y=.2;d=a.getWeaponHeartbeat();n>M-.5&&a.getCurrentMenuType()===a.MenuTypeEnum.None&&(u-=2*(.5-(M-n)),y+=2*(.5-(M-n)));e.drawImage(a.Resources.hud1ScreenImage,f,f,l,m,u,y,4,3);if(a.getCurrentMenuType()===a.MenuTypeEnum.None||a.getCurrentMenuType()===a.MenuTypeEnum.ShowMain)u=5,y=2.4,
n>M-.5&&(y+=2*(.5-(M-n))),e.save(),e.translate(u-.2+1,y+.15+1.5),e.rotate(-.2+.1*d.time),e.translate(-(u-.2+1),-(y+.15+1.5)),e.drawImage(a.Resources.hud1ScreenImage,C,f,k,m,u-.2,y+.15,2,3),e.restore(),e.drawImage(a.Resources.hud1ScreenImage,l,f,l,l,u,y,4,4),e.drawImage(a.Resources.hud1ScreenImage,C,m,k,k,u+2.35,y+.77+.09*d.time,2,2);d=0;for(w=x.length;d<w;d+=1)if(x[d].type===a.MenuTypeEnum.Panel){p=x[d].x;A=x[d].y;e.drawImage(a.Resources.hud1ScreenImage,f,t,l,m,p,A,4,3);break}d=0;for(w=x.length;d<
w;d+=1)if(0<x[d].width)switch(x[d].type){case a.MenuTypeEnum.ShowCredits:e.drawImage(a.Resources.hud1ScreenImage,m,l,c,c,x[d].x,x[d].y,1,1);break;case a.MenuTypeEnum.ToggleSound:AudioManager.canPlaySounds()&&2===a.SoundManager.getSoundsEnabled()?e.drawImage(a.Resources.hud1ScreenImage,k,l,c,c,x[d].x,x[d].y,1,1):AudioManager.canPlaySounds()&&1===a.SoundManager.getSoundsEnabled()?e.drawImage(a.Resources.hud1ScreenImage,C,r,c,c,x[d].x,x[d].y,1,1):e.drawImage(a.Resources.hud1ScreenImage,b,r,c,c,x[d].x,
x[d].y,1,1);break;case a.MenuTypeEnum.ShowStoryMode:a.getCurrentMenuType()!==a.MenuTypeEnum.ShowStoryMode?e.drawImage(a.Resources.hud1ScreenImage,l,t,m,c,x[d].x+.5,x[d].y,3,1):e.drawImage(a.Resources.hud2ScreenImage,f,c,k,c,x[d].x+.5,x[d].y-.2,2,1);break;case a.MenuTypeEnum.ShowSurvivalMode:a.getCurrentMenuType()!==a.MenuTypeEnum.ShowSurvivalMode?e.drawImage(a.Resources.hud1ScreenImage,l,r,m,c,x[d].x+.5,x[d].y,3,1):e.drawImage(a.Resources.hud2ScreenImage,f,k,k,c,x[d].x+.5,x[d].y-.2,2,1);break;case a.MenuTypeEnum.ShowOptions:a.getCurrentMenuType()!==
a.MenuTypeEnum.ShowOptions?e.drawImage(a.Resources.hud1ScreenImage,l,b,m,c,x[d].x+.5,x[d].y+.2,3,1):e.drawImage(a.Resources.hud2ScreenImage,f,m,k,c,x[d].x+.5,x[d].y-.2,2,1);break;case a.MenuTypeEnum.ShowMain:e.drawImage(a.Resources.hud1ScreenImage,k,m,k,c,x[d].x,x[d].y-.25,2,1);break;case a.MenuTypeEnum.SelectPrevPage:e.drawImage(a.Resources.hud2ScreenImage,k,f,c,c,x[d].x,x[d].y-.2,1,1);break;case a.MenuTypeEnum.SelectNextPage:e.drawImage(a.Resources.hud2ScreenImage,c,f,c,c,x[d].x,x[d].y-.2,1,1)}if(a.getCurrentMenuType()===
a.MenuTypeEnum.ShowStoryMode){e.save();e.scale(1+.03*a.getTitleHeartbeat().time,1+.1*a.getTitleHeartbeat().time);e.drawImage(a.Resources.hud2ScreenImage,m,f,k,c,p+.6,A+3.1,2,1);e.restore();x=W===a.DirectionEnum.Right?10*E:-(10*E);w=9*a.getMenuPageIndex();M=0;u=x+p+.4;y=A+4.6;e.globalAlpha=1-4*E;d=w;for(w+=9;d<w&&!(d>a.getLevelItemData().length-1);d+=1){B=a.getLevelItemData()[d];B.x=u;B.y=y;B.size=1;u+=1.1;M++;3===M&&(M=0,y+=1.1,u=x+p+.4);switch(B.status){case a.LevelStatusEnum.Locked:e.drawImage(a.Resources.hud2ScreenImage,
J,c,c,c,B.x,B.y,1,1);break;case a.LevelStatusEnum.Available:e.drawImage(a.Resources.hud2ScreenImage,f,f,c,c,B.x,B.y,1,1);break;case a.LevelStatusEnum.Passed:e.drawImage(a.Resources.hud2ScreenImage,C,c,c,c,B.x,B.y,1,1);break;case a.LevelStatusEnum.None:e.globalAlpha/=4,e.drawImage(a.Resources.hud2ScreenImage,J,k,c,c,B.x,B.y,1,1),e.globalAlpha=1-4*E}a.drawNumber(e,B.level.toString(),B.x,B.y-.3,.6)}if(0<E&&W!==a.DirectionEnum.None)for(e.globalAlpha=2*E,M=0,u=W===a.DirectionEnum.Right?p-4+x:p+3+x,y=A+
4.6,A=a.getMenuPageIndex(),W===a.DirectionEnum.Right?(A--,d=Math.floor(a.getLevelItemData().length/9),0>A&&(A=d)):(d=Math.floor(a.getLevelItemData().length/9),A++,A>d&&(A=0)),d=w=9*A;d<w+9&&!(d>a.getLevelItemData().length-1);d+=1){u+=1.1;B=a.getLevelItemData()[d];switch(B.status){case a.LevelStatusEnum.Locked:e.drawImage(a.Resources.hud2ScreenImage,J,c,c,c,u,y,1,1);break;case a.LevelStatusEnum.Available:e.drawImage(a.Resources.hud2ScreenImage,f,f,c,c,u,y,1,1);break;case a.LevelStatusEnum.Passed:e.drawImage(a.Resources.hud2ScreenImage,
C,c,c,c,u,y,1,1);break;case a.LevelStatusEnum.None:e.drawImage(a.Resources.hud2ScreenImage,J,k,c,c,u,y,1,1)}M++;3===M&&(M=0,y+=1.1,u=W===a.DirectionEnum.Right?p-4+x:p+3+x)}}else a.getCurrentMenuType()===a.MenuTypeEnum.ShowSurvivalMode?(d=a.getMenuPageIndex(),e.save(),e.scale(1+.03*a.getTitleHeartbeat().time,1+.1*a.getTitleHeartbeat().time),e.drawImage(a.Resources.hud2ScreenImage,r,f,k,c,p+.6,A+3.1,2,1),e.restore(),x=W===a.DirectionEnum.Right?10*E:-(10*E),u=x+p+1,y=A+4.5,e.globalAlpha=1-2*E,1001===
a.getMenuSurvivalItems()[d].level?(e.drawImage(a.Resources.hud2ScreenImage,f,l,m,c,p+.2,A+6.7,3*1.2,1.2),e.drawImage(a.Resources.hud3ScreenImage,C,f,k,c,p+3-.3*a.getTitleHeartbeat().time,A+4.7-.1*a.getTitleHeartbeat().time,2+.6*a.getTitleHeartbeat().time,1+.2*a.getTitleHeartbeat().time),w=a.getSavedData().daysCountHighScore.toString(),M=0,2===w.length?M=.11:3===w.length?M=.22:4===w.length&&(M=.33),a.drawNumber(e,w,p+3.75-M,A+5.3,1),e.drawImage(a.Resources.hud3ScreenImage,J,c,c,c,p+4+M,A+5.3,1,1)):
1E3===a.getMenuSurvivalItems()[d].level&&(e.drawImage(a.Resources.hud2ScreenImage,f,t,m,c,p+.2,A+6.7,3*1.2,1.2),e.drawImage(a.Resources.hud3ScreenImage,C,f,k,c,p+3-.3*a.getTitleHeartbeat().time,A+4.7-.1*a.getTitleHeartbeat().time,2+.6*a.getTitleHeartbeat().time,1+.2*a.getTitleHeartbeat().time),w=a.getSavedData().killCountHighScore.toString(),M=0,2===w.length?M=.11:3===w.length?M=.22:4===w.length&&(M=.33),a.drawNumber(e,w,p+3.75-M,A+5.3,1),e.drawImage(a.Resources.hud3ScreenImage,C,c,c,c,p+4+M,A+5.3,
1,1)),B=a.getMenuSurvivalItems()[d],B.x=u,B.y=y,B.size=2,u+=1.1,a.getMenuSurvivalItems()[d].status===a.LevelStatusEnum.Locked&&(e.globalAlpha=Math.min(.5,e.globalAlpha)),1001===a.getMenuSurvivalItems()[d].level?e.drawImage(a.Resources.hud2ScreenImage,m,k,k,k,B.x,B.y,2,2):1E3===a.getMenuSurvivalItems()[d].level&&e.drawImage(a.Resources.hud2ScreenImage,t,k,k,k,B.x,B.y,2,2),a.getMenuSurvivalItems()[d].status===a.LevelStatusEnum.Locked&&(e.globalAlpha=1-2*E,e.drawImage(a.Resources.hud2ScreenImage,J,c,
c,c,u-.6,y+.5,1,1)),0<E&&W!==a.DirectionEnum.None&&(e.globalAlpha=2*E,u=W===a.DirectionEnum.Right?p-3+x:p+3+x,y=A+4.5,u+=1.1,1001===a.getMenuSurvivalItems()[d].level?e.drawImage(a.Resources.hud2ScreenImage,t,k,k,k,u,y,2,2):1E3===a.getMenuSurvivalItems()[d].level&&e.drawImage(a.Resources.hud2ScreenImage,m,k,k,k,u,y,2,2))):a.getCurrentMenuType()===a.MenuTypeEnum.ShowOptions&&(d=a.getMenuPageIndex(),a.drawNumber(e,(d+1).toString(),p+1.4+(10>d+1?.15:0),A+3.1,.7),e.drawImage(a.Resources.hud2ScreenImage,
r,c,c,c,p+1.58,A+3.4,.7,.7),a.drawNumber(e,a.getMenuAchievementItems().length.toString(),p+2,A+3.3,.7),x=W===a.DirectionEnum.Right?10*E:-(10*E),u=x+p+1.56,y=A+4.6,e.globalAlpha=1-2*E,e.drawImage(a.Resources.hud3ScreenImage,c*za[d].x,c*za[d].y,l,c,p-.55,A+6.3,5.2,1.3),B=a.getMenuAchievementItems()[d],B.x=u,B.y=y,B.size=1,e.drawImage(a.Resources.hud2ScreenImage,t,f,c,c,B.x-.05,B.y,1,1),d<a.getSavedData().achievements.length&&a.getSavedData().achievements[d]===a.LevelStatusEnum.Passed&&e.drawImage(a.Resources.hud3ScreenImage,
l,b,c,c,B.x+.1,B.y,1.1,1.1),1===(d+1).toString().length?a.drawNumber(e,(d+1).toString(),B.x+.31,B.y+.7,.7):a.drawNumber(e,(d+1).toString(),B.x+.22,B.y+.7,.7),0<E&&W!==a.DirectionEnum.None&&(e.globalAlpha=2*E,u=W===a.DirectionEnum.Right?p-2.5+x:p+3+x,e.drawImage(a.Resources.hud2ScreenImage,t,f,c,c,u+1.1,A+4.9,1,1)));e.globalAlpha=1;if(2>n||a.getCurrentMenuType()!==a.MenuTypeEnum.None)y=4.56,1<n&&a.getCurrentMenuType()===a.MenuTypeEnum.None&&(y+=2*(n-1)),e.drawImage(a.Resources.hud1ScreenImage,f,m,
k,k,-.5,y,2,2);a.getShowCredits()&&(e.save(),e.setTransform(1,0,0,1,0,0),e.drawImage(a.Resources.creditsScreenImage,0,0,X,R),e.restore());a.isTrialLicense()&&e.drawImage(a.Resources.hud3ScreenImage,C,l,k,c,v.x-2,v.y-1,2,1)}else if(V===a.GameStateEnum.GameLoading)a.drawLoader(e);else if(V===a.GameStateEnum.GameRun||V===a.GameStateEnum.GameLost||V===a.GameStateEnum.GameWon){if(5<g.currentLevel&&a.isTrialLicense())for(e.drawImage(a.Resources.unlockImage,0,0,X,R),a.applyHudCameras(),d=0;d<n.length;d+=
1)n[d].enabled&&(a.CommandEnum.Menu===n[d].type?e.drawImage(a.Resources.hud2ScreenImage,m,t,c,c,n[d].x,n[d].y,1,1):a.CommandEnum.BuyGame===n[d].type&&e.drawImage(a.Resources.hud3ScreenImage,C,k,k,k,n[d].x-.1*a.getTitleHeartbeat().time,n[d].y-.1*a.getTitleHeartbeat().time,2+.2*a.getTitleHeartbeat().time,2+.2*a.getTitleHeartbeat().time));else{V===a.GameStateEnum.GameLost||g.leftPlayer.currentWeaponCategory===a.WeaponCategoryEnum.Secondary||g.rightPlayer.currentWeaponCategory===a.WeaponCategoryEnum.Secondary?
e.drawImage(a.Resources.backgroundImage2,0,0,X,R):e.drawImage(a.Resources.backgroundImage1,0,0,X,R);a.applySceneCameras();e.save();a.applyVeryFarParallaxCameras();e.drawImage(a.Resources.backdrop01Image,f,l,k,k,.15*(g.minX+(g.maxX-g.minX)/2),g.maxY-7.9,5,5);e.restore();if(4>g.currentLevel||14<g.currentLevel)for(e.save(),a.applyFarParallaxCameras(),p=g.minX-30,d=0;10>d;d+=1)e.drawImage(a.Resources.backdrop01Image,f,k,r,k,p,g.maxY-7,12,5),p+=12;else for(e.save(),a.applyFarParallaxCameras(),p=g.minX-
30,d=0;10>d;d+=1)e.drawImage(a.Resources.backdrop02Image,f,l,r,k,p,g.maxY-7,12,5),p+=12;e.restore();e.save();a.applyNearParallaxCameras();e.drawImage(a.Resources.backdrop01Image,k,l,c,k,-1,g.maxY-5,1,4);e.drawImage(a.Resources.backdrop01Image,k,l,c,k,3,g.maxY-5.5,1,4);e.drawImage(a.Resources.backdrop01Image,m,l,k,k,3,g.maxY-5.5,2,4);e.drawImage(a.Resources.backdrop01Image,k,l,c,k,9,g.maxY-5.5,2,4);e.drawImage(a.Resources.backdrop01Image,m,l,k,k,11,g.maxY-5,1,4);e.restore();4>g.currentLevel?(e.save(),
a.applyVeryNearParallaxCameras(),d=.75*(g.minX+(g.maxX-g.minX)/2-6.7),p=g.maxY-1.9,e.drawImage(a.Resources.backdrop01Image,r,k,c,c,d,p,1,1),d=.75*(g.minX+(g.maxX-g.minX)/2-6.5),p=g.maxY-2.7,e.drawImage(a.Resources.backdrop01Image,b,l,m,k,d,p,3,2),d=.75*(g.minX+(g.maxX-g.minX)/2-5.8),p=g.maxY-3.2,e.drawImage(a.Resources.backdrop01Image,b,k,m,k,d,p,3,2),d=.75*(g.minX+(g.maxX-g.minX)/2+5.5),p=g.maxY-2.5,e.save(),e.translate(2*d,0),e.scale(-1,1),e.drawImage(a.Resources.backdrop01Image,b,k,m,k,d,p,3,2),
e.restore(),d=.75*(g.minX+(g.maxX-g.minX)/2+6),p=g.maxY-3,e.save(),e.translate(2*d,0),e.scale(-1,1),e.drawImage(a.Resources.backdrop01Image,b,l,m,k,d,p,3,2),e.restore(),d=.75*(g.minX+(g.maxX-g.minX)/2+5.2),p=g.maxY-2.2,e.drawImage(a.Resources.backdrop01Image,r,k,c,c,d,p,1,1),d=.75*(g.minX+(g.maxX-g.minX)/2+5.7),e.drawImage(a.Resources.backdrop01Image,r,m,c,c,d,p,1,1),d=.75*(g.minX+(g.maxX-g.minX)/2-8.2),p=g.maxY-2.2,e.drawImage(a.Resources.backdrop01Image,r,m,c,c,d,p,1,1),d=.75*(g.minX+(g.maxX-g.minX)/
2-5),e.drawImage(a.Resources.backdrop01Image,r,k,c,c,d,p,1,1)):15>g.currentLevel?(e.save(),a.applyVeryNearParallaxCameras(),d=.75*(g.minX+(g.maxX-g.minX)/2-5.7),p=g.maxY-5,e.drawImage(a.Resources.backdrop02Image,f,f,C,l,d,p,8,4),p=g.maxY-3.2,d=.75*(g.minX+(g.maxX-g.minX)/2+5.7),e.drawImage(a.Resources.backdrop02Image,b,l,c,k,d,p,1,2),p=g.maxY-2.5,d=.75*(g.minX+(g.maxX-g.minX)/2-7.7),e.drawImage(a.Resources.backdrop02Image,b,l,c,k,d,p,1,2),p=g.maxY-3.2,d=.75*(g.minX+(g.maxX-g.minX)/2-8),e.drawImage(a.Resources.backdrop02Image,
b,l,c,k,d,p,1,2)):(e.save(),a.applyVeryNearParallaxCameras(),d=.75*(g.minX+(g.maxX-g.minX)/2-5.7),p=g.maxY-5,e.drawImage(a.Resources.backdrop03Image,f,f,C,l,d,p,8,4),p=g.maxY-3.2,d=.75*(g.minX+(g.maxX-g.minX)/2+5.7),e.drawImage(a.Resources.backdrop03Image,b,l,c,k,d,p,1,2),p=g.maxY-2.5,d=.75*(g.minX+(g.maxX-g.minX)/2-7.7),e.drawImage(a.Resources.backdrop03Image,b,l,c,k,d,p,1,2),p=g.maxY-3.2,d=.75*(g.minX+(g.maxX-g.minX)/2-8),e.drawImage(a.Resources.backdrop03Image,b,l,c,k,d,p,1,2));e.restore();a.applyHereParallaxCameras();
e.fillStyle="rgb(180, 134, 89)";e.fillRect(g.minX-20.5,g.maxY+.2,g.maxX+20-(g.minX-20),30);for(d=g.minX-20.5;d<g.maxX+20;d+=7)e.drawImage(a.Resources.backdrop01Image,f,f,Q,k,d,g.maxY-.7,10,2);for(d=0;d<g.backgroundEffects.length;d+=1)p=g.backgroundEffects[d],a.drawEffect(e,p);for(d=0;d<g.leftPlayer.stack.objects.length;d+=1)a.drawStackObject(e,g.leftPlayer.stack.x,a.DirectionEnum.Left,g.leftPlayer.stack.objects[d]);for(d=0;d<g.rightPlayer.stack.objects.length;d+=1)a.drawStackObject(e,g.rightPlayer.stack.x,
a.DirectionEnum.Right,g.rightPlayer.stack.objects[d]);for(d=0;d<g.stacks.length;d+=1)if(p=g.stacks[d],a.DirectionEnum.None!==p.direction)for(X=0;X<p.objects.length;++X)a.drawStackObject(e,p.x,p.direction,p.objects[X]);for(d=0;d<g.entities.length;d+=1)a.drawEntity(e,g.entities[d]);g.rightPlayer.scaleFactor!==g.leftPlayer.scaleFactor?g.rightPlayer.scaleFactor<g.leftPlayer.scaleFactor?(a.drawPlayer(e,g.rightPlayer),a.drawPlayer(e,g.leftPlayer)):(a.drawPlayer(e,g.leftPlayer),a.drawPlayer(e,g.rightPlayer)):
g.leftPlayer.direction===a.DirectionEnum.Right||g.leftPlayer.isDead?(a.drawPlayer(e,g.rightPlayer),a.drawPlayer(e,g.leftPlayer)):(a.drawPlayer(e,g.leftPlayer),a.drawPlayer(e,g.rightPlayer));for(d=0;d<g.effects.length;d+=1)p=g.effects[d],a.drawEffect(e,p);a.applyHudCameras();if(a.getConfirmCommand()!==a.CommandEnum.None){e.fillStyle="rgba(0, 0, 0, 0.5)";e.fillRect(0,0,v.x,v.y);switch(a.getConfirmCommand()){case a.CommandEnum.Menu:e.drawImage(a.Resources.hud2ScreenImage,f,b,t,c,v.x/2-2.5,v.y/2-2,5,
1);break;case a.CommandEnum.Restart:e.drawImage(a.Resources.hud2ScreenImage,t,b,m,c,v.x/2-1.5,v.y/2-2,3,1)}for(d=0;d<n.length;d+=1)a.CommandEnum.ConfirmYes===n[d].type?e.drawImage(a.Resources.hud2ScreenImage,J,l,c,c,n[d].x,n[d].y,1,1):a.CommandEnum.ConfirmNo===n[d].type&&e.drawImage(a.Resources.hud2ScreenImage,J,t,c,c,n[d].x,n[d].y,1,1)}else{if(V!==a.GameStateEnum.GameWon&&V!==a.GameStateEnum.GameLost){d=v.y-2;e.fillStyle="rgba(0, 0, 0, 0.5)";switch(g.currentLevelStage){case a.LevelStageEnum.TutorialStart:e.fillRect(0,
d,v.x,1);e.drawImage(a.Resources.tooltips2Image,f,f,l,c,v.x/2-2,d,4,1);break;case a.LevelStageEnum.TutorialZombiesComing:1.5<g.tutorialCooldown?(e.fillRect(0,d,v.x,1),e.drawImage(a.Resources.tooltips2Image,f,c,l,c,v.x/2-2,d,4,1)):(d=v.y-3,e.fillRect(0,d,v.x,1),e.drawImage(a.Resources.tooltips2Image,l,f,r,c,v.x/2-3,d,6,1));break;case a.LevelStageEnum.TutorialHitBuildButton:d=v.y-3;e.fillRect(0,d,v.x,1);e.drawImage(a.Resources.tooltips2Image,l,f,r,c,v.x/2-3,d,6,1);d=v.y-2.5;e.drawImage(a.Resources.hud2ScreenImage,
k,r,c,c,v.x/2-1.5-.1*a.getTitleHeartbeat().time,d-.1*a.getTitleHeartbeat().time,1+.2*a.getTitleHeartbeat().time,1+.2*a.getTitleHeartbeat().time);break;case a.LevelStageEnum.TutorialHitCrateButton:d=v.y-3;e.fillRect(0,d,v.x,1);e.drawImage(a.Resources.tooltips2Image,l,c,r,c,v.x/2-3,d,6,1);d=v.y-1.5;e.drawImage(a.Resources.hud2ScreenImage,k,r,c,c,v.x/2-1.5-.1*a.getTitleHeartbeat().time,d-.1*a.getTitleHeartbeat().time,1+.2*a.getTitleHeartbeat().time,1+.2*a.getTitleHeartbeat().time);break;case a.LevelStageEnum.TutorialBuildingFirstCrate:d=
v.y-1;e.fillRect(0,d,v.x,1);e.drawImage(a.Resources.tooltips2Image,f,k,t,c,v.x/2-2.5,d,5,1);break;case a.LevelStageEnum.TutorialTapToContinue:d=v.y-2;e.fillRect(0,d,v.x,1);e.drawImage(a.Resources.tooltips2Image,t,k,l,c,v.x/2-2,d,4,1);d=v.y-1;e.drawImage(a.Resources.tooltips2Image,f,l,m,c,v.x-4,d,3,1);break;case a.LevelStageEnum.TutorialFirstWave:d=v.y-2;e.fillRect(0,d,v.x,1);e.drawImage(a.Resources.tooltips2Image,f,b,b,c,v.x/2-3.5,d,7,1);break;case a.LevelStageEnum.TutorialFirstKill:d=v.y-2;e.fillRect(0,
d,v.x,1);e.drawImage(a.Resources.tooltips4Image,k,c,b,c,v.x/2-3.5,d,7,1);d=v.y-1;e.drawImage(a.Resources.tooltips2Image,f,l,m,c,v.x-4,d,3,1);break;case a.LevelStageEnum.TutorialSelectSurvivalRage:d=v.y-3;e.fillRect(0,d,v.x,1);e.drawImage(a.Resources.tooltips4Image,f,k,J,c,v.x/2-4.5,d,9,1);d=v.y-1;e.drawImage(a.Resources.tooltips4Image,f,c,k,c,v.x/2-1,d,2,1);break;case a.LevelStageEnum.TutorialFirstWaveFinishJob:d=v.y-2;e.fillRect(0,d,v.x,1);e.drawImage(a.Resources.tooltips4Image,f,m,b,c,v.x/2-3.5,
d,7,1);break;case a.LevelStageEnum.TutorialFirstWaveDone:d=v.y-2;e.fillRect(0,d,v.x,1);e.drawImage(a.Resources.tooltips2Image,m,m,b,c,v.x/2-3.5,d,7,1);d=v.y-1;e.drawImage(a.Resources.tooltips2Image,f,l,m,c,v.x-4,d,3,1);break;case a.LevelStageEnum.TutorialReinforceDefenses:d=v.y-3;e.fillRect(0,d,v.x,1);e.drawImage(a.Resources.tooltips2Image,m,l,b,c,v.x/2-3.5,d,7,1);break;case a.LevelStageEnum.TutorialMoreZombiesComing:e.fillRect(0,d,v.x,1);e.drawImage(a.Resources.tooltips2Image,f,t,b,c,v.x/2-3.5,d,
7,1);break;case a.LevelStageEnum.TutorialTurnRight:e.fillRect(0,d,v.x,1);e.drawImage(a.Resources.tooltips2Image,f,r,b,c,v.x/2-3.5,d,7,1);break;case a.LevelStageEnum.TutorialSecondWave:d=v.y-6;e.fillRect(0,d,v.x,1);e.drawImage(a.Resources.tooltips2Image,t,k,l,c,v.x/2-2,d,4,1);break;case a.LevelStageEnum.TutorialSecondWaveDone:e.fillRect(0,d,v.x,1);e.drawImage(a.Resources.tooltips3Image,f,f,C,k,v.x/2-4,d-.5,8,2);d=v.y-1;e.drawImage(a.Resources.tooltips2Image,f,l,m,c,v.x-4,d,3,1);break;case a.LevelStageEnum.TutorialHelpingHand:e.fillRect(0,
d,v.x,1);e.drawImage(a.Resources.tooltips3Image,f,k,C,k,v.x/2-4,d-.5,8,2);d=v.y-1;e.drawImage(a.Resources.tooltips2Image,f,l,m,c,2,d,3,1);break;case a.LevelStageEnum.TutorialTeamCamera:e.fillRect(0,d,v.x,1);e.drawImage(a.Resources.tooltips3Image,f,l,C,c,v.x/2-4,d,8,1);break;case a.LevelStageEnum.TutorialTeamDefenses:e.fillRect(0,d,v.x,1);e.drawImage(a.Resources.tooltips3Image,f,r,C,c,v.x/2-4,d,8,1);e.drawImage(a.Resources.tooltips3Image,C,r,c,k,v.x/2+.05,d-.8,1,2);d=v.y-1;e.drawImage(a.Resources.tooltips2Image,
f,l,m,c,v.x-3,d,3,1);break;case a.LevelStageEnum.TutorialTeamWork:d=v.y-5;e.fillRect(0,d,v.x,1);e.drawImage(a.Resources.tooltips3Image,f,t,C,c,v.x/2-4,d,8,1);break;case a.LevelStageEnum.None:1===g.currentLevel&&(d=v.y-6,e.fillRect(0,d,v.x,1),e.drawImage(a.Resources.tooltips3Image,f,b,C,c,v.x/2-4,d,8,1))}d=1.5;e.fillStyle="rgba(0, 0, 0, 0.5)";switch(g.currentLevelTip){case a.LevelTipEnum.TipOne:d=1.5;e.drawImage(a.Resources.tooltips4Image,c,f,l,c,v.x/2-2-.3*a.getTitleHeartbeat().time,d-.1*a.getTitleHeartbeat().time,
4+.6*a.getTitleHeartbeat().time,1+.2*a.getTitleHeartbeat().time);break;case a.LevelTipEnum.TipTwo:d=.5;e.drawImage(a.Resources.tooltips4Image,f,t,l,c,v.x/2-2-.3*a.getTitleHeartbeat().time,d-.1*a.getTitleHeartbeat().time,4+.6*a.getTitleHeartbeat().time,1+.2*a.getTitleHeartbeat().time);break;case a.LevelTipEnum.TipThree:d=.5;e.drawImage(a.Resources.tooltips4Image,f,l,r,c,v.x/2-3-.3*a.getTitleHeartbeat().time,d-.1*a.getTitleHeartbeat().time,6+.6*a.getTitleHeartbeat().time,1+.2*a.getTitleHeartbeat().time);
break;case a.LevelTipEnum.TipFive:d=.5,10>g.currentLevel?(e.drawImage(a.Resources.tooltips1Image,l,c,k,c,v.x/2-1,d+.1,2,1),a.drawNumber(e,g.currentLevel.toString(),v.x/2-.2,d+.9,1.1)):100>g.currentLevel?(e.drawImage(a.Resources.tooltips1Image,l,c,k,c,v.x/2-1,d+.1,2,1),a.drawNumber(e,g.currentLevel.toString(),v.x/2-.4,d+.9,1.1)):1E3===g.currentLevel?(e.drawImage(a.Resources.tooltips1Image,f,r,l,k,v.x/2-2,d,4,2),e.drawImage(a.Resources.tooltips1Image,l,k,m,k,v.x/2-1.5,d,3,2)):1001===g.currentLevel&&
(e.drawImage(a.Resources.tooltips1Image,f,r,l,k,v.x/2-2,d,4,2),e.drawImage(a.Resources.tooltips1Image,l,l,m,k,v.x/2-1.5,d,3,2))}e.drawImage(a.Resources.hud2ScreenImage,C,r,k,c,-.1,-.1,2,1);e.save();e.translate(-g.survivalPointsZoomTime,-g.survivalPointsZoomTime);e.scale(1+g.survivalPointsZoomTime,1+g.survivalPointsZoomTime);d=g.survivalPoints.toString();1===d.length?a.drawNumber(e,d,.65,.3,1.2):2===d.length?a.drawNumber(e,d,.5,.3,1.2):3===d.length?a.drawNumber(e,d,.35,.3,1.2):3<d.length&&a.drawNumber(e,
d,.2,.3,1.2);e.restore();d=1E3===g.currentLevel||1001===g.currentLevel?1001===g.currentLevel?g.daysCount.toString():g.killCount.toString():"";""!==d&&(p=0,e.drawImage(a.Resources.hud2ScreenImage,C,b,k,c,-.1,.9,2,1),1===d.length?p=.65:2===d.length?p=.5:3===d.length?p=.35:3<d.length&&(p=.2),a.drawNumber(e,d,p,1.3,1.2),1E3===g.currentLevel?e.drawImage(a.Resources.hud3ScreenImage,C,c,c,c,1.55-p,1.3,1,1):e.drawImage(a.Resources.hud3ScreenImage,J,c,c,c,1.55-p,1.3,1,1))}else V===a.GameStateEnum.GameWon?
!1===g.rewardItem.won&&(e.fillStyle="rgba(0, 0, 0, 0.5)",e.fillRect(0,v.y/2+1,v.x,1),e.drawImage(a.Resources.hud2ScreenImage,m,r,t,c,v.x/2-2.5,v.y/2+1,5,1)):V===a.GameStateEnum.GameLost&&(d=v.x/2-3.5,p=v.y/2-2,e.save(),e.translate(d,p),e.rotate(-.2),e.translate(-d,-p),e.drawImage(a.Resources.hud1ScreenImage,b,b,m,c,d,p,3,1),e.restore(),1E3===g.currentLevel||1001===g.currentLevel)&&(e.drawImage(a.Resources.tooltips1Image,f,r,l,k,v.x/2-2,1.45,4,2),e.drawImage(a.Resources.effectsImage,k,m,m,c,v.x/2-
1.5,1.5,3,1),d=1E3===g.currentLevel?g.killCount.toString():g.daysCount.toString(),p=0,1===d.length?p=.3:2===d.length?p=.45:3===d.length?p=.6:3<d.length&&(p=.75),a.drawNumber(e,d,v.x/2-p,2.4,1.2),1E3===g.currentLevel?(e.drawImage(a.Resources.hud3ScreenImage,C,c,c,c,v.x/2+p-.3,2.4,1,1),g.killCount===a.getSavedData().killCountHighScore&&e.drawImage(a.Resources.effectsImage,t,m,c,c,v.x/2+1,2.5,1,1)):(e.drawImage(a.Resources.hud3ScreenImage,J,c,c,c,v.x/2+p-.3,2.4,1,1),g.daysCount===a.getSavedData().daysCountHighScore&&
e.drawImage(a.Resources.effectsImage,t,m,c,c,v.x/2+1,2.5,1,1)));a.drawEntityMarkers(e,g);p=g.primaryWeaponAssignmentDone&&g.secondaryWeaponAssignmentDone&&g.newItem===a.StackObjectTypeEnum.None;for(d=0;d<n.length;d+=1)if(n[d].enabled||n[d].x!==n[d].tx||n[d].y!==n[d].ty)if(a.CommandEnum.Menu===n[d].type)e.drawImage(a.Resources.hud2ScreenImage,m,t,c,c,n[d].x,n[d].y,1,1);else if(a.CommandEnum.Restart===n[d].type)e.drawImage(a.Resources.hud2ScreenImage,m,l,c,c,n[d].x,n[d].y,1,1);else if(a.CommandEnum.NextLevel===
n[d].type)e.drawImage(a.Resources.hud2ScreenImage,f,r,c,c,n[d].x,n[d].y,1,1);else if(a.CommandEnum.ToggleAdrenaline===n[d].type)p&&(n[d].x===n[d].tx&&n[d].y===n[d].ty||g.survivalRageTime)&&(g.survivalRageTime?(e.drawImage(a.Resources.hud2ScreenImage,C,m,c,c,n[d].x-.15*a.getTitleHeartbeat().time,n[d].y-.15*a.getTitleHeartbeat().time,1+.3*a.getTitleHeartbeat().time,1+.3*a.getTitleHeartbeat().time),n[d].x===n[d].tx&&n[d].y===n[d].ty&&a.drawNumber(e,g.survivalRageTime.toFixed(0).toString(),n[d].x+.75,
n[d].y+.35,1)):g.survivalPoints>=g.minSurvivalPoints&&e.drawImage(a.Resources.hud2ScreenImage,C,m,c,c,n[d].x-.1*a.getTitleHeartbeat().time,n[d].y-.1*a.getTitleHeartbeat().time,1+.2*a.getTitleHeartbeat().time,1+.2*a.getTitleHeartbeat().time));else if(a.CommandEnum.CancelAction===n[d].type)p&&(n[d].direction===a.DirectionEnum.Left&&0<g.leftPlayer.buildData.cooldown?e.drawImage(a.Resources.hud2ScreenImage,J,m,c,c,n[d].x,n[d].y,1,1):n[d].direction===a.DirectionEnum.Right&&0<g.rightPlayer.buildData.cooldown&&
e.drawImage(a.Resources.hud2ScreenImage,J,m,c,c,n[d].x,n[d].y,1,1));else if(a.CommandEnum.SelectStackObject===n[d].type||a.CommandEnum.ShowStackObjects===n[d].type){if(p){R=null;X=n[d].direction===a.DirectionEnum.Left?g.leftPlayer.buildData:g.rightPlayer.buildData;R=a.CommandEnum.SelectStackObject===n[d].type?n[d].stackObjectType:X.stackObjectType;R===a.StackObjectTypeEnum.RepairCrate&&a.CommandEnum.SelectStackObject===n[d].type&&(W=n[d].direction===a.DirectionEnum.Left?g.leftPlayer:g.rightPlayer,
0>=g.repairKits||!(0<W.stack.objects.length&&W.stack.objects[0].strength<g.getStackObjectStrength(W.stack.objects[0].type)))&&(e.globalAlpha=.3);if(R===a.StackObjectTypeEnum.MetalCrate||R===a.StackObjectTypeEnum.WoodCrate)W=n[d].direction===a.DirectionEnum.Left?g.leftPlayer:g.rightPlayer,W.stack.objects.length===g.maxStackSize&&(e.globalAlpha=.3);(n[d].stackObjectType===a.StackObjectTypeEnum.DoubleWoodCrate||n[d].stackObjectType===a.StackObjectTypeEnum.DoubleMetalCrate||n[d].stackObjectType===a.StackObjectTypeEnum.MountedCrate||
n[d].stackObjectType===a.StackObjectTypeEnum.SpikeCrate||n[d].stackObjectType===a.StackObjectTypeEnum.TNTCrate)&&40>g.survivalPoints&&(e.globalAlpha=.3);R!==a.StackObjectTypeEnum.None&&(n[d].selected?e.drawImage(a.Resources.hud2ScreenImage,C,c,c,c,n[d].x,n[d].y,1,1):e.drawImage(a.Resources.hud2ScreenImage,C,f,c,c,n[d].x,n[d].y,1,1));switch(R){case a.StackObjectTypeEnum.None:e.save();n[d].direction===a.DirectionEnum.Left&&(e.translate(2*n[d].x+1,0),e.scale(-1,1));n[d].selected?e.drawImage(a.Resources.hud2ScreenImage,
k,m,c,c,n[d].x,n[d].y,1,1):e.drawImage(a.Resources.hud2ScreenImage,k,k,c,c,n[d].x,n[d].y,1,1);e.restore();break;case a.StackObjectTypeEnum.WoodCrate:e.drawImage(a.Resources.objectsImage,f,f,c,c,n[d].x+.15,n[d].y+.15,.7*n[d].size,.7*n[d].size);break;case a.StackObjectTypeEnum.SpikeCrate:e.drawImage(a.Resources.objectsImage,k,m,c,c,n[d].x+.18,n[d].y+.1,.7*n[d].size,.7*n[d].size);break;case a.StackObjectTypeEnum.TNTCrate:e.drawImage(a.Resources.objectsImage,k,k,c,c,n[d].x+.15,n[d].y+.15,.7*n[d].size,
.7*n[d].size);break;case a.StackObjectTypeEnum.MetalCrate:e.drawImage(a.Resources.objectsImage,f,c,c,c,n[d].x+.15,n[d].y+.15,.7*n[d].size,.7*n[d].size);break;case a.StackObjectTypeEnum.MountedCrate:e.drawImage(a.Resources.objectsImage,k,l,c,c,n[d].x+.12,n[d].y+.11,.8*n[d].size,.8*n[d].size);break;case a.StackObjectTypeEnum.RepairCrate:e.drawImage(a.Resources.hud1ScreenImage,b,t,c,c,n[d].x+.1,n[d].y+.1,.8*n[d].size,.8*n[d].size);a.drawNumber(e,g.repairKits.toString(),n[d].x+.3,n[d].y-.7,.7);break;
case a.StackObjectTypeEnum.DoubleMetalCrate:e.drawImage(a.Resources.objectsImage,c,k,c,c,n[d].x+.15,n[d].y+.1,.8*n[d].size,.8*n[d].size);break;case a.StackObjectTypeEnum.DoubleWoodCrate:e.drawImage(a.Resources.objectsImage,f,k,c,c,n[d].x+.15,n[d].y+.1,.8*n[d].size,.8*n[d].size)}e.globalAlpha=1;a.CommandEnum.ShowStackObjects===n[d].type&&(e.save(),e.beginPath(),e.arc(n[d].x+.02+.5*n[d].size,n[d].y+.5*n[d].size,.46*n[d].size,0,2*Math.PI,!0),e.closePath(),e.clip(),e.fillStyle="rgba(0, 0, 0, 0.5)",R=
g.getStackObjectCreationTime(X.stackObjectType),e.fillRect(n[d].x,n[d].y+(R-X.cooldown)*n[d].size/R,n[d].size,n[d].size),e.restore())}}else if(a.CommandEnum.AssignWeapon===n[d].type){if(n[d].enabled){e.save();n[d].direction===a.DirectionEnum.Left&&(e.translate(2*n[d].x+1,0),e.scale(-1,1));e.translate(0,.1*a.getTitleHeartbeat().time);e.drawImage(a.Resources.hud2ScreenImage,n[d].selected?C:J,f,c,c,n[d].x,n[d].y,1,1);switch(n[d].weaponType){case a.WeaponTypeEnum.Rifle:e.drawImage(a.Resources.objectsImage,
c,n[d].selected?r:t,c,c,n[d].x-.1,n[d].y-.1,1.2*n[d].size,1.2*n[d].size);break;case a.WeaponTypeEnum.ShotGun:e.drawImage(a.Resources.objectsImage,k,n[d].selected?r:t,c,c,n[d].x-.1,n[d].y-.1,1.2*n[d].size,1.2*n[d].size);break;case a.WeaponTypeEnum.AutoRifle:e.drawImage(a.Resources.objectsImage,m,n[d].selected?r:t,c,c,n[d].x-.1,n[d].y-.1,1.2*n[d].size,1.2*n[d].size);break;case a.WeaponTypeEnum.AutoShotGun:e.drawImage(a.Resources.objectsImage,l,n[d].selected?r:t,c,c,n[d].x-.1,n[d].y-.1,1.2*n[d].size,
1.2*n[d].size);break;case a.WeaponTypeEnum.Uzi:e.drawImage(a.Resources.objectsImage,t,n[d].selected?r:t,c,c,n[d].x-.1,n[d].y-.1,1.2*n[d].size,1.2*n[d].size);break;case a.WeaponTypeEnum.Rpg:e.drawImage(a.Resources.objectsImage,r,n[d].selected?r:t,c,c,n[d].x-.1,n[d].y-.1,1.2*n[d].size,1.2*n[d].size)}n[d].locked&&e.drawImage(a.Resources.hud1ScreenImage,C,t,c,c,n[d].x,n[d].y,n[d].size,n[d].size);e.restore()}}else if(n[d].enabled&&a.CommandEnum.CrateSelectionDone===n[d].type)e.drawImage(a.Resources.hud2ScreenImage,
l,l,c,c,n[d].x,n[d].y,1,1);else if(n[d].enabled&&a.CommandEnum.RewardAccepted===n[d].type){e.save();e.translate(0,.5);e.drawImage(a.Resources.tooltips5Image,f,f,t,l,n[d].x-2,n[d].y-4,5,4);g.rewardItem.crate!==a.StackObjectTypeEnum.CriticalChance?e.drawImage(a.Resources.tooltips5Image,l,t,m,c,n[d].x-1,n[d].y-4.2,3,1):e.drawImage(a.Resources.tooltips2Image,b,t,m,c,n[d].x-1,n[d].y-4.2,3,1);switch(g.rewardItem.crate){case a.StackObjectTypeEnum.RepairCrate:e.drawImage(a.Resources.tooltips5Image,t,f,k,
c,n[d].x-.5,n[d].y-3.6,2,1);e.drawImage(a.Resources.hud1ScreenImage,b,t,c,c,n[d].x,n[d].y-2.7,1,1);e.drawImage(a.Resources.tooltips5Image,f,l,l,c,n[d].x-1.5,n[d].y-1.4,4,1);break;case a.StackObjectTypeEnum.MetalCrate:e.drawImage(a.Resources.tooltips5Image,t,c,k,c,n[d].x-.5,n[d].y-3.6,2,1);e.drawImage(a.Resources.objectsImage,f,c,c,c,n[d].x,n[d].y-2.6,1,1);e.drawImage(a.Resources.tooltips5Image,f,t,l,c,n[d].x-1.5,n[d].y-1.4,4,1);break;case a.StackObjectTypeEnum.SpikeCrate:e.drawImage(a.Resources.tooltips5Image,
t,k,k,c,n[d].x-.5,n[d].y-3.6,2,1);e.drawImage(a.Resources.objectsImage,k,m,c,c,n[d].x,n[d].y-2.7,1,1);e.drawImage(a.Resources.tooltips5Image,f,r,l,c,n[d].x-1.5,n[d].y-1.4,4,1);break;case a.StackObjectTypeEnum.TNTCrate:e.drawImage(a.Resources.tooltips5Image,t,m,k,c,n[d].x-.5,n[d].y-3.6,2,1);e.drawImage(a.Resources.objectsImage,k,k,c,c,n[d].x,n[d].y-2.6,1,1);e.drawImage(a.Resources.tooltips5Image,f,b,l,c,n[d].x-1.5,n[d].y-1.4,4,1);break;case a.StackObjectTypeEnum.MountedCrate:e.drawImage(a.Resources.tooltips5Image,
t,l,k,c,n[d].x-.5,n[d].y-3.6,2,1);e.drawImage(a.Resources.objectsImage,k,l,c,c,n[d].x-.05,n[d].y-2.6,1.1,1.1);e.drawImage(a.Resources.tooltips5Image,f,r,l,c,n[d].x-1.5,n[d].y-1.4,4,1);break;case a.StackObjectTypeEnum.Challenge1:e.drawImage(a.Resources.tooltips5Image,C,r,k,c,n[d].x-.5,n[d].y-3.7,2,1);e.drawImage(a.Resources.hud2ScreenImage,t,k,k,k,n[d].x-.15,n[d].y-2.8,1.4,1.4);e.drawImage(a.Resources.tooltips1Image,l,f,l,c,n[d].x-1.5,n[d].y-1.4,4,1);break;case a.StackObjectTypeEnum.Challenge2:e.drawImage(a.Resources.tooltips5Image,
C,r,k,c,n[d].x-.5,n[d].y-3.7,2,1);e.drawImage(a.Resources.hud2ScreenImage,m,k,k,k,n[d].x-.15,n[d].y-2.8,1.4,1.4);e.drawImage(a.Resources.tooltips1Image,l,f,l,c,n[d].x-1.5,n[d].y-1.4,4,1);break;case a.StackObjectTypeEnum.CriticalChance:e.drawImage(a.Resources.tooltips2Image,b,r,m,c,n[d].x-1,n[d].y-3.7,3,1);e.drawImage(a.Resources.tooltips1Image,b,k,k,k,n[d].x-.15,n[d].y-2.8,1.4,1.4);e.drawImage(a.Resources.tooltips1Image,b,c,m,c,n[d].x-1,n[d].y-1.4,3,1);break;case a.StackObjectTypeEnum.DoubleMetalCrate:e.drawImage(a.Resources.tooltips5Image,
C,b,k,c,n[d].x-.5,n[d].y-3.6,2,1);e.drawImage(a.Resources.objectsImage,c,k,c,c,n[d].x,n[d].y-2.7,1.1,1.1);e.drawImage(a.Resources.tooltips5Image,f,r,l,c,n[d].x-1.5,n[d].y-1.4,4,1);break;case a.StackObjectTypeEnum.DoubleWoodCrate:e.drawImage(a.Resources.tooltips5Image,C,b,k,c,n[d].x-.5,n[d].y-3.6,2,1),e.drawImage(a.Resources.objectsImage,f,k,c,c,n[d].x,n[d].y-2.7,1.1,1.1),e.drawImage(a.Resources.tooltips5Image,f,r,l,c,n[d].x-1.5,n[d].y-1.4,4,1)}switch(g.rewardItem.weapon){case a.WeaponTypeEnum.ShotGun:e.drawImage(a.Resources.tooltips5Image,
b,f,k,c,n[d].x-.5,n[d].y-3.6,2,1);e.drawImage(a.Resources.tooltips4Image,k,r,k,c,n[d].x-.45,n[d].y-2.6,2,1);e.drawImage(a.Resources.tooltips1Image,f,m,l,c,n[d].x-1.5,n[d].y-1.4,4,1);break;case a.WeaponTypeEnum.AutoRifle:e.drawImage(a.Resources.tooltips5Image,b,k,k,c,n[d].x-.5,n[d].y-3.6,2,1);e.drawImage(a.Resources.tooltips4Image,l,r,k,c,n[d].x-.45,n[d].y-2.6,2,1);e.drawImage(a.Resources.tooltips1Image,f,c,l,c,n[d].x-1.5,n[d].y-1.4,4,1);break;case a.WeaponTypeEnum.AutoShotGun:e.drawImage(a.Resources.tooltips5Image,
b,c,k,c,n[d].x-.5,n[d].y-3.6,2,1);e.drawImage(a.Resources.tooltips4Image,r,r,k,c,n[d].x-.45,n[d].y-2.6,2,1);e.drawImage(a.Resources.tooltips1Image,f,k,l,c,n[d].x-1.5,n[d].y-1.4,4,1);break;case a.WeaponTypeEnum.Rpg:e.drawImage(a.Resources.tooltips5Image,b,m,k,c,n[d].x-.5,n[d].y-3.6,2,1),e.drawImage(a.Resources.tooltips4Image,k,b,k,c,n[d].x-.45,n[d].y-2.6,2,1),e.drawImage(a.Resources.tooltips1Image,f,l,l,c,n[d].x-1.5,n[d].y-1.4,4,1)}e.restore()}else if(n[d].enabled&&a.CommandEnum.Ready===n[d].type)switch(e.save(),
e.translate(0,.2*-a.getTitleHeartbeat().time),g.primaryWeaponAssignmentDone?g.secondaryWeaponAssignmentDone||e.drawImage(a.Resources.hud2ScreenImage,t,t,l,c,n[d].x-1.5,.1,4,1):e.drawImage(a.Resources.hud2ScreenImage,t,l,l,c,n[d].x-1.5,.1,4,1),e.restore(),e.drawImage(a.Resources.tooltips1Image,f,r,l,k,n[d].x-1.5,n[d].y-1.5,4,2),e.drawImage(a.Resources.hud2ScreenImage,l,g.primaryWeaponAssignmentDone||g.secondaryWeaponAssignmentDone?t:l,c,c,n[d].x,n[d].y,1,1),g.selectedWeaponType){case a.WeaponTypeEnum.Rifle:e.drawImage(a.Resources.tooltips5Image,
b,t,k,c,n[d].x-.5,n[d].y-1.7,2,1);e.drawImage(a.Resources.tooltips1Image,f,t,l,c,n[d].x-1.5,n[d].y-1,4,1);break;case a.WeaponTypeEnum.ShotGun:e.drawImage(a.Resources.tooltips5Image,b,f,k,c,n[d].x-.5,n[d].y-1.7,2,1);e.drawImage(a.Resources.tooltips1Image,f,m,l,c,n[d].x-1.5,n[d].y-1,4,1);break;case a.WeaponTypeEnum.AutoRifle:e.drawImage(a.Resources.tooltips5Image,b,k,k,c,n[d].x-.5,n[d].y-1.7,2,1);e.drawImage(a.Resources.tooltips1Image,f,c,l,c,n[d].x-1.5,n[d].y-1,4,1);break;case a.WeaponTypeEnum.AutoShotGun:e.drawImage(a.Resources.tooltips5Image,
b,c,k,c,n[d].x-.5,n[d].y-1.7,2,1);e.drawImage(a.Resources.tooltips1Image,f,k,l,c,n[d].x-1.5,n[d].y-1,4,1);break;case a.WeaponTypeEnum.Uzi:e.drawImage(a.Resources.tooltips5Image,b,l,k,c,n[d].x-.5,n[d].y-1.7,2,1);e.drawImage(a.Resources.tooltips1Image,f,f,l,c,n[d].x-1.5,n[d].y-1,4,1);break;case a.WeaponTypeEnum.Rpg:e.drawImage(a.Resources.tooltips5Image,b,m,k,c,n[d].x-.5,n[d].y-1.7,2,1);e.drawImage(a.Resources.tooltips1Image,f,l,l,c,n[d].x-1.5,n[d].y-1,4,1);break;case a.WeaponTypeEnum.None:e.drawImage(a.Resources.tooltips1Image,
l,r,l,k,n[d].x-1.5,n[d].y-1.5,4,2)}}}0<a.getAchievementDialogTime()&&a.drawAchievementToaster(e,v)}0<a.getLockedDialogTime()&&(d=V===a.GameStateEnum.GameRun?0:-2.7,V=V===a.GameStateEnum.GameRun?0:1.5,e.globalAlpha=Math.min(1,a.getLockedDialogTime()),e.drawImage(a.Resources.tooltips1Image,f,r,l,k,v.x/2-2+d,v.y/2-1+V,4,2),e.drawImage(a.Resources.tooltips5Image,l,r,l,k,v.x/2-2+d,v.y/2-1+V,4,2),e.globalAlpha=1)};a.drawAchievementToaster=function(e,g){var p=a.getAchievementDialogMaxTime(),A=-1.5,A=a.getAchievementDialogTime()>
p-.5?-1.5+4*(p-a.getAchievementDialogTime()):.5>a.getAchievementDialogTime()?.5-4*(.5-a.getAchievementDialogTime()):.5;e.drawImage(a.Resources.objectsImage,r,m,l,k,g.x/2-2,A,4,2);var u=p=0;switch(a.getAchievementId()){case 0:p=u=f;break;case 1:u=f;p=c;break;case 2:u=f;p=k;break;case 3:u=f;p=m;break;case 4:u=f;p=l;break;case 5:u=f;p=t;break;case 6:u=f;p=r;break;case 7:u=f;p=b;break;case 8:u=l;p=f;break;case 9:u=l;p=c;break;case 10:u=l;p=k;break;case 11:u=l;p=m;break;case 12:p=u=l;break;case 13:u=l;
p=t;break;case 14:u=l,p=r}e.drawImage(a.Resources.hud3ScreenImage,u,p,l,.36*c,g.x/2-2,A+1.2,4,.36)};a.drawNumber=function(b,g,f,m,r){var t,d=f;b.save();b.translate(f+.05,m+.5);b.scale(r,r);b.translate(-(f+.05),-(m+.5));f=0;for(r=g.length;f<r;f+=1)t=g.charAt(f),t=parseInt(t,10)*l*.1,b.drawImage(a.Resources.hud2ScreenImage,k+t,c,.1*l,c,d,m,.4,1),d+=.25;b.restore()};a.drawEffect=function(e,g){var p=e.globalAlpha;e.save();g.direction===a.DirectionEnum.Left&&(e.translate(2*g.x,0),e.scale(-1,1));e.translate(g.x,
g.y);e.rotate(g.angle);e.translate(-g.x,-g.y);g.selfDestroyTime<g.startFadeTime&&(e.globalAlpha=g.selfDestroyTime);switch(g.type){case a.EffectTypeEnum.Warhead:e.drawImage(a.Resources.objectsImage,r,k,k,c,g.x-1,g.y-.5,2,1);break;case a.EffectTypeEnum.Bullet:e.drawImage(a.Resources.effectsImage,f,f,c,c,g.x-.5,g.y-.5,1,1);break;case a.EffectTypeEnum.MultiBullet:e.drawImage(a.Resources.effectsImage,t,c,c,c,g.x-.5,g.y-.5,1,1);break;case a.EffectTypeEnum.HeadLimb:e.drawImage(a.Resources.effectsImage,c,
f,c,c,g.x-.5,g.y-.5,1,1);break;case a.EffectTypeEnum.BodyLimb1:e.drawImage(a.Resources.effectsImage,k,f,c,c,g.x-.5,g.y-.5,1,1);break;case a.EffectTypeEnum.BodyLimb2:e.drawImage(a.Resources.effectsImage,m,f,c,c,g.x-.5,g.y-.5,1,1);break;case a.EffectTypeEnum.BloodSplatter:e.drawImage(a.Resources.effectsImage,l,f,c,c,g.x-.5,g.y-.5,1,1);break;case a.EffectTypeEnum.GunFire:e.drawImage(a.Resources.effectsImage,b,f,c,c,g.x-.5,g.y-.5,1,1);break;case a.EffectTypeEnum.CartridgeCase:e.drawImage(a.Resources.effectsImage,
b,f,c,c,g.x-.5,g.y-.5,1,1);break;case a.EffectTypeEnum.SmallSmoke:e.drawImage(a.Resources.effectsImage,f,c,c,c,g.x-.5,g.y-.5,1,1);break;case a.EffectTypeEnum.Impact:e.drawImage(a.Resources.effectsImage,t,f,c,c,g.x-.5,g.y-.5,1,1);break;case a.EffectTypeEnum.BigSmoke:.5<g.selfDestroyTime?e.drawImage(a.Resources.effectsImage,f,c,c,c,g.x-1,g.y-1,2,2):e.drawImage(a.Resources.effectsImage,c,c,k,k,g.x-2,g.y-2,4,4);break;case a.EffectTypeEnum.Explosion:.5<g.selfDestroyTime?e.drawImage(a.Resources.effectsImage,
m,c,k,k,g.x-1,g.y-1,2,2):e.drawImage(a.Resources.effectsImage,m,c,k,k,g.x-2,g.y-2,4,4);break;case a.EffectTypeEnum.GainSP:e.drawImage(a.Resources.effectsImage,f,l,c,c,g.x-.5-.5*g.selfDestroyTime,g.y-.5-.5*g.selfDestroyTime,1+1*g.selfDestroyTime,1+1*g.selfDestroyTime);break;case a.EffectTypeEnum.GainMoreSP:e.drawImage(a.Resources.effectsImage,c,l,c,c,g.x-.5-.5*g.selfDestroyTime,g.y-.5-.5*g.selfDestroyTime,1+1*g.selfDestroyTime,1+1*g.selfDestroyTime);break;case a.EffectTypeEnum.Critical:e.drawImage(a.Resources.effectsImage,
f,t,k,c,g.x-1-.5*g.selfDestroyTime,g.y-.5-.5*g.selfDestroyTime,2+1*g.selfDestroyTime,1+1*g.selfDestroyTime);break;case a.EffectTypeEnum.Checkpoint:e.drawImage(a.Resources.effectsImage,k,l,m,c,g.x-1.5-.5*g.selfDestroyTime,g.y-.5-.5*g.selfDestroyTime,3+1*g.selfDestroyTime,1+1*g.selfDestroyTime);break;case a.EffectTypeEnum.HighScore:e.drawImage(a.Resources.effectsImage,k,t,m,c,g.x-1.5-.5*g.selfDestroyTime,g.y-.5-.5*g.selfDestroyTime,3+1*g.selfDestroyTime,1+1*g.selfDestroyTime)}e.globalAlpha=p;e.restore()};
a.drawStackObject=function(b,g,p,r){if(r.visible){b.save();b.translate(g,r.y);b.rotate(r.angle);b.translate(-g,-r.y);var t=!0;if(p===a.DirectionEnum.Right||r.direction===a.DirectionEnum.Right)t=!1,b.translate(2*g,0),b.scale(-1,1);switch(r.type){case a.StackObjectTypeEnum.WoodCrate:3<=r.strength?b.drawImage(a.Resources.objectsImage,f,f,c,c,g-.6,r.y-.6,1.2,1.2):1<=r.strength?b.drawImage(a.Resources.objectsImage,c,f,c,c,g-.6,r.y-.6,1.2,1.2):0<=r.strength&&b.drawImage(a.Resources.objectsImage,k,f,c,c,
g-.6,r.y-.6,1.2,1.2);break;case a.StackObjectTypeEnum.SpikeCrate:b.drawImage(a.Resources.objectsImage,k,m,c,c,g-.6,r.y-.6,1.2,1.2);break;case a.StackObjectTypeEnum.TNTCrate:b.drawImage(a.Resources.objectsImage,k,k,c,c,g-.6,r.y-.6,1.2,1.2);break;case a.StackObjectTypeEnum.MetalCrate:6<=r.strength?b.drawImage(a.Resources.objectsImage,f,c,c,c,g-.6,r.y-.6,1.2,1.2):3<=r.strength?b.drawImage(a.Resources.objectsImage,c,c,c,c,g-.6,r.y-.6,1.2,1.2):0<=r.strength&&b.drawImage(a.Resources.objectsImage,k,c,c,
c,g-.6,r.y-.6,1.2,1.2);break;case a.StackObjectTypeEnum.MountedCrate:b.save(),b.drawImage(a.Resources.objectsImage,c,l,c,c,g-.5,r.y-.5,1,1),0!==r.firingAngle&&(b.translate(g,r.y),b.rotate(t?r.firingAngle:Math.PI-r.firingAngle),b.translate(-g,-r.y+.9),b.translate(2*g,0),b.scale(-1,1)),b.translate(r.firingRecoilTime,0),b.drawImage(a.Resources.objectsImage,f,m,k,c,g-1,r.y-1,2,1),b.restore()}r.selected&&(b.drawImage(a.Resources.objectsImage,J,f,c,c,g-.6,r.y-.6,1,1),b.translate(2*g,0),b.scale(-1,1),b.drawImage(a.Resources.objectsImage,
J,f,c,c,g-.6,r.y-.6,1,1));b.restore()}};a.drawPlayer=function(b,c){if(c.weapons[a.WeaponCategoryEnum.Primary]!==a.WeaponTypeEnum.None)switch(b.save(),0<c.buildData.cooldown?c.buildDirection===a.DirectionEnum.Left&&(b.translate(2*c.x,0),b.scale(-1,1)):c.direction===a.DirectionEnum.Left&&(b.translate(2*c.x,0),b.scale(-1,1)),b.translate(c.x,c.y),b.scale(c.scaleFactor,c.scaleFactor),b.translate(-c.x,-c.y-.15),1!==c.scaleFactor&&b.translate(0,.2),c.classType){case a.EntityClassTypeEnum.HumanFemale:c.isDead?
a.drawDeadHumanFemale(b,c):a.drawHumanFemale(b,c);break;case a.EntityClassTypeEnum.HumanMale:c.isDead?a.drawDeadHumanMale(b,c):a.drawHumanMale(b,c)}b.restore()};a.drawEntity=function(e,g){e.save();g.direction===a.DirectionEnum.Left&&(e.translate(2*g.x,0),e.scale(-1,1));e.translate(g.x,g.y);e.scale(g.scaleFactor,g.scaleFactor);e.translate(-g.x,-g.y-.2);e.drawImage(a.Resources.entitiesImage,f,b,c,c,g.x-g.radius-.05,g.y+g.radius-.05,1,1);switch(g.state){case a.EntityStateEnum.Idle:a.drawIdleEntity(e,
g);break;case a.EntityStateEnum.Walking:a.drawWalkingEntity(e,g)}e.restore();g.drawHitPoints&&(e.fillStyle="black",e.fillRect(g.x-.15,g.y-1.2,.3,.1),e.fillStyle="red",e.fillRect(g.x-.15,g.y-1.2,.3*g.hitPoints/g.maxHitPoints,.1))};a.drawEntityMarkers=function(b,g){for(var p=a.screenToHud({x:a.getCanvasWidth(),y:a.getCanvasHeight()}),A=-.5,u=-.5,y=0,d=g.entities.length-1;0<=d;--d){var w=g.entities[d];if(w.offScreenDirection!==a.DirectionEnum.None){b.save();w.offScreenDirection===a.DirectionEnum.Left?
(A++,y=.25*A):(u++,y=p.x-.25*u,b.translate(2*y,0),b.scale(-1,1));b.drawImage(a.Resources.entitiesImage,f,f,c,c,y,4.13,.8,.8);switch(w.headStyle){case a.HeadStyleEnum.Punk:b.drawImage(a.Resources.entitiesImage,f,l,c,c,y,4.03,.8,.8);break;case a.HeadStyleEnum.Bandaged:b.drawImage(a.Resources.entitiesImage,c,l,c,c,y,4.03,.8,.8);break;case a.HeadStyleEnum.Police:b.drawImage(a.Resources.entitiesImage,k,l,c,c,y,4.03,.8,.8);break;case a.HeadStyleEnum.Tourist:b.drawImage(a.Resources.entitiesImage,m,l,c,c,
y,4.03,.8,.8);break;case a.HeadStyleEnum.Bandit:b.drawImage(a.Resources.entitiesImage,l,l,c,c,y,4.03,.8,.8);break;case a.HeadStyleEnum.Mexican:b.drawImage(a.Resources.entitiesImage,t,l,c,c,y,4.03,.8,.8)}b.restore()}}0===a.getTitleHeartbeat().direction&&(-.5!==A&&b.drawImage(a.Resources.hud2ScreenImage,c,r,c,c,0,3.63,1,1),-.5!==u&&(b.save(),b.translate(2*p.x,0),b.scale(-1,1),b.drawImage(a.Resources.hud2ScreenImage,c,r,c,c,p.x,3.63,1,1),b.restore()))};a.drawDeadHumanMale=function(b,g){b.save();var p=
.03*g.heartBeats[0].time,t=g.x-.5,u=g.y-.5;b.drawImage(a.Resources.entitiesImage,C,k,k,k,t,u,2,2);t=g.x-1.5;u=g.y-.5;b.translate(g.weaponOffset.x,g.weaponOffset.y+.5);0===g.reloadCooldown?(b.translate(g.x,g.y),0===g.firingCooldown?(b.rotate(-.3),b.translate(-g.x,-g.y-.1)):(b.rotate(g.direction===a.DirectionEnum.Left&&0!==g.firingAngle?Math.PI-g.firingAngle:g.firingAngle),b.translate(-g.x,-g.y)),0!==g.firingCooldown&&b.translate(-g.firingRecoilTime,0)):(b.translate(g.x,g.y),b.rotate(7*-g.reloadCooldown*
Math.PI),b.translate(-g.x,-g.y));switch(g.weapons[g.currentWeaponCategory]){case a.WeaponTypeEnum.Rifle:b.drawImage(a.Resources.objectsImage,m,f,m,c,t,u-p,3,1-p);break;case a.WeaponTypeEnum.ShotGun:b.drawImage(a.Resources.objectsImage,m,c,m,c,t,u-p,3,1-p);break;case a.WeaponTypeEnum.AutoRifle:b.drawImage(a.Resources.objectsImage,m,k,m,c,t,u-p,3,1-p);break;case a.WeaponTypeEnum.AutoShotGun:b.drawImage(a.Resources.objectsImage,m,m,m,c,t,u-p,3,1-p);break;case a.WeaponTypeEnum.Uzi:b.drawImage(a.Resources.objectsImage,
m,l,m,c,t,u-p,3,1-p);break;case a.WeaponTypeEnum.Rpg:0===g.firingRecoilTime&&2.5>g.firingCooldown&&b.drawImage(a.Resources.objectsImage,r,k,k,c,t+1.2,u-p-.2,2,1-p),b.drawImage(a.Resources.objectsImage,r,c,m,c,t,u-p,3,1-p)}b.restore()};a.drawHumanMale=function(e,g){e.save();var p=.03*g.heartBeats[0].time,t=g.heartBeats[2].time,u=1>g.heartBeats[1].time,y=g.currentWeaponCategory===a.WeaponCategoryEnum.Secondary?6:5,d=g.x-.5,w=g.y-.5;if(0<g.buildData.cooldown)e.drawImage(a.Resources.entitiesImage,m,c,
c,c,d,w+.3,1,1),g.currentWeaponCategory===a.WeaponCategoryEnum.Secondary?(e.drawImage(a.Resources.entitiesImage,l,c,c,c,d,w-.2+.1*g.heartBeats[y].time,1,1),e.drawImage(a.Resources.entitiesImage,r,c,k,c,d-.52,w-.2-.14+.1*g.heartBeats[y].time,2,1)):(e.drawImage(a.Resources.entitiesImage,k,c,c,c,d,w-.15+.1*g.heartBeats[y].time,1,1),e.drawImage(a.Resources.entitiesImage,r,c,k,c,d-.52,w-.15-.14+.1*g.heartBeats[y].time,2,1)),e.save(),e.translate(.25,.52),e.translate(g.x,g.y),e.rotate(.2),e.translate(-g.x,
-g.y),e.drawImage(a.Resources.entitiesImage,b,f,c,c,d,w,1,1),e.restore(),e.drawImage(a.Resources.entitiesImage,r,f,c,c,d-.24,w+.52,1,1),e.drawImage(a.Resources.entitiesImage,r,m,c,c,d,w+.3-.2*g.heartBeats[y].time,1,1),e.save(),e.translate(g.x+.9,g.y+.1),e.rotate(g.heartBeats[y].time-1),e.translate(-(g.x+.5),-(g.y+.5)),e.drawImage(a.Resources.entitiesImage,r,k,c,c,d,w,1,1),e.restore();else switch(e.drawImage(a.Resources.entitiesImage,m,c,c,c,d,w+.3,1,1),e.save(),e.translate(.25,.52),e.translate(g.x,
g.y),e.rotate(.2),e.translate(-g.x,-g.y),e.drawImage(a.Resources.entitiesImage,b,f,c,c,d,w,1,1),e.restore(),e.drawImage(a.Resources.entitiesImage,r,f,c,c,d-.24,w+.52,1,1),e.save(),e.translate(g.x,g.y-.1+.3*g.firingRecoilTime-.05*t),e.rotate(0),e.translate(-g.x,-g.y),g.currentWeaponCategory===a.WeaponCategoryEnum.Secondary?(e.drawImage(a.Resources.entitiesImage,l,c,c,c,d,w-.15,1,1),e.drawImage(a.Resources.entitiesImage,r,c,k,c,d-.52,w-.15-.14,2,1)):(e.drawImage(a.Resources.entitiesImage,u?c:f,c,c,
c,d,w,1,1),e.drawImage(a.Resources.entitiesImage,r,c,k,c,d-.52,w-.14,2,1)),e.restore(),d=g.x-1.5,w=g.y-.5,e.translate(g.weaponOffset.x,g.weaponOffset.y),0===g.reloadCooldown?(e.translate(g.x,g.y),0===g.firingCooldown?(e.rotate(-.3),e.translate(-g.x,-g.y-.1)):(e.rotate(g.direction===a.DirectionEnum.Left&&0!==g.firingAngle?Math.PI-g.firingAngle:g.firingAngle),e.translate(-g.x,-g.y)),0!==g.firingCooldown&&e.translate(-g.firingRecoilTime,0)):(e.translate(g.x,g.y),e.rotate(7*-g.reloadCooldown*Math.PI),
e.translate(-g.x,-g.y)),g.weapons[g.currentWeaponCategory]){case a.WeaponTypeEnum.Rifle:e.drawImage(a.Resources.objectsImage,m,f,m,c,d,w-p,3,1-p);break;case a.WeaponTypeEnum.ShotGun:e.drawImage(a.Resources.objectsImage,m,c,m,c,d,w-p,3,1-p);break;case a.WeaponTypeEnum.AutoRifle:e.drawImage(a.Resources.objectsImage,m,k,m,c,d,w-p,3,1-p);break;case a.WeaponTypeEnum.AutoShotGun:e.drawImage(a.Resources.objectsImage,m,m,m,c,d,w-p,3,1-p);break;case a.WeaponTypeEnum.Uzi:e.drawImage(a.Resources.objectsImage,
m,l,m,c,d,w-p,3,1-p);break;case a.WeaponTypeEnum.Rpg:0===g.firingRecoilTime&&2.5>g.firingCooldown&&e.drawImage(a.Resources.objectsImage,r,k,k,c,d+1.2,w-p-.2,2,1-p),e.drawImage(a.Resources.objectsImage,r,c,m,c,d,w-p,3,1-p)}e.restore()};a.drawDeadHumanFemale=function(b,g){b.save();var p=.03*g.heartBeats[0].time,t=g.x-1,u=g.y-1;b.drawImage(a.Resources.entitiesImage,C,f,k,k,t,u,2,2);t=g.x-1.5;u=g.y-.5;b.translate(g.weaponOffset.x,g.weaponOffset.y+.5);if(0===g.reloadCooldown){b.translate(g.x,g.y);if(0===
g.firingCooldown)switch(g.weapons[g.currentWeaponCategory]!==a.WeaponTypeEnum.Rpg?b.rotate(.4):b.rotate(-.4+.1),g.weapons[g.currentWeaponCategory]){case a.WeaponTypeEnum.ShotGun:b.translate(-.2,.1);break;case a.WeaponTypeEnum.Rifle:b.translate(-.2,.2);break;case a.WeaponTypeEnum.AutoRifle:b.translate(-.3,.2);break;case a.WeaponTypeEnum.AutoShotGun:b.translate(-.15,.1);break;case a.WeaponTypeEnum.Uzi:b.translate(-.1,.1)}else b.rotate(g.direction===a.DirectionEnum.Left&&0!==g.firingAngle?Math.PI-g.firingAngle:
g.firingAngle);b.translate(-g.x,-g.y);0!==g.firingCooldown&&b.translate(-g.firingRecoilTime,0)}else b.translate(g.x,g.y),b.rotate(7*-g.reloadCooldown*Math.PI),b.translate(-g.x,-g.y);switch(g.weapons[g.currentWeaponCategory]){case a.WeaponTypeEnum.Rifle:b.drawImage(a.Resources.objectsImage,m,f,m,c,t,u-p,3,1-p);break;case a.WeaponTypeEnum.ShotGun:b.drawImage(a.Resources.objectsImage,m,c,m,c,t,u-p,3,1-p);break;case a.WeaponTypeEnum.AutoRifle:b.drawImage(a.Resources.objectsImage,m,k,m,c,t,u-p,3,1-p);
break;case a.WeaponTypeEnum.AutoShotGun:b.drawImage(a.Resources.objectsImage,m,m,m,c,t,u-p,3,1-p);break;case a.WeaponTypeEnum.Uzi:b.drawImage(a.Resources.objectsImage,m,l,m,c,t,u-p,3,1-p);break;case a.WeaponTypeEnum.Rpg:0===g.firingRecoilTime&&2.5>g.firingCooldown&&b.drawImage(a.Resources.objectsImage,r,k,k,c,t+1.2,u+p-.2,2,1+p),b.drawImage(a.Resources.objectsImage,r,f,m,c,t,u+p,3,1+p)}b.restore()};a.drawHumanFemale=function(e,g){e.save();var p=.03*g.heartBeats[0].time,A=g.heartBeats[2].time,u=1>
g.heartBeats[1].time,y=g.x-.5,d=g.y-.75,w=g.currentWeaponCategory===a.WeaponCategoryEnum.Secondary?6:5;e.translate(0,.25);if(0<g.buildData.cooldown)e.drawImage(a.Resources.entitiesImage,l,k,c,1.5*c,y,d,1,1.5),g.currentWeaponCategory===a.WeaponCategoryEnum.Secondary?e.drawImage(a.Resources.entitiesImage,b,k,c,1.5*c,y,d-.07-.42+.05*g.heartBeats[w].time,1,1.5):e.drawImage(a.Resources.entitiesImage,k,k,c,1.5*c,y,d-.42+.05*g.heartBeats[w].time,1,1.5),y=g.x-.5,d=g.y-.5,e.drawImage(a.Resources.entitiesImage,
r,m,c,c,y,d+.05-.2*g.heartBeats[w].time,1,1),e.save(),e.translate(g.x+.9,g.y-.2),e.rotate(g.heartBeats[w].time-1),e.translate(-(g.x+.5),-(g.y+.5)),e.drawImage(a.Resources.entitiesImage,r,k,c,c,y,d,1,1),e.restore();else{e.drawImage(a.Resources.entitiesImage,0>g.vy?t:m,k,c,1.5*c,y,d,1,1.5);e.save();e.translate(g.x,g.y-.7);e.rotate(-.1+g.firingRecoilTime-.05*A);e.translate(-g.x,-g.y);g.currentWeaponCategory===a.WeaponCategoryEnum.Secondary?e.drawImage(a.Resources.entitiesImage,b,k,c,1.5*c,y,d-.07,1,
1.5):e.drawImage(a.Resources.entitiesImage,u?c:f,k,c,1.5*c,y,d,1,1.5);e.restore();y=g.x-1.5;d=g.y-.5;e.translate(g.weaponOffset.x,g.weaponOffset.y);if(0===g.reloadCooldown){e.translate(g.x,g.y);if(0===g.firingCooldown)switch(g.weapons[g.currentWeaponCategory]!==a.WeaponTypeEnum.Rpg?e.rotate(.4):e.rotate(-.4+.1),g.weapons[g.currentWeaponCategory]){case a.WeaponTypeEnum.ShotGun:e.translate(-.2,.1);break;case a.WeaponTypeEnum.Rifle:e.translate(-.2,.2);break;case a.WeaponTypeEnum.AutoRifle:e.translate(-.3,
.2);break;case a.WeaponTypeEnum.AutoShotGun:e.translate(-.15,.1);break;case a.WeaponTypeEnum.Uzi:e.translate(-.1,.1)}else e.rotate(g.direction===a.DirectionEnum.Left&&0!==g.firingAngle?Math.PI-g.firingAngle:g.firingAngle);e.translate(-g.x,-g.y);0!==g.firingCooldown&&e.translate(-g.firingRecoilTime,0)}else e.translate(g.x,g.y),e.rotate(7*-g.reloadCooldown*Math.PI),e.translate(-g.x,-g.y);switch(g.weapons[g.currentWeaponCategory]){case a.WeaponTypeEnum.Rifle:e.drawImage(a.Resources.objectsImage,m,f,
m,c,y,d-p,3,1-p);break;case a.WeaponTypeEnum.ShotGun:e.drawImage(a.Resources.objectsImage,m,c,m,c,y,d-p,3,1-p);break;case a.WeaponTypeEnum.AutoRifle:e.drawImage(a.Resources.objectsImage,m,k,m,c,y,d-p,3,1-p);break;case a.WeaponTypeEnum.AutoShotGun:e.drawImage(a.Resources.objectsImage,m,m,m,c,y,d-p,3,1-p);break;case a.WeaponTypeEnum.Uzi:e.drawImage(a.Resources.objectsImage,m,l,m,c,y,d-p,3,1-p);break;case a.WeaponTypeEnum.Rpg:0===g.firingRecoilTime&&2.5>g.firingCooldown&&e.drawImage(a.Resources.objectsImage,
r,k,k,c,y+1.2,d+p-.2,2,1+p),e.drawImage(a.Resources.objectsImage,r,f,m,c,y,d+p,3,1+p)}}e.restore()};a.drawIdleEntity=function(e,g){var p=1.5*-g.woundedCooldown,A=.03*g.heartBeats[0].time,u=g.heartBeats[2].time,y=g.heartBeats[4].time,d=1===g.heartBeats[1].direction,w=g.x-.5,x=g.y-.5,B=x-A,A=1+A;e.translate(g.x,g.y);e.rotate(g.angle+.1*u-.1);e.translate(-g.x,-g.y-.07);g.headStyle===a.HeadStyleEnum.Police&&(e.save(),e.translate(.2+.05*u,.15),e.translate(g.x,g.y),e.rotate(.9-.2*u),e.translate(-g.x,-g.y),
e.drawImage(a.Resources.entitiesImage,t,l,c,c,w,B,1,A),e.restore());e.save();e.translate(.07+.05*u,.25);e.translate(g.x,g.y);e.rotate(-.6-.2*u);e.translate(-g.x,-g.y);e.drawImage(a.Resources.entitiesImage,l,f,c,c,w,B-.07,1,A);e.restore();e.save();e.translate(.2+.1*u,.54-.05*u);e.translate(g.x,g.y);e.rotate(-.5-u);e.translate(-g.x,-g.y);e.drawImage(a.Resources.entitiesImage,t,f,c,c,w,x,1,1);e.restore();e.save();e.translate(.2,.67-.05*u);e.translate(g.x,g.y);e.rotate(.2);e.translate(-g.x,-g.y);e.drawImage(a.Resources.entitiesImage,
b,f,c,c,w,x,1,1);e.restore();e.save();e.translate(g.x,g.y);e.rotate(.3*p);e.translate(-g.x,-g.y);e.translate(0,.4);e.drawImage(a.Resources.entitiesImage,m,f,c,c,w,B,1,A);e.restore();e.save();e.translate(-.12,.66);e.drawImage(a.Resources.entitiesImage,r,f,c,c,w,x,1,1);e.restore();e.save();e.translate(g.x,g.y);e.rotate(2*p+.1*u-.25);e.translate(-g.x,-g.y);e.drawImage(a.Resources.entitiesImage,0!==g.woundedCooldown?k:d?c:f,f,c,c,w,B,1,A);e.translate(0,-.14);switch(g.headStyle){case a.HeadStyleEnum.Punk:e.drawImage(a.Resources.entitiesImage,
f,l,c,c,w,B,1,A);break;case a.HeadStyleEnum.Bandaged:e.drawImage(a.Resources.entitiesImage,c,l,c,c,w,B,1,A);break;case a.HeadStyleEnum.Police:e.drawImage(a.Resources.entitiesImage,k,l,c,c,w,B,1,A);break;case a.HeadStyleEnum.Tourist:e.drawImage(a.Resources.entitiesImage,m,l,c,c,w,B,1,A);break;case a.HeadStyleEnum.Bandit:e.drawImage(a.Resources.entitiesImage,l,l,c,c,w,B,1,A);break;case a.HeadStyleEnum.Mexican:e.drawImage(a.Resources.entitiesImage,t,l,c,c,w,B,1,A)}e.restore();e.save();e.translate(-.1,
.16);e.translate(g.x,g.y);e.rotate(.5*-y+.1);e.translate(-g.x,-g.y);e.drawImage(a.Resources.entitiesImage,l,f,c,c,w,B,1,A);e.restore();e.save();e.translate(-.17+.2*y,.55);e.translate(g.x,g.y);e.rotate(.15-2*y);e.translate(-g.x,-g.y);e.drawImage(a.Resources.entitiesImage,t,f,c,c,w,x,1,1);e.restore()};a.drawWalkingEntity=function(b,g){var p=1.5*-g.woundedCooldown,A=.03*g.heartBeats[0].time,u=g.heartBeats[2].time,y=g.heartBeats[3].time,d=g.heartBeats[4].time,w=1===g.heartBeats[1].direction,x=g.heartBeats[2].direction,
B=g.x-.5,C=g.y-.5,E=C-A,A=1+A,J=1-u;b.translate(g.x,g.y);b.rotate(g.angle+.23*u-.1);b.translate(-g.x,-g.y-.12*y-.07);g.headStyle===a.HeadStyleEnum.Police&&(b.save(),b.translate(.2+.05*u,.15),b.translate(g.x,g.y),b.rotate(1.2-.2*u),b.translate(-g.x,-g.y),b.drawImage(a.Resources.entitiesImage,t,l,c,c,B,E,1,A),b.restore());b.save();b.translate(.07+.05*u,.25);b.translate(g.x,g.y);b.rotate(-.6-.2*u);b.translate(-g.x,-g.y);b.drawImage(a.Resources.entitiesImage,l,f,c,c,B,E-.07,1,A);b.restore();b.save();
b.translate(.2+.1*u,.54-.05*u);b.translate(g.x,g.y);b.rotate(-.5-u);b.translate(-g.x,-g.y);b.drawImage(a.Resources.entitiesImage,t,f,c,c,B,C,1,1);b.restore();b.save();b.translate(-.05+.22*J,.66);b.translate(g.x,g.y);b.rotate(1===x&&.8>u?.7*-J:0);b.translate(-g.x,-g.y);b.drawImage(a.Resources.entitiesImage,r,f,c,c,B,C,1,1);b.restore();b.save();b.translate(g.x,g.y);b.rotate(.3*p);b.translate(-g.x,-g.y);b.translate(0,.4);b.drawImage(a.Resources.entitiesImage,m,f,c,c,B,E,1,A);b.restore();b.save();b.translate(-.12+
.3*u,.66);b.translate(g.x,g.y);b.rotate(0===x&&.85>u?.9*-u:0);b.translate(-g.x,-g.y);b.drawImage(a.Resources.entitiesImage,r,f,c,c,B,C,1,1);b.restore();b.save();b.translate(g.x,g.y);b.rotate(2*p+.1*u-.25);b.translate(-g.x,-g.y);b.drawImage(a.Resources.entitiesImage,0!==g.woundedCooldown?2:w?c:f,f,c,c,B,E,1,A);b.translate(0,-.14);switch(g.headStyle){case a.HeadStyleEnum.Punk:b.drawImage(a.Resources.entitiesImage,f,l,c,c,B,E,1,A);break;case a.HeadStyleEnum.Bandaged:b.drawImage(a.Resources.entitiesImage,
c,l,c,c,B,E,1,A);break;case a.HeadStyleEnum.Police:b.drawImage(a.Resources.entitiesImage,k,l,c,c,B,E,1,A);break;case a.HeadStyleEnum.Tourist:b.drawImage(a.Resources.entitiesImage,m,l,c,c,B,E,1,A);break;case a.HeadStyleEnum.Bandit:b.drawImage(a.Resources.entitiesImage,l,l,c,c,B,E,1,A);break;case a.HeadStyleEnum.Mexican:b.drawImage(a.Resources.entitiesImage,t,l,c,c,B,E,1,A)}b.restore();b.save();b.translate(-.1,.16);b.translate(g.x,g.y);b.rotate(.5*-d+.1);b.translate(-g.x,-g.y);b.drawImage(a.Resources.entitiesImage,
l,f,c,c,B,E,1,A);b.restore();b.save();b.translate(-.17+.2*d,.55);b.translate(g.x,g.y);b.rotate(.15-2*d);b.translate(-g.x,-g.y);b.drawImage(a.Resources.entitiesImage,t,f,c,c,B,C,1,1);b.restore()}})(window.OkijinGame=window.OkijinGame||{});(function(a,E){function f(a,b){Da={current:a,total:b};F.onGameLoading(Math.ceil(100*a/b))}function c(){var b=[{type:"img",id:"introScreen",src:F.root+"/assets/img/"+N+"/introscreen.png"},{type:"img",id:"menuScreen",src:F.root+"/assets/img/"+N+"/menuscreen.png"},{type:"img",id:"hud1Screen",src:F.root+"/assets/img/"+N+"/hud1.png"},{type:"img",id:"hud2Screen",src:F.root+"/assets/img/"+N+"/hud2.png"},{type:"img",id:"hud3Screen",src:F.root+"/assets/img/"+N+"/hud3.png"},{type:"img",id:"loadingScreen",src:F.root+
"/assets/img/"+N+"/loadingscreen.png"},{type:"img",id:"creditsScreen",src:F.root+"/assets/img/"+N+"/credits.png"},{type:"img",id:"tooltips1",src:F.root+"/assets/img/"+N+"/tooltips01.png"},{type:"img",id:"tooltips5",src:F.root+"/assets/img/"+N+"/tooltips05.png"},{type:"img",id:"unlock",src:F.root+"/assets/img/"+N+"/unlock.png"},{type:"img",id:"entities",src:F.root+"/assets/img/"+N+"/entities01.png"},{type:"img",id:"background1",src:F.root+"/assets/img/"+N+"/background01.png"},{type:"img",id:"background2",
src:F.root+"/assets/img/"+N+"/background02.png"},{type:"img",id:"objects",src:F.root+"/assets/img/"+N+"/objects01.png"},{type:"img",id:"effects",src:F.root+"/assets/img/"+N+"/effects01.png"},{type:"img",id:"backdrop1",src:F.root+"/assets/img/"+N+"/backdrop01.png"},{type:"img",id:"backdrop2",src:F.root+"/assets/img/"+N+"/backdrop02.png"}];b.push({type:"snd",id:"music1",src:F.root+"/assets/sound/music1.mp3"});b.push({type:"snd",id:"music2",src:F.root+"/assets/sound/music2.mp3"});b.push({type:"snd",
id:"zombieattack1",src:F.root+"/assets/sound/attack.mp3"});b.push({type:"snd",id:"zombieattack2",src:F.root+"/assets/sound/attack2.mp3"});b.push({type:"snd",id:"award",src:F.root+"/assets/sound/award.mp3"});b.push({type:"snd",id:"humanfail",src:F.root+"/assets/sound/boing.mp3"});b.push({type:"snd",id:"click",src:F.root+"/assets/sound/button.mp3"});b.push({type:"snd",id:"checkpoint",src:F.root+"/assets/sound/checkpoint.mp3"});b.push({type:"snd",id:"critical",src:F.root+"/assets/sound/crit.mp3"});b.push({type:"snd",
id:"zombiedie1",src:F.root+"/assets/sound/die.mp3"});b.push({type:"snd",id:"zombiedie2",src:F.root+"/assets/sound/die2.mp3"});b.push({type:"snd",id:"humandie",src:F.root+"/assets/sound/die3.mp3"});b.push({type:"snd",id:"hammer",src:F.root+"/assets/sound/hammer.mp3"});b.push({type:"snd",id:"blast",src:F.root+"/assets/sound/launcher.mp3"});b.push({type:"snd",id:"humansuccess1",src:F.root+"/assets/sound/oi.mp3"});b.push({type:"snd",id:"reload",src:F.root+"/assets/sound/reload.mp3"});b.push({type:"snd",
id:"rifle",src:F.root+"/assets/sound/rifle.mp3"});b.push({type:"snd",id:"highscore",src:F.root+"/assets/sound/score.mp3"});b.push({type:"snd",id:"autogun1",src:F.root+"/assets/sound/uzi.mp3"});b.push({type:"snd",id:"victory",src:F.root+"/assets/sound/victory.mp3"});b.push({type:"snd",id:"humansuccess2",src:F.root+"/assets/sound/yippee.mp3"});b.push({type:"snd",id:"zombieroar1",src:F.root+"/assets/sound/zombie1.mp3"});b.push({type:"snd",id:"zombieroar2",src:F.root+"/assets/sound/zombie2.mp3"});a.loadResources(b,
k,f)}function k(b){a.Resources.introScreenImage=b.introScreen;a.Resources.menuScreenImage=b.menuScreen;a.Resources.loadingScreenImage=b.loadingScreen;a.Resources.hud1ScreenImage=b.hud1Screen;a.Resources.hud2ScreenImage=b.hud2Screen;a.Resources.hud3ScreenImage=b.hud3Screen;a.Resources.creditsScreenImage=b.creditsScreen;a.Resources.entitiesImage=b.entities;a.Resources.tooltips1Image=b.tooltips1;a.Resources.tooltips5Image=b.tooltips5;a.Resources.unlockImage=b.unlock;a.Resources.backgroundImage1=b.background1;
a.Resources.backgroundImage2=b.background2;a.Resources.backdrop01Image=b.backdrop1;a.Resources.backdrop02Image=b.backdrop2;a.Resources.objectsImage=b.objects;a.Resources.effectsImage=b.effects;qa=!1;ea=a.CommandEnum.None;Z=K=0;ha=a.DirectionEnum.None;S=a.MenuTypeEnum.None;z=[{type:a.MenuTypeEnum.Panel,x:0,y:0,width:0,height:0},{type:a.MenuTypeEnum.ShowStoryMode,x:0,y:0,width:0,height:0},{type:a.MenuTypeEnum.ShowSurvivalMode,x:0,y:0,width:0,height:0},{type:a.MenuTypeEnum.ShowOptions,x:0,y:0,width:0,
height:0},{type:a.MenuTypeEnum.ShowMain,x:0,y:0,width:0,height:0},{type:a.MenuTypeEnum.SelectNextPage,x:0,y:0,width:0,height:0},{type:a.MenuTypeEnum.SelectPrevPage,x:0,y:0,width:0,height:0},{type:a.MenuTypeEnum.ShowCredits,x:0,y:0,width:0,height:0},{type:a.MenuTypeEnum.ToggleSound,x:0,y:0,width:0,height:0}];O=[];for(b=0;b<D.levelProgress.length;b+=1)O.push({level:b+1,x:0,y:0,status:D.levelProgress[b]});fa=[];for(b=0;15>b;b+=1)fa.push({x:0,y:0});Y=[{level:1E3,x:0,y:0,status:a.LevelStatusEnum.Locked},
{level:1001,x:0,y:0,status:a.LevelStatusEnum.Locked}];l();ia=Ia=11;H=a.GameStateEnum.GameStart;Ea=a.isTrialLicense()}function m(b){var c,e,d=O.length,h=0;for(e=0;e<d;e+=1)c=O[e],b===c.level&&(c.status=a.LevelStatusEnum.Passed,D.levelProgress[e]=c.status,h=c.level+1),h===c.level&&c.status===a.LevelStatusEnum.Locked&&20>=c.level&&(c.status=a.LevelStatusEnum.Available,D.levelProgress[e]=c.status)}function l(){for(var b=0;b<O.length;b+=1)6===O[b].level&&O[b].status===a.LevelStatusEnum.Passed?Y[0].status=
a.LevelStatusEnum.Available:13===O[b].level&&O[b].status===a.LevelStatusEnum.Passed&&(Y[1].status=a.LevelStatusEnum.Available)}function t(){var b=(new Date).getTime(),c=Math.min((b-(Ja||b))/1E3,.05),d=c;Ja=b;window.requestAnimationFrame(t);0<ca&&(c*=Aa);T.setTransform(1,0,0,1,0,0);H===a.GameStateEnum.GamePreLoading?a.drawLoader(T):(H===a.GameStateEnum.GameMenu&&(T.fillStyle="#ecaa54"),T.clearRect(0,0,G.width,G.height),H===a.GameStateEnum.GameMenu&&T.fillRect(0,0,G.width,G.height),e(c,d),a.draw(T,
h))}function r(c){var e;F.onGameSessionStarted();aa=!1;ea=a.CommandEnum.None;h=new a.levelManager(c);ra=new a.AI;H=a.GameStateEnum.GameLoading;0<h.currentLevel&&(e=[{type:"img",id:"tooltips2",src:F.root+"/assets/img/"+N+"/tooltips02.png"},{type:"img",id:"tooltips3",src:F.root+"/assets/img/"+N+"/tooltips03.png"},{type:"img",id:"tooltips4",src:F.root+"/assets/img/"+N+"/tooltips04.png"},{type:"img",id:"backdrop3",src:F.root+"/assets/img/"+N+"/backdrop03.png"}],Da={current:0,total:0},a.loadResources(e,
b,f));!0===Ka&&4===c&&D.levelProgress[3]===a.LevelStatusEnum.Available&&(a.reviewGame(),Ka=!1)}function b(b){a.Resources.backdrop03Image=b.backdrop3;a.Resources.tooltips2Image=b.tooltips2;a.Resources.tooltips3Image=b.tooltips3;a.Resources.tooltips4Image=b.tooltips4;ca=ba=0;Aa=.4;ta=.3;Ba=!1;ja=0;h.primaryWeaponAssignmentDone&&h.secondaryWeaponAssignmentDone&&h.newItem===a.StackObjectTypeEnum.None?(P={x:h.minX+(h.maxX-h.minX)/2,y:h.maxY-.7},L=.6):(L=.8,P={x:h.minX+(h.maxX-h.minX)/2,y:h.maxY+.5});b=
new a.Camera;b.multiply(ga);b=b.screenToCamera(G.width,G.height);U.x=b.x/2-P.x;U.y=b.y/2-P.y;I.angle=0;I.sx=L;I.sy=L;if(1E3===h.currentLevel||1001===h.currentLevel){var c,e=O.length,d=6;for(c=0;c<e;c+=1){b=O[c];if(b.status!==a.LevelStatusEnum.Passed)break;d=Math.max(d,c+1)}C(d)}else C();a.SoundManager.playLevelMusic();H=a.GameStateEnum.GameRun}function C(b){var c;if(h){c=a.screenToHud({x:G.width,y:G.height});var e=b;b===E&&(e=h.currentLevel);if(5<h.currentLevel&&a.isTrialLicense())q=[{selected:!1,
enabled:!0,type:a.CommandEnum.Menu,x:c.x-1,y:c.y-1,size:.95},{selected:!1,enabled:!0,type:a.CommandEnum.BuyGame,x:4.3,y:.8,size:1.8}];else switch(e){case 1:q=[];break;case 2:q=[{selected:!1,enabled:!0,type:a.CommandEnum.ToggleAdrenaline,x:c.x/2-.5,y:c.y-2,tx:c.x/2-.5,ty:c.y-2,size:.95},{selected:!1,enabled:!0,type:a.CommandEnum.ShowStackObjects,x:c.x/2-2,y:c.y-2,size:.95,direction:a.DirectionEnum.Left},{selected:!1,enabled:!0,type:a.CommandEnum.ShowStackObjects,x:c.x/2+1,y:c.y-2,size:.95,direction:a.DirectionEnum.Right},
{selected:!1,enabled:!0,type:a.CommandEnum.CancelAction,x:c.x/2-3,y:c.y-2,size:.95,direction:a.DirectionEnum.Left},{selected:!1,enabled:!0,type:a.CommandEnum.CancelAction,x:c.x/2+2,y:c.y-2,size:.95,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.SpikeCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.WoodCrate,
direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.SpikeCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.WoodCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!0,type:a.CommandEnum.Menu,x:c.x-1,y:.1,size:.95},{selected:!1,enabled:!0,type:a.CommandEnum.Restart,
x:c.x-2,y:.1,size:.95}];break;case 3:q=[{selected:!1,enabled:!0,type:a.CommandEnum.ToggleAdrenaline,x:c.x/2-.5,y:c.y-2,tx:c.x/2-.5,ty:c.y-2,size:.95},{selected:!1,enabled:!0,type:a.CommandEnum.ShowStackObjects,x:c.x/2-2,y:c.y-2,size:.95,direction:a.DirectionEnum.Left},{selected:!1,enabled:!0,type:a.CommandEnum.ShowStackObjects,x:c.x/2+1,y:c.y-2,size:.95,direction:a.DirectionEnum.Right},{selected:!1,enabled:!0,type:a.CommandEnum.CancelAction,x:c.x/2-3,y:c.y-2,size:.95,direction:a.DirectionEnum.Left},
{selected:!1,enabled:!0,type:a.CommandEnum.CancelAction,x:c.x/2+2,y:c.y-2,size:.95,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.SpikeCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.WoodCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,
x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.SpikeCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.WoodCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!0,type:a.CommandEnum.Menu,x:c.x-1,y:.1,size:.95},{selected:!1,enabled:!0,type:a.CommandEnum.Restart,x:c.x-2,y:.1,size:.95}];J(e,c);break;case 4:case 5:q=[{selected:!1,enabled:!0,type:a.CommandEnum.ToggleAdrenaline,
x:c.x/2-.5,y:c.y-2,tx:c.x/2-.5,ty:c.y-2,size:.95},{selected:!1,enabled:!0,type:a.CommandEnum.ShowStackObjects,x:c.x/2-2,y:c.y-2,size:.95,direction:a.DirectionEnum.Left},{selected:!1,enabled:!0,type:a.CommandEnum.ShowStackObjects,x:c.x/2+1,y:c.y-2,size:.95,direction:a.DirectionEnum.Right},{selected:!1,enabled:!0,type:a.CommandEnum.CancelAction,x:c.x/2-3,y:c.y-2,size:.95,direction:a.DirectionEnum.Left},{selected:!1,enabled:!0,type:a.CommandEnum.CancelAction,x:c.x/2+2,y:c.y-2,size:.95,direction:a.DirectionEnum.Right},
{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.SpikeCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.WoodCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.SpikeCrate,direction:a.DirectionEnum.Right},
{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.WoodCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!0,type:a.CommandEnum.Menu,x:c.x-1,y:.1,size:.95},{selected:!1,enabled:!0,type:a.CommandEnum.Restart,x:c.x-2,y:.1,size:.95}];J(e,c);break;case 6:case 7:case 8:case 9:q=[{selected:!1,enabled:!0,type:a.CommandEnum.ToggleAdrenaline,x:c.x/2-.5,y:c.y-2,tx:c.x/2-.5,ty:c.y-2,size:.95},{selected:!1,enabled:!0,type:a.CommandEnum.ShowStackObjects,
x:c.x/2-2,y:c.y-2,size:.95,direction:a.DirectionEnum.Left},{selected:!1,enabled:!0,type:a.CommandEnum.ShowStackObjects,x:c.x/2+1,y:c.y-2,size:.95,direction:a.DirectionEnum.Right},{selected:!1,enabled:!0,type:a.CommandEnum.CancelAction,x:c.x/2-3,y:c.y-2,size:.95,direction:a.DirectionEnum.Left},{selected:!1,enabled:!0,type:a.CommandEnum.CancelAction,x:c.x/2+2,y:c.y-2,size:.95,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,
stackObjectType:a.StackObjectTypeEnum.SpikeCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.WoodCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.MetalCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,
ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.SpikeCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.WoodCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.MetalCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!0,type:a.CommandEnum.Menu,x:c.x-1,
y:.1,size:.95},{selected:!1,enabled:!0,type:a.CommandEnum.Restart,x:c.x-2,y:.1,size:.95}];J(e,c);break;case 10:case 11:q=[{selected:!1,enabled:!0,type:a.CommandEnum.ToggleAdrenaline,x:c.x/2-.5,y:c.y-2,tx:c.x/2-.5,ty:c.y-2,size:.95},{selected:!1,enabled:!0,type:a.CommandEnum.ShowStackObjects,x:c.x/2-2,y:c.y-2,size:.95,direction:a.DirectionEnum.Left},{selected:!1,enabled:!0,type:a.CommandEnum.ShowStackObjects,x:c.x/2+1,y:c.y-2,size:.95,direction:a.DirectionEnum.Right},{selected:!1,enabled:!0,type:a.CommandEnum.CancelAction,
x:c.x/2-3,y:c.y-2,size:.95,direction:a.DirectionEnum.Left},{selected:!1,enabled:!0,type:a.CommandEnum.CancelAction,x:c.x/2+2,y:c.y-2,size:.95,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.SpikeCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.TNTCrate,direction:a.DirectionEnum.Left},
{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.WoodCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.MetalCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.SpikeCrate,direction:a.DirectionEnum.Right},
{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.TNTCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.WoodCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.MetalCrate,direction:a.DirectionEnum.Right},
{selected:!1,enabled:!0,type:a.CommandEnum.Menu,x:c.x-1,y:.1,size:.95},{selected:!1,enabled:!0,type:a.CommandEnum.Restart,x:c.x-2,y:.1,size:.95}];J(e,c);break;case 12:case 13:case 14:case 15:q=[{selected:!1,enabled:!0,type:a.CommandEnum.ToggleAdrenaline,x:c.x/2-.5,y:c.y-2,tx:c.x/2-.5,ty:c.y-2,size:.95},{selected:!1,enabled:!0,type:a.CommandEnum.ShowStackObjects,x:c.x/2-2,y:c.y-2,size:.95,direction:a.DirectionEnum.Left},{selected:!1,enabled:!0,type:a.CommandEnum.ShowStackObjects,x:c.x/2+1,y:c.y-2,
size:.95,direction:a.DirectionEnum.Right},{selected:!1,enabled:!0,type:a.CommandEnum.CancelAction,x:c.x/2-3,y:c.y-2,size:.95,direction:a.DirectionEnum.Left},{selected:!1,enabled:!0,type:a.CommandEnum.CancelAction,x:c.x/2+2,y:c.y-2,size:.95,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.SpikeCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,
x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.TNTCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.DoubleWoodCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.WoodCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,
x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.MetalCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.SpikeCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.TNTCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,
x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.DoubleWoodCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.WoodCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.MetalCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!0,type:a.CommandEnum.Menu,
x:c.x-1,y:.1,size:.95},{selected:!1,enabled:!0,type:a.CommandEnum.Restart,x:c.x-2,y:.1,size:.95}];J(e,c);break;case 16:case 17:q=[{selected:!1,enabled:!0,type:a.CommandEnum.ToggleAdrenaline,x:c.x/2-.5,y:c.y-2,tx:c.x/2-.5,ty:c.y-2,size:.95},{selected:!1,enabled:!0,type:a.CommandEnum.ShowStackObjects,x:c.x/2-2,y:c.y-2,size:.95,direction:a.DirectionEnum.Left},{selected:!1,enabled:!0,type:a.CommandEnum.ShowStackObjects,x:c.x/2+1,y:c.y-2,size:.95,direction:a.DirectionEnum.Right},{selected:!1,enabled:!0,
type:a.CommandEnum.CancelAction,x:c.x/2-3,y:c.y-2,size:.95,direction:a.DirectionEnum.Left},{selected:!1,enabled:!0,type:a.CommandEnum.CancelAction,x:c.x/2+2,y:c.y-2,size:.95,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.SpikeCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.TNTCrate,
direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.DoubleWoodCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.DoubleMetalCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.WoodCrate,
direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.MetalCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.SpikeCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.TNTCrate,
direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.DoubleWoodCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.DoubleMetalCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.WoodCrate,
direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.MetalCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!0,type:a.CommandEnum.Menu,x:c.x-1,y:.1,size:.95},{selected:!1,enabled:!0,type:a.CommandEnum.Restart,x:c.x-2,y:.1,size:.95}];J(e,c);break;case 18:case 19:case 20:q=[{selected:!1,enabled:!0,type:a.CommandEnum.ToggleAdrenaline,x:c.x/2-.5,y:c.y-2,tx:c.x/2-.5,ty:c.y-2,size:.95},
{selected:!1,enabled:!0,type:a.CommandEnum.ShowStackObjects,x:c.x/2-2,y:c.y-2,size:.95,direction:a.DirectionEnum.Left},{selected:!1,enabled:!0,type:a.CommandEnum.ShowStackObjects,x:c.x/2+1,y:c.y-2,size:.95,direction:a.DirectionEnum.Right},{selected:!1,enabled:!0,type:a.CommandEnum.CancelAction,x:c.x/2-3,y:c.y-2,size:.95,direction:a.DirectionEnum.Left},{selected:!1,enabled:!0,type:a.CommandEnum.CancelAction,x:c.x/2+2,y:c.y-2,size:.95,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,
x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.SpikeCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.TNTCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.DoubleWoodCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,
x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.DoubleMetalCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.MountedCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.WoodCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,
x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.MetalCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.SpikeCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.TNTCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,
x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.DoubleWoodCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.DoubleMetalCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.MountedCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,
x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.WoodCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.MetalCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!0,type:a.CommandEnum.Menu,x:c.x-1,y:.1,size:.95},{selected:!1,enabled:!0,type:a.CommandEnum.Restart,x:c.x-2,y:.1,size:.95}];J(e,c);break;default:q=[{selected:!1,enabled:!0,type:a.CommandEnum.ToggleAdrenaline,
x:c.x/2-.5,y:c.y-2,tx:c.x/2-.5,ty:c.y-2,size:.95},{selected:!1,enabled:!0,type:a.CommandEnum.ShowStackObjects,x:c.x/2-2,y:c.y-2,size:.95,direction:a.DirectionEnum.Left},{selected:!1,enabled:!0,type:a.CommandEnum.ShowStackObjects,x:c.x/2+1,y:c.y-2,size:.95,direction:a.DirectionEnum.Right},{selected:!1,enabled:!0,type:a.CommandEnum.CancelAction,x:c.x/2-3,y:c.y-2,size:.95,direction:a.DirectionEnum.Left},{selected:!1,enabled:!0,type:a.CommandEnum.CancelAction,x:c.x/2+2,y:c.y-2,size:.95,direction:a.DirectionEnum.Right},
{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.SpikeCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.TNTCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.MountedCrate,direction:a.DirectionEnum.Left},
{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.DoubleWoodCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.DoubleMetalCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.WoodCrate,direction:a.DirectionEnum.Left},
{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.MetalCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.RepairCrate,direction:a.DirectionEnum.Left},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.SpikeCrate,direction:a.DirectionEnum.Right},
{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.TNTCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.MountedCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.DoubleWoodCrate,direction:a.DirectionEnum.Right},
{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.DoubleMetalCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.WoodCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.MetalCrate,direction:a.DirectionEnum.Right},
{selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:c.y,tx:0,ty:c.y,size:.95,stackObjectType:a.StackObjectTypeEnum.RepairCrate,direction:a.DirectionEnum.Right},{selected:!1,enabled:!0,type:a.CommandEnum.Menu,x:c.x-1,y:.1,size:.95},{selected:!1,enabled:!0,type:a.CommandEnum.Restart,x:c.x-2,y:.1,size:.95}],b=c.x/2-.5,q.push({selected:!1,enabled:!0,type:a.CommandEnum.CrateSelectionDone,x:b,y:c.y+1,tx:b,ty:c.y-1.1,size:1}),h.newItem===a.StackObjectTypeEnum.None&&J(e,c)}}}function J(b,c){var e,
d;e=c.x/2-.5;d=c.y/2-.5;q.push({selected:!1,enabled:!0,type:a.CommandEnum.Ready,x:e,y:c.y+1,tx:e,ty:c.y-1.1,size:1});switch(b){case 4:case 5:case 6:case 7:q.push({selected:!0,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e-2.4,ty:d-1.1,size:1,weaponCategory:a.WeaponCategoryEnum.Primary,weaponType:a.WeaponTypeEnum.Rifle,direction:a.DirectionEnum.Left,locked:!1});q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e-2.7,ty:d,size:1,weaponCategory:a.WeaponCategoryEnum.Primary,
weaponType:a.WeaponTypeEnum.ShotGun,direction:a.DirectionEnum.Left,locked:!1});q.push({selected:!0,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e-2.4,ty:d-1.6,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.Uzi,direction:a.DirectionEnum.Left,locked:!1});q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e-3,ty:d-.5,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.AutoRifle,direction:a.DirectionEnum.Left,
locked:!1});q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e-3,ty:d+.6,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.AutoShotGun,direction:a.DirectionEnum.Left,locked:!0});q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e-2.7,ty:d+1.7,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.Rpg,direction:a.DirectionEnum.Left,locked:!0});q.push({selected:!0,enabled:!1,type:a.CommandEnum.AssignWeapon,
x:e,y:d,tx:e+2.4,ty:d-1.1,size:1,weaponCategory:a.WeaponCategoryEnum.Primary,weaponType:a.WeaponTypeEnum.Rifle,direction:a.DirectionEnum.Right,locked:!1});q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e+2.7,ty:d,size:1,weaponCategory:a.WeaponCategoryEnum.Primary,weaponType:a.WeaponTypeEnum.ShotGun,direction:a.DirectionEnum.Right,locked:!1});q.push({selected:!0,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e+2.4,ty:d-1.6,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,
weaponType:a.WeaponTypeEnum.Uzi,direction:a.DirectionEnum.Right,locked:!1});q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e+3,ty:d-.5,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.AutoRifle,direction:a.DirectionEnum.Right,locked:!1});q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e+3,ty:d+.6,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.AutoShotGun,direction:a.DirectionEnum.Right,
locked:!0});q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e+2.7,ty:d+1.7,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.Rpg,direction:a.DirectionEnum.Right,locked:!0});break;case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:q.push({selected:!0,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e-2.4,ty:d-1.1,size:1,weaponCategory:a.WeaponCategoryEnum.Primary,weaponType:a.WeaponTypeEnum.Rifle,
direction:a.DirectionEnum.Left,locked:!1});q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e-2.7,ty:d,size:1,weaponCategory:a.WeaponCategoryEnum.Primary,weaponType:a.WeaponTypeEnum.ShotGun,direction:a.DirectionEnum.Left,locked:!1});q.push({selected:!0,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e-2.4,ty:d-1.6,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.Uzi,direction:a.DirectionEnum.Left,locked:!1});q.push({selected:!1,enabled:!1,
type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e-3,ty:d-.5,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.AutoRifle,direction:a.DirectionEnum.Left,locked:!1});q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e-3,ty:d+.6,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.AutoShotGun,direction:a.DirectionEnum.Left,locked:!1});q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e-2.7,ty:d+1.7,size:1,
weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.Rpg,direction:a.DirectionEnum.Left,locked:!0});q.push({selected:!0,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e+2.4,ty:d-1.1,size:1,weaponCategory:a.WeaponCategoryEnum.Primary,weaponType:a.WeaponTypeEnum.Rifle,direction:a.DirectionEnum.Right,locked:!1});q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e+2.7,ty:d,size:1,weaponCategory:a.WeaponCategoryEnum.Primary,weaponType:a.WeaponTypeEnum.ShotGun,
direction:a.DirectionEnum.Right,locked:!1});q.push({selected:!0,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e+2.4,ty:d-1.6,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.Uzi,direction:a.DirectionEnum.Right,locked:!1});q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e+3,ty:d-.5,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.AutoRifle,direction:a.DirectionEnum.Right,locked:!1});q.push({selected:!1,
enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e+3,ty:d+.6,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.AutoShotGun,direction:a.DirectionEnum.Right,locked:!1});q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e+2.7,ty:d+1.7,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.Rpg,direction:a.DirectionEnum.Right,locked:!0});break;case 20:q.push({selected:!0,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,
y:d,tx:e-2.4,ty:d-1.1,size:1,weaponCategory:a.WeaponCategoryEnum.Primary,weaponType:a.WeaponTypeEnum.Rifle,direction:a.DirectionEnum.Left,locked:!1});q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e-2.7,ty:d,size:1,weaponCategory:a.WeaponCategoryEnum.Primary,weaponType:a.WeaponTypeEnum.ShotGun,direction:a.DirectionEnum.Left,locked:!1});q.push({selected:!0,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e-2.4,ty:d-1.6,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,
weaponType:a.WeaponTypeEnum.Uzi,direction:a.DirectionEnum.Left,locked:!1});q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e-3,ty:d-.5,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.AutoRifle,direction:a.DirectionEnum.Left,locked:!1});q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e-3,ty:d+.6,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.AutoShotGun,direction:a.DirectionEnum.Left,
locked:!1});q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e-2.7,ty:d+1.7,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.Rpg,direction:a.DirectionEnum.Left,locked:!1});q.push({selected:!0,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e+2.4,ty:d-1.1,size:1,weaponCategory:a.WeaponCategoryEnum.Primary,weaponType:a.WeaponTypeEnum.Rifle,direction:a.DirectionEnum.Right,locked:!1});q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,
x:e,y:d,tx:e+2.7,ty:d,size:1,weaponCategory:a.WeaponCategoryEnum.Primary,weaponType:a.WeaponTypeEnum.ShotGun,direction:a.DirectionEnum.Right,locked:!1});q.push({selected:!0,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e+2.4,ty:d-1.6,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.Uzi,direction:a.DirectionEnum.Right,locked:!1});q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e+3,ty:d-.5,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,
weaponType:a.WeaponTypeEnum.AutoRifle,direction:a.DirectionEnum.Right,locked:!1});q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e+3,ty:d+.6,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.AutoShotGun,direction:a.DirectionEnum.Right,locked:!1});q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e+2.7,ty:d+1.7,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.Rpg,direction:a.DirectionEnum.Right,
locked:!1});break;default:q.push({selected:!0,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e-2.4,ty:d-1.1,size:1,weaponCategory:a.WeaponCategoryEnum.Primary,weaponType:a.WeaponTypeEnum.Rifle,direction:a.DirectionEnum.Left,locked:!1}),q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e-2.7,ty:d,size:1,weaponCategory:a.WeaponCategoryEnum.Primary,weaponType:a.WeaponTypeEnum.ShotGun,direction:a.DirectionEnum.Left,locked:!1}),q.push({selected:!0,enabled:!1,type:a.CommandEnum.AssignWeapon,
x:e,y:d,tx:e-2.4,ty:d-1.6,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.Uzi,direction:a.DirectionEnum.Left,locked:!1}),q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e-3,ty:d-.5,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.AutoRifle,direction:a.DirectionEnum.Left,locked:!1}),q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e-3,ty:d+.6,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,
weaponType:a.WeaponTypeEnum.AutoShotGun,direction:a.DirectionEnum.Left,locked:!1}),q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e-2.7,ty:d+1.7,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.Rpg,direction:a.DirectionEnum.Left,locked:!1}),q.push({selected:!0,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e+2.4,ty:d-1.1,size:1,weaponCategory:a.WeaponCategoryEnum.Primary,weaponType:a.WeaponTypeEnum.Rifle,direction:a.DirectionEnum.Right,
locked:!1}),q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e+2.7,ty:d,size:1,weaponCategory:a.WeaponCategoryEnum.Primary,weaponType:a.WeaponTypeEnum.ShotGun,direction:a.DirectionEnum.Right,locked:!1}),q.push({selected:!0,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e+2.4,ty:d-1.6,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.Uzi,direction:a.DirectionEnum.Right,locked:!1}),q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,
x:e,y:d,tx:e+3,ty:d-.5,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.AutoRifle,direction:a.DirectionEnum.Right,locked:!1}),q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e+3,ty:d+.6,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,weaponType:a.WeaponTypeEnum.AutoShotGun,direction:a.DirectionEnum.Right,locked:!1}),q.push({selected:!1,enabled:!1,type:a.CommandEnum.AssignWeapon,x:e,y:d,tx:e+2.7,ty:d+1.7,size:1,weaponCategory:a.WeaponCategoryEnum.Secondary,
weaponType:a.WeaponTypeEnum.Rpg,direction:a.DirectionEnum.Right,locked:!1})}}function Q(){var b=!1;if(H!==a.GameStateEnum.GameWon&&H!==a.GameStateEnum.GameLost)switch(h.currentLevel){case 1:b=0===h.entities.length&&h.currentLevelStage===a.LevelStageEnum.None;break;case 2:b=8===ra.phase&&0===h.entities.length;break;case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:b=9===ra.phase&&0===h.entities.length;break;case 1E3:case 1001:b=
!1;break;default:b=!1}return b}function za(){var b=!1;if(0===ca)switch(h.currentLevel){case 2:D.achievements[7]!==a.LevelStatusEnum.Passed&&8===ra.phase&&(D.achievements[7]=a.LevelStatusEnum.Passed,a.playAchievementToaster(7),b=!0);break;case 3:D.achievements[1]!==a.LevelStatusEnum.Passed&&8===ra.phase&&!0===h.noScratch&&(D.achievements[1]=a.LevelStatusEnum.Passed,a.playAchievementToaster(1),b=!0);break;case 8:D.achievements[3]!==a.LevelStatusEnum.Passed&&H===a.GameStateEnum.GameWon&&!1===h.survivalRage&&
(D.achievements[3]=a.LevelStatusEnum.Passed,a.playAchievementToaster(3),b=!0);break;case 10:D.achievements[9]!==a.LevelStatusEnum.Passed&&H===a.GameStateEnum.GameWon&&3===h.rightPlayer.stack.objects.length&&3===h.leftPlayer.stack.objects.length&&(D.achievements[9]=a.LevelStatusEnum.Passed,a.playAchievementToaster(9),b=!0);break;case 12:D.achievements[10]!==a.LevelStatusEnum.Passed&&H===a.GameStateEnum.GameWon&&0===h.rightPlayer.stack.objects.length&&0===h.leftPlayer.stack.objects.length&&(D.achievements[10]=
a.LevelStatusEnum.Passed,a.playAchievementToaster(10),b=!0);break;case 14:D.achievements[8]!==a.LevelStatusEnum.Passed&&14<=h.metalCount&&(D.achievements[8]=a.LevelStatusEnum.Passed,a.playAchievementToaster(8),b=!0);break;case 16:D.achievements[0]!==a.LevelStatusEnum.Passed&&H===a.GameStateEnum.GameWon&&(D.achievements[0]=a.LevelStatusEnum.Passed,a.playAchievementToaster(0),b=!0);break;case 18:D.achievements[2]!==a.LevelStatusEnum.Passed&&H===a.GameStateEnum.GameWon&&h.usedSpiked&&h.usedTurret&&(D.achievements[2]=
a.LevelStatusEnum.Passed,a.playAchievementToaster(2),b=!0);break;case 19:D.achievements[13]!==a.LevelStatusEnum.Passed&&7<=h.TNTCount&&(D.achievements[13]=a.LevelStatusEnum.Passed,a.playAchievementToaster(13),b=!0);break;case 20:D.achievements[4]!==a.LevelStatusEnum.Passed&&H===a.GameStateEnum.GameWon&&(D.achievements[4]=a.LevelStatusEnum.Passed,a.playAchievementToaster(4),b=!0);break;case 1E3:D.achievements[11]!==a.LevelStatusEnum.Passed?100<=h.killCount&&(D.achievements[11]=a.LevelStatusEnum.Passed,
a.playAchievementToaster(11),b=!0):D.achievements[12]!==a.LevelStatusEnum.Passed&&200<=h.killCount&&(D.achievements[12]=a.LevelStatusEnum.Passed,a.playAchievementToaster(12),b=!0);break;case 1001:D.achievements[5]!==a.LevelStatusEnum.Passed?1<=h.daysCount&&(D.achievements[5]=a.LevelStatusEnum.Passed,a.playAchievementToaster(5),b=!0):D.achievements[6]!==a.LevelStatusEnum.Passed&&3<=h.daysCount&&(D.achievements[6]=a.LevelStatusEnum.Passed,a.playAchievementToaster(6),b=!0)}if(b&&D.achievements[14]!==
a.LevelStatusEnum.Passed){for(var c=b=0;c<D.achievements.length;c+=1)b+=D.achievements[c]===a.LevelStatusEnum.Passed?1:0;10<=b&&(D.achievements[14]=a.LevelStatusEnum.Passed)}}function e(b,c){var e,f,k;if(!Ca){0<oa&&(oa-=b,0>=oa&&(oa=0));a.isTrialLicense()!==Ea&&(Ea=a.isTrialLicense(),a.showMainScreen());0<ka&&(ka-=b,0>ka&&(ka=0));0<ma&&(ma-=b,0>ma&&(ma=0));if(!aa)for(e=0,f=la.length;e<f;e+=1)k=la[e],0===k.direction&&k.time<=k.maxTime?(k.time=Math.min(k.time+b*k.speed1,k.maxTime),k.time===k.maxTime&&
(k.direction=1)):1===k.direction&&0<=k.time&&(k.time=Math.max(k.time-b*k.speed2,0),0===k.time&&(k.direction=0));0<ca&&(ca-=c,0>ca&&(ca=0));x(c);if(H!==a.GameStateEnum.GameStart)if(H===a.GameStateEnum.GameIntro)g(c);else if(H===a.GameStateEnum.GameMenu)p(c);else if(H===a.GameStateEnum.GameRun||H===a.GameStateEnum.GameWon||H===a.GameStateEnum.GameLost)aa||(h.update(b),a.SoundManager.update(b),ra.update(b,h),d(b),B(b),V(h.leftPlayer,b),V(h.rightPlayer,b),v(b),Q()&&(a.SoundManager.playVictory(),setTimeout(function(){F.onGameSessionEnded({score:1E3*
(h.currentLevel+1)})},900),ca=3,H=a.GameStateEnum.GameWon,h.leftPlayer.vy=-3,h.rightPlayer.vy=-3,ba=0,X(h.leftPlayer.x-2,h.maxY-1,a.DirectionEnum.Left),X(h.rightPlayer.x+2,h.maxY-1,a.DirectionEnum.Right),q=[],m(h.currentLevel),l(),a.saveData()),H===a.GameStateEnum.GameRun&&y()),H===a.GameStateEnum.GameWon?A():H===a.GameStateEnum.GameLost&&u(),za(),w(b,c,P)}}function g(b){var c,e,d=0,h=!1,f=.47;if(0<ia&&(ia-=b,3>ia&&!1===La&&(La=!0),0>=ia))for(ia=0,da=na=3,H=a.GameStateEnum.GameMenu,e=a.screenToHud({x:G.width,
y:G.height}),ua=[],b=0;3>b;b+=1){c=new a.ZombieEntity(e.x/2-4+d,e.y/2-Math.random(),.4);c.direction=h?a.DirectionEnum.Left:a.DirectionEnum.Right;c.scaleFactor=f;c.baseSpeed=f/2;c.speed=c.baseSpeed;c.drawHitPoints=!1;switch(b){case 0:c.headStyle=a.HeadStyleEnum.Police;break;case 1:c.headStyle=a.HeadStyleEnum.Punk}ua.push(c);d+=.5;h=!h;f+=.21}}function p(b){var c,e,d,h,f,g;0<da&&(da-=b,0>da&&(da=0));0<Z&&(Z-=b,0>Z&&(Z=0));c=a.screenToHud({x:G.width,y:G.height});d=c.x/2-4;h=c.x/2-2;f=c.y/2+1.7;c=0;for(e=
ua.length;c<e;c+=1)g=ua[c],g.update(b),0<g.moveCooldown&&.5>g.moveCooldown&&(g.moveCooldown=0,g.direction=g.direction===a.DirectionEnum.Left?a.DirectionEnum.Right:a.DirectionEnum.Left),g.x>h?(g.moveCooldown=1.5,g.x=h):g.x<d&&(g.moveCooldown=1.5,g.x=d),g.y>=f-g.radius&&(g.y=f-g.radius,g.vy=0)}function A(){var b,c;h.entities=[];h.leftPlayer.buildData.cooldown=0;h.rightPlayer.buildData.cooldown=0;h.leftPlayer.reloadCooldown=0;h.rightPlayer.reloadCooldown=0;h.leftPlayer.firingCooldown=0;h.rightPlayer.firingCooldown=
0;0<ca?(Aa=.07,ja=h.leftPlayer.stack.objects.length<h.rightPlayer.stack.objects.length?a.toRadians(20):a.toRadians(-20),L=1.5,ta=.02,b=Math.max(h.leftPlayer.stack.objects.length,h.rightPlayer.stack.objects.length),P={x:h.minX+(h.maxX-h.minX)/2,y:h.maxY-1.7*b}):(!1!==h.rewardItem.won||h.rewardItem.crate===a.StackObjectTypeEnum.None&&h.rewardItem.weapon===a.WeaponTypeEnum.None?h.rewardItem.crate===a.StackObjectTypeEnum.None&&h.rewardItem.weapon===a.WeaponTypeEnum.None&&(b=a.screenToHud({x:G.width,y:G.height}),
q.push({selected:!1,enabled:!0,type:a.CommandEnum.Menu,x:b.x/2-1.5,y:b.y/2-.2,size:.95}),q.push({selected:!1,enabled:!0,type:a.CommandEnum.NextLevel,x:b.x/2+.5,y:b.y/2-.2,size:.95})):(a.SoundManager.playAward(),h.rewardItem.won=!0,b=a.screenToHud({x:G.width,y:G.height}),c=b.x/2-.5,q.push({selected:!1,enabled:!0,type:a.CommandEnum.RewardAccepted,x:c,y:b.y+1,tx:c,ty:b.y-2,size:1}),q.push({selected:!1,enabled:!0,type:a.CommandEnum.Menu,x:b.x/2-1.5,y:b.y/2+1.1,size:.95}),q.push({selected:!1,enabled:!0,
type:a.CommandEnum.NextLevel,x:b.x/2+.5,y:b.y/2+1.1,size:.95})),ja=0,L=.55,ta=.05,P={x:h.minX+(h.maxX-h.minX)/2,y:h.maxY-.9},0<h.survivalRageTime?(h.rightPlayer.currentWeaponCategory!==a.WeaponCategoryEnum.Secondary&&(h.rightPlayer.currentWeaponCategory=a.WeaponCategoryEnum.Secondary),h.leftPlayer.currentWeaponCategory!==a.WeaponCategoryEnum.Secondary&&(h.leftPlayer.currentWeaponCategory=a.WeaponCategoryEnum.Secondary)):(h.rightPlayer.currentWeaponCategory!==a.WeaponCategoryEnum.Primary&&(h.rightPlayer.currentWeaponCategory=
a.WeaponCategoryEnum.Primary),h.leftPlayer.currentWeaponCategory!==a.WeaponCategoryEnum.Primary&&(h.leftPlayer.currentWeaponCategory=a.WeaponCategoryEnum.Primary)))}function u(){h.leftPlayer.buildData.cooldown=0;h.rightPlayer.buildData.cooldown=0;h.leftPlayer.reloadCooldown=0;h.rightPlayer.reloadCooldown=0;h.leftPlayer.isDead&&(h.leftPlayer.direction=a.DirectionEnum.Left,h.leftPlayer.firingCooldown=0,P={x:h.leftPlayer.x,y:h.maxY-1});h.rightPlayer.isDead&&(h.rightPlayer.direction=a.DirectionEnum.Right,
h.rightPlayer.firingCooldown=0,P={x:h.rightPlayer.x,y:h.maxY-1});if(0===h.levelEndCooldown){if(0===q.length){var b=a.screenToHud({x:G.width,y:G.height});q.push({selected:!1,enabled:!0,type:a.CommandEnum.Menu,x:b.x/2-2,y:b.y/2+1,size:.95});q.push({selected:!1,enabled:!0,type:a.CommandEnum.Restart,x:b.x/2+1,y:b.y/2+1,size:.95})}0===h.levelEndPauseCooldown&&(aa=!0);Aa=.5;ca=.2;L=1.6}}function y(){var b=a.screenToHud({x:G.width,y:G.height});if(h.newItem!==a.StackObjectTypeEnum.None)L=.8,P={x:h.minX+(h.maxX-
h.minX)/2,y:h.maxY+.5};else if(h.secondaryWeaponAssignmentDone&&h.primaryWeaponAssignmentDone)if(0<h.survivalRageTime?(h.rightPlayer.currentWeaponCategory!==a.WeaponCategoryEnum.Secondary&&(h.rightPlayer.currentWeaponCategory=a.WeaponCategoryEnum.Secondary,h.rightPlayer.reloadCooldown=.3,a.SoundManager.playReloadSound()),h.leftPlayer.currentWeaponCategory!==a.WeaponCategoryEnum.Secondary&&(h.leftPlayer.currentWeaponCategory=a.WeaponCategoryEnum.Secondary,h.leftPlayer.reloadCooldown=.3,a.SoundManager.playReloadSound())):
(h.rightPlayer.currentWeaponCategory!==a.WeaponCategoryEnum.Primary&&(h.rightPlayer.currentWeaponCategory=a.WeaponCategoryEnum.Primary,h.rightPlayer.reloadCooldown=.3,a.SoundManager.playReloadSound()),h.leftPlayer.currentWeaponCategory!==a.WeaponCategoryEnum.Primary&&(h.leftPlayer.currentWeaponCategory=a.WeaponCategoryEnum.Primary,h.leftPlayer.reloadCooldown=.3,a.SoundManager.playReloadSound())),h.currentLevelStage===a.LevelStageEnum.None)0<h.levelStartCooldown?(L=.73,P={x:h.minX+(h.maxX-h.minX)/
2,y:h.maxY+1}):h.leftPlayer.direction===a.DirectionEnum.Right&&h.rightPlayer.direction===a.DirectionEnum.Right?(L=.8,P={x:h.minX+(h.maxX-h.minX)/2+1.5,y:h.maxY-.9}):h.leftPlayer.direction===a.DirectionEnum.Left&&h.rightPlayer.direction===a.DirectionEnum.Left?(L=.8,P={x:h.minX+(h.maxX-h.minX)/2-1.5,y:h.maxY-.9}):(L=.73,P={x:h.minX+(h.maxX-h.minX)/2,y:h.maxY-.9});else switch(h.currentLevel){case 1:L=.8;h.currentLevelStage===a.LevelStageEnum.TutorialZombiesComing&&1.5>h.tutorialCooldown||h.currentLevelStage===
a.LevelStageEnum.TutorialReinforceDefenses?1===q.length&&(q.push({selected:!1,enabled:!0,type:a.CommandEnum.ShowStackObjects,x:b.x/2-.5,y:b.y-2,size:.95,direction:a.DirectionEnum.Left}),q.push({selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:b.y,tx:0,ty:b.y,size:.95,stackObjectType:a.StackObjectTypeEnum.WoodCrate,direction:a.DirectionEnum.Left})):h.currentLevelStage===a.LevelStageEnum.TutorialTapToContinue?q=[]:h.currentLevelStage===a.LevelStageEnum.TutorialFirstWave?q=[]:h.currentLevelStage===
a.LevelStageEnum.TutorialFirstWaveDone?q=[]:h.currentLevelStage===a.LevelStageEnum.TutorialMoreZombiesComing||h.currentLevelStage===a.LevelStageEnum.TutorialSecondWaveDone?q=[]:h.currentLevelStage!==a.LevelStageEnum.TutorialFirstKill&&h.currentLevelStage!==a.LevelStageEnum.TutorialSelectSurvivalRage||0!==h.tutorialCooldown||(aa=!0);for(var c=!1,e=0;e<q.length;++e)if(q[e].type===a.CommandEnum.Menu){c=!0;break}!1===c&&q.push({selected:!1,enabled:!0,type:a.CommandEnum.Menu,x:b.x-1,y:.1,size:.95});h.currentLevelStage===
a.LevelStageEnum.TutorialStart?P={x:h.minX+(h.maxX-h.minX)/2,y:h.maxY-.9}:h.currentLevelStage===a.LevelStageEnum.TutorialMoreZombiesComing&&1<h.tutorialCooldown&&4>h.tutorialCooldown?P={x:h.minX+(h.maxX-h.minX)/2+9,y:h.maxY-.9}:h.currentLevelStage===a.LevelStageEnum.TutorialZombiesComing&&1.5<h.tutorialCooldown?P={x:h.minX+(h.maxX-h.minX)/2-9,y:h.maxY-.9}:h.currentLevelStage===a.LevelStageEnum.TutorialSecondWave||h.currentLevelStage===a.LevelStageEnum.TutorialSecondWaveDone||h.currentLevelStage===
a.LevelStageEnum.TutorialHelpingHand||h.currentLevelStage===a.LevelStageEnum.TutorialFirstKill||h.currentLevelStage===a.LevelStageEnum.TutorialSelectSurvivalRage||h.currentLevelStage===a.LevelStageEnum.TutorialFirstWaveFinishJob?P={x:h.minX+(h.maxX-h.minX)/2+1.5,y:h.maxY-.9}:h.currentLevelStage===a.LevelStageEnum.TutorialTeamWork||h.currentLevelStage===a.LevelStageEnum.TutorialThirdWave||h.currentLevelStage===a.LevelStageEnum.TutorialTeamCamera||h.currentLevelStage===a.LevelStageEnum.TutorialTeamDefenses?
h.leftPlayer.direction===a.DirectionEnum.Right&&h.rightPlayer.direction===a.DirectionEnum.Right?(L=.8,P={x:h.minX+(h.maxX-h.minX)/2+1.5,y:h.maxY-.9}):h.leftPlayer.direction===a.DirectionEnum.Left&&h.rightPlayer.direction===a.DirectionEnum.Left?(L=.8,P={x:h.minX+(h.maxX-h.minX)/2-1.5,y:h.maxY-.9}):(L=.73,P={x:h.minX+(h.maxX-h.minX)/2,y:h.maxY-.9}):P={x:h.minX+(h.maxX-h.minX)/2-1.5,y:h.maxY-.9}}else 1===h.rightPlayer.targetScaleFactor&&1===h.leftPlayer.targetScaleFactor?(L=.8,P={x:h.minX+(h.maxX-h.minX)/
2,y:h.maxY+.5}):h.rightPlayer.targetScaleFactor>h.leftPlayer.targetScaleFactor?(L=.73,P={x:h.minX+(h.maxX-h.minX)/2+.7,y:h.maxY+.5}):h.rightPlayer.targetScaleFactor<h.leftPlayer.targetScaleFactor&&(L=.73,P={x:h.minX+(h.maxX-h.minX)/2-.7,y:h.maxY+.5})}function d(b){var c,e,d,g,f,k,l,n=[];for(c=0;c<h.effects.length;)if(l=h.effects[c],k=!1,l.update(b),0===l.selfDestroyTime)h.effects.splice(c,1);else{l.y>h.maxY&&(l.y=h.maxY,.5<l.vy&&(l.vy=-l.vy*l.mass));if(0===l.activationCooldown&&(1<l.selfDestroyTime||
-1===l.selfDestroyTime))if(l.y===h.maxY)switch(l.type){case a.EffectTypeEnum.Warhead:case a.EffectTypeEnum.Bullet:case a.EffectTypeEnum.MultiBullet:h.effects.splice(c,1),k=!0}else{switch(l.type){case a.EffectTypeEnum.Warhead:case a.EffectTypeEnum.Bullet:case a.EffectTypeEnum.MultiBullet:for(e=0;e<h.stacks.length;++e){g=h.stacks[e];for(d=0;d<g.objects.length;++d)if(f=g.objects[d],f.type!==a.StackObjectTypeEnum.TNTCrate&&f.type!==a.StackObjectTypeEnum.MetalCrate&&f.type!==a.StackObjectTypeEnum.WoodCrate&&
f.type!==a.StackObjectTypeEnum.MountedCrate&&f.type!==a.StackObjectTypeEnum.SpikeCrate&&g.direction!==a.DirectionEnum.None&&a.rectIntersect(l.x-l.radius,l.y-l.radius,l.x+l.radius,l.y+l.radius,g.x-f.radius,f.y-f.radius,g.x+f.radius,f.y+f.radius)){1>g.vx&&-1<g.vx&&(g.direction===a.DirectionEnum.Left&&g.x>h.minX||g.direction===a.DirectionEnum.Right&&g.x<h.maxX)&&(g.vx+=0<l.vx?1.25:-1.25);h.effects.push(new a.ImpactEffect(l.x+(0<l.vx?.12:-.12),l.y,.15));h.effects.splice(c,1);k=!0;break}if(k)break}}if(!k)for(e=
0;e<h.entities.length;++e)if(d=h.entities[e],0<d.hitPoints&&a.rectIntersect(l.x-l.radius,l.y-l.radius,l.x+l.radius,l.y+l.radius,d.x-d.radius,d.y-d.radius,d.x+d.radius,d.y+d.radius))switch(l.type){case a.EffectTypeEnum.Warhead:case a.EffectTypeEnum.Bullet:case a.EffectTypeEnum.MultiBullet:if(g=Math.random()<h.criticalChance?!0:!1,a.EffectTypeEnum.Warhead===l.type?(d.hitPoints-=5,--d.vy,d.vx=d.direction===a.DirectionEnum.Left?4+Math.random():-(4+Math.random()),d.bouncing=!0,l.count++):g?(d.hitPoints-=
2*l.value,g=new a.ProjectileEffect(d.x,d.y-1,.5,0,0,-3,a.EffectTypeEnum.Critical,0),g.selfDestroyTime=1,g.startFadeTime=.7,n.push(g),a.SoundManager.playCritSound()):d.hitPoints-=l.value,d.woundedCooldown=.2,0>=d.hitPoints&&l.type===a.EffectTypeEnum.MultiBullet&&(d.bonus=!0),h.effects.push(new a.BloodSplatterEffect(l.x+(0<l.vx?.12:-.12),l.y,.15)),a.EffectTypeEnum.Warhead!==l.type||2===l.count)h.effects.splice(c,1),k=!0}}k||(c+=1)}for(c=0;c<n.length;c+=1)h.effects.push(n[c]);for(c=0;c<h.backgroundEffects.length;c+=
1)l=h.backgroundEffects[c],l.update(b),0===l.selfDestroyTime&&h.backgroundEffects.splice(c,1)}function w(b,c,e){var d=U.x,h=U.y;U.x=0;U.y=0;U.update();var g=new a.Camera;g.multiply(ga);g=g.screenToCamera(G.width,G.height);U.tx=g.x/2-e.x;U.ty=g.y/2-e.y;e=a.distance(d,h,U.tx,U.ty);if(.001<Math.abs(e))var f=(U.ty-h)/e,d=d+(U.tx-d)/e*e*2*b,h=h+b*e*2*f;else d=U.tx,h=U.ty;0<ba&&(ba-=b,0>=ba&&(ba=0,Ba&&(ca=1)));U.x=d;U.y=h;I.x=g.x/2-d;I.y=g.y/2-h;I.sx>L&&(I.sx-=.2*c,I.sx<L&&(I.sx=L));I.sx<L&&(I.sx+=.2*c,
I.sx>L&&(I.sx=L));I.sy=I.sx;0<ba&&(I.angle=Fa===a.DirectionEnum.Right?-.05+.25*la[0].time:.05-.25*la[0].time);I.angle>ja?(I.angle-=ta*Math.PI*c,I.angle<ja&&(I.angle=ja)):I.angle<ja&&(I.angle+=ta*Math.PI*c,I.angle>ja&&(I.angle=ja));U.update();I.update();pa.update()}function x(b){var c,e,d,g=a.screenToHud({x:G.width,y:G.height});if(H===a.GameStateEnum.GameMenu)for(b=-(S===a.MenuTypeEnum.None||S===a.MenuTypeEnum.ShowMain?.3:2.1),da>na-.5&&(b-=2*(.5-(na-da))),d=0,e=z.length;d<e;d+=1)switch(z[d].x=0,z[d].y=
0,z[d].width=0,z[d].height=0,S!==a.MenuTypeEnum.None&&S!==a.MenuTypeEnum.ShowMain&&z[d].type===a.MenuTypeEnum.ShowMain?(z[d].x=7,z[d].y=b+2.85,z[d].width=2,z[d].height=.7):z[d].type===a.MenuTypeEnum.ShowCredits?(z[d].x=g.x-1.2,z[d].y=.2,z[d].width=1,z[d].height=1):z[d].type===a.MenuTypeEnum.ToggleSound?(z[d].x=g.x-1.2,z[d].y=1.2,z[d].width=1,z[d].height=1):z[d].type===a.MenuTypeEnum.Panel&&(z[d].x=5,z[d].y=b),S){case a.MenuTypeEnum.None:case a.MenuTypeEnum.ShowMain:switch(z[d].type){case a.MenuTypeEnum.ShowStoryMode:z[d].x=
5;z[d].y=b+.6;z[d].width=4;z[d].height=.95;break;case a.MenuTypeEnum.ShowSurvivalMode:z[d].x=5;z[d].y=b+1.85;z[d].width=4;z[d].height=.95;break;case a.MenuTypeEnum.ShowOptions:z[d].x=2.4,z[d].y=da>na-.5?b+5+6*(.5-(na-da)):b+5,z[d].width=4,z[d].height=1.2}break;case a.MenuTypeEnum.ShowStoryMode:switch(z[d].type){case a.MenuTypeEnum.ShowStoryMode:z[d].x=5;z[d].y=b+2.1;z[d].width=4;z[d].height=.5;break;case a.MenuTypeEnum.SelectPrevPage:z[d].x=5;z[d].y=b+3.8;z[d].width=1;z[d].height=.7;break;case a.MenuTypeEnum.SelectNextPage:z[d].x=
8,z[d].y=b+3.8,z[d].width=1,z[d].height=.7}break;case a.MenuTypeEnum.ShowSurvivalMode:switch(z[d].type){case a.MenuTypeEnum.ShowSurvivalMode:z[d].x=5;z[d].y=b+2.1;z[d].width=4;z[d].height=.5;break;case a.MenuTypeEnum.SelectPrevPage:z[d].x=5;z[d].y=b+3.8;z[d].width=1;z[d].height=.7;break;case a.MenuTypeEnum.SelectNextPage:z[d].x=8,z[d].y=b+3.8,z[d].width=1,z[d].height=.7}break;case a.MenuTypeEnum.ShowOptions:switch(z[d].type){case a.MenuTypeEnum.ShowOptions:z[d].x=5;z[d].y=b+2.1;z[d].width=4;z[d].height=
.5;break;case a.MenuTypeEnum.SelectPrevPage:z[d].x=5;z[d].y=b+3.8;z[d].width=1;z[d].height=.7;break;case a.MenuTypeEnum.SelectNextPage:z[d].x=8,z[d].y=b+3.8,z[d].width=1,z[d].height=.7}}else if(H===a.GameStateEnum.GameRun||H===a.GameStateEnum.GameWon)for(d=0;d<q.length;d+=1){var f=q[d];if(f.type===a.CommandEnum.SelectStackObject||f.type===a.CommandEnum.ToggleAdrenaline){var k=5;f.type===a.CommandEnum.ToggleAdrenaline&&(f.tx=0===h.survivalRageTime?g.x/2-.5:1.5,f.ty=0===h.survivalRageTime?g.y-2:.5,
k=9);if(f.x!==f.tx||f.y!==f.ty)c=a.distance(f.x,f.y,f.tx,f.ty),.5<c?(e=(f.tx-f.x)/c,c=(f.ty-f.y)/c,f.x+=b*k*e,f.y+=b*k*c):(f.x=f.tx,f.y=f.ty)}else if(f.type===a.CommandEnum.AssignWeapon||f.type===a.CommandEnum.Ready||f.type===a.CommandEnum.CrateSelectionDone||f.type===a.CommandEnum.RewardAccepted)f.type===a.CommandEnum.AssignWeapon?f.enabled=h.primaryWeaponAssignmentDone||f.weaponCategory!==a.WeaponCategoryEnum.Primary?h.primaryWeaponAssignmentDone&&!h.secondaryWeaponAssignmentDone&&f.weaponCategory===
a.WeaponCategoryEnum.Secondary?!0:!1:!0:f.type===a.CommandEnum.CrateSelectionDone?h.newItem===a.StackObjectTypeEnum.None&&(f.enabled=!1):f.type===a.CommandEnum.RewardAccepted?h.rewardItem.crate===a.StackObjectTypeEnum.None&&h.rewardItem.weapon===a.WeaponTypeEnum.None&&(f.enabled=!1):h.primaryWeaponAssignmentDone&&h.secondaryWeaponAssignmentDone&&(f.enabled=!1),!f.enabled||f.x===f.tx&&f.y===f.ty||(c=a.distance(f.x,f.y,f.tx,f.ty),.5<c?(e=(f.tx-f.x)/c,c=(f.ty-f.y)/c,f.x+=9*b*e,f.y+=9*b*c):(f.x=f.tx,
f.y=f.ty))}}function B(b){for(var c,d=h.mountedCrateCount=0;d<h.stacks.length;){var e=h.stacks[d];if(0===e.objects.length)h.stacks.splice(d,1);else{0<e.cooldown&&(e.cooldown-=b,0>e.cooldown&&(e.cooldown=0));0<e.vx?(e.vx-=6*b,0>e.vx&&(e.vx=0)):0>e.vx&&(e.vx+=6*b,0<e.vx&&(e.vx=0));e.x+=e.vx*b;if(0!==e.vx)for(var f=e,g=0;g<h.stacks.length;++g){var k=h.stacks[g];if(f!==k&&0<f.objects.length&&0<k.objects.length&&.9>f.cooldown&&.8>k.cooldown&&f.direction!==a.DirectionEnum.None&&k.direction!==a.DirectionEnum.None){var l=
{x:f.x,y:f.objects[0].y},m={x:k.x,y:k.objects[0].y},p=l.x-m.x,q=l.y-m.y,r=a.vectorDotProduct(p,q,p,q);if(!(r>.4*.4)){var t={x:f.vx,y:f.objects[0].vy};c={x:k.vx,y:k.objects[0].vy};r=Math.sqrt(r);p=a.vectorDivide(p,q,r);p=a.vectorMultiply(p.x,p.y,.5*(.4-r));l=a.vectorAdd(l.x,l.y,p.x,p.y);m=a.vectorSubstract(m.x,m.y,p.x,p.y);f.x=l.x;k.x=m.x;p=a.vectorSubstract(l.x,l.y,m.x,m.y);p=a.vectorNormalize(p.x,p.y);l=a.vectorDotProduct(t.x,t.y,p.x,p.y);m=a.vectorDotProduct(c.x,c.y,p.x,p.y);l=2*(l-m)/2;m=a.vectorMultiply(p.x,
p.y,1*l);t=a.vectorSubstract(t.x,t.y,m.x,m.y);f.vx=t.x;f.objects[0].vy=t.y;t=a.vectorMultiply(p.x,p.y,1*l);c=a.vectorAdd(c.x,c.y,t.x,t.y);k.vx=c.x;k.objects[0].vy=c.y}}}e.direction!==a.DirectionEnum.None&&(e.direction===a.DirectionEnum.Right&&e.x<e.limitX||e.direction===a.DirectionEnum.Left&&e.x>e.limitX)&&(e.x=e.limitX);f=h.maxY;for(g=0;g<e.objects.length;)if(k=e.objects[g],0>=k.strength){a.SoundManager.playHumanFailed();if(k.type===a.StackObjectTypeEnum.TNTCrate){0===ba&&0===ca&&(Fa=.5<Math.random()?
a.DirectionEnum.Left:a.DirectionEnum.Right,ba=.5,Ba=!0,la[0].time=0,la[0].direction=0,h.leftPlayer.vy=-3.5,h.rightPlayer.vy=-3.5);c=!1;for(l=t=0;l<h.entities.length;++l)if(m=h.entities[l],4>a.distance(m.x,m.y,e.x,k.y)&&(m.hitPoints=c?.7*m.hitPoints:0,t++),2===t)c=!0;else if(4===t)break;a.SoundManager.playBlastSound();for(c=0;2>c;++c)t=.1+.5*Math.random(),t=.5<Math.random()?t:-t,h.effects.push(new a.BigSmokeEffect(e.x+t,k.y+t,.15));for(c=0;2>c;++c)h.effects.push(new a.ExplosionEffect(e.x,k.y,.15))}else for(c=
0;3>c;++c)h.effects.push(new a.SmallSmokeEffect(e.x,k.y,.15));e.objects.splice(g,1)}else k.update(b),k.type===a.StackObjectTypeEnum.MountedCrate&&h.mountedCrateCount++,k.type===a.StackObjectTypeEnum.MountedCrate&&0===k.firingCooldown&&(c=n(e.x,k.y,e.direction),null!==c.entity&&3>c.distance&&0<c.distance&&(t=e.x+(e.direction===a.DirectionEnum.Right?.3:-.3),l=k.y+-.2,m=a.vectorAngle(t,l,c.entity.x,c.entity.y),m=a.vectorRotate(.3,e.direction===a.DirectionEnum.Right?-.2:.2,m),t+=m.x,l+=m.y,m=new a.Effect(t,
l,.2),m.gravity=0,m.selfDestroyTime=2,m.type=a.EffectTypeEnum.Bullet,m.value=2.5,m.angle=a.vectorAngle(m.x,m.y,c.entity.x,c.entity.y),k.firingAngle=m.angle,k.firingRecoilTime=.2,p=(c.entity.y-l)/c.distance,m.vx=(c.entity.x-t)/c.distance*9,m.vy=9*p,h.effects.push(m),h.effects.push(new a.SmallSmokeEffect(t,l,.15)),h.effects.push(new a.SmallSmokeEffect(t-.1,l,.15)),h.effects.push(new a.SmallSmokeEffect(t+.1,l,.15)),k.firingCooldown=.3,a.SoundManager.playGunSound())),k.y>=f-k.radius&&(k.y=f-k.radius,
k.vy=.2<k.vy?.3*-k.vy:0),f=k.y-.36,++g;d+=1}}}function V(b,c){b.update(c);if(b.classType===a.EntityClassTypeEnum.HumanFemale)switch(b.weapons[b.currentWeaponCategory]){case a.WeaponTypeEnum.Rifle:b.weaponOffset.x=.5;b.weaponOffset.y=-.4;b.weaponOffset.tx=.8;b.weaponOffset.ty=.05;break;case a.WeaponTypeEnum.ShotGun:b.weaponOffset.x=.35;b.weaponOffset.y=-.4;b.weaponOffset.tx=.8;b.weaponOffset.ty=.05;break;case a.WeaponTypeEnum.AutoRifle:b.weaponOffset.x=.5;b.weaponOffset.y=-.4;b.weaponOffset.tx=.8;
b.weaponOffset.ty=.05;break;case a.WeaponTypeEnum.AutoShotGun:b.weaponOffset.x=.5;b.weaponOffset.y=-.4;b.weaponOffset.tx=.8;b.weaponOffset.ty=.05;break;case a.WeaponTypeEnum.Uzi:b.weaponOffset.x=.5;b.weaponOffset.y=-.4;b.weaponOffset.tx=.6;b.weaponOffset.ty=-.02;break;case a.WeaponTypeEnum.Rpg:b.weaponOffset.x=-.1,b.weaponOffset.y=-.5,b.weaponOffset.tx=.6,b.weaponOffset.ty=-.02}else switch(b.weapons[b.currentWeaponCategory]){case a.WeaponTypeEnum.Rifle:b.weaponOffset.x=.4;b.weaponOffset.y=.3;b.weaponOffset.tx=
.8;b.weaponOffset.ty=-.18;break;case a.WeaponTypeEnum.ShotGun:b.weaponOffset.x=.4;b.weaponOffset.y=.35;b.weaponOffset.tx=.8;b.weaponOffset.ty=-.18;break;case a.WeaponTypeEnum.AutoRifle:b.weaponOffset.x=.4;b.weaponOffset.y=.35;b.weaponOffset.tx=.8;b.weaponOffset.ty=-.25;break;case a.WeaponTypeEnum.AutoShotGun:b.weaponOffset.x=.4;b.weaponOffset.y=.35;b.weaponOffset.tx=.8;b.weaponOffset.ty=-.25;break;case a.WeaponTypeEnum.Uzi:b.weaponOffset.x=.4;b.weaponOffset.y=.45;b.weaponOffset.tx=.8;b.weaponOffset.ty=
-.25;break;case a.WeaponTypeEnum.Rpg:b.weaponOffset.x=-.1,b.weaponOffset.y=.3,b.weaponOffset.tx=.6,b.weaponOffset.ty=-.02}var e=h.maxY;b.isDead||0<b.stack.objects.length&&(e=b.stack.objects[b.stack.objects.length-1].y-.5);b.y>=e-b.radius&&0<b.vy&&(b.y=e-b.radius,b.vy=0);var d=b.buildData;if(0<d.cooldown)if(d.cooldown-=c*(0<h.survivalRageTime?2:1),d.stackObjectType!==a.StackObjectTypeEnum.RepairCrate||0!==b.stack.objects.length&&b.stack.objects[0].strength!==h.getStackObjectStrength(b.stack.objects[0].type)||
(d.cooldown=0),0>=d.cooldown){if(d.stackObjectType===a.StackObjectTypeEnum.RepairCrate)0<b.stack.objects.length&&(b.stack.objects[0].strength=h.getStackObjectStrength(b.stack.objects[0].type));else{var e=d.stackObjectType,f,g;if(e!==a.StackObjectTypeEnum.None)if(b.buildDirection===a.DirectionEnum.Left)if(e===a.StackObjectTypeEnum.WoodCrate||e===a.StackObjectTypeEnum.MetalCrate){f=!1;for(g=0;g<h.stacks.length;++g)if(h.leftPlayer.stack===h.stacks[g]){f=!0;break}f||h.stacks.push(h.leftPlayer.stack);
h.leftPlayer.stack.objects.push(new a.StackObject(h.maxY,.5,e,h.getStackObjectStrength(e)));h.survivalPoints+=10;R(10,h.leftPlayer.stack.x,h.maxY-1.3);a.SoundManager.playHumanSuccess();h.metalCount+=e===a.StackObjectTypeEnum.MetalCrate?1:0}else f=h.minX+(h.maxX-h.minX)/2,f-=1.5,g={x:f,vx:-7,objects:[],limitX:f,direction:a.DirectionEnum.Left,cooldown:1},e===a.StackObjectTypeEnum.DoubleWoodCrate?(g.objects.push(new a.StackObject(h.maxY-1.3,.5,a.StackObjectTypeEnum.WoodCrate,h.getStackObjectStrength(a.StackObjectTypeEnum.WoodCrate))),
g.objects.push(new a.StackObject(h.maxY-1.3,.5,a.StackObjectTypeEnum.WoodCrate,h.getStackObjectStrength(a.StackObjectTypeEnum.WoodCrate)))):e===a.StackObjectTypeEnum.DoubleMetalCrate?(g.objects.push(new a.StackObject(h.maxY-1.3,.5,a.StackObjectTypeEnum.MetalCrate,h.getStackObjectStrength(a.StackObjectTypeEnum.MetalCrate))),g.objects.push(new a.StackObject(h.maxY-1.3,.5,a.StackObjectTypeEnum.MetalCrate,h.getStackObjectStrength(a.StackObjectTypeEnum.MetalCrate)))):g.objects.push(new a.StackObject(h.maxY-
1.3,.5,e,h.getStackObjectStrength(e))),g.objects[0].rotationSpeed=.4+.1*Math.random(),h.stacks.push(g),h.survivalPoints+=10,R(10,f,h.maxY-1.3),a.SoundManager.playHumanSuccess(),h.usedSpiked|=e===a.StackObjectTypeEnum.SpikeCrate,h.usedTurret|=e===a.StackObjectTypeEnum.MountedCrate,h.TNTCount+=e===a.StackObjectTypeEnum.TNTCrate?1:0;else if(e===a.StackObjectTypeEnum.WoodCrate||e===a.StackObjectTypeEnum.MetalCrate){f=!1;for(g=0;g<h.stacks.length;++g)if(h.rightPlayer.stack===h.stacks[g]){f=!0;break}f||
h.stacks.push(h.rightPlayer.stack);h.rightPlayer.stack.objects.push(new a.StackObject(h.maxY,.5,e,h.getStackObjectStrength(e)));h.survivalPoints+=10;R(10,h.rightPlayer.stack.x,h.maxY-1.3);a.SoundManager.playHumanSuccess();h.metalCount+=e===a.StackObjectTypeEnum.MetalCrate?1:0}else f=h.minX+(h.maxX-h.minX)/2,f+=1.5,g={x:f,vx:7,objects:[],limitX:f,direction:a.DirectionEnum.Right,cooldown:1},e===a.StackObjectTypeEnum.DoubleWoodCrate?(g.objects.push(new a.StackObject(h.maxY-1.3,.5,a.StackObjectTypeEnum.WoodCrate,
h.getStackObjectStrength(a.StackObjectTypeEnum.WoodCrate))),g.objects.push(new a.StackObject(h.maxY-1.3,.5,a.StackObjectTypeEnum.WoodCrate,h.getStackObjectStrength(a.StackObjectTypeEnum.WoodCrate)))):e===a.StackObjectTypeEnum.DoubleMetalCrate?(g.objects.push(new a.StackObject(h.maxY-1.3,.5,a.StackObjectTypeEnum.MetalCrate,h.getStackObjectStrength(a.StackObjectTypeEnum.MetalCrate))),g.objects.push(new a.StackObject(h.maxY-1.3,.5,a.StackObjectTypeEnum.MetalCrate,h.getStackObjectStrength(a.StackObjectTypeEnum.MetalCrate)))):
g.objects.push(new a.StackObject(h.maxY-1.3,.5,e,h.getStackObjectStrength(e))),g.objects[0].rotationSpeed=.4+.1*Math.random(),h.stacks.push(g),h.survivalPoints+=10,R(10,f,h.maxY-1.3),a.SoundManager.playHumanSuccess(),h.usedSpiked|=e===a.StackObjectTypeEnum.SpikeCrate,h.usedTurret|=e===a.StackObjectTypeEnum.MountedCrate,h.TNTCount+=e===a.StackObjectTypeEnum.TNTCrate?1:0;switch(h.currentLevel){case 1:h.currentLevelStage===a.LevelStageEnum.TutorialBuildingFirstCrate?h.currentLevelStage=a.LevelStageEnum.TutorialFirstWave:
h.currentLevelStage===a.LevelStageEnum.TutorialReinforceDefenses?(h.tutorialCooldown=4.5,h.currentLevelStage=a.LevelStageEnum.TutorialMoreZombiesComing):h.currentLevelStage===a.LevelStageEnum.TutorialTeamWork&&1<h.leftPlayer.stack.objects.length&&0<h.rightPlayer.stack.objects.length&&(h.currentLevelStage=a.LevelStageEnum.TutorialThirdWave)}}d.cooldown=0;d.stackObjectType=a.StackObjectTypeEnum.None}else 0===b.heartBeats[3].time&&(e=new a.SmallSmokeEffect(b.x,b.y,.15),e.selfDestroyTime=.6,e.startFadeTime=
.7,h.effects.push(e),h.effects.push(new a.ImpactEffect(b.x-.3,b.y,.15)),h.effects.push(new a.ImpactEffect(b.x+.3,b.y+.5,.15)),e=new a.SmallSmokeEffect(b.x+.5,b.y+.2,.15),e.startFadeTime=.9,e.selfDestroyTime=.5,h.backgroundEffects.push(e),e=new a.SmallSmokeEffect(b.x+.2,b.y+.6,.15),e.startFadeTime=.9,e.selfDestroyTime=.9,h.effects.push(e),a.SoundManager.playHammerSound()),b.reloadCooldown=.3;e=null;f=!1;H!==a.GameStateEnum.GameLost&&0===b.reloadCooldown&&0===d.cooldown&&0===b.firingCooldown&&(e=n(b.x,
b.y,b.direction),null!==e.entity&&10>e.distance&&0<e.distance&&(f=!0));if(0<b.firingRecoilTime||0<b.firingCooldown)b.weaponOffset.y+=.05*b.stack.objects.length;if(f&&e){b.firingRecoilTime=.3;d=b.x+(b.direction===a.DirectionEnum.Right?b.weaponOffset.x:-b.weaponOffset.x);f=b.y+b.weaponOffset.y;g=a.vectorAngle(d,f,e.entity.x,e.entity.y);var k=a.vectorRotate(b.weaponOffset.tx,b.direction===a.DirectionEnum.Right?b.weaponOffset.ty:-b.weaponOffset.ty,g),d=d+k.x;f+=k.y;var k=(e.entity.x-d)/e.distance,l=(e.entity.y-
f)/e.distance,m=null,p=1,m=0;switch(b.weapons[b.currentWeaponCategory]){case a.WeaponTypeEnum.Rifle:p=.7;h.effects.push(new a.ProjectileEffect(d,f,.15,g,11*k,11*l,a.EffectTypeEnum.Bullet,2));h.effects.push(new a.SmallSmokeEffect(d,f,.15));a.SoundManager.playGunSound();break;case a.WeaponTypeEnum.ShotGun:p=.7;m=4.5<e.distance?1:3;h.effects.push(new a.ProjectileEffect(d,f,.15,g,11*k,11*l,a.EffectTypeEnum.MultiBullet,m));h.effects.push(new a.SmallSmokeEffect(d,f,.15));a.SoundManager.playGunSound();break;
case a.WeaponTypeEnum.Uzi:p=.14;h.effects.push(new a.ProjectileEffect(d,f,.15,g,11*k,11*l,a.EffectTypeEnum.Bullet,.7));a.SoundManager.playMachineGunSound();break;case a.WeaponTypeEnum.AutoRifle:p=.18;h.effects.push(new a.ProjectileEffect(d,f,.15,g,11*k,11*l,a.EffectTypeEnum.Bullet,1));a.SoundManager.playMachineGunSound();break;case a.WeaponTypeEnum.AutoShotGun:p=.2;m=4.5<e.distance?.45:1.5;h.effects.push(new a.ProjectileEffect(d,f,.15,g,11*k,11*l,a.EffectTypeEnum.MultiBullet,m));a.SoundManager.playMachineGunSound();
break;case a.WeaponTypeEnum.Rpg:p=1.7,h.effects.push(new a.ProjectileEffect(d,f-.2,.15,g,11*k,11*l,a.EffectTypeEnum.Warhead,0)),h.effects.push(new a.SmallSmokeEffect(d,f,.15)),m=new a.BigSmokeEffect(d,f,.15),m.selfDestroyTime=.4,m.startFadeTime=.5,h.effects.push(m),a.SoundManager.playBlastSound()}h.effects.push(new a.SmallSmokeEffect(d-.1,f,.15));h.effects.push(new a.SmallSmokeEffect(d+.1,f,.15));b.weapons[b.currentWeaponCategory]!==a.WeaponTypeEnum.Rpg&&(.5<Math.random()||b.weapons[b.currentWeaponCategory]===
a.WeaponTypeEnum.ShotGun||b.weapons[b.currentWeaponCategory]===a.WeaponTypeEnum.Rifle)&&h.effects.push(new a.CartridgeCaseEffect(b.x,b.y-.2,.15,b.direction===a.DirectionEnum.Right?a.DirectionEnum.Left:a.DirectionEnum.Right));b.firingAngle=g;b.firingCooldown=p+b.firingTimeleftOver}}function X(b,c,e){var d=2+2*Math.random(),f=new a.Effect(b,c,.15);f.mass=.7;f.type=a.EffectTypeEnum.HeadLimb;f.value=0;f.angle=Math.random();f.rotationSpeed=(.6+.15*Math.random())*Math.PI;f.restoreBaseAngle=!0;f.direction=
e;0<ba?(f.selfDestroyTime=2,f.friction=1.5,f.vy=2.2*-d,f.vx=.5<Math.random()?d:-d):(f.selfDestroyTime=2,f.friction=3,f.vy=-d,f.vx=e===a.DirectionEnum.Left?1.2*d:1.2*-d,1===h.currentLevel&&h.currentLevelStage===a.LevelStageEnum.TutorialSecondWave&&(f.vy*=1.7));h.effects.push(f);d=2+Math.random();f=new a.Effect(b,c,.15);f.friction=1;f.mass=.7;f.selfDestroyTime=2;f.type=a.EffectTypeEnum.BodyLimb1;f.value=0;f.angle=Math.random();f.rotationSpeed=(.6+.15*Math.random())*Math.PI;f.vx=.5<Math.random()?d:-d;
f.vy=2*-d;f.direction=e;h.effects.push(f);d=1.5+Math.random();f=new a.Effect(b,c,.15);f.mass=.7;f.selfDestroyTime=1.8;f.type=a.EffectTypeEnum.BodyLimb2;f.value=0;f.angle=Math.random();f.rotationSpeed=(.6+.15*Math.random())*Math.PI;f.vx=.5<Math.random()?d:-d;f.direction=e;0<ba?(f.friction=1,f.vy=2*-d):(f.friction=2,f.vy=-d);h.effects.push(f);a.SoundManager.playZombieDieSound()}function R(b,c,e){b=new a.ProjectileEffect(c,e,.5,0,0,-3,10===b?a.EffectTypeEnum.GainSP:a.EffectTypeEnum.GainMoreSP,0);b.selfDestroyTime=
1;b.startFadeTime=.7;h.effects.push(b);h.survivalPointsZoomTime=.3}function v(b){var c;if(H!==a.GameStateEnum.GameLost){var e,d;for(e=0;e<h.entities.length;){var f=h.entities[e];if(f.isDead){X(f.x,f.y,f.direction);h.killCount++;1E3===h.currentLevel&&(h.showHighScoreEffect&&0<h.killCount&&h.killCount>D.killCountHighScore&&(c=new a.ProjectileEffect(h.leftPlayer.x+(h.rightPlayer.x-h.leftPlayer.x)/2,h.maxY-1,.5,0,0,-3,a.EffectTypeEnum.HighScore,0),c.selfDestroyTime=1.5,c.startFadeTime=.7,h.effects.push(c),
a.SoundManager.playHighScoreSound(),h.showHighScoreEffect=!1),D.killCountHighScore=Math.max(D.killCountHighScore,h.killCount),0===h.killCount%h.checkpointFrequency&&(c=new a.ProjectileEffect(h.leftPlayer.x+(h.rightPlayer.x-h.leftPlayer.x)/2,h.maxY-1,.5,0,0,-3,a.EffectTypeEnum.Checkpoint,0),c.selfDestroyTime=1.5,c.startFadeTime=.7,h.effects.push(c),a.SoundManager.playCheckpointSound()));h.survivalPoints+=f.bonus?15:10;R(f.bonus?15:10,f.x,f.y-.4);switch(h.currentLevel){case 1:h.currentLevelStage===
a.LevelStageEnum.TutorialSecondWave&&(h.currentLevelStage=a.LevelStageEnum.TutorialFirstKill,h.tutorialCooldown=.35)}h.entities.splice(e,1)}else{f.update(b);c=h.maxY;f.y>=c-f.radius&&(f.y=c-f.radius,f.vy=0);c=a.screenToScene({x:0,y:0});d=a.screenToScene({x:a.getCanvasWidth(),y:0});f.offScreenDirection=f.x>=c.x&&f.x<=d.x?a.DirectionEnum.None:f.x<c.x?a.DirectionEnum.Left:a.DirectionEnum.Right;if(f.direction!==a.DirectionEnum.None){c=null;var g=h.maxX-h.minX,k=0;for(d=0;d<h.stacks.length;++d){var l=
h.stacks[d];if(f.direction===a.DirectionEnum.Left&&l.x<f.x||f.direction===a.DirectionEnum.Right&&l.x>f.x)k=f.direction===a.DirectionEnum.Left?f.x-l.x:l.x-f.x,(null===c||k<g)&&0<l.objects.length&&(g=k,c=l)}if(!f.bouncing&&null!==c&&0===f.moveCooldown&&g<1.5+f.radius){if(f.speed=14*f.baseSpeed,f.rotationSpeed=5,!f.canApplyDamage&&1<=g&&(f.canApplyDamage=!0,a.SoundManager.playZombieAttackSound()),g<f.radius+.5){f.rotationSpeed=0;f.vy-=2;f.vx=f.direction===a.DirectionEnum.Left?4.2+Math.random():-4.2-
Math.random();f.bouncing=!0;0===ba&&c.direction===a.DirectionEnum.None&&0===ba&&0===ca&&(Fa=.5<Math.random()?a.DirectionEnum.Left:a.DirectionEnum.Right,ba=.5,Ba=!1);switch(c.objects[0].type){case a.StackObjectTypeEnum.WoodCrate:case a.StackObjectTypeEnum.TNTCrate:case a.StackObjectTypeEnum.MountedCrate:f.hitPoints-=3*f.armorCoefficient;break;case a.StackObjectTypeEnum.SpikeCrate:f.hitPoints-=5;break;case a.StackObjectTypeEnum.MetalCrate:f.hitPoints-=5*f.armorCoefficient}c.direction!==a.DirectionEnum.None&&
(c.vx+=f.direction===a.DirectionEnum.Left?-1.5:1.5);if(f.canApplyDamage){f.canApplyDamage=!1;0===c.cooldown&&(c.objects[0].strength-=1*f.damageFactor,c.objects[0].type===a.StackObjectTypeEnum.WoodCrate&&(h.noScratch=!1));0===c.cooldown&&-.5<=c.objects[0].vy&&.5>=c.objects[0].vy&&(c.objects[0].vy=-1.5);for(d=1;d<c.objects.length;++d)0===c.objects[d].vy&&(c.objects[d].vy=-2.2);c===h.leftPlayer.stack&&0===h.leftPlayer.vy?h.leftPlayer.vy=-3.5:c===h.rightPlayer.stack&&0===h.rightPlayer.vy&&(h.rightPlayer.vy=
-3.5)}}}else null!==c&&g<f.radius+1&&(f.x=f.direction===a.DirectionEnum.Left?c.x+(f.radius+1):c.x-(f.radius+1)),f.speed=f.baseSpeed,f.rotationSpeed=0,f.canApplyDamage=!1;f.bouncing&&(f.woundedCooldown=.1);f.direction===a.DirectionEnum.Right&&f.angle>a.toRadians(55)?f.angle=a.toRadians(55):f.direction===a.DirectionEnum.Left&&f.angle>a.toRadians(55)&&(f.angle=a.toRadians(55))}f.x<h.minX&&f.direction===a.DirectionEnum.Left?f.direction=a.DirectionEnum.Right:f.x>h.maxX&&f.direction===a.DirectionEnum.Right&&
(f.direction=a.DirectionEnum.Left);if((a.rectIntersect(h.leftPlayer.x-h.leftPlayer.radius,h.leftPlayer.y-h.leftPlayer.radius,h.leftPlayer.x+h.leftPlayer.radius,h.leftPlayer.y+h.leftPlayer.radius,f.x-f.radius,f.y-f.radius,f.x+f.radius,f.y+f.radius)||a.rectIntersect(h.rightPlayer.x-h.rightPlayer.radius,h.rightPlayer.y-h.rightPlayer.radius,h.rightPlayer.x+h.rightPlayer.radius,h.rightPlayer.y+h.rightPlayer.radius,f.x-f.radius,f.y-f.radius,f.x+f.radius,f.y+f.radius))&&H!==a.GameStateEnum.GameLost){setTimeout(function(){F.onGameSessionEnded({score:0})},
900);a.SoundManager.playHumanDie();H=a.GameStateEnum.GameLost;h.levelEndCooldown=.3;h.levelEndPauseCooldown=1;f.direction===a.DirectionEnum.Right?(h.leftPlayer.isDead=!0,h.leftPlayer.firingCooldown=0,h.leftPlayer.vy=-5.5,h.leftPlayer.vx=5):(h.rightPlayer.isDead=!0,h.rightPlayer.firingCooldown=0,h.rightPlayer.vy=-5.5,h.rightPlayer.vx=-5,h.stacks=[]);q=[];for(d=0;d<h.entities.length;d+=1)h.entities[d].drawHitPoints=!1;a.saveData()}e+=1}}}}function n(b,c,e){var d,f,g=null,k=null,l=h.maxX-h.minX,m=0;
d=0;for(f=h.entities.length;d<f;d+=1)if(k=h.entities[d],e===a.DirectionEnum.Left&&k.x<b||e===a.DirectionEnum.Right&&k.x>b)if(k.direction===a.DirectionEnum.Left&&k.x<h.maxX||k.direction===a.DirectionEnum.Right&&k.x>h.minX)m=a.distance(b,c,k.x,k.y),m<l&&(g=k,l=m);return{entity:g,distance:l}}function M(){var b=a.screenToHud({x:G.width,y:G.height});q.push({selected:!1,enabled:!0,type:a.CommandEnum.ConfirmNo,x:b.x/2-1.25,y:b.y/2-.5,size:.95});q.push({selected:!1,enabled:!0,type:a.CommandEnum.ConfirmYes,
x:b.x/2+.25,y:b.y/2-.5,size:.95})}function Oa(b){var c,e,d,f;f=!1;if(!Ca){var g=$("canvas").offset();c=b.pageX-g.left;g=b.pageY-g.top;b=a.screenToScene({x:c/va,y:g/wa});g=a.screenToHud({x:c/va,y:g/wa});if(H===a.GameStateEnum.GameStart)H=a.GameStateEnum.GameIntro,a.SoundManager.playMainMusic();else if(H===a.GameStateEnum.GameIntro)ia=Math.min(ia,1);else if(ea!==a.CommandEnum.None)for(c=0;c<q.length;c+=1){if(q[c].enabled&&a.pointInRect(g.x,g.y,q[c].x,q[c].y,q[c].x+q[c].size,q[c].y+q[c].size))if(d=q[c].type,
d===a.CommandEnum.ConfirmYes){switch(ea){case a.CommandEnum.Menu:a.showMainScreen();aa=!1;ea=a.CommandEnum.None;break;case a.CommandEnum.Restart:r(h.currentLevel),aa=!1,ea=a.CommandEnum.None}break}else if(d===a.CommandEnum.ConfirmNo){a.cancelConfirmDialog();break}}else switch(H){case a.GameStateEnum.GameMenu:if(qa)qa=!1;else if(!(S===a.MenuTypeEnum.None&&2<da)){b=!1;a.isTrialLicense()&&(d=a.screenToHud({x:G.width,y:G.height}),a.pointInRect(g.x,g.y,d.x-2,d.y-1,d.x,d.y)&&(r(6),b=!0));if(S===a.MenuTypeEnum.ShowStoryMode)for(c=
9*K;c<Math.min(O.length,9*(K+1));c+=1){if(a.pointInRect(g.x,g.y,O[c].x,O[c].y,O[c].x+O[c].size,O[c].y+O[c].size)){O[c].status===a.LevelStatusEnum.Available||O[c].status===a.LevelStatusEnum.Passed?r(O[c].level):O[c].status===a.LevelStatusEnum.Locked&&(ka=1.7);b=!0;break}}else if(S===a.MenuTypeEnum.ShowSurvivalMode)a.pointInRect(g.x,g.y,Y[K].x,Y[K].y,Y[K].x+Y[K].size,Y[K].y+Y[K].size)&&(Y[K].status===a.LevelStatusEnum.Available||Y[K].status===a.LevelStatusEnum.Passed?r(Y[K].level):Y[K].status===a.LevelStatusEnum.Locked&&
(ka=1.7),b=!0);else if(S===a.MenuTypeEnum.ShowOptions)for(c=0;c<fa.length;c+=1)if(a.pointInRect(g.x,g.y,fa[c].x,fa[c].y,fa[c].x+fa[c].size,fa[c].y+fa[c].size)){b=!0;break}if(!b)for(c=0;c<z.length;c+=1)if(a.pointInRect(g.x,g.y,z[c].x,z[c].y,z[c].x+z[c].width,z[c].y+z[c].height)){if(S!==z[c].type)switch(z[c].type){case a.MenuTypeEnum.ToggleSound:0===a.SoundManager.getSoundsEnabled()?a.SoundManager.unmute(!0):2===a.SoundManager.getSoundsEnabled()?a.SoundManager.mute(!1):a.SoundManager.mute(!0);break;
case a.MenuTypeEnum.ShowCredits:qa=!0;break;case a.MenuTypeEnum.ShowMain:case a.MenuTypeEnum.ShowStoryMode:case a.MenuTypeEnum.ShowSurvivalMode:case a.MenuTypeEnum.ShowOptions:K=0;da=na=3;S=z[c].type;Z=0;ha=a.DirectionEnum.None;a.SoundManager.playClickSound();break;case a.MenuTypeEnum.SelectNextPage:S===a.MenuTypeEnum.ShowStoryMode?(b=Math.floor(O.length/9),K++,K>b&&(K=0),Z=.25,ha=a.DirectionEnum.Right,a.SoundManager.playClickSound()):S===a.MenuTypeEnum.ShowSurvivalMode?(b=Y.length-1,K++,K>b&&(K=
0),Z=.25,ha=a.DirectionEnum.Right,a.SoundManager.playClickSound()):S===a.MenuTypeEnum.ShowOptions&&(b=fa.length-1,K++,K>b&&(K=0),Z=.25,ha=a.DirectionEnum.Right,a.SoundManager.playClickSound());break;case a.MenuTypeEnum.SelectPrevPage:S===a.MenuTypeEnum.ShowStoryMode?(K--,b=Math.floor(O.length/9),0>K&&(K=b),Z=.25,ha=a.DirectionEnum.Left,a.SoundManager.playClickSound()):S===a.MenuTypeEnum.ShowSurvivalMode?(K--,b=Y.length-1,0>K&&(K=b),Z=.25,ha=a.DirectionEnum.Left,a.SoundManager.playClickSound()):S===
a.MenuTypeEnum.ShowOptions&&(K--,b=fa.length-1,0>K&&(K=b),Z=.25,ha=a.DirectionEnum.Left,a.SoundManager.playClickSound())}break}}break;case a.GameStateEnum.GameLost:case a.GameStateEnum.GameWon:case a.GameStateEnum.GameRun:var k=h.newItem===a.StackObjectTypeEnum.None&&h.primaryWeaponAssignmentDone&&h.secondaryWeaponAssignmentDone;for(c=0;c<q.length;c+=1)if(q[c].enabled&&a.pointInRect(g.x,g.y,q[c].x,q[c].y,q[c].x+q[c].size,q[c].y+q[c].size)){d=q[c].type;d===a.CommandEnum.Menu&&(5<h.currentLevel&&a.isTrialLicense()?
a.showMainScreen():a.displayMenuConfirmDialog(),f=!0,a.SoundManager.playClickSound());if(d===a.CommandEnum.NextLevel)20===h.currentLevel||h.currentLevel===Y[1].level?r(Y[0].level):r(h.currentLevel+1),f=!0,a.SoundManager.playReloadSound();else if(d===a.CommandEnum.Restart)H!==a.GameStateEnum.GameLost?(ea=a.CommandEnum.Restart,M(),Ga=aa,aa=!0):r(h.currentLevel),f=!0,a.SoundManager.playReloadSound();else if(d===a.CommandEnum.Pause)aa=!aa,f=!0;else if(d===a.CommandEnum.BuyGame)a.buyGame(),f=!0;else if(d===
a.CommandEnum.ZoomIn)L+=.05,.9<L&&(L=.9),f=!0;else if(d===a.CommandEnum.ZoomOut)L-=.05,.15>L&&(L=.15),f=!0;else if(d===a.CommandEnum.CrateSelectionDone)d=a.screenToHud({x:G.width,y:G.height}),q[c].ty=d.y-1.1,q[c].y=d.y+1,h.newItem!==a.StackObjectTypeEnum.None&&(h.newItem=a.StackObjectTypeEnum.None,J(d)),f=!0;else if(d===a.CommandEnum.Ready)d=a.screenToHud({x:G.width,y:G.height}),q[c].ty=d.y-1.1,q[c].y=d.y+1,h.primaryWeaponAssignmentDone?h.secondaryWeaponAssignmentDone||(h.secondaryWeaponAssignmentDone=
!0):h.primaryWeaponAssignmentDone=!0,h.primaryWeaponAssignmentDone&&h.secondaryWeaponAssignmentDone?(h.leftPlayer.currentWeaponCategory=a.WeaponCategoryEnum.Primary,h.rightPlayer.currentWeaponCategory=a.WeaponCategoryEnum.Primary,h.leftPlayer.direction=a.DirectionEnum.Left,h.rightPlayer.direction=a.DirectionEnum.Right,q[c].enabled=!1):h.primaryWeaponAssignmentDone&&(h.leftPlayer.currentWeaponCategory=a.WeaponCategoryEnum.Secondary,h.rightPlayer.currentWeaponCategory=a.WeaponCategoryEnum.Secondary,
h.selectedWeaponType=a.WeaponTypeEnum.None),h.rightPlayer.targetScaleFactor=1,h.leftPlayer.targetScaleFactor=1,f=!0,a.SoundManager.playReloadSound();else if(d===a.CommandEnum.ToggleAdrenaline&&k){if(0===h.survivalRageTime&&h.survivalPoints>=h.minSurvivalPoints)switch(f=1,h.leftPlayer.weapons[a.WeaponCategoryEnum.Secondary]===a.WeaponTypeEnum.Uzi&&(f+=.15),h.rightPlayer.weapons[a.WeaponCategoryEnum.Secondary]===a.WeaponTypeEnum.Uzi&&(f+=.15),h.survivalRageTime=h.maxSurvivalRageTime*f,h.survivalPoints-=
h.minSurvivalPoints,h.survivalRage=!0,h.currentLevel){case 1:h.currentLevelStage===a.LevelStageEnum.TutorialSelectSurvivalRage&&(aa=!1,h.currentLevelStage=a.LevelStageEnum.TutorialFirstWaveFinishJob)}f=!0}else if(d===a.CommandEnum.CancelAction&&k)q[c].direction===a.DirectionEnum.Left&&0<h.leftPlayer.buildData.cooldown?(h.leftPlayer.buildData.cooldown=0,h.leftPlayer.buildData.stackObjectType=a.StackObjectTypeEnum.None,f=!0):q[c].direction===a.DirectionEnum.Right&&0<h.rightPlayer.buildData.cooldown&&
(h.rightPlayer.buildData.cooldown=0,h.rightPlayer.buildData.stackObjectType=a.StackObjectTypeEnum.None,f=!0),a.SoundManager.playClickSound();else if(d===a.CommandEnum.SelectStackObject&&k){f=null;for(e=0;e<q.length;++e)if(q[e].type===a.CommandEnum.ShowStackObjects&&q[e].selected&&q[e].direction===q[c].direction){f=q[e];break}d=!1;if(f){if(q[c].stackObjectType===a.StackObjectTypeEnum.MetalCrate||q[c].stackObjectType===a.StackObjectTypeEnum.WoodCrate)f.direction===a.DirectionEnum.Left&&h.leftPlayer.stack.objects.length===
h.maxStackSize?d=!0:f.direction===a.DirectionEnum.Right&&h.rightPlayer.stack.objects.length===h.maxStackSize&&(d=!0);q[c].stackObjectType===a.StackObjectTypeEnum.RepairCrate&&(e=q[c].direction===a.DirectionEnum.Left?h.leftPlayer:h.rightPlayer,0>=h.repairKits||!(0<e.stack.objects.length&&e.stack.objects[0].strength<h.getStackObjectStrength(e.stack.objects[0].type)))&&(d=!0);(q[c].stackObjectType===a.StackObjectTypeEnum.DoubleWoodCrate||q[c].stackObjectType===a.StackObjectTypeEnum.DoubleMetalCrate||
q[c].stackObjectType===a.StackObjectTypeEnum.MountedCrate||q[c].stackObjectType===a.StackObjectTypeEnum.SpikeCrate||q[c].stackObjectType===a.StackObjectTypeEnum.TNTCrate)&&40>h.survivalPoints&&(d=!0)}d||(f&&f.stackObjectType!==q[c].stackObjectType&&(f=f.direction===a.DirectionEnum.Left?h.leftPlayer.buildData:h.rightPlayer.buildData,f.cooldown=h.getStackObjectCreationTime(q[c].stackObjectType),f.stackObjectType=q[c].stackObjectType,q[c].stackObjectType===a.StackObjectTypeEnum.DoubleWoodCrate||q[c].stackObjectType===
a.StackObjectTypeEnum.DoubleMetalCrate||q[c].stackObjectType===a.StackObjectTypeEnum.MountedCrate||q[c].stackObjectType===a.StackObjectTypeEnum.SpikeCrate||q[c].stackObjectType===a.StackObjectTypeEnum.TNTCrate?h.survivalPoints-=40:q[c].stackObjectType===a.StackObjectTypeEnum.RepairCrate&&--h.repairKits),h.currentLevelStage===a.LevelStageEnum.TutorialHitCrateButton&&(h.currentLevelStage=a.LevelStageEnum.TutorialBuildingFirstCrate),Ha(!0));f=!0}else if(d===a.CommandEnum.ShowStackObjects&&k){f=q[c].direction===
a.DirectionEnum.Left?h.leftPlayer.buildData:h.rightPlayer.buildData;if(!1===q[c].selected&&0===f.cooldown){Ha(!0);q[c].selected=!0;f=q[c];e=d=f.x;for(var l=!1,m=0;m<q.length;++m)if(q[m].type===a.CommandEnum.SelectStackObject&&q[m].direction===f.direction){q[m].ty=f.y+1;q[m].enabled=!0;switch(q[m].stackObjectType){case a.StackObjectTypeEnum.WoodCrate:case a.StackObjectTypeEnum.MetalCrate:case a.StackObjectTypeEnum.RepairCrate:q[m].direction===a.DirectionEnum.Left?--e:e+=1;l=!0;break;case a.StackObjectTypeEnum.DoubleWoodCrate:case a.StackObjectTypeEnum.DoubleMetalCrate:case a.StackObjectTypeEnum.MountedCrate:case a.StackObjectTypeEnum.TNTCrate:case a.StackObjectTypeEnum.SpikeCrate:q[m].direction===
a.DirectionEnum.Left?d+=1:--d,l=!1}q[m].x=q[m].direction===a.DirectionEnum.Left?l?e+1:d:l?e-1:d;q[m].tx=q[m].x}if(h.currentLevelStage===a.LevelStageEnum.TutorialHitBuildButton||h.currentLevelStage===a.LevelStageEnum.TutorialZombiesComing)h.currentLevelStage=a.LevelStageEnum.TutorialHitCrateButton}else Ha(!0);f=!0;a.SoundManager.playClickSound()}else if(d===a.CommandEnum.AssignWeapon){if(!1===q[c].locked){q[c].direction!==a.DirectionEnum.Left||h.leftPlayer.weapons[q[c].weaponCategory]===q[c].weaponType&&
h.leftPlayer.currentWeaponCategory===q[c].weaponCategory?q[c].direction!==a.DirectionEnum.Right||h.rightPlayer.weapons[q[c].weaponCategory]===q[c].weaponType&&h.rightPlayer.currentWeaponCategory===q[c].weaponCategory||(h.rightPlayer.weapons[q[c].weaponCategory]=q[c].weaponType,h.rightPlayer.currentWeaponCategory=q[c].weaponCategory):(h.leftPlayer.weapons[q[c].weaponCategory]=q[c].weaponType,h.leftPlayer.currentWeaponCategory=q[c].weaponCategory);h.selectedWeaponType=q[c].weaponType;d=a.screenToHud({x:G.width,
y:G.height});for(e=0;e<q.length;++e)q[e].type===a.CommandEnum.AssignWeapon&&q[e].direction===q[c].direction?q[e].selected=q[e].direction===a.DirectionEnum.Left?h.leftPlayer.weapons[q[e].weaponCategory]===q[e].weaponType:h.rightPlayer.weapons[q[e].weaponCategory]===q[e].weaponType:q[e].type===a.CommandEnum.Ready&&(h.primaryWeaponAssignmentDone?h.secondaryWeaponAssignmentDone||(q[e].ty=h.leftPlayer.weapons[a.WeaponCategoryEnum.Secondary]!==a.WeaponTypeEnum.None&&h.rightPlayer.weapons[a.WeaponCategoryEnum.Secondary]!==
a.WeaponTypeEnum.None?d.y-1.1:d.y+1):q[e].ty=h.leftPlayer.weapons[a.WeaponCategoryEnum.Primary]!==a.WeaponTypeEnum.None&&h.rightPlayer.weapons[a.WeaponCategoryEnum.Primary]!==a.WeaponTypeEnum.None?d.y-1.1:d.y+1);q[c].direction===a.DirectionEnum.Left?(h.leftPlayer.targetScaleFactor=1.6,h.rightPlayer.targetScaleFactor=1,h.leftPlayer.scaleFactor!==h.leftPlayer.targetScaleFactor&&(h.leftPlayer.reloadCooldown=.3)):(h.rightPlayer.targetScaleFactor=1.6,h.leftPlayer.targetScaleFactor=1,h.rightPlayer.scaleFactor!==
h.rightPlayer.targetScaleFactor&&(h.rightPlayer.reloadCooldown=.3));a.SoundManager.playReloadSound()}else ka=1.7;f=!0}if(f)break}f||1!==h.currentLevel||(h.currentLevelStage===a.LevelStageEnum.TutorialStart?(h.tutorialCooldown=6,h.currentLevelStage=a.LevelStageEnum.TutorialZombiesComing,f=!0):h.currentLevelStage===a.LevelStageEnum.TutorialFirstWaveDone?(h.currentLevelStage=a.LevelStageEnum.TutorialReinforceDefenses,f=!0):h.currentLevelStage===a.LevelStageEnum.TutorialTapToContinue?(h.currentLevelStage=
a.LevelStageEnum.TutorialFirstWave,f=!0):h.currentLevelStage===a.LevelStageEnum.TutorialSecondWaveDone?(h.currentLevelStage=a.LevelStageEnum.TutorialHelpingHand,f=!0):h.currentLevelStage===a.LevelStageEnum.TutorialFirstKill?(h.currentLevelStage=a.LevelStageEnum.TutorialSelectSurvivalRage,d=a.screenToHud({x:G.width,y:G.height}),q.push({selected:!1,enabled:!0,type:a.CommandEnum.ToggleAdrenaline,x:d.x/2-.5,y:d.y-2,tx:d.x/2-.5,ty:d.y-2,size:.95}),f=!0):h.currentLevelStage===a.LevelStageEnum.TutorialTeamDefenses?
(h.currentLevelStage=a.LevelStageEnum.TutorialTeamWork,f=!0,d=a.screenToHud({x:G.width,y:G.height}),q.push({selected:!1,enabled:!0,type:a.CommandEnum.ToggleAdrenaline,x:d.x/2-.5,y:d.y-2,tx:d.x/2-.5,ty:d.y-2,size:.95}),q.push({selected:!1,enabled:!0,type:a.CommandEnum.ShowStackObjects,x:d.x/2-2,y:d.y-2,size:.95,direction:a.DirectionEnum.Left}),q.push({selected:!1,enabled:!0,type:a.CommandEnum.CancelAction,x:d.x/2-3,y:d.y-2,size:.95,direction:a.DirectionEnum.Left}),q.push({selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,
x:0,y:d.y,tx:0,ty:d.y,size:.95,stackObjectType:a.StackObjectTypeEnum.WoodCrate,direction:a.DirectionEnum.Left}),q.push({selected:!1,enabled:!0,type:a.CommandEnum.ShowStackObjects,x:d.x/2+1,y:d.y-2,size:.95,direction:a.DirectionEnum.Right}),q.push({selected:!1,enabled:!0,type:a.CommandEnum.CancelAction,x:d.x/2+2,y:d.y-2,size:.95,direction:a.DirectionEnum.Right}),q.push({selected:!1,enabled:!1,type:a.CommandEnum.SelectStackObject,x:0,y:d.y,tx:0,ty:d.y,size:.95,stackObjectType:a.StackObjectTypeEnum.WoodCrate,
direction:a.DirectionEnum.Right})):h.currentLevelStage===a.LevelStageEnum.TutorialHelpingHand?(h.currentLevelStage=a.LevelStageEnum.TutorialTeamCamera,c=h.minX+(h.maxX-h.minX)/2,h.leftPlayer.x=c-.6,h.leftPlayer.stack.x=c-.6,h.leftPlayer.direction=a.DirectionEnum.Right,h.leftPlayer.firingAngle=0,h.leftPlayer.reloadCooldown=.2,h.leftPlayer.buildData.cooldown=0,h.rightPlayer.x=c+.6,h.rightPlayer.stack.x=c+.6,h.rightPlayer.direction=a.DirectionEnum.Right,h.rightPlayer.firingAngle=0,h.rightPlayer.reloadCooldown=
.2,h.rightPlayer.buildData.cooldown=0,a.SoundManager.playReloadSound(),f=!0):h.currentLevelStage===a.LevelStageEnum.TutorialTeamCamera?(W(b),h.leftPlayer.direction===a.DirectionEnum.Left&&h.rightPlayer.direction===a.DirectionEnum.Left&&(h.currentLevelStage=a.LevelStageEnum.TutorialTeamDefenses),f=!0):h.currentLevelStage===a.LevelStageEnum.TutorialTurnRight&&(b.x>h.minX+(h.maxX-h.minX)/2&&(h.leftPlayer.direction=a.DirectionEnum.Right,h.leftPlayer.firingAngle=0,h.leftPlayer.reloadCooldown=.2,h.rightPlayer.direction=
a.DirectionEnum.Right,h.rightPlayer.firingAngle=0,h.rightPlayer.reloadCooldown=.2,h.currentLevelStage=a.LevelStageEnum.TutorialSecondWave),f=!0));f||W(b)}}}function W(b){if(H===a.GameStateEnum.GameRun)if(!h.secondaryWeaponAssignmentDone||!h.primaryWeaponAssignmentDone||h.newItem!==a.StackObjectTypeEnum.None)h.rightPlayer.targetScaleFactor=1,h.leftPlayer.targetScaleFactor=1,h.selectedWeaponType=a.WeaponTypeEnum.None;else if(h.currentLevelStage===a.LevelStageEnum.None||h.currentLevelStage===a.LevelStageEnum.TutorialTeamCamera||
h.currentLevelStage===a.LevelStageEnum.TutorialTeamWork){var c=h.minX+(h.maxX-h.minX)/2;!(0<h.leftPlayer.buildData.cooldown||0<h.rightPlayer.buildData.cooldown)||0<h.leftPlayer.buildData.cooldown&&0<h.rightPlayer.buildData.cooldown?b.x<c&&h.leftPlayer.direction!==a.DirectionEnum.Left?(h.leftPlayer.direction=a.DirectionEnum.Left,h.leftPlayer.firingAngle=0,h.leftPlayer.reloadCooldown=.2):b.x<c&&h.rightPlayer.direction!==a.DirectionEnum.Left?(h.rightPlayer.direction=a.DirectionEnum.Left,h.rightPlayer.firingAngle=
0,h.rightPlayer.reloadCooldown=.2):b.x>c&&h.rightPlayer.direction!==a.DirectionEnum.Right?(h.rightPlayer.direction=a.DirectionEnum.Right,h.rightPlayer.firingAngle=0,h.rightPlayer.reloadCooldown=.2):b.x>c&&h.leftPlayer.direction!==a.DirectionEnum.Right&&(h.leftPlayer.direction=a.DirectionEnum.Right,h.leftPlayer.firingAngle=0,h.leftPlayer.reloadCooldown=.2):b.x<c?(h.leftPlayer.direction!==a.DirectionEnum.Left&&(h.leftPlayer.direction=a.DirectionEnum.Left,h.leftPlayer.firingAngle=0,h.leftPlayer.reloadCooldown=
.2),h.rightPlayer.direction!==a.DirectionEnum.Left&&(h.rightPlayer.direction=a.DirectionEnum.Left,h.rightPlayer.firingAngle=0,h.rightPlayer.reloadCooldown=.2)):(h.leftPlayer.direction!==a.DirectionEnum.Right&&(h.leftPlayer.direction=a.DirectionEnum.Right,h.leftPlayer.firingAngle=0,h.leftPlayer.reloadCooldown=.2),h.rightPlayer.direction!==a.DirectionEnum.Right&&(h.rightPlayer.direction=a.DirectionEnum.Right,h.rightPlayer.firingAngle=0,h.rightPlayer.reloadCooldown=.2))}}function Ha(b){var c=a.screenToHud({x:G.width,
y:G.height}),d,e,f;d=0;for(e=q.length;d<e;d+=1)f=q[d],f.type===a.CommandEnum.ShowStackObjects?f.selected=!1:f.type===a.CommandEnum.SelectStackObject&&(f.enabled=!1,b||(f.y=c.y),f.ty=c.y)}function Pa(){}var xa,ya,sa,N,oa,F,Ca,D={playerName:"player",levelProgress:[],killCountHighScore:0,daysCountHighScore:0,achievements:[]},Ka=!0,va,wa,Ma=!1,G,T,aa,Ga,H,Ja,h,ga,U,I,pa,L,ja,P,ba,Fa,ta,ca,Aa,Ba,ra,Ea,ia,Ia,da,na,La=!1,S,ua,K,Z,ha,O,fa,Y,ea,qa,ka=0,ma=0,Na=-1,z,q,Da={current:0,total:0},la=[{time:0,direction:0,
maxTime:.2,speed1:2,speed2:2},{time:0,direction:0,maxTime:.5,speed1:1,speed2:1.5},{time:0,direction:0,maxTime:.7,speed1:1,speed2:2},{time:0,direction:0,maxTime:.7,speed1:2,speed2:4}];a.getScaleUnit=function(){return sa};a.getCurrentGameState=function(){return H};a.getCanvasWidth=function(){return G.width};a.getCanvasHeight=function(){return G.height};a.getIntroTime=function(){return ia};a.getMaxIntroTime=function(){return Ia};a.getMenuSetupTime=function(){return da};a.getMaxMenuSetupTime=function(){return na};
a.getTitleHeartbeat=function(){return la[1]};a.getWeaponHeartbeat=function(){return la[2]};a.getCarHeartbeat=function(){return la[3]};a.getMenuEntities=function(){return ua};a.getCurrentMenuType=function(){return S};a.getLevelItemData=function(){return O};a.getMenuAchievementItems=function(){return fa};a.getMenuSurvivalItems=function(){return Y};a.getMenuPageIndex=function(){return K};a.getMenuPageTime=function(){return Z};a.getMenuPageDirection=function(){return ha};a.getShowCredits=function(){return qa};
a.setShowCredits=function(a){qa=a};a.getConfirmCommand=function(){return ea};a.getLockedDialogTime=function(){return ka};a.getMenuHudItems=function(){return z};a.getLevelHudItems=function(){return q};a.getSavedData=function(){return D};a.getCurrentLevel=function(){return h?h.currentLevel:0};a.setPaused=function(a){Ca=a};a.getAchievementDialogTime=function(){return ma};a.getAchievementDialogMaxTime=function(){return 3.2};a.getAchievementId=function(){return Na};a.getGameLoadingData=function(){return Da};
a.setAssetsResolution=function(a){};a.setFitToScreen=function(a){Ma=a};a.getLogoTime=function(){return oa};a.loadData=function(b){if(b===E)if("undefined"!==typeof window.external&&"undefined"!==typeof window.external.notify)window.external.notify("commandLoadData");else{if("undefined"!==typeof window.localStorage){if(b=window.localStorage.getItem("gameData"),null===b||""===b)b='{ "playerName": "player", "levelProgress": [2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3], "killCountHighScore" : 0, "daysCountHighScore" : 0, "achievements": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] }'}else b=
'{ "playerName": "player", "levelProgress": [2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3], "killCountHighScore" : 0, "daysCountHighScore" : 0, "achievements": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] }';a.loadData(b)}else for(D=JSON.parse(b),b=0;b<D.achievements.length;b+=1)0===b&&D.levelProgress[15]===a.LevelStatusEnum.Passed?D.achievements[b]=a.LevelStatusEnum.Passed:4===b&&D.levelProgress[19]===a.LevelStatusEnum.Passed?D.achievements[b]=a.LevelStatusEnum.Passed:11===b&&100<=
D.killCountHighScore?D.achievements[b]=a.LevelStatusEnum.Passed:12===b&&200<=D.killCountHighScore?D.achievements[b]=a.LevelStatusEnum.Passed:5===b&&1<=D.daysCountHighScore?D.achievements[b]=a.LevelStatusEnum.Passed:6===b&&3<=D.daysCountHighScore?D.achievements[b]=a.LevelStatusEnum.Passed:7===b&&D.levelProgress[1]===a.LevelStatusEnum.Passed&&(D.achievements[b]=a.LevelStatusEnum.Passed)};a.saveData=function(){"undefined"!==typeof window.external&&"undefined"!==typeof window.external.notify?window.external.notify("commandSaveData:"+
JSON.stringify(D)):"undefined"!==typeof window.localStorage&&window.localStorage.setItem("gameData",JSON.stringify(D))};a.playAchievementToaster=function(b){0===ma&&(ma=3.2,Na=b,a.SoundManager.playAward())};a.initialize=function(b){F={root:b&&b.root?b.root:"",onGameLoading:b&&b.onGameLoading?b.onGameLoading:function(){},onGameSessionStarted:b&&b.onGameSessionStarted?b.onGameSessionStarted:function(){},onGameSessionEnded:b&&b.onGameSessionEnded?b.onGameSessionEnded:function(){},useHighResolution:b&&
b.useHighResolution?b.useHighResolution:!1,rollTime:b&&b.rollTime?b.rollTime:0};b=a.AssetResolutionEnum.ResolutionA;if(!F.useHighResolution){var d=Math.max($(window).width(),$(window).height());b=a.AssetResolutionEnum.ResolutionB;800>d&&(b=a.AssetResolutionEnum.ResolutionC)}switch(b){case a.AssetResolutionEnum.ResolutionA:xa=854;ya=480;sa=.0125;N="854";break;case a.AssetResolutionEnum.ResolutionB:xa=683;ya=384;sa=.015625;N="683";break;case a.AssetResolutionEnum.ResolutionC:xa=480,ya=270,sa=1/45,N=
"480"}a.loadData();ea=a.CommandEnum.None;oa=3+F.rollTime;Ca=!1;a.setupTileOffsets();G=document.getElementById("canvas");T=G.getContext("2d");$("#canvas").bind("vmousedown",Oa);$("#canvas").bind("vmouseup",Pa);ga=new a.Camera;U=new a.Camera;I=new a.Camera;pa=new a.Camera;pa.sx=1;pa.sy=1;pa.update();a.resetDisplay();a.Resources.loadingScreenImage=new Image;a.Resources.loadingScreenImage.onload=c;a.Resources.loadingScreenImage.src=F.root+"/assets/img/"+N+"/loadingscreen.png";H=a.GameStateEnum.GamePreLoading;
t()};a.resetDisplay=function(){var a,b;G.width=xa;G.height=ya;Ma?(va=$(window).width()/G.width,wa=$(window).height()/G.height):(a=$(window).width()/G.width,b=$(window).height()/G.height,va=wa=Math.min(a,b));G.style.width=xa*va+"px";G.style.height=ya*wa+"px";$("canvas").center();ga&&(ga.sx=1/sa,ga.sy=1/sa,ga.update())};a.applyHudCameras=function(){T.setTransform.apply(T,ga.matrix);T.transform.apply(T,pa.matrix)};a.applySceneCameras=function(){T.setTransform.apply(T,ga.matrix);T.transform.apply(T,U.matrix);
T.transform.apply(T,I.matrix)};a.applyVeryFarParallaxCameras=function(){T.translate(.15*-I.x,.15*-I.y)};a.applyFarParallaxCameras=function(){T.translate(.3*-I.x,.3*-I.y)};a.applyNearParallaxCameras=function(){T.translate(.5*-I.x,.5*-I.y)};a.applyVeryNearParallaxCameras=function(){T.translate(.75*-I.x,.75*-I.y)};a.applyHereParallaxCameras=function(){T.translate(-I.x,-I.y)};a.screenToHud=function(b){var c=new a.Camera;c.multiply(ga);c.multiply(pa);return c.screenToCamera(b.x,b.y)};a.screenToScene=function(b){var c=
new a.Camera;c.multiply(ga);c.multiply(U);c.multiply(I);c.translate(-I.x,-I.y);return c.screenToCamera(b.x,b.y)};a.cancelConfirmDialog=function(){aa=Ga;ea=a.CommandEnum.None;for(var b=0;b<q.length;)q[b].type===a.CommandEnum.ConfirmNo||q[b].type===a.CommandEnum.ConfirmYes?q.splice(b,1):b+=1};a.displayMenuConfirmDialog=function(){ea===a.CommandEnum.None?(ea=a.CommandEnum.Menu,M(),Ga=aa,aa=!0):a.cancelConfirmDialog()};a.showMainScreen=function(){H!==a.GameStateEnum.GameIntro&&H!==a.GameStateEnum.GameStart&&
(H!==a.GameStateEnum.GameMenu||H===a.GameStateEnum.GameMenu&&S!==a.MenuTypeEnum.ShowMain&&S!==a.MenuTypeEnum.None)&&H!==a.GameStateEnum.GameLoading&&(H!==a.GameStateEnum.GameMenu&&H!==a.GameStateEnum.GameStart&&a.SoundManager.playMainMusic(),H=a.GameStateEnum.GameMenu,K=0,da=na=3,S=a.MenuTypeEnum.ShowMain,Z=0,ha=a.DirectionEnum.None)}})(window.OkijinGame=window.OkijinGame||{});