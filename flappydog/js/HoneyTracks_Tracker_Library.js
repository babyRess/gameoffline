var HoneyTracks_Tracker_Library=function(e){function E(e,t){this.getMessage=function(){return t};this.getCode=function(){return e}}function S(e){var t=e._ApiKey;if(!t)throw"ApiKey not set, tracking not available.";var n=(e._ApiConnectorUrl||"http://tracker.honeytracks.com/?ApiKey=%1$s").replace(/\%1\$s/i,t);var r=e._Mode||"auto-commit";var i=e._CommitTimerInterval||5e3;var s=false;var o=v({_ApiKey:null,SecretKey:null,UniqueCustomerIdentifier:null,Language:null,Version:null,ClientIP:"%%CLIENT_IP%%",Space:null,Timestamp:null},e);var u={};var f=[];var l=function(e){var r=v(o,e);if(!u||!u[r.Space+"::"+r.UniqueCustomerIdentifier]){var i=c(a({ApiKey:t,Packets:[r]}));var s=new Date;var f=new Image;f.src=n+"&nc="+s.getTime()+"&_="+i}};this.setTrackingUrl=function(e){n=e};this.setOption=function(e,t){o[e]=t};this.setOptions=function(e){d(e,this.setOption)};this.getUniqueCustomerClickToken=function(e){if(!e)e=y("HTJSCTR");if(e)return e;return false};this.AddCustomerEventBlock=function(e,t){e=e||o.Space;t=t||o.UniqueCustomerIdentifier;u[e+"::"+t]=true};this.DeleteCustomerEventBlock=function(e,t){e=e||o.Space;t=t||o.UniqueCustomerIdentifier;u[e+"::"+t]=false};this.TrackClickWithoutCookie=function(e,t,n){if(!e)throw new E(500,"Missing UniqueCustomerClickToken value, see https://docs.honeytracks.com/wiki/TrackClick/Javascrip for details.");l({UniqueCustomerClickToken:e,Action:"User::Click",MarketingIdentifier:typeof t=="object"?a(t):t,LandingPage:n})};this.TrackClick=function(e,t,n,r,i){var s=false,o=r||14,u=this.getUniqueCustomerClickToken(),a={},f={Action:"User::Click",LandingPage:t};if(typeof e=="object"){d(["PartnerName","CampaignName","AdName","Keyword"],function(t,n){if(e[n])a[n]=e[n]});f.MarketingIdentifier=e.MarketingIdentifier}else{f.MarketingIdentifier=e}f=v(f,a);if(!u){u=h(p()+""+f);s=true}f.UniqueCustomerClickToken=u;if(s){g("HTJSCTR",f.UniqueCustomerClickToken,Math.floor((new Date).getTime()/1e3)+o*86400,"/",i)}if(s===true||n===false){l(f)}};this.TrackFeatureUsage=function(e,t,n,r,i){l({Action:"Feature::Usage::"+e+(t?"::"+t:""),FeatureType:e,FeatureSubType:t?t:null,FeatureSubSubType:n?n:null,GameCurrency:r?a(r):null,Quantity:parseInt(i)})};this.TrackLevelup=function(e){l({Action:"User::Levelup",Value:parseInt(e)})};this.TrackLogin=function(){l({Action:"User::Login"})};this.TrackLogout=function(){l({Action:"User::Logout"})};this.TrackSignup=function(e,t){l({Action:"User::Signup",MarketingIdentifier:e,LandingPage:t,IsFreeAction:"true"})};this.TrackUserBirthyear=function(e){l({Action:"User::Profile",Type:"Birthyear",Value:e})};this.TrackUserGender=function(e){l({Action:"User::Profile",Type:"Gender",Value:e})};this.TrackViralityInvitation=function(e,t,n){l({Action:"Virality::Invitation::"+e,InviteType:e,InviteMessageToken:t,Quantity:n?parseInt(n):1})};this.TrackViralityInviteAcceptance=function(e,t,n){l({Action:"Virality::Invitation::Acceptance::"+e,InviteType:e,InviteMessageToken:t,SourceUniqueCustomerIdentifier:n})};this.TrackVirtualCurrencyChargeback=function(e,t,n,r,i,s){l({Action:"VirtualCurrencies::Chargeback",Quantity:parseFloat(e),Value:parseFloat(n),Currency:r,Payout:parseFloat(i),PayoutCurrency:s||r,PaymentType:t})};this.TrackVirtualCurrencyPurchase=function(e,t,n,r,i,s,o){var u={Action:"VirtualCurrencies::Buy",Value:parseFloat(n),Currency:r,Payout:parseFloat(i),PayoutCurrency:s||r,PaymentType:t,IsFreeAction:o?"true":"false"};switch(typeof e){case"object":u.Quantity=parseFloat(e.Amount);if(e&&e.Name)u.VirtualCurrencyName=e.Name;break;default:u.Quantity=parseFloat(e)}l(u)};this.TrackVirtualGoodsFeaturePurchase=function(e,t,n,r,i,s){var o={Action:"VirtualGoods::"+e+(t?"::"+t:""),Quantity:parseInt(i),GameCurrency:r?a(r):null,FeatureType:e,FeatureSubType:t||null,IsFreeAction:s?"true":"false"};switch(typeof n){case"object":o.Value=parseFloat(n.Amount);if(n&&n.Name)o.VirtualCurrencyName=n.Name;break;default:o.Value=parseFloat(n)}l(o)};this.TrackVirtualGoodsItemPurchase=function(e,t,n,r,i,s){var o={Action:"VirtualGoods::Item::Buy::"+e,Quantity:parseInt(i),GameCurrency:r?a(r):null,ItemType:e,Item:typeof t=="object"?a(t):null,IsFreeAction:s?"true":"false"};switch(typeof n){case"object":o.Value=parseFloat(n.Amount);if(n&&n.Name)o.VirtualCurrencyName=n.Name;break;default:o.Value=parseFloat(n)}l(o)}}var t=function(e){r.lastIndex=0;return r.test(e)?'"'+e.replace(r,function(e){var t=o[e];return typeof t==="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'};var n=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i,s,o={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},u,a;var f=function(e,n){var r,o,a,l,c=i,h,p=n[e];if(typeof u==="function"){p=u.call(n,e,p)}switch(typeof p){case"string":return t(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p){return"null"}i+=s;h=[];if(Object.prototype.toString.apply(p)==="[object Array]"){l=p.length;for(r=0;r<l;r+=1){h[r]=f(r,p)||"null"}a=h.length===0?"[]":i?"[\n"+i+h.join(",\n"+i)+"\n"+c+"]":"["+h.join(",")+"]";i=c;return a}if(u&&typeof u==="object"){l=u.length;for(r=0;r<l;r+=1){o=u[r];if(typeof o==="string"){a=f(o,p);if(a){h.push(t(o)+(i?": ":":")+a)}}}}else{for(o in p){if(Object.prototype.hasOwnProperty.call(p,o)){a=f(o,p);if(a){h.push(t(o)+(i?": ":":")+a)}}}}a=h.length===0?"{}":i?"{\n"+i+h.join(",\n"+i)+"\n"+c+"}":"{"+h.join(",")+"}";i=c;return a}};a=function(e,t,n){var r;i="";s="";if(typeof n==="number"){for(r=0;r<n;r+=1){s+=" "}}else if(typeof n==="string"){s=n}u=t;if(t&&typeof t!=="function"&&(typeof t!=="object"||typeof t.length!=="number")){throw new Error("JSON.stringify")}return f("",{"":e})};var l=function(e){var t=e+"";var n="",r,i,s=0;r=i=0;s=t.length;for(var o=0;o<s;o++){var u=t.charCodeAt(o);var a=null;if(u<128){i++}else if(u>127&&u<2048){a=String.fromCharCode(u>>6|192)+String.fromCharCode(u&63|128)}else{a=String.fromCharCode(u>>12|224)+String.fromCharCode(u>>6&63|128)+String.fromCharCode(u&63|128)}if(a!==null){if(i>r){n+=t.slice(r,i)}n+=a;r=i=o+1}}if(i>r){n+=t.slice(r,s)}return n};var c=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var n,r,i,s,o,u,a,f,c=0,h=0,p="",d=[];if(!e){return e}e=l(e+"");do{n=e.charCodeAt(c++);r=e.charCodeAt(c++);i=e.charCodeAt(c++);f=n<<16|r<<8|i;s=f>>18&63;o=f>>12&63;u=f>>6&63;a=f&63;d[h++]=t.charAt(s)+t.charAt(o)+t.charAt(u)+t.charAt(a)}while(c<e.length);p=d.join("");switch(e.length%3){case 1:p=p.slice(0,-2)+"==";break;case 2:p=p.slice(0,-1)+"=";break}return p};var h=function(e){var t=function(e,t){var n=e<<t|e>>>32-t;return n};var n=function(e){var t="";var n;var r;for(n=7;n>=0;n--){r=e>>>n*4&15;t+=r.toString(16)}return t};var r;var i,s;var o=new Array(80);var u=1732584193;var a=4023233417;var f=2562383102;var c=271733878;var h=3285377520;var p,d,v,m,g;var y;e=l(e);var b=e.length;var w=[];for(i=0;i<b-3;i+=4){s=e.charCodeAt(i)<<24|e.charCodeAt(i+1)<<16|e.charCodeAt(i+2)<<8|e.charCodeAt(i+3);w.push(s)}switch(b%4){case 0:i=2147483648;break;case 1:i=e.charCodeAt(b-1)<<24|8388608;break;case 2:i=e.charCodeAt(b-2)<<24|e.charCodeAt(b-1)<<16|32768;break;case 3:i=e.charCodeAt(b-3)<<24|e.charCodeAt(b-2)<<16|e.charCodeAt(b-1)<<8|128;break}w.push(i);while(w.length%16!=14){w.push(0)}w.push(b>>>29);w.push(b<<3&4294967295);for(r=0;r<w.length;r+=16){for(i=0;i<16;i++){o[i]=w[r+i]}for(i=16;i<=79;i++){o[i]=t(o[i-3]^o[i-8]^o[i-14]^o[i-16],1)}p=u;d=a;v=f;m=c;g=h;for(i=0;i<=19;i++){y=t(p,5)+(d&v|~d&m)+g+o[i]+1518500249&4294967295;g=m;m=v;v=t(d,30);d=p;p=y}for(i=20;i<=39;i++){y=t(p,5)+(d^v^m)+g+o[i]+1859775393&4294967295;g=m;m=v;v=t(d,30);d=p;p=y}for(i=40;i<=59;i++){y=t(p,5)+(d&v|d&m|v&m)+g+o[i]+2400959708&4294967295;g=m;m=v;v=t(d,30);d=p;p=y}for(i=60;i<=79;i++){y=t(p,5)+(d^v^m)+g+o[i]+3395469782&4294967295;g=m;m=v;v=t(d,30);d=p;p=y}u=u+p&4294967295;a=a+d&4294967295;f=f+v&4294967295;c=c+m&4294967295;h=h+g&4294967295}y=n(u)+n(a)+n(f)+n(c)+n(h);return y.toLowerCase()};var p=function(e,t){var n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=[],i;t=t||n.length;if(e){for(i=0;i<e;i++)r[i]=n[0|Math.random()*t]}else{var s;r[8]=r[13]=r[18]=r[23]="-";r[14]="4";for(i=0;i<36;i++){if(!r[i]){s=0|Math.random()*16;r[i]=n[i==19?s&3|8:s]}}}return r.join("")};var d=function(e,t){if(Object.prototype.toString.apply(e)==="[object Array]"){for(var n=0;n<e.length;n++){t(n,e[n])}}else{for(var n in e){if(e.hasOwnProperty(n)){t(n,e[n])}}}};var v=function(e,t){var n={},r=function(e,t){if(e.substr(0,1)!="_")n[e]=t};d(e,r);d(t,r);return n};var m=function(e,t,n,r,i,s){if(typeof n==="string"&&/^\d+$/.test(n)){n=parseInt(n,10)}if(n instanceof Date){n=n.toGMTString()}else if(typeof n==="number"){n=(new Date(n*1e3)).toGMTString()}var o=[e+"="+t],u={},a="";u={expires:n,path:r,domain:i};for(a in u){if(u.hasOwnProperty(a)){u[a]&&o.push(a+"="+u[a])}}return s&&o.push("secure"),this.window.document.cookie=o.join(";"),true};var g=function(e,t,n,r,i,s){return m(e,encodeURIComponent(t),n,r,i,s)};var y=function(e){var t=e+"=";var n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(i.charAt(0)==" ")i=i.substring(1,i.length);if(i.indexOf(t)==0)return decodeURIComponent(i.substring(t.length,i.length).replace(/\+/g,"%20"))}return null};var b=null;var w=function(){var e=_HoneyTracksTracking;_HoneyTracksTracking=[];if(e&&e.length>0){for(var t=0;t<e.length;t++){e[t]()}}window.setTimeout(function(){w()},100)};return new function(){if(HoneyTracks_Tracker_Library==null){HoneyTracks_Tracker_Library=new S(e);HoneyTracks_Tracker_Library.constructor=null;w()}return HoneyTracks_Tracker_Library}}(_HoneyTracksSDKConfig);