!function(){mit.Backgrounds={common_bg_speed:1,cloud_bg_move_speed:0,cloud_bg_vx:0,backtree_bg_move_speed:0,backtree_bg_vx:0,fronttree_bg_move_speed:0,fronttree_bg_vx:0,ground_bg_move_speed:0,ground_bg_vx:0,combined_bg_move_speed:0,combined_bg_vx:0,log_x:40,log_y:0,sky_gradient:{},first_speed_inc:0,second_speed_inc:0,third_speed_inc:0,init:function(t){this.sky_gradient=t.createLinearGradient(0,0,0,mit.H),this.sky_gradient.addColorStop(0,"#06c4f4"),this.sky_gradient.addColorStop(1,"#7bd4f6"),this.cloud_img=mit.image.clouds,this.cloud_img.width=mit.W,this.cloud_img.height=mit.H,this.backtree_img=mit.image.backtrees,this.backtree_img.width=mit.W,this.backtree_img.height=mit.H,this.fronttree_img=mit.image.fronttrees,this.fronttree_img.width=mit.W,this.fronttree_img.height=mit.H,this.ground_img=mit.image.ground,this.ground_img.width=mit.W,this.ground_img.height=mit.H,this.grass_img=mit.image.grass,this.grass_img.width=mit.W,this.grass_img.height=mit.H,this.log_img=mit.image.log,this.combined_bg_img=mit.image.bg_combined,this.resetAllSpeed()},resetAllSpeed:function(){this.cloud_bg_move_speed=2,this.backtree_bg_move_speed=3,this.fronttree_bg_move_speed=5,this.ground_bg_move_speed=7,this.combined_bg_move_speed=3},drawClouds:function(t){var i=Math.abs(this.cloud_bg_vx);try{t.drawImage(this.cloud_img,i,0,mit.W+this.cloud_bg_vx,mit.H,0,0,mit.W+this.cloud_bg_vx,mit.H),t.drawImage(this.cloud_img,0,0,i,mit.H,mit.W+this.cloud_bg_vx,0,i,mit.H)}catch(e){}this.cloud_bg_vx-=this.cloud_bg_move_speed,-this.cloud_bg_vx>=mit.W&&(this.cloud_bg_vx=0)},drawBackTrees:function(t){var i=Math.abs(this.backtree_bg_vx);try{t.drawImage(this.backtree_img,i,0,mit.W+this.backtree_bg_vx,mit.H,0,0,mit.W+this.backtree_bg_vx,mit.H),t.drawImage(this.backtree_img,0,0,i,mit.H,mit.W+this.backtree_bg_vx,0,i,mit.H)}catch(e){}mit.game_started&&(this.backtree_bg_vx-=this.backtree_bg_move_speed*this.common_bg_speed),-this.backtree_bg_vx>=mit.W&&(this.backtree_bg_vx=0)},drawFrontTrees:function(t){var i=Math.abs(this.fronttree_bg_vx);try{t.drawImage(this.fronttree_img,i,0,mit.W+this.fronttree_bg_vx,mit.H,0,0,mit.W+this.fronttree_bg_vx,mit.H),t.drawImage(this.fronttree_img,0,0,i,mit.H,mit.W+this.fronttree_bg_vx,0,i,mit.H)}catch(e){}mit.game_started&&(this.fronttree_bg_vx-=this.fronttree_bg_move_speed*this.common_bg_speed),-this.fronttree_bg_vx>=mit.W&&(this.fronttree_bg_vx=0)},drawGround:function(t){var i=Math.abs(this.ground_bg_vx);try{t.drawImage(this.ground_img,i,0,mit.W+this.ground_bg_vx,mit.H,0,0,mit.W+this.ground_bg_vx,mit.H),t.drawImage(this.ground_img,0,0,i,mit.H,mit.W+this.ground_bg_vx,0,i,mit.H)}catch(e){}mit.game_started&&(this.ground_bg_vx-=this.ground_bg_move_speed*this.common_bg_speed),-this.ground_bg_vx>=mit.W&&(this.ground_bg_vx=0)},drawGrass:function(t){var i=Math.abs(this.grass_bg_vx);try{t.drawImage(this.grass_img,i,0,mit.W+this.grass_bg_vx,mit.H,0,0,mit.W+this.grass_bg_vx,mit.H),t.drawImage(this.grass_img,0,0,i,mit.H,mit.W+this.grass_bg_vx,0,i,mit.H)}catch(e){}mit.game_started&&(this.grass_bg_vx-=this.grass_bg_move_speed*this.common_bg_speed),-this.grass_bg_vx>=mit.W&&(this.grass_bg_vx=0)},drawInitLog:function(t){this.log_y=mit.H-(this.log_img.height+45),t.drawImage(this.log_img,this.log_x,this.log_y),mit.game_started&&(this.log_x-=this.ground_bg_move_speed*this.common_bg_speed)},drawCombinedBG:function(t){var i=Math.abs(this.combined_bg_vx);try{t.drawImage(this.combined_bg_img,i,0,mit.W+this.combined_bg_vx,mit.H,0,0,mit.W+this.combined_bg_vx,mit.H),t.drawImage(this.combined_bg_img,0,0,i,mit.H,mit.W+this.combined_bg_vx,0,i,mit.H)}catch(e){}mit.game_started&&(this.combined_bg_vx-=this.combined_bg_move_speed*this.common_bg_speed),-this.combined_bg_vx>=mit.W&&(this.combined_bg_vx=0)},draw:function(t){mit.start_btn_clicked?this.fps&&5e3!==this.fps||(this.fps=mit.fps):this.fps=5e3,this.fps>56?(t.save(),t.fillStyle=this.sky_gradient,t.fillRect(0,0,mit.W,mit.H),t.restore(),this.drawClouds(t),this.drawBackTrees(t),this.drawFrontTrees(t)):this.drawCombinedBG(t),this.log_x+100>0?this.drawInitLog(t):mit.game_started||(this.log_x=40),this.drawGround(t),mit.score>200&&!this.first_speed_inc&&(this.cloud_bg_move_speed++,this.backtree_bg_move_speed++,this.fronttree_bg_move_speed++,this.ground_bg_move_speed++,this.combined_bg_move_speed++,this.first_speed_inc=1),mit.score>1e3&&!this.second_speed_inc&&(this.cloud_bg_move_speed++,this.backtree_bg_move_speed++,this.fronttree_bg_move_speed++,this.ground_bg_move_speed++,this.combined_bg_move_speed++,this.second_speed_inc=1),mit.score>3e3&&!this.third_speed_inc&&(this.cloud_bg_move_speed++,this.backtree_bg_move_speed++,this.fronttree_bg_move_speed++,this.ground_bg_move_speed++,this.combined_bg_move_speed++,this.third_speed_inc=1)}}}(),function(){mit.Branch=function(){this.x=0,this.y=0,this.w,this.h,this.escape_x,this.escape_y,this.escape_w,this.escape_h,this.getBounds=function(){var t={};return t.start_x=this.x,t.start_y=this.y,t.end_x=this.x+this.w,t.end_y=this.y+this.h,t},this.getEscapeBounds=function(){var t={};return t.start_x=this.escape_x,t.start_y=this.escape_y,t.end_x=this.escape_x+this.escape_w,t.end_y=this.escape_y+this.escape_h,t}},mit.BranchUtils={branch_img:{},branches:[],count:4,init:function(){this.branch_img=mit.image.branch},getRandomBranchPos:function(){var t={};this.branches[this.branches.length-1]?(t.x=this.branches[this.branches.length-1].x,t.x+=utils.randomNumber(500,2e3)):t.x=utils.randomNumber(2e3,2500);var i=mit.ForkUtils.forks;return i.length&&i.forEach(function(i){Math.abs(t.x-i.x)<500&&(t.x=i.x+500)}),t},create:function(){var t=this.branches,i=this.count;if(t.length<i)for(var e=0;e<i-t.length;e++){var s=new mit.Branch,a=this.getRandomBranchPos();s.x=a.x,s.y=0,s.w=this.branch_img.width,s.h=this.branch_img.height,s.escape_x=s.x,s.escape_y=s.y+utils.randomNumber(0,s.h-150),s.escape_w=this.branch_img.width,s.escape_h=150,t.push(s)}},draw:function(t){var i=this.branches,e=this.branch_img,s=0;this.create(),i.forEach(function(i,a){return i.x-=mit.Backgrounds.ground_bg_move_speed,i.x+i.w<0?void s++:void(i.x>mit.W||(i.escape_x=i.x,t.drawImage(e,i.x,i.y),t.save(),t.globalCompositeOperation="destination-out",t.fillStyle="white",t.fillRect(i.escape_x,i.escape_y,i.escape_w,i.escape_h),t.restore()))}),s&&i.splice(0,s)},checkCollision:function(){var t=this.branches[0];if(!(t.x>mit.W/2)){var i=mit.Pappu.getBounds(),e=t.getBounds();if(utils.intersect(i,e)){var s=t.getEscapeBounds();utils.intersect(i,s)||mit.gameOver()}}}}}(),function(){mit.Collectible=function(){this.x,this.y,this.w,this.h,this.type,this.sound=document.getElementById("ting"),this.sound.volume=.35,this.sub_type,this.getBounds=function(){var t={};return t.start_x=this.x,t.start_y=this.y,t.end_x=this.x+this.w,t.end_y=this.y+this.h,t},this.draw=function(t){switch(this.type){case"coin":this.drawCoin(t);break;case"clone":this.drawClone(t);break;case"invincible":this.drawInvincible(t)}},this.drawCoin=function(t){var i=mit.CollectibleUtils.getCoinSpritePos(this.sub_type);t.drawImage(mit.CollectibleUtils.coin_img,i.x,i.y,30,30,this.x,this.y,30,30)},this.drawClone=function(t){t.drawImage(mit.CollectibleUtils.clone_img,this.x,this.y)},this.drawInvincible=function(t){t.drawImage(mit.CollectibleUtils.invincible_img,this.x,this.y)}},mit.CollectibleUtils={collecs:[],count:2,types:["coin","clone","invincible"],sub_types:{coin:[50,100,500]},init:function(){this.coin_img=mit.image.coins,this.clone_img=mit.image.berries,this.invincible_img=mit.image.star},getCoinSpritePos:function(t){switch(t){case 50:return{x:0,y:0};case 100:return{x:30,y:0};case 500:return{x:60,y:0};case 1e3:return{x:90,y:0}}},getRandomPos:function(){var t={},i=this.collecs[this.collecs.length-1];i?t.x=i.x+utils.randomNumber(1e3,1500):(t.x=utils.randomNumber(2e3,3e3),t.x=utils.randomNumber(500,1e3)),t.y=utils.randomNumber(100,mit.H-100);var e=mit.ForkUtils.forks;e.length&&e.forEach(function(i){Math.abs(t.x-i.x)<300&&(t.x=i.x+300)});var s=mit.BranchUtils.branches;return s.length&&s.forEach(function(i){Math.abs(t.x-i.x)<300&&(t.x=i.x+300)}),t},create:function(){for(var t,i,e,s=this.count-this.collecs.length,a=0;s>a;a++)t=new mit.Collectible,e=this.getRandomPos(),t.x=e.x,t.y=e.y,t.w=30,t.h=30,t.type=this.types[utils.randomNumber(0,this.types.length-1)],i=this.sub_types[t.type],i&&(t.sub_type=i[utils.randomNumber(0,i.length-1)]),this.collecs.push(t)},draw:function(t){var i=this;i.create(),i.collecs.forEach(function(e,s){e.x<0&&i.collecs.splice(s,1),e.x-=mit.Backgrounds.ground_bg_move_speed,e.draw(t)})},checkCollision:function(){var t=this.collecs[0],i=mit.Pappu.getBounds(),e=t.getBounds();if(utils.intersect(i,e)){switch(t.sound.play(),t.type){case"coin":mit.score+=t.sub_type;break;case"clone":mit.Pappu.createClones(3);break;case"invincible":mit.Pappu.invincible=1,mit.Pappu.invincibility_start=(new Date).getTime(),mit.Pappu.invincibility_time=5e3,mit.ui.invincible_timer.show()}this.collecs.shift()}}}}(),function(){mit.Fork=function(){this.x=0,this.y=0,this.w=0,this.h=0,this.head_x=0,this.head_y=0,this.head_w=0,this.head_h=0,this.edge="btm",this.getHandleBounds=function(){var t={};return t.start_x=this.x,t.start_y=this.y,t.end_x=this.x+this.w,t.end_y=this.y+this.h,t},this.getHeadBounds=function(){var t={};return t.start_x=this.head_x,t.start_y=this.head_y,t.end_x=this.head_x+this.head_w,t.end_y=this.head_y+this.head_h,t}},mit.ForkUtils={forks:[],edges:["top","btm"],fork_img:{},fork_head_img:{},dig_img:{},count:6,init:function(){this.fork_img=mit.image.fork_handle,this.fork_head_img=mit.image.fork_head},getRandomForkPos:function(){var t={};this.forks[this.forks.length-1]?(t.x=this.forks[this.forks.length-1].x,mit.score>2500?t.x+=utils.randomNumber(300,600):t.x+=utils.randomNumber(500,800)):t.x=mit.W/1e3*1050;var i=mit.BranchUtils.branches;return i.length&&i.forEach(function(i){Math.abs(t.x-i.x)<500&&(t.x=i.x+500)}),t},create:function(){var t=this.fork_img,i=this.dig_img,e=this.fork_head_img,s=this.forks,a=this.count;if(s.length<a)for(var n=0;n<a-s.length;n++){var r=new mit.Fork;if(r.edge=this.edges[utils.randomNumber(0,1)],"btm"===r.edge){var o=utils.randomNumber(3,5);r.dig_x=i.width/o,r.dig_y=mit.H-i.height,r.y=200+utils.randomNumber(0,100),r.y+=e.height}"top"===r.edge&&(r.y=0-utils.randomNumber(0,100),r.y-=e.height);var m=this.getRandomForkPos();r.x=m.x,r.w=t.width,r.h=t.height,s.push(r)}},draw:function(t){var i=this.fork_img,e=(this.dig_img,this.fork_head_img),s=this.forks,a=0;this.create(),s.forEach(function(s,n){return s.x-=mit.Backgrounds.ground_bg_move_speed,s.x+s.w<0?void++a:void(s.x>mit.W||("top"===s.edge?(t.save(),t.translate(s.x,s.y),t.translate(~~(i.width/2),~~(i.height/2)),t.rotate(utils.toRadian(180)),t.drawImage(i,-~~(i.width/2),-~~(i.height/2)),t.restore(),s.head_x=s.x-~~(e.width/8),s.head_y=s.y+i.height,s.head_w=e.width,s.head_h=e.height,t.save(),t.translate(s.head_x,s.head_y),t.translate(~~(e.width/2),~~(e.height/2)),t.rotate(utils.toRadian(180)),t.drawImage(e,-~~(e.width/2),-~~(e.height/2)),t.restore()):"btm"===s.edge&&(t.drawImage(i,s.x,s.y),s.head_x=s.x-~~(e.width/5),s.head_y=s.y-e.height,s.head_w=e.width,s.head_h=e.height,t.save(),t.translate(s.head_x,s.head_y),t.translate(1*~~(e.width/2),1*~~(e.height/2)),t.scale(-1,1),t.drawImage(e,1*-~~(e.width/2),1*-~~(e.height/2)),t.restore())))}),a&&s.splice(0,a)},drawDigs:function(t){var i=this.dig_img;this.forks.forEach(function(e,s){"btm"===e.edge&&t.drawImage(i,e.x-e.dig_x,e.dig_y)})},checkCollision:function(){var t=this.forks[0];if(!(t.x>mit.W/2)){var i=mit.Pappu.getBounds(),e=t.getHandleBounds();utils.intersect(i,e)&&mit.gameOver();var s=t.getHeadBounds();i.end_x>s.start_x+20&&s.end_x-20>i.start_x&&i.end_y>s.start_y+20&&s.end_y-20>i.start_y&&mit.gameOver()}}}}(),function(){var t={};t.size=function(t){var i,e=0;for(i in t)t.hasOwnProperty(i)&&e++;return e};var i=document.getElementById("start"),e=document.getElementById("angry_jump"),s=document.getElementById("sad_jump"),a=document.getElementById("happy_jump"),n=document.getElementById("flap"),r=document.getElementById("ting");mit.audio=[i,e,s,a,n,r];var o={angry_pakia:"img/angry_pakia.png",backtrees:"img/back_trees.png",berries:"img/berries.png",bg_combined:"img/bg_combined.png",branch:"img/branch.png",clouds:"img/clouds.png",coins:"img/coins.png",controls:"img/controls.png",fork_handle:"img/fork_handle.png",fork_head:"img/fork_head.png",fronttrees:"img/front_trees.png",grass:"img/grass.png",ground:"img/ground.png",happy_pakia:"img/happy_pakia.png",log:"img/log.png",pappu:"img/pappu.png",plank_bot:"img/plank_bot.png",plank_mid:"img/plank_mid.png",plank_top:"img/plank_top.png",sad_pakia:"img/sad_pakia.png",stand:"img/stand.png",star:"img/star.png"};mit.image={};var m=t.size(o);m+=mit.audio.length;var h=0,c=0,_=document.getElementById("bar"),d=(document.getElementById("loading"),document.getElementById("loadText"));if(!$.browser.webkit||$.browser.chrome)for(var g=0;g<mit.audio.length;g++){var u=mit.audio[g];isNaN(u.duration)?u.addEventListener("loadeddata",function(){h++,c=Math.floor(h/m*100),_.style.width=c+"%",d.innerHTML="Loading... "+c+"%",c>=100&&($("#loading").fadeOut(),mit.main())}):(h++,c=Math.floor(h/m*100),_.style.width=c+"%",d.innerHTML="Loading... "+c+"%",c>=100&&($("#loading").fadeOut(),mit.main()))}else h+=mit.audio.length;for(var l in o)mit.image[l]=new Image,mit.image[l].onload=function(){h++,c=Math.floor(h/m*100),_.style.width=c+"%",d.innerHTML="Loading... "+c+"%",c>=100&&($("#loading").fadeOut(),mit.main())},mit.image[l].src=o[l]}(),mit.main=function(){window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),window.cancelAnimationFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();var t=(mit.config={},mit.ui={body:$("body"),score_board:$("#score_board"),last_score:$("#last_score"),high_score:$("#high_score"),start_screen:$("#start_screen"),start_game:$("#start_game"),tweet:$("#tweet"),fb:$("#fb"),fps_count:$("#fps_count"),invincible_timer:$("#invincible_timer"),invincible_loader:$("#invincible_loader")}),i=document.querySelector("#game_main"),e=i.getContext("2d"),s=i.width=t.body.width(),a=i.height=t.body.height();i.width>1e3&&(s=i.width=1e3),i.height>500&&(a=i.height=500),i.height<500&&(i.width=1e3*i.height/500),i.width<1e3&&(i.height=500*i.width/1e3);var n=document.querySelector("#game_bg"),r=n.getContext("2d");n.width=i.width,n.height=i.height;var o=document.getElementById("start");o.volume=.2;var m=!1;$("#mute").click(function(){return 0==m?($(this).css("backgroundPosition","0px -40px"),o.volume=0,m=!0):($(this).css("backgroundPosition","0px 0px"),o.volume=.2,m=!1),!1}),mit.game_started=0,mit.game_over=0,mit.start_btn_clicked=0,t.start_screen.css("width",i.width+"px"),t.start_screen.css("height",i.height+"px");var h=function(){o.play(),flap.pause(),t.start_screen.fadeOut(),mit.start_btn_clicked=1,mit.game_started=0,mit.Backgrounds.common_bg_speed=1,mit.Backgrounds.resetAllSpeed(),mit.Pappu.drawStatic(e),mit.ax=0,mit.ay=0,mit.vx=0,mit.vy=0,mit.Pappu.rotate_angle=0,mit.score=0,mit.ForkUtils.forks=[],mit.BranchUtils.branches=[],mit.CollectibleUtils.collecs=[],mit.PakiaUtils.pakias=[],mit.PakiaUtils.cur_pakia=!1};t.start_game.on("mousedown",function(){return h(),!1});var c=document.getElementById("tweet");c.href="http://twitter.com/share?url=http://www.taiminh.com/&text=I am playing Pappu Pakia, a cute HTML5 game on TM Apps!";var _=document.getElementById("fb");_.href="http://facebook.com/sharer.php?s=100&p[url]=http://www.taiminh.com/&p[title]=I am playing Pappu Pakia, a cute HTML5 game on TM Apps!",mit.score=0;try{mit.highScore=JSON.parse(localStorage.getItem("highScore")),mit.highScore&&t.high_score.text("High Score: "+mit.highScore)}catch(d){}t.score_board.css("width",i.width+"px"),t.score_board.css("height",i.height+"px"),mit.config.canvas_width=mit.W=s,mit.config.canvas_height=mit.H=a,mit.gravity=.7,mit.vx=0,mit.vy=0,mit.v_cap=6.5,mit.ax=0,mit.ay=0,mit.flying_up=0,mit.ascend=function(){mit.start_btn_clicked&&(mit.game_started||(mit.game_started=1,mit.game_over=0),mit.ay=-1.5,mit.flying_up=1)},mit.descend=function(){mit.start_btn_clicked&&(mit.ay=0,mit.flying_up=0)},window.addEventListener("mousedown",function(t){mit.ascend()},!1),window.addEventListener("mouseup",function(t){mit.descend()},!1),window.addEventListener("touchstart",function(t){mit.ascend()},!1),window.addEventListener("touchend",function(t){mit.descend()},!1),window.addEventListener("keydown",function(t){38===t.keyCode&&(mit.ascend(),t.preventDefault()),40===t.keyCode&&t.preventDefault(),(32===t.keyCode||13===t.keyCode)&&(h(),t.preventDefault())},!1),window.addEventListener("keyup",function(t){38===t.keyCode&&(mit.descend(),t.preventDefault())},!1),mit.gameOver=function(){t.start_screen.fadeIn(),mit.score>mit.highScore&&(mit.highScore=parseInt(mit.score),localStorage.setItem("highScore",JSON.stringify(parseInt(mit.score))),t.high_score.text("High Score: "+mit.highScore)),t.last_score.text("Last Score: "+parseInt(mit.score)),t.start_game.html("re-start"),t.tweet.html("tweet score"),t.fb.html("post on fb"),mit.descend(),mit.Backgrounds.common_bg_speed=0,mit.Backgrounds.ground_bg_move_speed=0,mit.Backgrounds.fps=0,mit.game_over=1,mit.start_btn_clicked=0,mit.Pappu.undoInvincible(),mit.Pappu.clones.length=0;var i=document.getElementById("tweet");i.href="http://twitter.com/share?url=http://mobile.taiminh.com/&text=I just scored "+Math.floor(mit.score)+" points in Pappu Pakia!&count=horiztonal&via=_rishabhp&related=solitarydesigns";var e=document.getElementById("fb");e.href="http://facebook.com/sharer.php?s=100&p[url]=http://mobile.taiminh.com/&p[title]=I just scored "+Math.floor(mit.score)+" points in the Pappu Pakia!"},mit.last_time=new Date,setInterval(function(){mit.ui.fps_count.html(mit.fps.toFixed(0)+" FPS")},1e3),mit.Backgrounds.init(e),mit.ForkUtils.init(),mit.BranchUtils.init(),mit.CollectibleUtils.init(),mit.Pappu.init(),mit.PakiaUtils.init(),function g(){if(window.requestAnimationFrame(g),mit.Backgrounds.draw(r),e.clearRect(0,0,s,a),mit.flying_up||!mit.game_started?mit.Pappu.updateFlyFrameCount():mit.Pappu.updateFlyFrameCount(0),mit.Pappu.hasReachedBoundary(s,a)){if(mit.game_over)return;return void mit.gameOver()}mit.game_started?(mit.ForkUtils.draw(e),mit.BranchUtils.draw(e),mit.CollectibleUtils.draw(e),mit.Pappu.drawClones(e),mit.Pappu.invincible||(mit.ForkUtils.checkCollision(),mit.BranchUtils.checkCollision(),mit.PakiaUtils.checkCollision()),mit.CollectibleUtils.checkCollision(),mit.Pappu.checkCloneCollision(),mit.score>199&&mit.PakiaUtils.render(e),mit.game_over||(mit.score=mit.score+=.1,t.score_board.text(parseInt(mit.score))),mit.game_over?(mit.vy+=mit.gravity,mit.Pappu.y+=mit.vy):((mit.vy<mit.v_cap&&mit.ay+mit.gravity>0||mit.vy>-mit.v_cap&&mit.ay+mit.gravity<0)&&(mit.vy+=mit.ay,mit.vy+=mit.gravity),mit.Pappu.x+=mit.vx,mit.Pappu.y+=mit.vy,mit.vy>mit.v_cap&&(mit.vy=mit.v_cap)),mit.Pappu.draw(e)):mit.Pappu.drawStatic(e),mit.cur_time=new Date,mit.fps=1e3/(mit.cur_time-mit.last_time),mit.last_time=mit.cur_time}()},function(){mit.Pakia=function(){this.type="angry",this.sound=document.getElementById("jump1"),this.gravity=.3,this.x,this.y,this.w,this.h,this.draw=function(t){t.drawImage(mit.PakiaUtils.pakia_img[this.type],this.x,this.y)},this.generateRandomPos=function(){this.x=mit.config.canvas_width/2+200,this.y=mit.config.canvas_height},this.generateRandomVelocity=function(){this.vx=-12,this.vy=utils.randomNumber(-18,-10)},this.getBounds=function(){var t={};return t.start_x=this.x,t.start_y=this.y,t.end_x=this.x+this.w,t.end_y=this.y+this.h,t}},mit.PakiaUtils={pakias:[],cur_pakia:!1,types:["sad","happy","angry"],sounds:[document.getElementById("angry_jump"),document.getElementById("sad_jump"),document.getElementById("happy_jump")],pakia_img:{sad:{},happy:{},angry:{}},init:function(){this.pakia_img.sad=mit.image.sad_pakia,this.pakia_img.happy=mit.image.happy_pakia,this.pakia_img.angry=mit.image.angry_pakia},createPakias:function(){for(var t=0;3>t;t++){var i=new mit.Pakia;i.w=this.pakia_img.sad.width,i.h=this.pakia_img.sad.height,i.generateRandomPos(),i.generateRandomVelocity(),i.type=this.types[t],"angry"==i.type?i.sound=this.sounds[0]:"sad"==i.type?i.sound=this.sounds[1]:"happy"==i.type&&(i.sound=this.sounds[2]),this.pakias.push(i)}},reflow:function(t){this.cur_pakia||(this.cur_pakia=this.pakias[utils.randomNumber(0,2)],this.cur_pakia.generateRandomPos(),this.cur_pakia.generateRandomVelocity()),this.cur_pakia.vy+=this.cur_pakia.gravity,this.cur_pakia.x+=this.cur_pakia.vx,this.cur_pakia.y+=this.cur_pakia.vy,(this.cur_pakia.x+this.cur_pakia.w<0||this.cur_pakia.y>mit.H)&&(this.cur_pakia.generateRandomPos(),this.cur_pakia.generateRandomVelocity(),this.cur_pakia.has_stuck&&delete this.cur_pakia.has_stuck,this.cur_pakia=!1)},repaint:function(t){this.cur_pakia&&this.cur_pakia.draw(t)},render:function(t){this.pakias.length||this.createPakias(),(mit.score.toFixed(2)%20===0||this.cur_pakia)&&(this.reflow(t),this.repaint(t)),mit.score.toFixed(2)%20===0&&this.cur_pakia&&this.cur_pakia.sound.play()},checkCollision:function(){if(this.cur_pakia){var t=mit.Pappu.getBounds(),i=this.cur_pakia.getBounds();if(t.end_x>i.start_x+20&&i.end_x-20>t.start_x&&t.end_y>i.start_y+20&&i.end_y-20>t.start_y)switch(this.cur_pakia.type){case"angry":mit.gameOver();break;case"sad":this.cur_pakia.has_stuck||(mit.vy+=20,this.cur_pakia.y+=20,this.cur_pakia.vx=0),this.cur_pakia.has_stuck=1;break;case"happy":this.cur_pakia.vy<0?mit.vy-=10:mit.vy+=10}}}}}(),function(){mit.Pappu={x:50,y:10,w:50,h:50,invincible:0,invincibility_start:0,invincibility_time:0,clones:[],rotate_angle:0,sprite:{},sound:"",change_per_frame:10,fly_frame_count:0,max_fly_frame_count:10,init:function(){this.sound=document.getElementById("flap"),this.sprite=mit.image.pappu,mit.Pappu.w=mit.Pappu.sprite.width,mit.Pappu.h=60,mit.Pappu.max_fly_frame_count=8,mit.Pappu.max_fly_frame_count--,mit.Pappu.change_per_frame=1.6,mit.Pappu.x=33},undoInvincible:function(){this.invincible=0,this.invincibility_start=0,this.invincible_timer=0,mit.ui.invincible_timer.hide()},draw:function(t){var i=this.fly_frame_count/this.change_per_frame;if(utils.isInt(i))var e=60*i;else var s=parseInt(this.fly_frame_count/this.change_per_frame),e=60*s;if(mit.flying_up?(this.sound.play(),this.rotate_angle>-15&&(this.rotate_angle-=2)):mit.game_over?this.rotate_angle+=4:this.rotate_angle<30&&(this.rotate_angle+=2),t.save(),t.translate(this.x,this.y),t.translate(this.w/2,this.h/2),t.rotate(utils.toRadian(this.rotate_angle)),this.invincible){t.globalAlpha=.4;var a=(new Date).getTime(),n=a-this.invincibility_start,r=n/this.invincibility_time*100;r>100?this.undoInvincible():mit.ui.invincible_loader.css("width",r+"%")}t.drawImage(this.sprite,0,e,this.w,60,-this.w/2,-this.h/2,this.w,60),t.restore()},drawStatic:function(t){var i=this.fly_frame_count/this.change_per_frame;if(utils.isInt(i))var e=60*i;else var s=parseInt(this.fly_frame_count/this.change_per_frame),e=60*s;this.y=mit.Backgrounds.log_y-42,t.drawImage(this.sprite,0,e,this.w,60,this.x,this.y,this.w,60)},updateFlyFrameCount:function(t){return"number"!=typeof t?(this.fly_frame_count++,void(parseInt(this.fly_frame_count/this.change_per_frame)>this.max_fly_frame_count&&(this.fly_frame_count=0))):void(this.fly_frame_count=t)},hasReachedBoundary:function(t,i){var e=this.y<0-this.h,s=this.y>mit.H,a=this.x<0,n=this.x>mit.W;return e||s||a||n?!0:!1},getBounds:function(){var t={};return t.start_x=this.x,t.start_y=this.y,t.end_x=this.x+this.w,t.end_y=this.y+this.h,t},createClones:function(t){for(var i,e=0;t>e;e++)i=Object.create(mit.Pappu),i.invincible=0,this.clones.push(i)},drawClones:function(t){var i=this;i.clones.forEach(function(e,s){(e.x>mit.W||e.y<0||e.y>mit.H)&&i.clones.splice(s,1),e.x+=utils.randomNumber(5,10),e.y+=utils.randomNumber(-20,20),e.draw(t)})},checkCloneCollision:function(){var t=this;if(t.clones.length){var i=mit.BranchUtils.branches,e=mit.ForkUtils.forks,s=mit.PakiaUtils.pakias;i.forEach(function(e,s){var a=e.getBounds(),n=0;t.clones.forEach(function(t){if(!n){var e=t.getBounds();utils.intersect(a,e)&&(i.splice(s,1),n=1)}})}),e.forEach(function(i,s){var a=i.getHeadBounds(),n=i.getHandleBounds(),r=0;t.clones.forEach(function(t){if(!r){var i=t.getBounds();(utils.intersect(a,i)||utils.intersect(n,i))&&(e.splice(s,1),r=1)}})}),s.forEach(function(i,e){var s=i.getBounds(),a=0;t.clones.forEach(function(t){if(!a){var i=t.getBounds();utils.intersect(s,i)&&(mit.PakiaUtils.cur_pakia=!1,a=1)}})})}}}}(),function(){window.utils=window.utils||{},utils.randomNumber=function(t,i){return Math.floor(Math.random()*(i-t+1))+t},utils.isInt=function(t){return parseFloat(t)===parseInt(t)},utils.toRadian=function(t){return t*Math.PI/180},utils.toDegree=function(t){return 180*t/Math.PI},utils.intersect=function(t,i){return!(t.end_x<i.start_x||i.end_x<t.start_x||t.end_y<i.start_y||i.end_y<t.start_y)}}();