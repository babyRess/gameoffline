(function(){var a,b,c,d,e,h,f={},k=null,l=!0,g=!1;if("undefined"!==typeof AudioContext)k=new AudioContext;else if("undefined"!==typeof webkitAudioContext)k=new webkitAudioContext;else if("undefined"!==typeof Audio){l=!1;try{new Audio}catch(q){g=!0}}else l=!1,g=!0;if(l){var n="undefined"===typeof k.createGain?k.createGainNode():k.createGain();n.gain.value=1;n.connect(k.destination)}var t=function(){this._volume=1;this._muted=!1;this.usingWebAudio=l;this._enableWebAudio=!1;this._howls=[];this.soundsLoaded=
0};t.prototype={volume:function(a){if((a=parseFloat(a))&&0<=a&&1>=a){this._volume=a;l&&(n.gain.value=a);for(var b in this._howls)if(this._howls.hasOwnProperty(b)&&!1===this._howls[b]._webAudio)for(a=0;a<this._howls[b]._audioNode.length;a++)this._howls[b]._audioNode[a].volume=this._howls[b]._volume*this._volume;return this}return l?n.gain.value:this._volume},mute:function(){this._setMuted(!0);return this},unmute:function(){this._setMuted(!1);return this},enableWebAudio:function(){if(!self._enableWebAudio&&
l){var a=k.createBuffer(1,1,22050),b=k.createBufferSource();b.buffer=a;b.connect(k.destination);b.start(0);self._enableWebAudio=!0}},soundLoaded:function(){this.soundsLoaded+=1},getSoundsLoaded:function(){return this.soundsLoaded},_setMuted:function(a){this._muted=a;l&&(n.gain.value=a?0:this._volume);for(var b in this._howls)if(this._howls.hasOwnProperty(b)&&!1===this._howls[b]._webAudio)for(var c=0;c<this._howls[b]._audioNode.length;c++)this._howls[b]._audioNode[c].muted=a}};var s=new t,t=null;g||
(t=new Audio,a=!!t.canPlayType("audio/mpeg;").replace(/^no$/,""),b=!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),c=!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),d=!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),e=!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),h=!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""));var x=function(a){this._autoplay=a.autoplay||!1;this._buffer=a.buffer||!1;this._duration=
a.duration||0;this._format=a.format||null;this._loop=a.loop||!1;this._loaded=!1;this._sprite=a.sprite||{};this._src=a.src||"";this._pos3d=a.pos3d||[0,0,-0.5];this._volume=a.volume||1;this._urls=a.urls||[];this._rate=a.rate||1;this._onload=[a.onload||function(){}];this._onloaderror=[a.onloaderror||function(){}];this._onend=[a.onend||function(){}];this._onpause=[a.onpause||function(){}];this._onplay=[a.onplay||function(){}];this._onendTimer=[];this._webAudio=l&&!this._buffer;this._audioNode=[];this._webAudio&&
this._setupAudioNode();s._howls.push(this);this.load()};x.prototype={load:function(){var p=this,u=null;if(!g){for(var r={mp3:a,opus:b,ogg:c,wav:d,m4a:e,weba:h},l=0;l<p._urls.length;l++){var k;k=p._format?p._format:(k=p._urls[l].toLowerCase().match(/.+\.([^?]+)(\?|$)/))&&2<=k.length?k[1]:p._urls[l].toLowerCase().match(/data\:audio\/([^?]+);/)[1];if(r[k]){u=p._urls[l];break}}if(u){p._src=u;if(p._webAudio)D(p,u);else{var m=new Audio;p._audioNode.push(m);m.src=u;m._pos=0;m.preload="auto";m.volume=s._muted?
0:p._volume*s.volume();f[u]=p;var q=function(){p._duration=m.duration;0===Object.getOwnPropertyNames(p._sprite).length&&(p._sprite={_default:[0,1E3*p._duration]});p._loaded||(p._loaded=!0,p.on("load"),s.soundLoaded());p._autoplay&&p.play();m.removeEventListener("canplaythrough",q,!1)};m.addEventListener("canplaythrough",q,!1);m.load()}return p}}p.on("loaderror")},urls:function(a){return a?(this.stop(),this._urls="string"===typeof a?[a]:a,this._loaded=!1,this.load(),this):this._urls},play:function(a,
b){var c=this;"function"===typeof a&&(b=a);a&&"function"!==typeof a||(a="_default");if(!c._loaded)return c.on("load",function(){c.play(a,b)}),c;if(!c._sprite[a])return"function"===typeof b&&b(),c;c._inactiveNode(function(d){d._sprite=a;var e=0<d._pos?d._pos:c._sprite[a][0]/1E3,g=c._sprite[a][1]/1E3-d._pos,l=!(!c._loop&&!c._sprite[a][2]),h="string"===typeof b?b:Math.round(Date.now()*Math.random())+"",f;(function(){var b={id:h,sprite:a,loop:l};f=setTimeout(function(){!c._webAudio&&l&&c.stop(b.id,b.timer).play(a,
b.id);c._webAudio&&!l&&(c._nodeById(b.id).paused=!0);c._webAudio||l||c.stop(b.id,b.timer);c.on("end",h)},1E3*g);c._onendTimer.push(f);b.timer=c._onendTimer[c._onendTimer.length-1]})();if(c._webAudio){var z=c._sprite[a][0]/1E3,F=c._sprite[a][1]/1E3;d.id=h;d.paused=!1;w(c,[l,z,F],h);c._playStart=k.currentTime;d.gain.value=c._volume;"undefined"===typeof d.bufferSource.start?d.bufferSource.noteGrainOn(0,e,g):d.bufferSource.start(0,e,g)}else if(4===d.readyState)d.id=h,d.currentTime=e,d.muted=s._muted,
d.volume=c._volume*s.volume(),setTimeout(function(){d.play()},0);else return c._clearEndTimer(f),function(){var e=a,g=b,l=function(){c.play(e,g);d.removeEventListener("canplaythrough",l,!1)};d.addEventListener("canplaythrough",l,!1)}(),c;c.on("play");"function"===typeof b&&b(h);return c});return c},pause:function(a,b){var c=this;if(!c._loaded)return c.on("play",function(){c.pause(a)}),c;c._clearEndTimer(b||0);var d=a?c._nodeById(a):c._activeNode();if(d)if(d._pos=c.pos(null,a),c._webAudio){if(!d.bufferSource)return c;
d.paused=!0;"undefined"===typeof d.bufferSource.stop?d.bufferSource.noteOff(0):d.bufferSource.stop(0)}else d.pause();c.on("pause");return c},stop:function(a,b){var c=this;if(!c._loaded)return c.on("play",function(){c.stop(a)}),c;c._clearEndTimer(b||0);var d=a?c._nodeById(a):c._activeNode();if(d)if(d._pos=0,c._webAudio){if(!d.bufferSource)return c;d.paused=!0;"undefined"===typeof d.bufferSource.stop?d.bufferSource.noteOff(0):d.bufferSource.stop(0)}else d.pause(),d.currentTime=0;return c},mute:function(a){var b=
this;if(!b._loaded)return b.on("play",function(){b.mute(a)}),b;var c=a?b._nodeById(a):b._activeNode();c&&(b._webAudio?c.gain.value=0:c.volume=0);return b},unmute:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.unmute(a)}),b;var c=a?b._nodeById(a):b._activeNode();c&&(b._webAudio?c.gain.value=b._volume:c.volume=b._volume);return b},volume:function(a,b){var c=this;a=parseFloat(a);if(0<=a&&1>=a){c._volume=a;if(!c._loaded)return c.on("play",function(){c.volume(a,b)}),c;var d=b?c._nodeById(b):
c._activeNode();d&&(c._webAudio?d.gain.value=a:d.volume=a*s.volume());return c}return c._volume},loop:function(a){return"boolean"===typeof a?(this._loop=a,this):this._loop},sprite:function(a){return"object"===typeof a?(this._sprite=a,this):this._sprite},pos:function(a,b){var c=this;if(!c._loaded)return c.on("load",function(){c.pos(a)}),"number"===typeof a?c:c._pos||0;a=parseFloat(a);var d=b?c._nodeById(b):c._activeNode();if(d)return c._webAudio?0<=a?(d._pos=a,c.pause(b).play(d._sprite,b),c):d._pos+
(k.currentTime-c._playStart):0<=a?(d.currentTime=a,c):d.currentTime;if(0<=a)return c;for(d=0;d<c._audioNode.length;d++)if(c._audioNode[d].paused&&4===c._audioNode[d].readyState)return c._webAudio?c._audioNode[d]._pos:c._audioNode[d].currentTime},pos3d:function(a,b,c,d){var e=this;b="undefined"!==typeof b&&b?b:0;c="undefined"!==typeof c&&c?c:-0.5;if(!e._loaded)return e.on("play",function(){e.pos3d(a,b,c,d)}),e;if(0<=a||0>a){if(e._webAudio){var g=d?e._nodeById(d):e._activeNode();g&&(e._pos3d=[a,b,c],
g.panner.setPosition(a,b,c))}}else return e._pos3d;return e},fade:function(a,b,c,d,e){var g=this,l=Math.abs(a-b),h=a>b?"down":"up",l=l/0.01,f=c/l;if(!g._loaded)return g.on("load",function(){g.fade(a,b,c,d,e)}),g;g.volume(a,e);for(var z=1;z<=l;z++)(function(){var a=Math.round(1E3*(g._volume+("up"===h?0.01:-0.01)*z))/1E3;setTimeout(function(){g.volume(a,e);a===b&&d&&d()},f*z)})()},fadeIn:function(a,b,c){return this.volume(0).play().fade(0,a,b,c)},fadeOut:function(a,b,c,d){var e=this;return e.fade(e._volume,
a,b,function(){c&&c();e.pause(d);e.on("end")},d)},_nodeById:function(a){for(var b=this._audioNode[0],c=0;c<this._audioNode.length;c++)if(this._audioNode[c].id===a){b=this._audioNode[c];break}return b},_activeNode:function(){for(var a=null,b=0;b<this._audioNode.length;b++)if(!this._audioNode[b].paused){a=this._audioNode[b];break}this._drainPool();return a},_inactiveNode:function(a){for(var b=null,c=0;c<this._audioNode.length;c++)if(this._audioNode[c].paused&&4===this._audioNode[c].readyState){a(this._audioNode[c]);
b=!0;break}this._drainPool();if(!b){var d;this._webAudio?(d=this._setupAudioNode(),a(d)):(this.load(),d=this._audioNode[this._audioNode.length-1],d.addEventListener("loadedmetadata",function(){a(d)}))}},_drainPool:function(){var a=0,b;for(b=0;b<this._audioNode.length;b++)this._audioNode[b].paused&&a++;for(b=this._audioNode.length-1;0<=b&&!(5>=a);b--)this._audioNode[b].paused&&(this._webAudio&&this._audioNode[b].disconnect(0),a--,this._audioNode.splice(b,1))},_clearEndTimer:function(a){a=this._onendTimer.indexOf(a);
a=0<=a?a:0;this._onendTimer[a]&&(clearTimeout(this._onendTimer[a]),this._onendTimer.splice(a,1))},_setupAudioNode:function(){var a=this._audioNode,b=this._audioNode.length;a[b]="undefined"===typeof k.createGain?k.createGainNode():k.createGain();a[b].gain.value=this._volume;a[b].paused=!0;a[b]._pos=0;a[b].readyState=4;a[b].connect(n);a[b].panner=k.createPanner();a[b].panner.setPosition(this._pos3d[0],this._pos3d[1],this._pos3d[2]);a[b].panner.connect(a[b]);return a[b]},on:function(a,b){var c=this["_on"+
a];if("function"===typeof b)c.push(b);else for(var d=0;d<c.length;d++)b?c[d].call(this,b):c[d].call(this);return this},off:function(a,b){for(var c=this["_on"+a],d=b.toString(),e=0;e<c.length;e++)if(d===c[e].toString()){c.splice(e,1);break}return this},unload:function(){for(var a=this._audioNode,b=0;b<this._audioNode.length;b++)this.stop(a[b].id),this._webAudio?a[b].disconnect(0):a[b].src="";(a=s._howls.indexOf(this))&&s._howls.splice(a,1);delete f[this._src]}};if(l)var D=function(a,b){if(b in f)a._duration=
f[b].duration,B(a);else{var c=new XMLHttpRequest;c.open("GET",b,!0);c.responseType="arraybuffer";c.onload=function(){k.decodeAudioData(c.response,function(c){c&&(f[b]=c,B(a,c))})};c.onerror=function(){a._webAudio&&(a._buffer=!0,a._webAudio=!1,a._audioNode=[],delete a._gainNode,a.load())};try{c.send()}catch(d){c.onerror()}}},B=function(a,b){a._duration=b?b.duration:a._duration;0===Object.getOwnPropertyNames(a._sprite).length&&(a._sprite={_default:[0,1E3*a._duration]});a._loaded||(a._loaded=!0,a.on("load"),
s.soundLoaded());a._autoplay&&a.play()},w=function(a,b,c){c=a._nodeById(c);c.bufferSource=k.createBufferSource();c.bufferSource.buffer=f[a._src];c.bufferSource.connect(c.panner);c.bufferSource.loop=b[0];b[0]&&(c.bufferSource.loopStart=b[1],c.bufferSource.loopEnd=b[1]+b[2]);c.bufferSource.playbackRate.value=a._rate};"function"===typeof define&&define.amd&&define(function(){return{Howler:s,Howl:x}});window.Howler=s;window.Howl=x})();var RESIZEABLE_CANVAS=!1;window.onload=function(a){RESIZEABLE_CANVAS&&(window.onresize=function(a){a=document.getElementById("GameCanvas");var c=window.innerHeight;a.width=document.body.clientWidth;a.height=c},window.onresize(null));BBMonkeyGame.Main(document.getElementById("GameCanvas"))};CFG_BINARY_FILES="*.bin|*.dat";CFG_BRL_THREAD_IMPLEMENTED=CFG_BRL_HTTPREQUEST_IMPLEMENTED=CFG_BRL_GAMETARGET_IMPLEMENTED="1";CFG_CONFIG="release";CFG_HOST="macos";CFG_IMAGE_FILES="*.png|*.jpg";CFG_LANG="js";
CFG_MOJO_AUTO_SUSPEND_ENABLED="0";CFG_MOJO_DRIVER_IMPLEMENTED="1";CFG_MUSIC_FILES="*.wav|*.ogg|*.mp3|*.m4a";CFG_SAFEMODE=CFG_OPENGL_GLES20_ENABLED="0";CFG_SOUND_FILES="*.wav|*.ogg|*.mp3|*.m4a";CFG_TARGET="html5";CFG_TEXT_FILES="*.txt|*.xml|*.json";
var META_DATA="[mojo_font.png];type=image/png;width=864;height=13;\n[fonts/fredokaone22.png];type=image/png;width=256;height=35;\n[fonts/fredokaone31.png];type=image/png;width=292;height=42;\n[fonts/fredokaone44.png];type=image/png;width=397;height=52;\n[fonts/fredokaone48.png];type=image/png;width=363;height=55;\n[fonts/fredokaone62.png];type=image/png;width=472;height=68;\n[fonts/fredokaone96.png];type=image/png;width=630;height=94;\n[graphics/gameSprites_Lowest.png];type=image/png;width=1170;height=519;\n[graphics/gameSprites_Normal.png];type=image/png;width=1522;height=1538;\n",D2R=
0.017453292519943295,R2D=57.29577951308232,err_info="",err_stack=[],dbg_index=0;function push_err(){err_stack.push(err_info)}function pop_err(){err_info=err_stack.pop()}function stackTrace(){if(!err_info.length)return"";for(var a=err_info+"\n",b=err_stack.length-1;0<b;--b)a+=err_stack[b]+"\n";return a}function print(a){var b=document.getElementById("GameConsole");b?(b.value+=a+"\n",b.scrollTop=b.scrollHeight-b.clientHeight):void 0!=window.console&&window.console.log(a);return 0}
function alertError(a){"string"==typeof a&&""==a||alert("Monkey Runtime Error : "+a.toString()+"\n\n"+stackTrace())}function error(a){throw a;}function debugLog(a){void 0!=window.console&&window.console.log(a)}function debugStop(){debugger}function dbg_object(a){if(a)return a;error("Null object access")}function dbg_charCodeAt(a,b){(0>b||b>=a.length)&&error("Character index out of range");return a.charCodeAt(b)}
function dbg_array(a,b){(0>b||b>=a.length)&&error("Array index out of range");dbg_index=b;return a}function new_bool_array(a){for(var b=Array(a),c=0;c<a;++c)b[c]=!1;return b}function new_number_array(a){for(var b=Array(a),c=0;c<a;++c)b[c]=0;return b}function new_string_array(a){for(var b=Array(a),c=0;c<a;++c)b[c]="";return b}function new_array_array(a){for(var b=Array(a),c=0;c<a;++c)b[c]=[];return b}function new_object_array(a){for(var b=Array(a),c=0;c<a;++c)b[c]=null;return b}
function resize_bool_array(a,b){var c=a.length;a=a.slice(0,b);if(b<=c)return a;for(a.length=b;c<b;)a[c++]=!1;return a}function resize_number_array(a,b){var c=a.length;a=a.slice(0,b);if(b<=c)return a;for(a.length=b;c<b;)a[c++]=0;return a}function resize_string_array(a,b){var c=a.length;a=a.slice(0,b);if(b<=c)return a;for(a.length=b;c<b;)a[c++]="";return a}function resize_array_array(a,b){var c=a.length;a=a.slice(0,b);if(b<=c)return a;for(a.length=b;c<b;)a[c++]=[];return a}
function resize_object_array(a,b){var c=a.length;a=a.slice(0,b);if(b<=c)return a;for(a.length=b;c<b;)a[c++]=null;return a}function string_compare(a,b){var c=Math.min(a.length,b.length),d,e;for(d=0;d<c;++d)if(e=a.charCodeAt(d)-b.charCodeAt(d))return e;return a.length-b.length}function string_replace(a,b,c){for(var d=0;;){d=a.indexOf(b,d);if(-1==d)return a;a=a.substring(0,d)+c+a.substring(d+b.length);d+=c.length}}
function string_trim(a){for(var b=0,c=a.length;b<c&&32>=a.charCodeAt(b);)b+=1;for(;c>b&&32>=a.charCodeAt(c-1);)c-=1;return a.slice(b,c)}function string_startswith(a,b){return b.length<=a.length&&a.slice(0,b.length)==b}function string_endswith(a,b){return b.length<=a.length&&a.slice(a.length-b.length,a.length)==b}function string_tochars(a){for(var b=Array(a.length),c=0;c<a.length;++c)b[c]=a.charCodeAt(c);return b}
function string_fromchars(a){var b="",c;for(c=0;c<a.length;++c)b+=String.fromCharCode(a[c]);return b}function object_downcast(a,b){return a instanceof b?a:null}function object_implements(a,b){return a&&a.implments&&a.implments[b]?a:null}function extend_class(a){var b=function(){};b.prototype=a.prototype;return new b}function ThrowableObject(){}ThrowableObject.prototype.toString=function(){return"Uncaught Monkey Exception"};function BBGameEvent(){}BBGameEvent.KeyDown=1;BBGameEvent.KeyUp=2;
BBGameEvent.KeyChar=3;BBGameEvent.MouseDown=4;BBGameEvent.MouseUp=5;BBGameEvent.MouseMove=6;BBGameEvent.TouchDown=7;BBGameEvent.TouchUp=8;BBGameEvent.TouchMove=9;BBGameEvent.MotionAccel=10;function BBGameDelegate(){}BBGameDelegate.prototype.StartGame=function(){};BBGameDelegate.prototype.SuspendGame=function(){};BBGameDelegate.prototype.ResumeGame=function(){};BBGameDelegate.prototype.UpdateGame=function(){};BBGameDelegate.prototype.RenderGame=function(){};
BBGameDelegate.prototype.KeyEvent=function(a,b){};BBGameDelegate.prototype.MouseEvent=function(a,b,c,d){};BBGameDelegate.prototype.TouchEvent=function(a,b,c,d){};BBGameDelegate.prototype.MotionEvent=function(a,b,c,d,e){};BBGameDelegate.prototype.DiscardGraphics=function(){};function BBGame(){BBGame._game=this;this._delegate=null;this._keyboardEnabled=!1;this._updateRate=0;this._suspended=this._started=!1;this._debugExs="debug"==CFG_CONFIG;this._startms=Date.now()}BBGame.Game=function(){return BBGame._game};
BBGame.prototype.SetDelegate=function(a){this._delegate=a};BBGame.prototype.Delegate=function(){return this._delegate};BBGame.prototype.SetUpdateRate=function(a){this._updateRate=a};BBGame.prototype.SetKeyboardEnabled=function(a){this._keyboardEnabled=a};BBGame.prototype.Started=function(){return this._started};BBGame.prototype.Suspended=function(){return this._suspended};BBGame.prototype.Millisecs=function(){return Date.now()-this._startms};
BBGame.prototype.GetDate=function(a){var b=a.length;if(0<b){var c=new Date;a[0]=c.getFullYear();1<b&&(a[1]=c.getMonth()+1,2<b&&(a[2]=c.getDate(),3<b&&(a[3]=c.getHours(),4<b&&(a[4]=c.getMinutes(),5<b&&(a[5]=c.getSeconds(),6<b&&(a[6]=c.getMilliseconds()))))))}};BBGame.prototype.SaveState=function(a){localStorage.setItem("monkeystate@"+document.URL,a);return 1};BBGame.prototype.LoadState=function(){var a=localStorage.getItem("monkeystate@"+document.URL);return a?a:""};
BBGame.prototype.LoadString=function(a){var b=new XMLHttpRequest;b.open("GET",this.PathToUrl(a),!1);b.send(null);return 200==b.status||0==b.status?b.responseText:""};BBGame.prototype.PollJoystick=function(a,b,c,d,e){return!1};BBGame.prototype.OpenUrl=function(a){window.location=a};BBGame.prototype.SetMouseVisible=function(a){this._canvas.style.cursor=a?"default":"url('data:image/cur;base64,AAACAAEAICAAAAAAAACoEAAAFgAAACgAAAAgAAAAQAAAAAEAIAAAAAAAgBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA55ZXBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOeWVxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADnllcGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9////////////////////+////////f/////////8%3D'), auto"};
BBGame.prototype.PathToFilePath=function(a){return""};BBGame.prototype.PathToUrl=function(a){return a};BBGame.prototype.LoadData=function(a){var b=new XMLHttpRequest;b.open("GET",this.PathToUrl(a),!1);b.overrideMimeType&&b.overrideMimeType("text/plain; charset=x-user-defined");b.send(null);if(200!=b.status&&0!=b.status)return null;a=b.responseText;for(var b=new ArrayBuffer(a.length),c=new Int8Array(b),d=0;d<a.length;++d)c[d]=a.charCodeAt(d);return b};
BBGame.prototype.Die=function(a){this._delegate=new BBGameDelegate;if(a.toString())throw this._debugExs&&(print("Monkey Runtime Error : "+a.toString()),print(stackTrace())),a;};BBGame.prototype.StartGame=function(){if(!this._started)if(this._started=!0,this._debugExs)try{this._delegate.StartGame()}catch(a){this.Die(a)}else this._delegate.StartGame()};BBGame.prototype.SuspendGame=function(){if(this._started&&!this._suspended)if(this._suspended=!0,this._debugExs)try{this._delegate.SuspendGame()}catch(a){this.Die(a)}else this._delegate.SuspendGame()};
BBGame.prototype.ResumeGame=function(){if(this._started&&this._suspended)if(this._suspended=!1,this._debugExs)try{this._delegate.ResumeGame()}catch(a){this.Die(a)}else this._delegate.ResumeGame()};BBGame.prototype.UpdateGame=function(){if(this._started&&!this._suspended)if(this._debugExs)try{this._delegate.UpdateGame()}catch(a){this.Die(a)}else this._delegate.UpdateGame()};BBGame.prototype.RenderGame=function(){if(this._started)if(this._debugExs)try{this._delegate.RenderGame()}catch(a){this.Die(a)}else this._delegate.RenderGame()};
BBGame.prototype.KeyEvent=function(a,b){if(this._started)if(this._debugExs)try{this._delegate.KeyEvent(a,b)}catch(c){this.Die(c)}else this._delegate.KeyEvent(a,b)};BBGame.prototype.MouseEvent=function(a,b,c,d){if(this._started)if(this._debugExs)try{this._delegate.MouseEvent(a,b,c,d)}catch(e){this.Die(e)}else this._delegate.MouseEvent(a,b,c,d)};
BBGame.prototype.TouchEvent=function(a,b,c,d){if(this._started)if(this._debugExs)try{this._delegate.TouchEvent(a,b,c,d)}catch(e){this.Die(e)}else this._delegate.TouchEvent(a,b,c,d)};BBGame.prototype.MotionEvent=function(a,b,c,d,e){if(this._started)if(this._debugExs)try{this._delegate.MotionEvent(a,b,c,d,e)}catch(h){this.Die(h)}else this._delegate.MotionEvent(a,b,c,d,e)};
BBGame.prototype.DiscardGraphics=function(){if(this._started)if(this._debugExs)try{this._delegate.DiscardGraphics()}catch(a){this.Die(a)}else this._delegate.DiscardGraphics()}(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=
function(b,c){var h=(new Date).getTime(),f=Math.max(0,16-(h-a)),k=window.setTimeout(function(){b(h+f)},f);a=h+f;return k});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}());
function BBHtml5Game(a){BBGame.call(this);BBHtml5Game._game=this;this._canvas=a;this._timerSeq=this._loading=0;this._gl=null;"1"==CFG_OPENGL_GLES20_ENABLED&&(this._gl=this._canvas.getContext("webgl"),this._gl||(this._gl=this._canvas.getContext("experimental-webgl")),this._gl||this.Die("Can't create WebGL"),gl=this._gl)}BBHtml5Game.prototype=extend_class(BBGame);BBHtml5Game.Html5Game=function(){return BBHtml5Game._game};
BBHtml5Game.prototype.ValidateUpdateTimer=function(){function a(){c=Date.now();h=c-d;h>e&&(d=c-h%e,b.UpdateGame(),b.RenderGame());requestAnimationFrame(a)}var b=this,c,d=Date.now(),e=1E3/30,h;a()};BBHtml5Game.prototype.SetUpdateRate=function(a){BBGame.prototype.SetUpdateRate.call(this,a);this.ValidateUpdateTimer()};
BBHtml5Game.prototype.GetMetaData=function(a,b){if(0!=a.indexOf("monkey://data/"))return"";a=a.slice(14);var c=META_DATA.indexOf("["+a+"]");if(-1==c)return"";var c=c+(a.length+2),d=META_DATA.indexOf("\n",c);-1==d&&(d=META_DATA.length);c=META_DATA.indexOf(";"+b+"=",c);if(-1==c||c>=d)return"";c+=b.length+2;d=META_DATA.indexOf(";",c);return-1==d?"":META_DATA.slice(c,d)};BBHtml5Game.prototype.PathToUrl=function(a){return 0!=a.indexOf("monkey:")?a:0==a.indexOf("monkey://data/")?"data/"+a.slice(14):""};
BBHtml5Game.prototype.GetLoading=function(){return this._loading};BBHtml5Game.prototype.IncLoading=function(){++this._loading;return this._loading};BBHtml5Game.prototype.DecLoading=function(){--this._loading;return this._loading};BBHtml5Game.prototype.GetCanvas=function(){return this._canvas};BBHtml5Game.prototype.GetWebGL=function(){return this._gl};BBHtml5Game.prototype.UpdateGame=function(){this._loading||BBGame.prototype.UpdateGame.call(this)};BBHtml5Game.prototype.SuspendGame=function(){BBGame.prototype.SuspendGame.call(this)};
BBHtml5Game.prototype.ResumeGame=function(){BBGame.prototype.ResumeGame.call(this)};
BBHtml5Game.prototype.Run=function(){function a(a){a.stopPropagation?(a.stopPropagation(),a.preventDefault()):(a.cancelBubble=!0,a.returnValue=!1)}function b(a){a=a.clientX/xRatio+document.body.scrollLeft;for(var b=f;b;)a-=b.offsetLeft,b=b.offsetParent;return a}function c(a){a=a.clientY/yRatio+document.body.scrollTop;for(var b=f;b;)a-=b.offsetTop,b=b.offsetParent;return a}function d(a){a=0>a.pageX/xRatio?Math.ceil(a.pageX/xRatio):Math.floor(a.pageX/xRatio);for(var b=f;b;)a-=b.offsetLeft,b=b.offsetParent;
return a}function e(a){a=0>a.pageY/yRatio?Math.ceil(a.pageY/yRatio):Math.floor(a.pageY/yRatio);for(var b=f;b;)a-=b.offsetTop,b=b.offsetParent;return a}var h=this,f=document.getElementById("GameCanvas"),k=Array(2);for(i=0;2>i;++i)k[i]=-1;f.onmousedown=function(d){switch(d.button){case 0:h.MouseEvent(BBGameEvent.MouseDown,0,b(d),c(d));break;case 1:h.MouseEvent(BBGameEvent.MouseDown,2,b(d),c(d));break;case 2:h.MouseEvent(BBGameEvent.MouseDown,1,b(d),c(d))}a(d)};f.onmouseup=function(d){switch(d.button){case 0:h.MouseEvent(BBGameEvent.MouseUp,
0,b(d),c(d));break;case 1:h.MouseEvent(BBGameEvent.MouseUp,2,b(d),c(d));break;case 2:h.MouseEvent(BBGameEvent.MouseUp,1,b(d),c(d))}a(d)};f.onmousemove=function(d){h.MouseEvent(BBGameEvent.MouseMove,-1,b(d),c(d));a(d)};f.onmouseout=function(d){h.MouseEvent(BBGameEvent.MouseUp,0,b(d),c(d));h.MouseEvent(BBGameEvent.MouseUp,1,b(d),c(d));h.MouseEvent(BBGameEvent.MouseUp,2,b(d),c(d));a(d)};f.ontouchstart=function(b){Howler.enableWebAudio();for(var c=0;c<b.changedTouches.length;++c)for(var f=b.changedTouches[c],
n=0;32>n;++n)if(-1==k[n]){k[n]=f.identifier;h.TouchEvent(BBGameEvent.TouchDown,n,d(f),e(f));break}a(b)};f.ontouchmove=function(b){for(var c=0;c<b.changedTouches.length;++c)for(var f=b.changedTouches[c],n=0;32>n;++n)if(k[n]==f.identifier){h.TouchEvent(BBGameEvent.TouchMove,n,d(f),e(f));break}a(b)};f.ontouchend=function(b){for(var c=0;c<b.changedTouches.length;++c)for(var f=b.changedTouches[c],n=0;32>n;++n)if(k[n]==f.identifier){k[n]=-1;h.TouchEvent(BBGameEvent.TouchUp,n,d(f),e(f));break}a(b)};f.onfocus=
function(a){"1"==CFG_MOJO_AUTO_SUSPEND_ENABLED&&h.ResumeGame()};f.onblur=function(a){for(a=0;256>a;++a)h.KeyEvent(BBGameEvent.KeyUp,a);"1"==CFG_MOJO_AUTO_SUSPEND_ENABLED&&h.SuspendGame()};determineDevice();f.focus();h.StartGame()};window.addEventListener("load",hideAddressBar);window.addEventListener("orientationchange",hideAddressBar);
function hideAddressBar(){window.location.hash||(document.height<=window.outerHeight+10&&(document.body.style.height=window.outerHeight+50+"px"),setTimeout(function(){window.scrollTo(0,1)},100));resize()}var deviceType=1;
function determineDevice(){/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/i.test(navigator.userAgent)||(GameCanvas.style.position="static",GameCanvas.width*=2,GameCanvas.height*=2,deviceType=2);hideAddressBar()}var xRatio,yRatio,orientationPortrait="portrait",orientationLandscape="landscape";
function resize(){var a=window.innerWidth,b=window.innerHeight+1,c=a/b;1>c?(orientationString=orientationPortrait,"landscape"===orientationGame?(document.getElementById("orientation").style.display="block",document.getElementById("GameCanvas").style.display="none"):"portrait"===orientationGame&&(document.getElementById("orientation").style.display="none",document.getElementById("GameCanvas").style.display="block"),c=1/c):(orientationString=orientationLandscape,"landscape"===orientationGame?(document.getElementById("orientation").style.display=
"none",document.getElementById("GameCanvas").style.display="block"):"portrait"===orientationGame&&(document.getElementById("orientation").style.display="block",document.getElementById("GameCanvas").style.display="none"));var d=0;1.34<=c&&1.77>=c?d=Math.round(320*deviceType*c):1.77<c?d=Math.round(566.4*deviceType):1.34>c&&(d=Math.round(428.8*deviceType));"landscape"===orientationGame?(GameCanvas.width=d,GameCanvas.height=320*deviceType):"portrait"===orientationGame&&(GameCanvas.height=d,GameCanvas.width=
320*deviceType);GameCanvas.style.width=a+"px";GameCanvas.style.height=b+"px";xRatio=a/GameCanvas.width;yRatio=b/GameCanvas.height;GameCanvas.focus()}function BBMonkeyGame(a){BBHtml5Game.call(this,a)}BBMonkeyGame.prototype=extend_class(BBHtml5Game);BBMonkeyGame.Main=function(a){a=new BBMonkeyGame(a);try{bbInit(),bbMain()}catch(b){a.Die(b);return}a.Delegate()&&a.Run()};
function gxtkGraphics(){this.game=BBHtml5Game.Html5Game();this.canvas=this.game.GetCanvas();this.width=this.canvas.width;this.height=this.canvas.height;this.gl=null;this.gc=this.canvas.getContext("2d");this.tmpCanvas=null;this.g=this.b=this.r=255;this.white=!0;this.color="rgb(255,255,255)";this.alpha=1;this.blend="source-over";this.ix=1;this.jx=this.iy=0;this.jy=1;this.ty=this.tx=0;this.tformed=!1;this.scissorHeight=this.scissorWidth=this.scissorY=this.scissorX=0;this.clipped=!1}
gxtkGraphics.prototype.BeginRender=function(){this.width=this.canvas.width;this.height=this.canvas.height;if(!this.gc)return 0;this.gc.save();return this.game.GetLoading()?2:1};gxtkGraphics.prototype.EndRender=function(){this.gc&&this.gc.restore()};gxtkGraphics.prototype.Width=function(){return this.width};gxtkGraphics.prototype.Height=function(){return this.height};
gxtkGraphics.prototype.LoadSurface=function(a){var b=this.game;if(0!=b.GetMetaData(a,"type").indexOf("image/"))return null;b.IncLoading();var c=new Image;c.onload=function(){b.DecLoading()};c.meta_width=parseInt(b.GetMetaData(a,"width"));c.meta_height=parseInt(b.GetMetaData(a,"height"));c.src=b.PathToUrl(a);return new gxtkSurface(c,this)};
gxtkGraphics.prototype.CreateSurface=function(a,b){var c=document.createElement("canvas");c.width=a;c.height=b;c.meta_width=a;c.meta_height=b;c.complete=!0;var d=new gxtkSurface(c,this);d.gc=c.getContext("2d");return d};gxtkGraphics.prototype.SetAlpha=function(a){this.alpha=a;this.gc.globalAlpha=a};
gxtkGraphics.prototype.SetColor=function(a,b,c){this.r=a;this.g=b;this.b=c;this.white=255==a&&255==b&&255==c;this.color="rgb("+(a|0)+","+(b|0)+","+(c|0)+")";this.gc.fillStyle=this.color;this.gc.strokeStyle=this.color};gxtkGraphics.prototype.SetBlend=function(a){switch(a){case 1:this.blend="lighter";break;default:this.blend="source-over"}this.gc.globalCompositeOperation=this.blend};
gxtkGraphics.prototype.SetScissor=function(a,b,c,d){this.scissorX=a;this.scissorY=b;this.scissorWidth=c;this.scissorHeight=d;this.clipped=0!=a||0!=b||c!=this.canvas.width||d!=this.canvas.height;this.gc.restore();this.gc.save();this.clipped&&(this.gc.beginPath(),this.gc.rect(a,b,c,d),this.gc.clip(),this.gc.closePath());this.gc.fillStyle=this.color;this.gc.strokeStyle=this.color;this.gc.globalAlpha=this.alpha;this.gc.globalCompositeOperation=this.blend;this.tformed&&this.gc.setTransform(this.ix,this.iy,
this.jx,this.jy,this.tx,this.ty)};gxtkGraphics.prototype.SetMatrix=function(a,b,c,d,e,h){this.ix=a;this.iy=b;this.jx=c;this.jy=d;this.tx=e;this.ty=h;this.gc.setTransform(a,b,c,d,e,h);this.tformed=1!=a||0!=b||0!=c||1!=d||0!=e||0!=h};
gxtkGraphics.prototype.Cls=function(a,b,c){this.tformed&&this.gc.setTransform(1,0,0,1,0,0);this.gc.fillStyle="rgb("+(a|0)+","+(b|0)+","+(c|0)+")";this.gc.globalAlpha=1;this.gc.globalCompositeOperation="source-over";this.gc.fillRect(0,0,this.canvas.width,this.canvas.height);this.gc.fillStyle=this.color;this.gc.globalAlpha=this.alpha;this.gc.globalCompositeOperation=this.blend;this.tformed&&this.gc.setTransform(this.ix,this.iy,this.jx,this.jy,this.tx,this.ty)};
gxtkGraphics.prototype.DrawPoint=function(a,b){if(this.tformed){var c=a;a=c*this.ix+b*this.jx+this.tx;b=c*this.iy+b*this.jy+this.ty;this.gc.setTransform(1,0,0,1,0,0);this.gc.fillRect(a,b,1,1);this.gc.setTransform(this.ix,this.iy,this.jx,this.jy,this.tx,this.ty)}else this.gc.fillRect(a,b,1,1)};gxtkGraphics.prototype.DrawRect=function(a,b,c,d){0>c&&(a+=c,c=-c);0>d&&(b+=d,d=-d);0>=c||0>=d||this.gc.fillRect(a,b,c,d)};
gxtkGraphics.prototype.DrawLine=function(a,b,c,d){if(this.tformed){var e=a*this.ix+b*this.jx+this.tx;a=a*this.iy+b*this.jy+this.ty;b=c*this.ix+d*this.jx+this.tx;c=c*this.iy+d*this.jy+this.ty;this.gc.setTransform(1,0,0,1,0,0);this.gc.beginPath();this.gc.moveTo(e,a);this.gc.lineTo(b,c);this.gc.stroke();this.gc.closePath();this.gc.setTransform(this.ix,this.iy,this.jx,this.jy,this.tx,this.ty)}else this.gc.beginPath(),this.gc.moveTo(a,b),this.gc.lineTo(c,d),this.gc.stroke(),this.gc.closePath()};
gxtkGraphics.prototype.DrawOval=function(a,b,c,d){0>c&&(a+=c,c=-c);0>d&&(b+=d,d=-d);0>=c||0>=d||(c/=2,d/=2,this.gc.save(),this.gc.translate(a+c,b+d),this.gc.scale(c,d),this.gc.beginPath(),this.gc.arc(0,0,1,0,2*Math.PI,!1),this.gc.fill(),this.gc.closePath(),this.gc.restore())};gxtkGraphics.prototype.DrawPoly=function(a){if(!(2>a.length)){this.gc.beginPath();this.gc.moveTo(a[0],a[1]);for(var b=2;b<a.length;b+=2)this.gc.lineTo(a[b],a[b+1]);this.gc.fill();this.gc.closePath()}};
gxtkGraphics.prototype.DrawPoly2=function(a,b,c,d){if(!(4>a.length)){this.gc.beginPath();this.gc.moveTo(a[0],a[1]);for(b=4;b<a.length;b+=4)this.gc.lineTo(a[b],a[b+1]);this.gc.fill();this.gc.closePath()}};gxtkGraphics.prototype.DrawSurface=function(a,b,c){a.image.complete&&(this.white?this.gc.drawImage(a.image,b,c):this.DrawImageTinted(a.image,b,c,0,0,a.swidth,a.sheight))};
gxtkGraphics.prototype.DrawSurface2=function(a,b,c,d,e,h,f){a.image.complete&&(0>h&&(d+=h,h=-h),0>f&&(e+=f,f=-f),0>=h||0>=f||(this.white?this.gc.drawImage(a.image,d,e,h,f,b,c,h,f):this.DrawImageTinted(a.image,b,c,d,e,h,f)))};
gxtkGraphics.prototype.DrawImageTinted=function(a,b,c,d,e,h,f){this.tmpCanvas||(this.tmpCanvas=document.createElement("canvas"));if(h>this.tmpCanvas.width||f>this.tmpCanvas.height)this.tmpCanvas.width=Math.max(h,this.tmpCanvas.width),this.tmpCanvas.height=Math.max(f,this.tmpCanvas.height);var k=this.tmpCanvas.getContext("2d");k.globalCompositeOperation="copy";k.drawImage(a,d,e,h,f,0,0,h,f);a=k.getImageData(0,0,h,f);d=a.data;e=h*f*4;var l;for(l=0;l<e;l+=4)d[l]=d[l]*this.r/255,d[l+1]=d[l+1]*this.g/
255,d[l+2]=d[l+2]*this.b/255;k.putImageData(a,0,0);this.gc.drawImage(this.tmpCanvas,0,0,h,f,b,c,h,f)};gxtkGraphics.prototype.ReadPixels=function(a,b,c,d,e,h,f){b=this.gc.getImageData(b,c,d,e).data;c=0;var k,l;for(l=0;l<e;++l){for(k=0;k<d;++k)a[h++]=b[c+3]<<24|b[c]<<16|b[c+1]<<8|b[c+2],c+=4;h+=f-d}};
gxtkGraphics.prototype.WritePixels2=function(a,b,c,d,e,h,f,k){if(!a.gc){if(!a.image.complete)return;var l=document.createElement("canvas");l.width=a.swidth;l.height=a.sheight;a.gc=l.getContext("2d");a.gc.globalCompositeOperation="copy";a.gc.drawImage(a.image,0,0);a.image=l}var l=a.gc.createImageData(e,h),g=l.data,q=0,n,t,s;for(t=0;t<h;++t){for(n=0;n<e;++n)s=b[f++],g[q]=s>>16&255,g[q+1]=s>>8&255,g[q+2]=s&255,g[q+3]=s>>24&255,q+=4;f+=k-e}a.gc.putImageData(l,c,d)};
function gxtkSurface(a,b){this.image=a;this.graphics=b;this.swidth=a.meta_width;this.sheight=a.meta_height}gxtkSurface.prototype.Discard=function(){this.image&&(this.image=null)};gxtkSurface.prototype.Width=function(){return this.swidth};gxtkSurface.prototype.Height=function(){return this.sheight};gxtkSurface.prototype.Loaded=function(){return this.image.complete};gxtkSurface.prototype.OnUnsafeLoadComplete=function(){return!0};
function gxtkChannel(){this.audio=this.sample=null;this.volume=1;this.pan=0;this.rate=1;this.state=this.flags=0}function gxtkAudio(){this.game=BBHtml5Game.Html5Game();this.music=null}gxtkAudio.prototype.Suspend=function(){Howler.mute()};gxtkAudio.prototype.Resume=function(){Howler.unmute()};gxtkAudio.prototype.LoadSample=function(a){a=this.game.PathToUrl(a);return(a=new Howl({urls:[a+".m4a",a+".ogg"]}))?a:null};gxtkAudio.prototype.PlaySample=function(a,b,c){this.music=a;a.loop(0!=(c&1));a.play()};
gxtkAudio.prototype.StopChannel=function(a){};gxtkAudio.prototype.PauseChannel=function(a){};gxtkAudio.prototype.ResumeChannel=function(a){};gxtkAudio.prototype.ChannelState=function(a){};gxtkAudio.prototype.SetVolume=function(a,b){};gxtkAudio.prototype.SetPan=function(a,b){};gxtkAudio.prototype.SetRate=function(a,b){};gxtkAudio.prototype.PlayMusic=function(a,b){};gxtkAudio.prototype.StopMusic=function(){};gxtkAudio.prototype.PauseMusic=function(){Howler.mute()};gxtkAudio.prototype.ResumeMusic=function(){Howler.unmute()};
gxtkAudio.prototype.MusicState=function(){return null==this.music?0:1};gxtkAudio.prototype.SetMusicVolume=function(a){};function gxtkSample(a){this.audio=a;this.free=[];this.insts=[]}gxtkSample.prototype.FreeAudio=function(a){this.free.push(a)};
gxtkSample.prototype.AllocAudio=function(){for(var a;this.free.length;){a=this.free.pop();try{return a.currentTime=0,a}catch(b){print("AUDIO ERROR1!")}}if(8==this.insts.length)return null;a=new Audio(this.audio.src);a.addEventListener("ended",function(){if(this.loop)try{this.currentTime=0,this.play()}catch(a){print("AUDIO ERROR2!")}},!1);this.insts.push(a);return a};gxtkSample.prototype.Discard=function(){};function BBThread(){this.result=null;this.running=!1}
BBThread.prototype.Start=function(){this.result=null;this.running=!0;this.Run__UNSAFE__()};BBThread.prototype.IsRunning=function(){return this.running};BBThread.prototype.Result=function(){return this.result};BBThread.prototype.Run__UNSAFE__=function(){this.running=!1};function BBAsyncImageLoaderThread(){BBThread.call(this)}BBAsyncImageLoaderThread.prototype=extend_class(BBThread);
BBAsyncImageLoaderThread.prototype.Start=function(){var a=this,b=new Image;b.onload=function(c){b.meta_width=b.width;b.meta_height=b.height;a._surface=new gxtkSurface(b,a._device);a.running=!1};b.onerror=function(b){a._surface=null;a.running=!1};a.running=!0;b.src=BBGame.Game().PathToUrl(a._path)};function BBAsyncSoundLoaderThread(){BBThread.call(this)}BBAsyncSoundLoaderThread.prototype=extend_class(BBThread);BBAsyncSoundLoaderThread.prototype.Start=function(){this._sample=this._device.LoadSample(this._path)};
var diddy={},diddy_mouseWheelDelta=0;diddy.mouseZ=function(){var a=diddy_mouseWheelDelta;diddy_mouseWheelDelta=0;return a};diddy.mouseZInit=function(){document.getElementById("GameCanvas").onmousewheel=function(a){diddy_mouseWheelDelta+=a.wheelDelta/120}};diddy.systemMillisecs=function(){return(new Date).getTime()};diddy.setGraphics=function(a,b){var c=document.getElementById("GameCanvas");c.width=a;c.height=b};diddy.setMouse=function(a,b){};diddy.showKeyboard=function(){};
diddy.launchBrowser=function(a,b){window.open(a,b)};diddy.launchEmail=function(a,b,c){location.href="mailto:"+a+"&subject="+b+"&body="+c+""};diddy.startVibrate=function(a){};diddy.stopVibrate=function(){};diddy.getDayOfMonth=function(){return(new Date).getDate()};diddy.getDayOfWeek=function(){return(new Date).getDay()+1};diddy.getMonth=function(){return(new Date).getMonth()+1};diddy.getYear=function(){return(new Date).getFullYear()};diddy.getHours=function(){return(new Date).getHours()};
diddy.getMinutes=function(){return(new Date).getMinutes()};diddy.getSeconds=function(){return(new Date).getSeconds()};diddy.getMilliSeconds=function(){return(new Date).getMilliseconds()};diddy.startGps=function(){};diddy.getLatitiude=function(){return""};diddy.getLongitude=function(){return""};diddy.showAlertDialog=function(a,b){};diddy.getInputString=function(){return""};
var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(a){for(var b=0;b<a.length;b++){var c=a[b].string,d=a[b].prop;this.versionSearchString=a[b].versionSearch||a[b].identity;if(c){if(-1!=c.indexOf(a[b].subString))return a[b].identity}else if(d)return a[b].identity}},
searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(-1!=b)return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",
identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",
identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init();diddy.getBrowserName=function(){return BrowserDetect.browser};diddy.getBrowserVersion=function(){return BrowserDetect.version};diddy.getBrowserOS=function(){return BrowserDetect.OS};
diddy.getSoundsLoaded=function(){return Howler.getSoundsLoaded()};var orientationString="landscape";diddy.getOrientation=function(){return orientationString};var orientationGame="landscape";diddy.setOrientationGame=function(a){orientationGame=a};diddy.clearCanvas=function(){GameCanvas.getContext("2d").clearRect(-200,0,GameCanvas.width+200,GameCanvas.height)};var renderMode=0;diddy.setRenderMode=function(a){renderMode=a};diddy.getRenderMode=function(){return renderMode};
diddy.seekMusic=function(a){if(bb_audio_device&&bb_audio_device.channels&&bb_audio_device.channels[32]&&bb_audio_device.channels[32].audio){var b=bb_audio_device.channels[32].audio;try{return b.currentTime=a/1E3,1}catch(c){}}return 0};function BBHttpRequest(){this.response={text:"",status:-1,length:0}}
BBHttpRequest.prototype.Open=function(a,b){this.xhr||(this.xhr=new XMLHttpRequest);if(window.XDomainRequest){var c=document.createElement("a");c.href=b;c.hostname!==window.location.hostname?"withCredentials"in this.xhr||this.xhr instanceof XDomainRequest||(this.xhr=new XDomainRequest):this.xhr instanceof XDomainRequest&&(this.xhr=new XMLHttpRequest)}var d=this;this.xhr.onload||(this.xhr.onload=function(a){d.response.status=a.target.status?a.target.status:200;d.response.text=a.target.responseText;
0===d.response.length&&(d.response.length=a.target.responseText.length);d.running=!1});this.xhr.onprogress||(this.xhr.onprogress=function(a){a.lengthComputable&&(d.response.length=a.loaded)});this.xhr.onerror||(this.xhr.onerror=function(a){d.response.status=a.target.status?a.target.status:0;d.running=!1});this.response.text="";this.response.status=-1;this.response.length=0;this.xhr.open(a,b)};BBHttpRequest.prototype.Discard=function(){this.xhr&&this.xhr.abort();this.xhr=this.response=null};
BBHttpRequest.prototype.SetHeader=function(a,b){this.xhr&&this.xhr.setRequestHeader&&this.xhr.setRequestHeader(a,b)};BBHttpRequest.prototype.Send=function(){this.data=this.encoding=null;this.Start()};BBHttpRequest.prototype.SendText=function(a,b){this.data=a;this.encoding=b;this.Start()};BBHttpRequest.prototype.Start=function(){this.xhr&&(this.running=!0,this.xhr.send(this.data))};BBHttpRequest.prototype.BytesReceived=function(){return this.response.length};BBHttpRequest.prototype.ResponseText=function(){return this.response.text};
BBHttpRequest.prototype.Status=function(){return this.response.status};BBHttpRequest.prototype.IsRunning=function(){return this.running};function c_App(){Object.call(this)}c_App.m_new=function(){null!=bb_app__app&&error("App has already been created");bb_app__app=this;bb_app__delegate=c_GameDelegate.m_new.call(new c_GameDelegate);bb_app__game.SetDelegate(bb_app__delegate);return this};c_App.prototype.p_OnCreate=function(){return 0};c_App.prototype.p_OnSuspend=function(){return 0};
c_App.prototype.p_OnResume=function(){return 0};c_App.prototype.p_OnUpdate=function(){return 0};c_App.prototype.p_OnLoading=function(){return 0};c_App.prototype.p_OnRender=function(){return 0};c_App.prototype.p_OnClose=function(){bb_app_EndApp();return 0};c_App.prototype.p_OnBack=function(){this.p_OnClose();return 0};
function c_DiddyApp(){c_App.call(this);this.m_inputCache=this.m_sounds=this.m_images=this.m_screenFade=this.m_screens=null;this.m_virtualResOn=!0;this.m_aspectRatioOn=!1;this.m_inputYOff=this.m_inputXOff=this.m_virtualYOff=this.m_virtualXOff=this.m_assetRatio=this.m_translateRatio=this.m_multi=this.m_aspectRatio=this.m_deviceChanged=0;this.m_nextScreen=this.m_currentScreen=null;this.m_FPS=60}c_DiddyApp.prototype=extend_class(c_App);
c_DiddyApp.m_new=function(a){c_App.m_new.call(this);bb_frameworklite_diddyGame=this;this.m_screens=c_Screens.m_new.call(new c_Screens);this.m_screenFade=c_ScreenFade.m_new.call(new c_ScreenFade);this.m_images=c_ImageBank.m_new.call(new c_ImageBank);this.m_sounds=c_SoundBank.m_new.call(new c_SoundBank);this.m_inputCache=c_InputCache.m_new.call(new c_InputCache);return this};c_DiddyApp.prototype.p_OnCreate=function(){bb_random_Seed=diddy.systemMillisecs();return 0};
c_DiddyApp.prototype.p_OnRender=function(){if(this.m_virtualResOn)if(bb_graphics_PushMatrix(),this.m_aspectRatioOn){if(bb_graphics_DeviceWidth()!=bb_frameworklite_DEVICE_WIDTH||bb_graphics_DeviceHeight()!=bb_frameworklite_DEVICE_HEIGHT||0!=this.m_deviceChanged)bb_frameworklite_DEVICE_WIDTH=bb_graphics_DeviceWidth(),bb_frameworklite_DEVICE_HEIGHT=bb_graphics_DeviceHeight(),this.m_deviceChanged=0,this.m_multi=bb_frameworklite_DEVICE_HEIGHT/bb_frameworklite_DEVICE_WIDTH>=this.m_aspectRatio?bb_frameworklite_DEVICE_WIDTH/
bb_frameworklite_SCREEN_WIDTH:bb_frameworklite_DEVICE_HEIGHT/bb_frameworklite_SCREEN_HEIGHT,this.m_virtualXOff=(bb_frameworklite_DEVICE_WIDTH-bb_frameworklite_SCREEN_WIDTH*this.m_multi)*this.m_translateRatio*this.m_assetRatio/this.m_multi,this.m_virtualYOff=(bb_frameworklite_DEVICE_HEIGHT-bb_frameworklite_SCREEN_HEIGHT*this.m_multi)*this.m_translateRatio*this.m_assetRatio/this.m_multi,this.m_inputXOff=-this.m_virtualXOff/this.m_assetRatio,this.m_inputYOff=-this.m_virtualYOff/this.m_assetRatio;bb_graphics_Scale(this.m_multi/
this.m_assetRatio,this.m_multi/this.m_assetRatio);bb_graphics_Translate(this.m_virtualXOff,this.m_virtualYOff)}else bb_graphics_Scale(bb_frameworklite_SCREENX_RATIO,bb_frameworklite_SCREENY_RATIO);this.m_currentScreen.p_Render();this.m_virtualResOn&&bb_graphics_PopMatrix();this.m_screenFade.m_active&&this.m_screenFade.p_Render();return 0};c_DiddyApp.prototype.p_ReadInputs=function(){this.m_inputCache.p_ReadInput(this.m_multi,this.m_inputXOff|0,this.m_inputYOff|0);this.m_inputCache.p_HandleEvents(this.m_currentScreen)};
c_DiddyApp.prototype.p_CalcAnimLength=function(a){return a/(1E3/this.m_FPS)};c_DiddyApp.prototype.p_Update=function(){bb_frameworklite_dt.p_UpdateDelta();this.m_screenFade.m_active&&this.m_screenFade.p_Update();this.m_screenFade.m_active&&!this.m_screenFade.m_allowScreenUpdate||this.m_currentScreen.p_Update()};c_DiddyApp.prototype.p_OnUpdate=function(){this.p_ReadInputs();this.p_Update();return 0};c_DiddyApp.prototype.p_OnSuspend=function(){this.m_currentScreen.p_Suspend();return 0};
c_DiddyApp.prototype.p_OnResume=function(){bb_frameworklite_dt.m_currentticks=bb_app_Millisecs();bb_frameworklite_dt.m_lastticks=bb_frameworklite_dt.m_currentticks;this.m_currentScreen.p_Resume();return 0};c_DiddyApp.prototype.p_OnBack=function(){this.m_currentScreen.p_Back();return 0};c_DiddyApp.prototype.p_SetFPS=function(a){this.m_FPS=a;bb_frameworklite_dt=c_DeltaTimer.m_new.call(new c_DeltaTimer,a);bb_app_SetUpdateRate(a)};
c_DiddyApp.prototype.p_SetScreenSize=function(a,b,c,d){bb_frameworklite_SCREEN_WIDTH=a;bb_frameworklite_SCREEN_HEIGHT=b;bb_frameworklite_SCREEN_WIDTH2=bb_frameworklite_SCREEN_WIDTH/2;bb_frameworklite_SCREEN_HEIGHT2=bb_frameworklite_SCREEN_HEIGHT/2;bb_frameworklite_SCREENX_RATIO=bb_frameworklite_DEVICE_WIDTH/bb_frameworklite_SCREEN_WIDTH;bb_frameworklite_SCREENY_RATIO=bb_frameworklite_DEVICE_HEIGHT/bb_frameworklite_SCREEN_HEIGHT;this.m_virtualResOn=!0;this.m_aspectRatioOn=d;this.m_aspectRatio=b/a;
this.m_translateRatio=c;if(bb_graphics_DeviceWidth()!=bb_frameworklite_SCREEN_WIDTH||bb_graphics_DeviceHeight()!=bb_frameworklite_SCREEN_HEIGHT)this.m_deviceChanged=1};c_DiddyApp.prototype.p_Start=function(a,b,c,d,e){if(a.m_autoFadeIn=b)a.m_autoFadeInTime=c,a.m_autoFadeInSound=d,a.m_autoFadeInMusic=e;a.p_PreStart()};c_DiddyApp.prototype.p_AssetRatio=function(a,b){this.m_assetRatio=b?a/bb_frameworklite_SCREEN_WIDTH:a/bb_frameworklite_SCREEN_HEIGHT};c_DiddyApp.prototype.p_AssetRatio2=function(){return this.m_assetRatio};
function c_GameApp(){c_DiddyApp.call(this)}c_GameApp.prototype=extend_class(c_DiddyApp);c_GameApp.m_new=function(){c_DiddyApp.m_new.call(this,60);return this};
c_GameApp.prototype.p_OnCreate=function(){c_DiddyApp.prototype.p_OnCreate.call(this);this.p_SetFPS(30);bb_functionslite_SetGraphics(bb_graphics_DeviceWidth(),bb_graphics_DeviceHeight());this.p_SetScreenSize(854,640,0.5,!0);bb_frameworklite_diddyGame.m_inputCache.p_MonitorNothing();bb_frameworklite_diddyGame.m_inputCache.p_MonitorTouch(!0);diddy.setOrientationGame("landscape");this.p_Start(bb_fishingjoy_preloaderScreen,!0,bb_frameworklite_defaultFadeTime,!1,!1);return 0};
c_GameApp.prototype.p_OnSuspend=function(){c_DiddyApp.prototype.p_OnSuspend.call(this);return 0};c_GameApp.prototype.p_OnResume=function(){c_DiddyApp.prototype.p_OnResume.call(this);return 0};c_GameApp.prototype.p_OnBack=function(){return 0};var bb_app__app=null;function c_GameDelegate(){BBGameDelegate.call(this);this.m__input=this.m__audio=this.m__graphics=null}c_GameDelegate.prototype=extend_class(BBGameDelegate);c_GameDelegate.m_new=function(){return this};
c_GameDelegate.prototype.StartGame=function(){this.m__graphics=new gxtkGraphics;bb_graphics_SetGraphicsDevice(this.m__graphics);bb_graphics_SetFont(null,32);this.m__audio=new gxtkAudio;bb_audio_SetAudioDevice(this.m__audio);this.m__input=c_InputDevice.m_new.call(new c_InputDevice);bb_input_SetInputDevice(this.m__input);bb_app__app.p_OnCreate()};c_GameDelegate.prototype.SuspendGame=function(){bb_app__app.p_OnSuspend();this.m__audio.Suspend()};
c_GameDelegate.prototype.ResumeGame=function(){this.m__audio.Resume();bb_app__app.p_OnResume()};c_GameDelegate.prototype.UpdateGame=function(){this.m__input.p_BeginUpdate();bb_app__app.p_OnUpdate();this.m__input.p_EndUpdate()};c_GameDelegate.prototype.RenderGame=function(){var a=this.m__graphics.BeginRender();0!=a&&bb_graphics_BeginRender();2==a?bb_app__app.p_OnLoading():bb_app__app.p_OnRender();0!=a&&bb_graphics_EndRender();this.m__graphics.EndRender()};
c_GameDelegate.prototype.KeyEvent=function(a,b){this.m__input.p_KeyEvent(a,b);1==a&&(432==b?bb_app__app.p_OnClose():416==b&&bb_app__app.p_OnBack())};c_GameDelegate.prototype.MouseEvent=function(a,b,c,d){this.m__input.p_MouseEvent(a,b,c,d)};c_GameDelegate.prototype.TouchEvent=function(a,b,c,d){this.m__input.p_TouchEvent(a,b,c,d)};c_GameDelegate.prototype.MotionEvent=function(a,b,c,d,e){this.m__input.p_MotionEvent(a,b,c,d,e)};c_GameDelegate.prototype.DiscardGraphics=function(){this.m__graphics.DiscardGraphics()};
var bb_app__delegate=null,bb_app__game=null,bb_frameworklite_diddyGame=null;function c_Screen(){Object.call(this);this.m_name="";this.m_autoFadeIn=!1;this.m_autoFadeInTime=50;this.m_autoFadeInMusic=this.m_autoFadeInSound=!1;this.m_backScreenName=""}c_Screen.prototype.p_Render=function(){};c_Screen.prototype.p_OnTouchHit=function(a,b,c){};c_Screen.prototype.p_OnTouchReleased=function(a,b,c){};c_Screen.prototype.p_OnTouchDragged=function(a,b,c,d,e){};c_Screen.prototype.p_Kill=function(){};
c_Screen.prototype.p_Start2=function(){};c_Screen.prototype.p_PreStart=function(){bb_frameworklite_diddyGame.m_screens.p_Set(this.m_name,this);bb_frameworklite_diddyGame.m_currentScreen=this;this.m_autoFadeIn&&(this.m_autoFadeIn=!1,bb_frameworklite_diddyGame.m_screenFade.p_Start3(this.m_autoFadeInTime,!1,this.m_autoFadeInSound,this.m_autoFadeInMusic,!0));this.p_Start2()};c_Screen.prototype.p_PostFadeOut=function(){this.p_Kill();bb_frameworklite_diddyGame.m_nextScreen.p_PreStart()};
c_Screen.prototype.p_PostFadeIn=function(){};c_Screen.prototype.p_Update=function(){};c_Screen.prototype.p_Suspend=function(){};c_Screen.prototype.p_Resume=function(){};c_Screen.prototype.p_FadeToScreen=function(a,b,c,d,e){bb_frameworklite_diddyGame.m_screenFade.m_active||(a.m_autoFadeIn=!0,a.m_autoFadeInTime=b,a.m_autoFadeInSound=c,a.m_autoFadeInMusic=d,bb_frameworklite_diddyGame.m_nextScreen=a,bb_frameworklite_diddyGame.m_screenFade.p_Start3(b,!0,c,d,e))};
c_Screen.prototype.p_Back=function(){if("exit"==this.m_backScreenName)this.p_FadeToScreen(null,bb_frameworklite_defaultFadeTime,!1,!1,!0);else if(0!=this.m_backScreenName.length){var a=bb_frameworklite_diddyGame.m_screens.p_Find(this.m_backScreenName);null!=a&&this.p_FadeToScreen(a,bb_frameworklite_defaultFadeTime,!1,!1,!0)}};c_Screen.m_new=function(a){this.m_name=a;return this};function c_Map(){Object.call(this);this.m_root=null}c_Map.m_new=function(){return this};
c_Map.prototype.p_Compare=function(a,b){};c_Map.prototype.p_RotateLeft=function(a){var b=a.m_right;a.m_right=b.m_left;null!=b.m_left&&(b.m_left.m_parent=a);b.m_parent=a.m_parent;null!=a.m_parent?a==a.m_parent.m_left?a.m_parent.m_left=b:a.m_parent.m_right=b:this.m_root=b;b.m_left=a;a.m_parent=b;return 0};
c_Map.prototype.p_RotateRight=function(a){var b=a.m_left;a.m_left=b.m_right;null!=b.m_right&&(b.m_right.m_parent=a);b.m_parent=a.m_parent;null!=a.m_parent?a==a.m_parent.m_right?a.m_parent.m_right=b:a.m_parent.m_left=b:this.m_root=b;b.m_right=a;a.m_parent=b;return 0};
c_Map.prototype.p_InsertFixup=function(a){for(;null!=a.m_parent&&-1==a.m_parent.m_color&&null!=a.m_parent.m_parent;)if(a.m_parent==a.m_parent.m_parent.m_left){var b=a.m_parent.m_parent.m_right;null!=b&&-1==b.m_color?(a.m_parent.m_color=1,b.m_color=1,b.m_parent.m_color=-1,a=b.m_parent):(a==a.m_parent.m_right&&(a=a.m_parent,this.p_RotateLeft(a)),a.m_parent.m_color=1,a.m_parent.m_parent.m_color=-1,this.p_RotateRight(a.m_parent.m_parent))}else b=a.m_parent.m_parent.m_left,null!=b&&-1==b.m_color?(a.m_parent.m_color=
1,b.m_color=1,b.m_parent.m_color=-1,a=b.m_parent):(a==a.m_parent.m_left&&(a=a.m_parent,this.p_RotateRight(a)),a.m_parent.m_color=1,a.m_parent.m_parent.m_color=-1,this.p_RotateLeft(a.m_parent.m_parent));this.m_root.m_color=1;return 0};
c_Map.prototype.p_Set=function(a,b){for(var c=this.m_root,d=null,e=0;null!=c;)if(d=c,e=this.p_Compare(a,c.m_key),0<e)c=c.m_right;else if(0>e)c=c.m_left;else return c.m_value=b,!1;c=c_Node.m_new.call(new c_Node,a,b,-1,d);null!=d?(0<e?d.m_right=c:d.m_left=c,this.p_InsertFixup(c)):this.m_root=c;return!0};c_Map.prototype.p_FindNode=function(a){for(var b=this.m_root;null!=b;){var c=this.p_Compare(a,b.m_key);if(0<c)b=b.m_right;else if(0>c)b=b.m_left;else break}return b};
c_Map.prototype.p_Get=function(a){a=this.p_FindNode(a);return null!=a?a.m_value:null};function c_StringMap(){c_Map.call(this)}c_StringMap.prototype=extend_class(c_Map);c_StringMap.m_new=function(){c_Map.m_new.call(this);return this};c_StringMap.prototype.p_Compare=function(a,b){return string_compare(a,b)};function c_Screens(){c_StringMap.call(this)}c_Screens.prototype=extend_class(c_StringMap);c_Screens.m_new=function(){c_StringMap.m_new.call(this);return this};
c_Screens.prototype.p_Set=function(a,b){return c_Map.prototype.p_Set.call(this,a.toUpperCase(),b)};c_Screens.prototype.p_Find=function(a){a=a.toUpperCase();return this.p_Get(a)};function c_ScreenFade(){Object.call(this);this.m_active=!1;this.m_fadeTime=this.m_counter=this.m_ratio=0;this.m_allowScreenUpdate=this.m_fadeSound=this.m_fadeMusic=this.m_fadeOut=!1}c_ScreenFade.m_new=function(){return this};
c_ScreenFade.prototype.p_Render=function(){this.m_active&&(bb_graphics_SetAlpha(1-this.m_ratio),bb_graphics_SetColor(0,0,0),bb_graphics_DrawRect(0,0,bb_frameworklite_DEVICE_WIDTH,bb_frameworklite_DEVICE_HEIGHT),bb_graphics_SetAlpha(1),bb_graphics_SetColor(255,255,255))};c_ScreenFade.prototype.p_CalcRatio=function(){this.m_ratio=this.m_counter/this.m_fadeTime;0>this.m_ratio&&(this.m_ratio=0);1<this.m_ratio&&(this.m_ratio=1);this.m_fadeOut&&(this.m_ratio=1-this.m_ratio)};
c_ScreenFade.prototype.p_Start3=function(a,b,c,d,e){this.m_active||(this.m_active=!0,this.m_fadeTime=bb_frameworklite_diddyGame.p_CalcAnimLength(a|0),this.m_fadeOut=b,this.m_fadeMusic=d,this.m_fadeSound=c,this.m_allowScreenUpdate=e,this.m_ratio=b?1:0,this.m_counter=0)};
c_ScreenFade.prototype.p_Update=function(){this.m_active&&(this.m_counter+=bb_frameworklite_dt.m_delta,this.p_CalcRatio(),this.m_counter>this.m_fadeTime&&(this.m_active=!1,this.m_fadeOut?bb_frameworklite_diddyGame.m_currentScreen.p_PostFadeOut():bb_frameworklite_diddyGame.m_currentScreen.p_PostFadeIn()))};function c_GameImage(){Object.call(this);this.m_h=this.m_w=0;this.m_name="";this.m_image=null;this.m_midhandled=this.m_h2=this.m_w2=0;this.m_atlasName="";this.m_subY=this.m_subX=0}
c_GameImage.m_new=function(){return this};c_GameImage.prototype.p_CalcSize=function(){null!=this.m_image&&(this.m_w=this.m_image.p_Width(),this.m_h=this.m_image.p_Height(),this.m_w2=this.m_w/2|0,this.m_h2=this.m_h/2|0)};c_GameImage.prototype.p_MidHandle=function(a){a?(this.m_image.p_SetHandle(this.m_w2,this.m_h2),this.m_midhandled=1):(this.m_image.p_SetHandle(0,0),this.m_midhandled=0)};c_GameImage.prototype.p_MidHandle2=function(){return 1==this.m_midhandled};
c_GameImage.prototype.p_Draw=function(a,b,c,d,e,h){0==c&&1==d&&1==e?bb_graphics_DrawImage(this.m_image,a,b,h):bb_graphics_DrawImage2(this.m_image,a,b,c,d,e,h)};c_GameImage.prototype.p_PreCache=function(){bb_graphics_DrawImage(this.m_image,-this.m_w-50,-this.m_h-50,0)};function c_Map2(){Object.call(this);this.m_root=null}c_Map2.m_new=function(){return this};c_Map2.prototype.p_Compare=function(a,b){};
c_Map2.prototype.p_RotateLeft2=function(a){var b=a.m_right;a.m_right=b.m_left;null!=b.m_left&&(b.m_left.m_parent=a);b.m_parent=a.m_parent;null!=a.m_parent?a==a.m_parent.m_left?a.m_parent.m_left=b:a.m_parent.m_right=b:this.m_root=b;b.m_left=a;a.m_parent=b;return 0};
c_Map2.prototype.p_RotateRight2=function(a){var b=a.m_left;a.m_left=b.m_right;null!=b.m_right&&(b.m_right.m_parent=a);b.m_parent=a.m_parent;null!=a.m_parent?a==a.m_parent.m_right?a.m_parent.m_right=b:a.m_parent.m_left=b:this.m_root=b;b.m_right=a;a.m_parent=b;return 0};
c_Map2.prototype.p_InsertFixup2=function(a){for(;null!=a.m_parent&&-1==a.m_parent.m_color&&null!=a.m_parent.m_parent;)if(a.m_parent==a.m_parent.m_parent.m_left){var b=a.m_parent.m_parent.m_right;null!=b&&-1==b.m_color?(a.m_parent.m_color=1,b.m_color=1,b.m_parent.m_color=-1,a=b.m_parent):(a==a.m_parent.m_right&&(a=a.m_parent,this.p_RotateLeft2(a)),a.m_parent.m_color=1,a.m_parent.m_parent.m_color=-1,this.p_RotateRight2(a.m_parent.m_parent))}else b=a.m_parent.m_parent.m_left,null!=b&&-1==b.m_color?(a.m_parent.m_color=
1,b.m_color=1,b.m_parent.m_color=-1,a=b.m_parent):(a==a.m_parent.m_left&&(a=a.m_parent,this.p_RotateRight2(a)),a.m_parent.m_color=1,a.m_parent.m_parent.m_color=-1,this.p_RotateLeft2(a.m_parent.m_parent));this.m_root.m_color=1;return 0};
c_Map2.prototype.p_Set2=function(a,b){for(var c=this.m_root,d=null,e=0;null!=c;)if(d=c,e=this.p_Compare(a,c.m_key),0<e)c=c.m_right;else if(0>e)c=c.m_left;else return c.m_value=b,!1;c=c_Node4.m_new.call(new c_Node4,a,b,-1,d);null!=d?(0<e?d.m_right=c:d.m_left=c,this.p_InsertFixup2(c)):this.m_root=c;return!0};c_Map2.prototype.p_FindNode=function(a){for(var b=this.m_root;null!=b;){var c=this.p_Compare(a,b.m_key);if(0<c)b=b.m_right;else if(0>c)b=b.m_left;else break}return b};
c_Map2.prototype.p_Get=function(a){a=this.p_FindNode(a);return null!=a?a.m_value:null};c_Map2.prototype.p_Keys=function(){return c_MapKeys.m_new.call(new c_MapKeys,this)};c_Map2.prototype.p_FirstNode=function(){if(null==this.m_root)return null;for(var a=this.m_root;null!=a.m_left;)a=a.m_left;return a};function c_StringMap2(){c_Map2.call(this)}c_StringMap2.prototype=extend_class(c_Map2);c_StringMap2.m_new=function(){c_Map2.m_new.call(this);return this};
c_StringMap2.prototype.p_Compare=function(a,b){return string_compare(a,b)};function c_ImageBank(){c_StringMap2.call(this)}c_ImageBank.prototype=extend_class(c_StringMap2);c_ImageBank.m_new=function(){c_StringMap2.m_new.call(this);return this};c_ImageBank.prototype.p_SaveAtlasToBank=function(a,b){var c=c_GameImage.m_new.call(new c_GameImage);c.m_name="_diddyAtlas_"+bb_functionslite_StripAll(b).toUpperCase();c.m_image=a;c.p_CalcSize();this.p_Set2(c.m_name,c);return c.m_name};
c_ImageBank.prototype.p_Find=function(a){a=a.toUpperCase();return this.p_Get(a)};c_ImageBank.prototype.p_PreCache=function(){for(var a=null,b=this.p_Keys().p_ObjectEnumerator();b.p_HasNext();)a=b.p_NextObject(),a=this.p_Get(a),a.p_PreCache()};function c_GameSound(){Object.call(this);this.m_soundAvailableMillis=this.m_soundDelay=0;this.m_sound=null;this.m_loop=0;this.m_name=this.m_screenName=this.m_path=""}
c_GameSound.prototype.p_Play=function(a,b){return b||0==this.m_soundDelay||this.m_soundAvailableMillis<bb_frameworklite_dt.m_currentticks?(bb_audio_PlaySound(this.m_sound,a,this.m_loop),this.m_soundAvailableMillis=bb_frameworklite_dt.m_currentticks+this.m_soundDelay|0,!0):!1};c_GameSound.m_new=function(){return this};c_GameSound.prototype.p_Load=function(a,b,c){this.m_sound=bb_audio_LoadSound(a);this.m_path=a;this.m_screenName=c;this.m_soundDelay=b;this.m_name=bb_functionslite_StripAll(a.toUpperCase())};
c_GameSound.prototype.p_Load2=function(a,b,c,d){this.m_sound=a;this.m_path=b;this.m_screenName=d;this.m_soundDelay=c;this.m_name=bb_functionslite_StripAll(b.toUpperCase())};function c_Map3(){Object.call(this);this.m_root=null}c_Map3.m_new=function(){return this};c_Map3.prototype.p_Compare=function(a,b){};c_Map3.prototype.p_FindNode=function(a){for(var b=this.m_root;null!=b;){var c=this.p_Compare(a,b.m_key);if(0<c)b=b.m_right;else if(0>c)b=b.m_left;else break}return b};
c_Map3.prototype.p_Get=function(a){a=this.p_FindNode(a);return null!=a?a.m_value:null};c_Map3.prototype.p_RotateLeft3=function(a){var b=a.m_right;a.m_right=b.m_left;null!=b.m_left&&(b.m_left.m_parent=a);b.m_parent=a.m_parent;null!=a.m_parent?a==a.m_parent.m_left?a.m_parent.m_left=b:a.m_parent.m_right=b:this.m_root=b;b.m_left=a;a.m_parent=b;return 0};
c_Map3.prototype.p_RotateRight3=function(a){var b=a.m_left;a.m_left=b.m_right;null!=b.m_right&&(b.m_right.m_parent=a);b.m_parent=a.m_parent;null!=a.m_parent?a==a.m_parent.m_right?a.m_parent.m_right=b:a.m_parent.m_left=b:this.m_root=b;b.m_right=a;a.m_parent=b;return 0};
c_Map3.prototype.p_InsertFixup3=function(a){for(;null!=a.m_parent&&-1==a.m_parent.m_color&&null!=a.m_parent.m_parent;)if(a.m_parent==a.m_parent.m_parent.m_left){var b=a.m_parent.m_parent.m_right;null!=b&&-1==b.m_color?(a.m_parent.m_color=1,b.m_color=1,b.m_parent.m_color=-1,a=b.m_parent):(a==a.m_parent.m_right&&(a=a.m_parent,this.p_RotateLeft3(a)),a.m_parent.m_color=1,a.m_parent.m_parent.m_color=-1,this.p_RotateRight3(a.m_parent.m_parent))}else b=a.m_parent.m_parent.m_left,null!=b&&-1==b.m_color?(a.m_parent.m_color=
1,b.m_color=1,b.m_parent.m_color=-1,a=b.m_parent):(a==a.m_parent.m_left&&(a=a.m_parent,this.p_RotateRight3(a)),a.m_parent.m_color=1,a.m_parent.m_parent.m_color=-1,this.p_RotateLeft3(a.m_parent.m_parent));this.m_root.m_color=1;return 0};
c_Map3.prototype.p_Set3=function(a,b){for(var c=this.m_root,d=null,e=0;null!=c;)if(d=c,e=this.p_Compare(a,c.m_key),0<e)c=c.m_right;else if(0>e)c=c.m_left;else return c.m_value=b,!1;c=c_Node3.m_new.call(new c_Node3,a,b,-1,d);null!=d?(0<e?d.m_right=c:d.m_left=c,this.p_InsertFixup3(c)):this.m_root=c;return!0};function c_StringMap3(){c_Map3.call(this)}c_StringMap3.prototype=extend_class(c_Map3);c_StringMap3.m_new=function(){c_Map3.m_new.call(this);return this};
c_StringMap3.prototype.p_Compare=function(a,b){return string_compare(a,b)};function c_SoundBank(){c_StringMap3.call(this)}c_SoundBank.prototype=extend_class(c_StringMap3);c_SoundBank.m_new=function(){c_StringMap3.m_new.call(this);return this};c_SoundBank.prototype.p_Find=function(a){a=a.toUpperCase();return this.p_Get(a)};
c_SoundBank.prototype.p_Load=function(a,b,c){c=c.toUpperCase();""==c&&(c=bb_functionslite_StripAll(a.toUpperCase()));var d=c_GameSound.m_new.call(new c_GameSound);d.p_Load("sounds/"+a,b,"");d.m_name=c;this.p_Set3(d.m_name,d);return d};c_SoundBank.prototype.p_Load2=function(a,b,c,d){d=d.toUpperCase();""==d&&(d=bb_functionslite_StripAll(b.toUpperCase()));var e=c_GameSound.m_new.call(new c_GameSound);e.p_Load2(a,b,c,"");e.m_name=d;this.p_Set3(e.m_name,e);return e};
function c_InputCache(){Object.call(this);this.m_touchData=new_object_array(2);this.m_newval=0;this.m_monitorTouch=!1;this.m_touchReleasedCount=this.m_touchHitCount=this.m_touchDownCount=0;this.m_minTouchReleased=this.m_minTouchHit=this.m_minTouchDown=this.m_maxTouchReleased=this.m_maxTouchHit=this.m_maxTouchDown=-1;this.m_touchHit=new_number_array(2);this.m_touchDown=new_number_array(2);this.m_touchReleased=new_number_array(2);this.m_touchX=new_number_array(2);this.m_touchY=new_number_array(2);this.m_currentTouchDown=
new_number_array(2);this.m_currentTouchHit=new_number_array(2);this.m_currentTouchReleased=new_number_array(2);this.m_y=this.m_x=this.m_pointer=0}c_InputCache.m_new=function(){for(var a=0;a<this.m_touchData.length;a+=1)this.m_touchData[a]=c_TouchData.m_new.call(new c_TouchData);return this};
c_InputCache.prototype.p_ReadInput=function(a,b,c){this.m_newval=0;if(this.m_monitorTouch){this.m_touchReleasedCount=this.m_touchHitCount=this.m_touchDownCount=0;this.m_minTouchReleased=this.m_minTouchHit=this.m_minTouchDown=this.m_maxTouchReleased=this.m_maxTouchHit=this.m_maxTouchDown=-1;for(var d=0;2>d;d+=1)this.m_newval=bb_input_TouchHit(d),this.m_touchHit[d]=this.m_newval,this.m_newval=bb_input_TouchDown(d),this.m_touchReleased[d]=0!=this.m_touchDown[d]&&0==this.m_newval?1:0,this.m_touchDown[d]=
this.m_newval,this.m_touchX[d]=bb_input_TouchX(d)/a+b|0,this.m_touchY[d]=bb_input_TouchY(d)/a+c|0,0!=this.m_touchDown[d]&&(this.m_currentTouchDown[this.m_touchDownCount]=d,this.m_touchDownCount+=1,0>this.m_minTouchDown&&(this.m_minTouchDown=d),this.m_maxTouchDown=d),0!=this.m_touchHit[d]&&(this.m_currentTouchHit[this.m_touchHitCount]=d,this.m_touchHitCount+=1,0>this.m_minTouchHit&&(this.m_minTouchHit=d),this.m_maxTouchHit=d),0!=this.m_touchReleased[d]&&(this.m_currentTouchReleased[this.m_touchReleasedCount]=
d,this.m_touchReleasedCount+=1,0>this.m_minTouchReleased&&(this.m_minTouchReleased=d),this.m_maxTouchReleased=d)}};
c_InputCache.prototype.p_HandleEvents=function(a){for(var b=0;b<this.m_touchHitCount;b+=1)this.m_pointer=this.m_currentTouchHit[b],this.m_x=this.m_touchX[this.m_pointer],this.m_y=this.m_touchY[this.m_pointer],this.m_touchData[this.m_pointer].p_Reset(this.m_x,this.m_y),a.p_OnTouchHit(this.m_x,this.m_y,this.m_pointer);for(b=0;b<this.m_touchReleasedCount;b+=1)this.m_pointer=this.m_currentTouchReleased[b],this.m_x=this.m_touchX[this.m_pointer],this.m_y=this.m_touchY[this.m_pointer],this.m_touchData[this.m_pointer].p_Update2(this.m_x,
this.m_y),a.p_OnTouchReleased(this.m_x,this.m_y,this.m_pointer);for(b=0;b<this.m_touchDownCount;b+=1)this.m_pointer=this.m_currentTouchDown[b],this.m_x=this.m_touchX[this.m_pointer],this.m_y=this.m_touchY[this.m_pointer],this.m_touchData[this.m_pointer].p_Update2(this.m_x,this.m_y),a.p_OnTouchDragged(this.m_x,this.m_y,this.m_touchData[this.m_pointer].m_distanceMovedX,this.m_touchData[this.m_pointer].m_distanceMovedY,this.m_pointer)};
c_InputCache.prototype.p_MonitorNothing=function(){this.m_monitorTouch=!1;this.m_touchReleasedCount=this.m_touchHitCount=this.m_touchDownCount=0;this.m_minTouchReleased=this.m_minTouchHit=this.m_minTouchDown=this.m_maxTouchReleased=this.m_maxTouchHit=this.m_maxTouchDown=-1};
c_InputCache.prototype.p_MonitorTouch=function(a){this.m_monitorTouch=a;this.m_touchReleasedCount=this.m_touchHitCount=this.m_touchDownCount=0;this.m_minTouchReleased=this.m_minTouchHit=this.m_minTouchDown=this.m_maxTouchReleased=this.m_maxTouchHit=this.m_maxTouchDown=-1};function c_TouchData(){Object.call(this);this.m_distanceMovedY=this.m_distanceMovedX=this.m_firstTouchTime=this.m_lastTouchY=this.m_lastTouchX=this.m_firstTouchY=this.m_firstTouchX=0}c_TouchData.m_new=function(){return this};
c_TouchData.prototype.p_Reset=function(a,b){this.m_firstTouchX=a;this.m_firstTouchY=b;this.m_lastTouchX=a;this.m_lastTouchY=b;this.m_firstTouchTime=bb_frameworklite_dt.m_currentticks|0};c_TouchData.prototype.p_Update2=function(a,b){this.m_distanceMovedX=a-this.m_lastTouchX;this.m_distanceMovedY=b-this.m_lastTouchY;this.m_lastTouchX=a;this.m_lastTouchY=b};function bbMain(){bb_frameworklite_diddyGame=c_GameApp.m_new.call(new c_GameApp);return 0}var bb_graphics_device=null;
function bb_graphics_SetGraphicsDevice(a){bb_graphics_device=a;return 0}function c_Image(){Object.call(this);this.m_surface=null;this.m_height=this.m_width=0;this.m_frames=[];this.m_ty=this.m_tx=this.m_flags=0;this.m_source=null}c_Image.m_DefaultFlags=0;c_Image.m_new=function(){return this};c_Image.prototype.p_SetHandle=function(a,b){this.m_tx=a;this.m_ty=b;this.m_flags&=-2;return 0};
c_Image.prototype.p_ApplyFlags=function(a){this.m_flags=a;if(0!=(this.m_flags&2)){a=this.m_frames;for(var b=0;b<a.length;){var c=a[b],b=b+1;c.m_x+=1}this.m_width-=2}if(0!=(this.m_flags&4)){a=this.m_frames;for(b=0;b<a.length;)c=a[b],b+=1,c.m_y+=1;this.m_height-=2}0!=(this.m_flags&1)&&this.p_SetHandle(this.m_width/2,this.m_height/2);1==this.m_frames.length&&0==this.m_frames[0].m_x&&0==this.m_frames[0].m_y&&this.m_width==this.m_surface.Width()&&this.m_height==this.m_surface.Height()&&(this.m_flags|=
65536);return 0};c_Image.prototype.p_Init=function(a,b,c){this.m_surface=a;this.m_width=this.m_surface.Width()/b|0;this.m_height=this.m_surface.Height();this.m_frames=new_object_array(b);for(a=0;a<b;a+=1)this.m_frames[a]=c_Frame.m_new.call(new c_Frame,a*this.m_width,0);this.p_ApplyFlags(c);return this};
c_Image.prototype.p_Grab=function(a,b,c,d,e,h,f){this.m_source=f;this.m_surface=f.m_surface;this.m_width=c;this.m_height=d;this.m_frames=new_object_array(e);for(c=0;c<e;c+=1)a+this.m_width>f.m_width&&(a=0,b+=this.m_height),(a+this.m_width>f.m_width||b+this.m_height>f.m_height)&&error("Image frame outside surface"),this.m_frames[c]=c_Frame.m_new.call(new c_Frame,a+f.m_frames[0].m_x,b+f.m_frames[0].m_y),a+=this.m_width;this.p_ApplyFlags(h);return this};
c_Image.prototype.p_GrabImage=function(a,b,c,d,e,h){return 1!=this.m_frames.length?null:c_Image.m_new.call(new c_Image).p_Grab(a,b,c,d,e,h,this)};c_Image.prototype.p_Width=function(){return this.m_width};c_Image.prototype.p_Height=function(){return this.m_height};
function c_GraphicsContext(){Object.call(this);this.m_font=this.m_defaultFont=null;this.m_matrixSp=this.m_firstChar=0;this.m_ix=1;this.m_jx=this.m_iy=0;this.m_jy=1;this.m_scissor_height=this.m_scissor_width=this.m_scissor_y=this.m_scissor_x=this.m_blend=this.m_alpha=this.m_color_b=this.m_color_g=this.m_color_r=this.m_matDirty=this.m_tformed=this.m_ty=this.m_tx=0;this.m_matrixStack=new_number_array(192)}c_GraphicsContext.m_new=function(){return this};
c_GraphicsContext.prototype.p_Validate=function(){0!=this.m_matDirty&&(bb_graphics_renderDevice.SetMatrix(bb_graphics_context.m_ix,bb_graphics_context.m_iy,bb_graphics_context.m_jx,bb_graphics_context.m_jy,bb_graphics_context.m_tx,bb_graphics_context.m_ty),this.m_matDirty=0);return 0};var bb_graphics_context=null;function bb_data_FixDataPath(a){var b=a.indexOf(":/",0);return-1!=b&&a.indexOf("/",0)==b+1||string_startswith(a,"./")||string_startswith(a,"/")?a:"monkey://data/"+a}
function c_Frame(){Object.call(this);this.m_y=this.m_x=0}c_Frame.m_new=function(a,b){this.m_x=a;this.m_y=b;return this};c_Frame.m_new2=function(){return this};function bb_graphics_LoadImage(a,b,c){a=bb_graphics_device.LoadSurface(bb_data_FixDataPath(a));return null!=a?c_Image.m_new.call(new c_Image).p_Init(a,b,c):null}function bb_graphics_LoadImage2(a,b,c,d,e){a=bb_graphics_LoadImage(a,1,0);return null!=a?a.p_GrabImage(0,0,b,c,d,e):null}
function bb_graphics_SetFont(a,b){null==a&&(null==bb_graphics_context.m_defaultFont&&(bb_graphics_context.m_defaultFont=bb_graphics_LoadImage("mojo_font.png",96,2)),a=bb_graphics_context.m_defaultFont,b=32);bb_graphics_context.m_font=a;bb_graphics_context.m_firstChar=b;return 0}var bb_audio_device=null;function bb_audio_SetAudioDevice(a){bb_audio_device=a;return 0}
function c_InputDevice(){Object.call(this);this.m__joyStates=new_object_array(4);this.m__keyDown=new_bool_array(512);this.m__keyHitPut=0;this.m__keyHitQueue=new_number_array(33);this.m__keyHit=new_number_array(512);this.m__charPut=this.m__charGet=0;this.m__charQueue=new_number_array(32);this.m__mouseY=this.m__mouseX=0;this.m__touchX=new_number_array(32);this.m__touchY=new_number_array(32);this.m__accelZ=this.m__accelY=this.m__accelX=0}
c_InputDevice.m_new=function(){for(var a=0;4>a;a+=1)this.m__joyStates[a]=c_JoyState.m_new.call(new c_JoyState);return this};c_InputDevice.prototype.p_PutKeyHit=function(a){this.m__keyHitPut!=this.m__keyHitQueue.length&&(this.m__keyHit[a]+=1,this.m__keyHitQueue[this.m__keyHitPut]=a,this.m__keyHitPut+=1)};
c_InputDevice.prototype.p_BeginUpdate=function(){for(var a=0;4>a;a+=1){var b=this.m__joyStates[a];if(!BBGame.Game().PollJoystick(a,b.m_joyx,b.m_joyy,b.m_joyz,b.m_buttons))break;for(var c=0;32>c;c+=1){var d=256+32*a+c;b.m_buttons[c]?this.m__keyDown[d]||(this.m__keyDown[d]=!0,this.p_PutKeyHit(d)):this.m__keyDown[d]=!1}}};c_InputDevice.prototype.p_EndUpdate=function(){for(var a=0;a<this.m__keyHitPut;a+=1)this.m__keyHit[this.m__keyHitQueue[a]]=0;this.m__charPut=this.m__charGet=this.m__keyHitPut=0};
c_InputDevice.prototype.p_KeyEvent=function(a,b){1==a?this.m__keyDown[b]||(this.m__keyDown[b]=!0,this.p_PutKeyHit(b),1==b?(this.m__keyDown[384]=!0,this.p_PutKeyHit(384)):384==b&&(this.m__keyDown[1]=!0,this.p_PutKeyHit(1))):2==a?this.m__keyDown[b]&&(this.m__keyDown[b]=!1,1==b?this.m__keyDown[384]=!1:384==b&&(this.m__keyDown[1]=!1)):3==a&&this.m__charPut<this.m__charQueue.length&&(this.m__charQueue[this.m__charPut]=b,this.m__charPut+=1)};
c_InputDevice.prototype.p_MouseEvent=function(a,b,c,d){if(4==a)this.p_KeyEvent(1,1+b);else{if(5==a){this.p_KeyEvent(2,1+b);return}if(6!=a)return}this.m__mouseX=c;this.m__mouseY=d;this.m__touchX[0]=c;this.m__touchY[0]=d};c_InputDevice.prototype.p_TouchEvent=function(a,b,c,d){if(7==a)this.p_KeyEvent(1,384+b);else{if(8==a){this.p_KeyEvent(2,384+b);return}if(9!=a)return}this.m__touchX[b]=c;this.m__touchY[b]=d;0==b&&(this.m__mouseX=c,this.m__mouseY=d)};
c_InputDevice.prototype.p_MotionEvent=function(a,b,c,d,e){10==a&&(this.m__accelX=c,this.m__accelY=d,this.m__accelZ=e)};c_InputDevice.prototype.p_KeyHit=function(a){return 0<a&&512>a?this.m__keyHit[a]:0};c_InputDevice.prototype.p_KeyDown=function(a){return 0<a&&512>a?this.m__keyDown[a]:!1};c_InputDevice.prototype.p_TouchX=function(a){return 0<=a&&32>a?this.m__touchX[a]:0};c_InputDevice.prototype.p_TouchY=function(a){return 0<=a&&32>a?this.m__touchY[a]:0};
function c_JoyState(){Object.call(this);this.m_joyx=new_number_array(2);this.m_joyy=new_number_array(2);this.m_joyz=new_number_array(2);this.m_buttons=new_bool_array(32)}c_JoyState.m_new=function(){return this};var bb_input_device=null;function bb_input_SetInputDevice(a){bb_input_device=a;return 0}var bb_graphics_renderDevice=null;
function bb_graphics_SetMatrix(a,b,c,d,e,h){bb_graphics_context.m_ix=a;bb_graphics_context.m_iy=b;bb_graphics_context.m_jx=c;bb_graphics_context.m_jy=d;bb_graphics_context.m_tx=e;bb_graphics_context.m_ty=h;bb_graphics_context.m_tformed=1!=a||0!=b||0!=c||1!=d||0!=e||0!=h?1:0;bb_graphics_context.m_matDirty=1;return 0}function bb_graphics_SetMatrix2(a){bb_graphics_SetMatrix(a[0],a[1],a[2],a[3],a[4],a[5]);return 0}
function bb_graphics_SetColor(a,b,c){bb_graphics_context.m_color_r=a;bb_graphics_context.m_color_g=b;bb_graphics_context.m_color_b=c;bb_graphics_renderDevice.SetColor(a,b,c);return 0}function bb_graphics_SetAlpha(a){bb_graphics_context.m_alpha=a;bb_graphics_renderDevice.SetAlpha(a);return 0}function bb_graphics_SetBlend(a){bb_graphics_context.m_blend=a;bb_graphics_renderDevice.SetBlend(a);return 0}function bb_graphics_DeviceWidth(){return bb_graphics_device.Width()}
function bb_graphics_DeviceHeight(){return bb_graphics_device.Height()}function bb_graphics_SetScissor(a,b,c,d){bb_graphics_context.m_scissor_x=a;bb_graphics_context.m_scissor_y=b;bb_graphics_context.m_scissor_width=c;bb_graphics_context.m_scissor_height=d;bb_graphics_renderDevice.SetScissor(a|0,b|0,c|0,d|0);return 0}
function bb_graphics_BeginRender(){bb_graphics_renderDevice=bb_graphics_device;bb_graphics_context.m_matrixSp=0;bb_graphics_SetMatrix(1,0,0,1,0,0);bb_graphics_SetColor(255,255,255);bb_graphics_SetAlpha(1);bb_graphics_SetBlend(0);bb_graphics_SetScissor(0,0,bb_graphics_DeviceWidth(),bb_graphics_DeviceHeight());return 0}function bb_graphics_EndRender(){bb_graphics_renderDevice=null;return 0}function c_BBGameEvent(){Object.call(this)}function bb_app_EndApp(){error("");return 0}var bb_random_Seed=0;
function bb_graphics_PushMatrix(){var a=bb_graphics_context.m_matrixSp;bb_graphics_context.m_matrixStack[a+0]=bb_graphics_context.m_ix;bb_graphics_context.m_matrixStack[a+1]=bb_graphics_context.m_iy;bb_graphics_context.m_matrixStack[a+2]=bb_graphics_context.m_jx;bb_graphics_context.m_matrixStack[a+3]=bb_graphics_context.m_jy;bb_graphics_context.m_matrixStack[a+4]=bb_graphics_context.m_tx;bb_graphics_context.m_matrixStack[a+5]=bb_graphics_context.m_ty;bb_graphics_context.m_matrixSp=a+6;return 0}
var bb_frameworklite_DEVICE_WIDTH=0,bb_frameworklite_DEVICE_HEIGHT=0,bb_frameworklite_SCREEN_WIDTH=0,bb_frameworklite_SCREEN_HEIGHT=0;
function bb_graphics_Transform(a,b,c,d,e,h){bb_graphics_SetMatrix(a*bb_graphics_context.m_ix+b*bb_graphics_context.m_jx,a*bb_graphics_context.m_iy+b*bb_graphics_context.m_jy,c*bb_graphics_context.m_ix+d*bb_graphics_context.m_jx,c*bb_graphics_context.m_iy+d*bb_graphics_context.m_jy,e*bb_graphics_context.m_ix+h*bb_graphics_context.m_jx+bb_graphics_context.m_tx,e*bb_graphics_context.m_iy+h*bb_graphics_context.m_jy+bb_graphics_context.m_ty);return 0}
function bb_graphics_Transform2(a){bb_graphics_Transform(a[0],a[1],a[2],a[3],a[4],a[5]);return 0}function bb_graphics_Scale(a,b){bb_graphics_Transform(a,0,0,b,0,0);return 0}function bb_graphics_Translate(a,b){bb_graphics_Transform(1,0,0,1,a,b);return 0}var bb_frameworklite_SCREENX_RATIO=0,bb_frameworklite_SCREENY_RATIO=0;
function bb_graphics_PopMatrix(){var a=bb_graphics_context.m_matrixSp-6;bb_graphics_SetMatrix(bb_graphics_context.m_matrixStack[a+0],bb_graphics_context.m_matrixStack[a+1],bb_graphics_context.m_matrixStack[a+2],bb_graphics_context.m_matrixStack[a+3],bb_graphics_context.m_matrixStack[a+4],bb_graphics_context.m_matrixStack[a+5]);bb_graphics_context.m_matrixSp=a;return 0}function bb_graphics_DrawRect(a,b,c,d){bb_graphics_context.p_Validate();bb_graphics_renderDevice.DrawRect(a,b,c,d);return 0}
function bb_input_TouchHit(a){return bb_input_device.p_KeyHit(384+a)}function bb_input_TouchDown(a){return bb_input_device.p_KeyDown(384+a)?1:0}function bb_input_TouchX(a){return bb_input_device.p_TouchX(a)}function bb_input_TouchY(a){return bb_input_device.p_TouchY(a)}function c_DeltaTimer(){Object.call(this);this.m_frametime=this.m_lastticks=this.m_currentticks=0;this.m_targetfps=60;this.m_delta=0}
c_DeltaTimer.prototype.p_UpdateDelta=function(){this.m_currentticks=bb_app_Millisecs();this.m_frametime=this.m_currentticks-this.m_lastticks;this.m_delta=this.m_frametime/(1E3/this.m_targetfps);this.m_lastticks=this.m_currentticks};c_DeltaTimer.m_new=function(a){this.m_targetfps=a;this.m_lastticks=bb_app_Millisecs();return this};c_DeltaTimer.m_new2=function(){return this};var bb_frameworklite_dt=null;function bb_app_Millisecs(){return bb_app__game.Millisecs()}
function c_Node(){Object.call(this);this.m_key="";this.m_value=this.m_left=this.m_right=null;this.m_color=0;this.m_parent=null}c_Node.m_new=function(a,b,c,d){this.m_key=a;this.m_value=b;this.m_color=c;this.m_parent=d;return this};c_Node.m_new2=function(){return this};var bb_frameworklite_defaultFadeTime=0,bb_app__updateRate=0;function bb_app_SetUpdateRate(a){bb_app__updateRate=a;bb_app__game.SetUpdateRate(a);return 0}
function bb_functionslite_SetGraphics(a,b){bb_frameworklite_DEVICE_WIDTH=a;bb_frameworklite_DEVICE_HEIGHT=b}var bb_frameworklite_SCREEN_WIDTH2=0,bb_frameworklite_SCREEN_HEIGHT2=0;function c_AppScreen(){c_Screen.call(this);this.m_events=[];this.m_orientation=""}c_AppScreen.prototype=extend_class(c_Screen);c_AppScreen.m_new=function(){c_Screen.m_new.call(this,"");return this};c_AppScreen.prototype.p_OnTouchHit=function(a,b,c){bb_assets_inputManager.p_OnHit(a,b,c)};
c_AppScreen.prototype.p_OnTouchDragged=function(a,b,c,d,e){bb_assets_inputManager.p_OnDrag(a,b,e,c,d)};c_AppScreen.prototype.p_OnTouchReleased=function(a,b,c){bb_assets_inputManager.p_OnRelease(a,b,c)};function c_PreloaderScreen(){c_AppScreen.call(this);this.m_splashLogo=this.m_buttonPlay=null;this.m_assetsLoaded=!1;this.m_maxPercentage=this.m_percentage=0;this.m_fontPreCached=this.m_preCached=!1;this.m_currentPercentage=0}c_PreloaderScreen.prototype=extend_class(c_AppScreen);
c_PreloaderScreen.m_new=function(){c_AppScreen.m_new.call(this);this.m_name="PreloaderScreen";return this};c_PreloaderScreen.prototype.p_Start2=function(){this.m_buttonPlay=c_UIButton.m_new.call(new c_UIButton,427,250,200,120,null,null);this.m_splashLogo=c_UIImage.m_new.call(new c_UIImage,null,427,80,0,1,1);this.m_assetsLoaded=!1;this.m_maxPercentage=this.m_percentage=0;this.m_fontPreCached=this.m_preCached=!1;bb_assets_InitAssets()};
c_PreloaderScreen.prototype.p_Update=function(){bb_functionslite_SetGraphics(bb_graphics_DeviceWidth(),bb_graphics_DeviceHeight());bb_asyncevent_UpdateAsyncEvents();this.m_percentage=0;if(null!=bb_assets_atlasLoader){bb_assets_atlasLoader.p_Update();for(var a=0;a<bb_assets_fontManager.length;a+=1)bb_assets_fontManager[a].p_Update();if(bb_assets_atlasLoader.p_AtlasLoaded()){null==this.m_splashLogo.m_image&&this.m_splashLogo.p_SetImage(bb_frameworklite_diddyGame.m_images.p_Find("publisherLogo"));this.m_assetsLoaded=
!0;this.m_percentage+=0.33;for(a=0;a<bb_assets_fontManager.length;a+=1)bb_assets_fontManager[a].p_FontLoaded()?this.m_percentage+=0.165:this.m_assetsLoaded=!1;bb_assets_soundManager.p_AreSoundsLoaded()?this.m_percentage+=0.34:this.m_assetsLoaded=!1}}this.m_events=bb_assets_inputManager.p_GetEvents();this.m_orientation=diddy.getOrientation();1==this.m_currentPercentage&&this.m_assetsLoaded&&null!=bb_assets_atlasLoader&&(this.m_buttonPlay.p_SetImage2(bb_frameworklite_diddyGame.m_images.p_Find("preloaderPlay"),
bb_frameworklite_diddyGame.m_images.p_Find("preloaderPlaySelected")),bb_assets_atlasLoader=null);if("portrait"!=this.m_orientation)for(a=0;a<bb_assets_inputManager.p_GetNumEvents();a+=1)null!=this.m_buttonPlay.m_imageIdle&&this.m_buttonPlay.p_ProcessEvent(this.m_events[a],0,0)==bb_uibutton_BUTTON_PRESSED&&(bb_assets_soundManager.p_Play2("soundClick",0),0==(0==bb_fishingjoy_distributionVersion?1:0)?this.p_FadeToScreen(bb_fishingjoy_splashScreen,bb_frameworklite_defaultFadeTime,!1,!1,!0):this.p_FadeToScreen(bb_fishingjoy_gameScreen,
bb_frameworklite_defaultFadeTime,!1,!1,!0)),null!=this.m_splashLogo.m_image&&this.m_splashLogo.p_ProcessEvent2(this.m_events[a])==bb_uibutton_BUTTON_PRESSED&&(bb_assets_soundManager.p_Play2("soundClick",0),bb_functionslite_LaunchBrowser("http://www.a10.com",!0));bb_assets_inputManager.p_ClearEvents();this.m_percentage>this.m_maxPercentage&&(this.m_maxPercentage=this.m_percentage);this.m_currentPercentage<this.m_maxPercentage&&(this.m_currentPercentage+=0.02,1<this.m_currentPercentage&&(this.m_currentPercentage=
1));0.4<this.m_currentPercentage&&bb_fishingjoy_gameScreen.p_InitObjects()};
c_PreloaderScreen.prototype.p_Render=function(){if("portrait"!=this.m_orientation){bb_graphics_DrawRect(bb_frameworklite_CVR(-143),0,bb_frameworklite_CVR(1140),bb_frameworklite_CVR(640));bb_assets_fontManager[2].p_FontLoaded()&&bb_assets_fontManager[2].p_Draw3(String(100*this.m_currentPercentage|0)+"%",bb_frameworklite_CVR(427),bb_frameworklite_CVR(360),0);if(bb_assets_fontManager[2].p_FontLoaded()&&bb_assets_fontManager[0].p_FontLoaded()&&bb_assets_fontManager[1].p_FontLoaded()&&!this.m_fontPreCached){for(var a=
0;a<bb_assets_fontManager.length;a+=1)bb_assets_fontManager[a].p_PreCache();this.m_fontPreCached=!0}null!=this.m_buttonPlay.m_imageIdle&&this.m_buttonPlay.p_Draw2(0,0);null!=bb_assets_atlasLoader&&bb_assets_atlasLoader.p_AtlasLoaded()&&!this.m_preCached&&(bb_frameworklite_diddyGame.m_images.p_PreCache(),this.m_preCached=!0);0==(0==bb_fishingjoy_distributionVersion?1:0)&&null!=this.m_splashLogo.m_image&&this.m_splashLogo.p_Draw2(0,0);bb_graphics_SetColor(220,220,220);bb_graphics_DrawRect(bb_frameworklite_CVR(127),
bb_frameworklite_CVR(300),bb_frameworklite_CVR(600),bb_frameworklite_CVR(32));bb_graphics_SetColor(25,109,219);bb_graphics_DrawRect(bb_frameworklite_CVR(127),bb_frameworklite_CVR(300),bb_frameworklite_CVR(600)*this.m_currentPercentage,bb_frameworklite_CVR(32));bb_graphics_SetColor(255,255,255)}};var bb_fishingjoy_preloaderScreen=null;function c_InputManager(){Object.call(this);this.m_numEvents=0;this.m_events=[]}
c_InputManager.prototype.p_AddTouchEvent=function(a,b,c,d,e,h,f,k,l){4!=this.m_numEvents&&(this.m_events[this.m_numEvents].p_SetTouchEvent(a,b,c,d,e,h,f,k,l),this.m_numEvents+=1)};c_InputManager.prototype.p_OnHit=function(a,b,c){this.p_AddTouchEvent(a,b,c,bb_touchevent_TOUCH_DOWN,0,0,0,0,0)};c_InputManager.prototype.p_OnDrag=function(a,b,c,d,e){this.p_AddTouchEvent(a,b,c,bb_touchevent_TOUCH_MOVE,d,e,0,0,0)};
c_InputManager.prototype.p_OnRelease=function(a,b,c){this.p_AddTouchEvent(a,b,c,bb_touchevent_TOUCH_UP,0,0,0,0,0)};c_InputManager.m_new=function(a){this.m_events=new_object_array(a);for(a=0;a<this.m_events.length;a+=1)this.m_events[a]=c_TouchEvent.m_new.call(new c_TouchEvent);this.m_numEvents=0;return this};c_InputManager.prototype.p_GetEvents=function(){return this.m_events};c_InputManager.prototype.p_GetNumEvents=function(){return this.m_numEvents};
c_InputManager.prototype.p_ClearEvents=function(){this.m_numEvents=0};var bb_assets_inputManager=null,bb_touchevent_TOUCH_DOWN=0;function c_TouchEvent(){Object.call(this);this.m_v=this.m_vy=this.m_vx=this.m_dy=this.m_dx=this.m_touchevent=this.m_pointer=this.m_y=this.m_x=0;this.m_isEmpty=!1}
c_TouchEvent.prototype.p_SetTouchEvent=function(a,b,c,d,e,h,f,k,l){this.m_x=a;this.m_y=b;this.m_pointer=c;this.m_touchevent=d;d==bb_touchevent_TOUCH_MOVE?(this.m_dx=e,this.m_dy=h):d==bb_touchevent_TOUCH_FLING&&(this.m_vx=f,this.m_vy=k,this.m_v=l);this.m_isEmpty=!1};c_TouchEvent.m_new=function(){return this};c_TouchEvent.prototype.p_InRect=function(a,b,c,d){return this.m_x>=a&&this.m_x<a+c&&this.m_y>=b&&this.m_y<b+d?!0:!1};
var bb_touchevent_TOUCH_MOVE=0,bb_touchevent_TOUCH_FLING=0,bb_touchevent_TOUCH_UP=0;function c_DynamicObject(){Object.call(this);this.m_rotation=this.m_y=this.m_x=0;this.m_yScale=this.m_xScale=1;this.m_isTweening=!1;this.m_alpha=1}c_DynamicObject.m_new=function(){return this};c_DynamicObject.prototype.p_IsTweening=function(a){this.m_isTweening=a};c_DynamicObject.prototype.p_IsTweening2=function(){return this.m_isTweening};c_DynamicObject.prototype.p_SetY=function(a){this.m_y=a};
c_DynamicObject.prototype.p_SetXScale=function(a){this.m_xScale=a};c_DynamicObject.prototype.p_SetYScale=function(a){this.m_yScale=a};c_DynamicObject.prototype.p_SetX=function(a){this.m_x=a};c_DynamicObject.prototype.p_SetRotation=function(a){this.m_rotation=a};c_DynamicObject.prototype.p_SetObjectAlpha=function(a){this.m_alpha=a};
function c_UIButton(){c_DynamicObject.call(this);this.m_imageSelected=this.m_imageIdle=null;this.m_y_touch=this.m_x_touch=this.m_height=this.m_width=0;this.m_visible=!1;this.m_state=0}c_UIButton.prototype=extend_class(c_DynamicObject);
c_UIButton.m_new=function(a,b,c,d,e,h){c_DynamicObject.m_new.call(this);this.m_imageIdle=e;this.m_imageSelected=h;this.m_x=a;this.m_y=b;this.m_width=c;this.m_height=d;this.m_x_touch=this.m_x-(this.m_width/2|0)|0;this.m_y_touch=this.m_y-(this.m_height/2|0)|0;this.m_visible=!0;this.m_state=0;return this};c_UIButton.m_new2=function(){c_DynamicObject.m_new.call(this);return this};c_UIButton.prototype.p_SetImage=function(a){this.m_imageIdle=a;this.m_imageSelected=null};
c_UIButton.prototype.p_SetImage2=function(a,b){this.m_imageIdle=a;this.m_imageSelected=b};
c_UIButton.prototype.p_ProcessEvent=function(a,b,c){if(this.m_visible&&!this.p_IsTweening2()&&0!=this.m_xScale&&0!=this.m_yScale&&0!=this.m_alpha){if(a.m_touchevent==bb_touchevent_TOUCH_UP&&a.p_InRect(this.m_x_touch+b,this.m_y_touch+c,this.m_width,this.m_height))return this.m_state=0,bb_uibutton_BUTTON_PRESSED;a.m_touchevent!=bb_touchevent_TOUCH_DOWN&&a.m_touchevent!=bb_touchevent_TOUCH_MOVE||!a.p_InRect(this.m_x_touch+b,this.m_y_touch+c,this.m_width,this.m_height)?this.m_state=0:this.m_state=1}return-1};
c_UIButton.prototype.p_SetVisible=function(a){this.m_visible=a};
c_UIButton.prototype.p_Draw2=function(a,b){this.m_visible&&0!=this.m_xScale&&0!=this.m_yScale&&0!=this.m_alpha&&(1!=this.m_alpha&&bb_graphics_SetAlpha(this.m_alpha),0==this.m_state?this.m_imageIdle.p_Draw(bb_frameworklite_CVR(this.m_x+a|0),bb_frameworklite_CVR(this.m_y+b|0),this.m_rotation,this.m_xScale,this.m_yScale,0):1==this.m_state&&(null!=this.m_imageSelected?this.m_imageSelected.p_Draw(bb_frameworklite_CVR(this.m_x+a|0),bb_frameworklite_CVR(this.m_y+b|0),this.m_rotation,this.m_xScale,this.m_yScale,
0):this.m_imageIdle.p_Draw(bb_frameworklite_CVR(this.m_x+a|0),bb_frameworklite_CVR(this.m_y+b|0),this.m_rotation,this.m_xScale-0.1,this.m_yScale-0.1,0)),1!=this.m_alpha&&bb_graphics_SetAlpha(1))};c_UIButton.prototype.p_AddTween=function(a,b,c,d,e,h,f,k){return bb_assets_tweenSystem.p_AddTween2(this,a,b,c,d,e,h,f,k)};c_UIButton.prototype.p_TouchButton=function(a){return a.p_InRect(this.m_x_touch,this.m_y_touch,this.m_width,this.m_height)?!0:!1};
function c_UIImage(){c_DynamicObject.call(this);this.m_image=null;this.m_y_touch=this.m_x_touch=this.m_height=this.m_width=0;this.m_visible=!1}c_UIImage.prototype=extend_class(c_DynamicObject);
c_UIImage.m_new=function(a,b,c,d,e,h){c_DynamicObject.m_new.call(this);this.m_image=a;this.m_x=b;this.m_y=c;this.m_rotation=d;this.m_xScale=e;this.m_yScale=h;null!=this.m_image&&(this.m_width=this.m_image.m_w,this.m_height=this.m_image.m_h);this.m_x_touch=this.m_x-(this.m_width/2|0)|0;this.m_y_touch=this.m_y-(this.m_height/2|0)|0;this.m_visible=!0;return this};c_UIImage.m_new2=function(){c_DynamicObject.m_new.call(this);return this};
c_UIImage.prototype.p_SetImage=function(a){this.m_image=a;null!=this.m_image?(this.m_width=this.m_image.m_w,this.m_height=this.m_image.m_h):this.m_height=this.m_width=0;this.m_x_touch=this.m_x-(this.m_width/2|0)|0;this.m_y_touch=this.m_y-(this.m_height/2|0)|0};c_UIImage.prototype.p_ProcessEvent2=function(a){return this.m_visible&&a.m_touchevent==bb_touchevent_TOUCH_UP&&a.p_InRect(this.m_x_touch,this.m_y_touch,this.m_width,this.m_height)?bb_uiImage_IMAGE_PRESSED:-1};
c_UIImage.prototype.p_SetVisible=function(a){this.m_visible=a};c_UIImage.prototype.p_AddTween=function(a,b,c,d,e,h,f,k){return bb_assets_tweenSystem.p_AddTween2(this,a,b,c,d,e,h,f,k)};
c_UIImage.prototype.p_Draw2=function(a,b){this.m_visible&&0!=this.m_xScale&&0!=this.m_yScale&&0!=this.m_alpha&&(1!=this.m_alpha&&bb_graphics_SetAlpha(this.m_alpha),this.m_image.p_Draw(bb_frameworklite_CVR(this.m_x+a|0),bb_frameworklite_CVR(this.m_y+b|0),this.m_rotation,this.m_xScale,this.m_yScale,0),1!=this.m_alpha&&bb_graphics_SetAlpha(1))};c_UIImage.prototype.p_IsVisible=function(){return this.m_visible};function bb_math_Abs(a){return 0<=a?a:-a}function bb_math_Abs2(a){return 0<=a?a:-a}
var bb_assets_assetSize="";function bb_assets_DetermineAssetSize(){for(var a=0,a=bb_graphics_DeviceWidth()>bb_graphics_DeviceHeight()?bb_graphics_DeviceHeight():bb_graphics_DeviceWidth(),b=[320,640],c=1E4,d=0,e=0;e<b.length;e+=1)b[e]=bb_math_Abs(a-b[e]),b[e]<c&&(c=b[e],d=e);0==d?(bb_assets_assetSize="_Lowest",bb_frameworklite_diddyGame.p_AssetRatio(320,!1)):1==d&&(bb_assets_assetSize="_Normal",bb_frameworklite_diddyGame.p_AssetRatio(640,!1))}
function c_AtlasLoader(){Object.call(this);this.m_fileName="";this.m_midHandle=!1;this.m_atlasFile="";this.m_atlasImage=null;this.m_atlasLoaded=!1;this.implments={c_IOnLoadImageComplete:1,c_IOnHttpRequestComplete:1}}c_AtlasLoader.m_new=function(){return this};c_AtlasLoader.prototype.p_LoadAtlas=function(a,b){this.m_fileName=a;this.m_midHandle=b;bb_asyncloaders_LoadImageAsync("graphics/"+a+".png",1,0,this);c_HttpRequest.m_new2.call(new c_HttpRequest,"GET","data/graphics/"+a+".txt",this).p_Send()};
c_AtlasLoader.prototype.p_Update=function(){if(""!=this.m_atlasFile&&null!=this.m_atlasImage){for(var a=this.m_atlasFile.split("\n"),b=this.m_atlasImage,c=bb_frameworklite_diddyGame.m_images.p_SaveAtlasToBank(b,this.m_fileName),d="",e=4,d=["",""];;){d=string_trim(a[e]);if(""==d)break;var h=d+".png",e=e+1;string_trim(a[e]);var e=e+1,d=string_trim(a[e]),d=d.slice(d.lastIndexOf(":")+1).split(","),f=parseInt(string_trim(d[0]),10),k=parseInt(string_trim(d[1]),10),e=e+1,d=string_trim(a[e]),d=d.slice(d.lastIndexOf(":")+
1).split(","),l=parseInt(string_trim(d[0]),10),g=parseInt(string_trim(d[1]),10),e=e+1,d=string_trim(a[e]),d=d.slice(d.lastIndexOf(":")+1).split(",");parseInt(string_trim(d[0]),10);parseInt(string_trim(d[1]),10);e+=1;d=string_trim(a[e]);d=d.slice(d.lastIndexOf(":")+1).split(",");parseInt(string_trim(d[0]),10);parseInt(string_trim(d[1]),10);var e=e+1,d=string_trim(a[e]),d=parseInt(string_trim(d.slice(d.lastIndexOf(":")+1)),10),e=e+1,q=c_GameImage.m_new.call(new c_GameImage);-1<d&&(h+=String(d));q.m_name=
bb_functionslite_StripAll(h.toUpperCase());q.m_image=b.p_GrabImage(f,k,l,g,1,c_Image.m_DefaultFlags);q.p_CalcSize();q.p_MidHandle(this.m_midHandle);q.m_atlasName=c;q.m_subX=f;q.m_subY=k;bb_frameworklite_diddyGame.m_images.p_Set2(q.m_name,q)}this.m_atlasLoaded=!0;this.m_atlasFile="";this.m_atlasImage=null}};c_AtlasLoader.prototype.p_AtlasLoaded=function(){return this.m_atlasLoaded};c_AtlasLoader.prototype.p_OnHttpRequestComplete=function(a){if(200==a.p_Status()||0==a.p_Status())this.m_atlasFile=a.p_ResponseText()};
c_AtlasLoader.prototype.p_OnLoadImageComplete=function(a,b,c){null!=a&&(this.m_atlasImage=a)};var bb_assets_atlasLoader=null;function c_AsyncImageLoader(){BBAsyncImageLoaderThread.call(this);this.m__mpath="";this.m__flags=this.m__frames=0;this.m__onComplete=null;this.implments={c_IAsyncEventSource:1}}c_AsyncImageLoader.prototype=extend_class(BBAsyncImageLoaderThread);
c_AsyncImageLoader.m_new=function(a,b,c,d){this._device=bb_graphics_GetGraphicsDevice();this.m__mpath=a;this._path=bb_data_FixDataPath(a);this.m__frames=b;this.m__flags=c;this.m__onComplete=d;return this};c_AsyncImageLoader.m_new2=function(){return this};c_AsyncImageLoader.prototype.Start=function(){bb_asyncevent_AddAsyncEventSource(this);BBAsyncImageLoaderThread.prototype.Start.call(this)};
c_AsyncImageLoader.prototype.p_UpdateAsyncEvents=function(){if(!this.IsRunning())if(bb_asyncevent_RemoveAsyncEventSource(this),null!=this._surface&&this._surface.OnUnsafeLoadComplete()){var a=c_Image.m_new.call(new c_Image).p_Init(this._surface,this.m__frames,this.m__flags);this.m__onComplete.p_OnLoadImageComplete(a,this.m__mpath,this)}else this.m__onComplete.p_OnLoadImageComplete(null,this.m__mpath,this)};function bb_graphics_GetGraphicsDevice(){return bb_graphics_device}
function c_Stack(){Object.call(this);this.m_data=[];this.m_length=0}c_Stack.m_new=function(){return this};c_Stack.m_new2=function(a){this.m_data=a.slice(0);this.m_length=a.length;return this};c_Stack.prototype.p_Equals=function(a,b){return a==b};c_Stack.prototype.p_Contains=function(a){for(var b=0;b<this.m_length;b+=1)if(this.p_Equals(this.m_data[b],a))return!0;return!1};
c_Stack.prototype.p_Push=function(a){this.m_length==this.m_data.length&&(this.m_data=resize_object_array(this.m_data,2*this.m_length+10));this.m_data[this.m_length]=a;this.m_length+=1};c_Stack.prototype.p_Push2=function(a,b,c){for(var d=0;d<c;d+=1)this.p_Push(a[b+d])};c_Stack.prototype.p_Push3=function(a,b){this.p_Push2(a,b,a.length-b)};c_Stack.m_NIL=null;
c_Stack.prototype.p_Length=function(a){if(a<this.m_length)for(var b=a;b<this.m_length;b+=1)this.m_data[b]=c_Stack.m_NIL;else a>this.m_data.length&&(this.m_data=resize_object_array(this.m_data,bb_math_Max(2*this.m_length+10,a)));this.m_length=a};c_Stack.prototype.p_Length2=function(){return this.m_length};c_Stack.prototype.p_Get2=function(a){return this.m_data[a]};
c_Stack.prototype.p_RemoveEach=function(a){for(var b=0,c=this.m_length;b<this.m_length;){if(this.p_Equals(this.m_data[b],a)){for(var d=b,e=b+1;e<this.m_length&&this.p_Equals(this.m_data[e],a);)e+=1;for(;e<this.m_length;)this.m_data[d]=this.m_data[e],d+=1,e+=1;this.m_length-=e-d}b+=1}for(b=this.m_length;b<c;)this.m_data[b]=c_Stack.m_NIL,b+=1};var bb_asyncevent__sources=null;
function bb_asyncevent_AddAsyncEventSource(a){bb_asyncevent__sources.p_Contains(a)&&error("Async event source is already active");bb_asyncevent__sources.p_Push(a)}function bb_asyncloaders_LoadImageAsync(a,b,c,d){c_AsyncImageLoader.m_new.call(new c_AsyncImageLoader,a,b,c,d).Start()}function c_HttpRequest(){Object.call(this);this.m__onComplete=this.m__req=null;this.implments={c_IAsyncEventSource:1}}c_HttpRequest.m_new=function(){return this};
c_HttpRequest.prototype.p_Open=function(a,b,c){null!=this.m__req&&this.m__req.IsRunning()&&error("HttpRequest in progress");this.m__req=new BBHttpRequest;this.m__onComplete=c;this.m__req.Open(a,b)};c_HttpRequest.m_new2=function(a,b,c){this.p_Open(a,b,c);return this};c_HttpRequest.prototype.p_Send=function(){null==this.m__req&&error("HttpRequest not open");this.m__req.IsRunning()&&error("HttpRequest in progress");bb_asyncevent_AddAsyncEventSource(this);this.m__req.Send()};
c_HttpRequest.prototype.p_Send2=function(a,b,c){null==this.m__req&&error("HttpRequest not open");this.m__req.IsRunning()&&error("HttpRequest in progress");0!=b.length&&this.m__req.SetHeader("Content-Type",b);bb_asyncevent_AddAsyncEventSource(this);this.m__req.SendText(a,c)};c_HttpRequest.prototype.p_UpdateAsyncEvents=function(){this.m__req.IsRunning()||(bb_asyncevent_RemoveAsyncEventSource(this),this.m__onComplete.p_OnHttpRequestComplete(this))};
c_HttpRequest.prototype.p_Status=function(){null==this.m__req&&error("HttpRequest not open");return this.m__req.Status()};c_HttpRequest.prototype.p_ResponseText=function(){null==this.m__req&&error("HttpRequest not open");return this.m__req.ResponseText()};
function c_FontDrawer(){Object.call(this);this.m_characterPosition=new_object_array(128);this.m_spacing=0;this.m_fontFile="";this.m_fontImage=null;this.m_characterHEIGHT=this.m_characterWIDTH=this.m_characterY=this.m_characterX=this.m_characterKEY=0;this.m_fontLoaded=!1;this.m_scaleY=this.m_scaleX=1;this.implments={c_IOnLoadImageComplete:1,c_IOnHttpRequestComplete:1}}
c_FontDrawer.prototype.p_LoadFont=function(a){bb_asyncloaders_LoadImageAsync(a+".png",1,0,this);c_HttpRequest.m_new2.call(new c_HttpRequest,"GET","data/"+a+".xml",this).p_Send()};c_FontDrawer.prototype.p_SetSpacing=function(a){this.m_spacing=a};c_FontDrawer.m_new=function(a,b){for(var c=0;c<this.m_characterPosition.length;c+=1)this.m_characterPosition[c]=c_Rectangle.m_new.call(new c_Rectangle);""!=a&&this.p_LoadFont(a);this.p_SetSpacing(b);return this};
c_FontDrawer.prototype.p_StripKey=function(a,b,c){var d="",e=0,d=0,d=a.slice(b),e=d.length-c,d=d.slice(0,e);return d=parseInt(d,10)};
c_FontDrawer.prototype.p_StripXML=function(){var a=c_StringList.m_new2.call(new c_StringList);if(0!=this.m_fontFile.length){for(var b=this.m_fontFile.split("\n"),c=0;c<b.length;){var d=b[c],c=c+1;a.p_AddLast(string_trim(d))}for(a=a.p_ObjectEnumerator();a.p_HasNext();)b=a.p_NextObject(),string_startswith(b,"<character key")&&(this.m_characterKEY=this.p_StripKey(b,16,2)),string_startswith(b,"<x")&&(this.m_characterX=this.p_StripKey(b,3,4)),string_startswith(b,"<y")&&(this.m_characterY=this.p_StripKey(b,
3,4)),string_startswith(b,"<width")&&(this.m_characterWIDTH=this.p_StripKey(b,7,8)),string_startswith(b,"<height")&&(this.m_characterHEIGHT=this.p_StripKey(b,8,9)),string_startswith(b,"</character>")&&(this.m_characterPosition[this.m_characterKEY].m_x=this.m_characterX,this.m_characterPosition[this.m_characterKEY].m_y=this.m_characterY,this.m_characterPosition[this.m_characterKEY].m_width=this.m_characterWIDTH,this.m_characterPosition[this.m_characterKEY].m_height=this.m_characterHEIGHT);this.m_fontFile=
"";this.m_fontLoaded=!0;return 1}return 0};c_FontDrawer.prototype.p_Update=function(){""!=this.m_fontFile&&null!=this.m_fontImage&&this.p_StripXML()};c_FontDrawer.prototype.p_FontLoaded=function(){return this.m_fontLoaded};c_FontDrawer.prototype.p_TextSize=function(a){for(var b=a.length,c=0,d=0,e=0;e<=b-1;e+=1)c=a.charCodeAt(e),d+=this.m_characterPosition[c].m_width,d+=this.m_spacing;return d};
c_FontDrawer.prototype.p_DrawText=function(a,b,c,d){var e=a.length,h=0;0==d&&(b=b-(this.p_TextSize(a)/2|0)*this.m_scaleX|0);-1==d&&(b=b-this.p_TextSize(a)*this.m_scaleX|0);for(d=0;d<=e-1;d+=1)h=a.charCodeAt(d),bb_graphics_DrawImageRect2(this.m_fontImage,b,c,this.m_characterPosition[h].m_x,this.m_characterPosition[h].m_y,this.m_characterPosition[h].m_width,this.m_characterPosition[h].m_height,0,this.m_scaleX,this.m_scaleY,0),b=b+this.m_characterPosition[h].m_width*this.m_scaleX|0,b=b+this.m_spacing*
this.m_scaleX|0};c_FontDrawer.prototype.p_Draw3=function(a,b,c,d){this.p_DrawText(a,b,c,d)};c_FontDrawer.prototype.p_SetScale=function(a,b){this.m_scaleX=a;this.m_scaleY=b};c_FontDrawer.prototype.p_Draw4=function(a,b,c,d,e,h,f,k,l,g){bb_graphics_SetColor(d,e,h);bb_graphics_SetAlpha(f);this.p_SetScale(k,l);this.p_DrawText(a,b,c,g);bb_graphics_SetColor(255,255,255);bb_graphics_SetAlpha(1);this.p_SetScale(1,1)};
c_FontDrawer.prototype.p_PreCache=function(){for(var a=0;a<this.m_characterPosition.length;a+=1)bb_graphics_DrawImageRect2(this.m_fontImage,-100,-100,this.m_characterPosition[a].m_x,this.m_characterPosition[a].m_y,this.m_characterPosition[a].m_width,this.m_characterPosition[a].m_height,0,1,1,0)};c_FontDrawer.prototype.p_OnHttpRequestComplete=function(a){if(200==a.p_Status()||0==a.p_Status())this.m_fontFile=a.p_ResponseText()};
c_FontDrawer.prototype.p_OnLoadImageComplete=function(a,b,c){null!=a&&(this.m_fontImage=a)};var bb_assets_fontManager=[];function c_Rectangle(){Object.call(this);this.m_y=this.m_x=0;this.m_height=this.m_width=1}c_Rectangle.m_new=function(){return this};
function c_SoundManager(){Object.call(this);this.m_numSounds=0;this.m_ext="";this.m_muteSound=!1;this.m_musicFile="";this.m_isPlayingMusic=!1;this.m_delayPlay=[0,0,0,0,0,0,0,0,0,0];this.m_delaySoundName="         ".split(" ");this.implments={c_IOnLoadSoundComplete:1}}c_SoundManager.m_new=function(a){this.m_numSounds=a;this.m_ext=".ogg";this.m_muteSound=!1;return this};c_SoundManager.m_new2=function(){return this};
c_SoundManager.prototype.p_LoadMusic=function(a){bb_asyncloaders_LoadSoundAsync("music/"+a,this)};c_SoundManager.prototype.p_Add=function(a){bb_asyncloaders_LoadSoundAsync("sounds/"+a,this)};c_SoundManager.prototype.p_MuteSound=function(){return this.m_muteSound};
c_SoundManager.prototype.p_MuteSound2=function(a){(this.m_muteSound=a)?bb_audio_PauseMusic():(bb_audio_ResumeMusic(),""==this.m_musicFile||this.m_isPlayingMusic||(bb_frameworklite_diddyGame.m_sounds.p_Find(this.m_musicFile).p_Play(31,!1),this.m_isPlayingMusic=!0));bb_assets_SaveSettings()};c_SoundManager.prototype.p_AreSoundsLoaded=function(){return diddy.getSoundsLoaded()==this.m_numSounds?!0:!1};
c_SoundManager.prototype.p_AddToDelayPlay=function(a,b){for(var c=0;c<this.m_delayPlay.length;c+=1)if(0==this.m_delayPlay[c])return this.m_delayPlay[c]=b,this.m_delaySoundName[c]=a,!0;return!1};c_SoundManager.prototype.p_Play2=function(a,b){this.m_muteSound||0!=b?0<b&&(this.p_AddToDelayPlay(a,bb_frameworklite_dt.m_currentticks+b|0)||print("Error Monkey - SoundManager: Can not find an empty delayPlay slot")):bb_frameworklite_diddyGame.m_sounds.p_Find(a).p_Play(0,!1)};
c_SoundManager.prototype.p_PlayMusic=function(a){this.m_musicFile=a;this.m_muteSound||(bb_frameworklite_diddyGame.m_sounds.p_Find(this.m_musicFile).p_Play(31,!1),this.m_isPlayingMusic=!0)};c_SoundManager.prototype.p_OnLoadSoundComplete=function(a,b,c){null==a&&print("Found no Sound");a=bb_frameworklite_diddyGame.m_sounds.p_Load2(a,b,300,"");-1!=b.indexOf("music/")&&(a.m_loop=1,a.m_soundDelay=0)};var bb_assets_soundManager=null;
function c_AsyncSoundLoader(){BBAsyncSoundLoaderThread.call(this);this.m__mpath="";this.m__onComplete=null;this.implments={c_IAsyncEventSource:1}}c_AsyncSoundLoader.prototype=extend_class(BBAsyncSoundLoaderThread);c_AsyncSoundLoader.m_new=function(a,b){this._device=bb_audio_GetAudioDevice();this.m__mpath=a;this._path=bb_data_FixDataPath(a);this.m__onComplete=b;return this};c_AsyncSoundLoader.m_new2=function(){return this};
c_AsyncSoundLoader.prototype.Start=function(){bb_asyncevent_AddAsyncEventSource(this);BBAsyncSoundLoaderThread.prototype.Start.call(this)};c_AsyncSoundLoader.prototype.p_UpdateAsyncEvents=function(){if(!this.IsRunning())if(bb_asyncevent_RemoveAsyncEventSource(this),null!=this._sample){var a=c_Sound.m_new.call(new c_Sound,this._sample);this.m__onComplete.p_OnLoadSoundComplete(a,this.m__mpath,this)}else this.m__onComplete.p_OnLoadSoundComplete(null,this.m__mpath,this)};
function bb_audio_GetAudioDevice(){return bb_audio_device}function bb_asyncloaders_LoadSoundAsync(a,b){c_AsyncSoundLoader.m_new.call(new c_AsyncSoundLoader,a,b).Start()}function c_TweenSystem(){Object.call(this);this.m_tweenPool=[];this.m_foundTween=!1;this.m_lastTween=-1;this.m_returnIndex=0}
c_TweenSystem.m_new=function(){bb_tweenfunctions_InitTweenFunctions();this.m_tweenPool=new_object_array(80);for(var a=0;a<this.m_tweenPool.length;a+=1)this.m_tweenPool[a]=c_TweenObject.m_new.call(new c_TweenObject);return this};
c_TweenSystem.prototype.p_AddTween2=function(a,b,c,d,e,h,f,k,l){for(this.m_foundTween=!1;!this.m_foundTween;)this.m_lastTween+=1,this.m_tweenPool[this.m_lastTween].p_IsTweening2()||(this.m_tweenPool[this.m_lastTween].p_InitTween(a,b,c,d,e,h,f,k,l),this.m_returnIndex=this.m_lastTween,this.m_foundTween=!0),this.m_lastTween==this.m_tweenPool.length-1&&(this.m_lastTween=-1);return this.m_tweenPool[this.m_returnIndex]};
c_TweenSystem.prototype.p_Update3=function(a){for(var b=0;b<this.m_tweenPool.length;b+=1)this.m_tweenPool[b].p_IsTweening2()&&this.m_tweenPool[b].p_Update3(a)};function c_LinearTween(){Object.call(this);this.implments={c_Tweener:1}}c_LinearTween.m_new=function(){return this};c_LinearTween.prototype.p_Do=function(a,b,c,d){return c*a/d+b};var bb_tweenfunctions_TweenFunc=[];function c_EaseInQuad(){Object.call(this);this.implments={c_Tweener:1}}c_EaseInQuad.m_new=function(){return this};
c_EaseInQuad.prototype.p_Do=function(a,b,c,d){a/=d;return c*a*a+b};function c_EaseOutQuad(){Object.call(this);this.implments={c_Tweener:1}}c_EaseOutQuad.m_new=function(){return this};c_EaseOutQuad.prototype.p_Do=function(a,b,c,d){a/=d;return-c*a*(a-2)+b};function c_EaseInOutQuad(){Object.call(this);this.implments={c_Tweener:1}}c_EaseInOutQuad.m_new=function(){return this};c_EaseInOutQuad.prototype.p_Do=function(a,b,c,d){a/=d/2;if(1>a)return c/2*a*a+b;a-=1;return-c/2*(a*(a-2)-1)+b};
function c_EaseInCubic(){Object.call(this);this.implments={c_Tweener:1}}c_EaseInCubic.m_new=function(){return this};c_EaseInCubic.prototype.p_Do=function(a,b,c,d){a/=d;return c*a*a*a+b};function c_EaseOutCubic(){Object.call(this);this.implments={c_Tweener:1}}c_EaseOutCubic.m_new=function(){return this};c_EaseOutCubic.prototype.p_Do=function(a,b,c,d){a=a/d-1;return c*(a*a*a+1)+b};function c_EaseInOutCubic(){Object.call(this);this.implments={c_Tweener:1}}c_EaseInOutCubic.m_new=function(){return this};
c_EaseInOutCubic.prototype.p_Do=function(a,b,c,d){a/=d/2;if(1>a)return c/2*a*a*a+b;a-=2;return c/2*(a*a*a+2)+b};function c_EaseInQuart(){Object.call(this);this.implments={c_Tweener:1}}c_EaseInQuart.m_new=function(){return this};c_EaseInQuart.prototype.p_Do=function(a,b,c,d){a/=d;return c*a*a*a*a+b};function c_EaseOutQuart(){Object.call(this);this.implments={c_Tweener:1}}c_EaseOutQuart.m_new=function(){return this};c_EaseOutQuart.prototype.p_Do=function(a,b,c,d){a=a/d-1;return-c*(a*a*a*a-1)+b};
function c_EaseInOutQuart(){Object.call(this);this.implments={c_Tweener:1}}c_EaseInOutQuart.m_new=function(){return this};c_EaseInOutQuart.prototype.p_Do=function(a,b,c,d){a/=d/2;if(1>a)return c/2*a*a*a*a+b;a-=2;return-c/2*(a*a*a*a-2)+b};function c_EaseInQuint(){Object.call(this);this.implments={c_Tweener:1}}c_EaseInQuint.m_new=function(){return this};c_EaseInQuint.prototype.p_Do=function(a,b,c,d){a/=d;return c*a*a*a*a*a+b};
function c_EaseOutQuint(){Object.call(this);this.implments={c_Tweener:1}}c_EaseOutQuint.m_new=function(){return this};c_EaseOutQuint.prototype.p_Do=function(a,b,c,d){a=a/d-1;return c*(a*a*a*a*a+1)+b};function c_EaseInOutQuint(){Object.call(this);this.implments={c_Tweener:1}}c_EaseInOutQuint.m_new=function(){return this};c_EaseInOutQuint.prototype.p_Do=function(a,b,c,d){a/=d/2;if(1>a)return c/2*a*a*a*a*a+b;a-=2;return c/2*(a*a*a*a*a+2)+b};
function c_EaseInSine(){Object.call(this);this.implments={c_Tweener:1}}c_EaseInSine.m_new=function(){return this};c_EaseInSine.prototype.p_Do=function(a,b,c,d){return-c*Math.cos(a/d*89.99999987661035*D2R)+c+b};function c_EaseOutSine(){Object.call(this);this.implments={c_Tweener:1}}c_EaseOutSine.m_new=function(){return this};c_EaseOutSine.prototype.p_Do=function(a,b,c,d){return c*Math.sin(a/d*89.99999987661035*D2R)+b};function c_EaseInOutSine(){Object.call(this);this.implments={c_Tweener:1}}
c_EaseInOutSine.m_new=function(){return this};c_EaseInOutSine.prototype.p_Do=function(a,b,c,d){return-c/2*(Math.cos(3.14159265*a/d*57.2957795*D2R)-1)+b};function c_EaseInExpo(){Object.call(this);this.implments={c_Tweener:1}}c_EaseInExpo.m_new=function(){return this};c_EaseInExpo.prototype.p_Do=function(a,b,c,d){return c*Math.pow(2,10*(a/d-1))+b};function c_EaseOutExpo(){Object.call(this);this.implments={c_Tweener:1}}c_EaseOutExpo.m_new=function(){return this};
c_EaseOutExpo.prototype.p_Do=function(a,b,c,d){return c*(-Math.pow(2,-10*a/d)+1)+b};function c_EaseInOutExpo(){Object.call(this);this.implments={c_Tweener:1}}c_EaseInOutExpo.m_new=function(){return this};c_EaseInOutExpo.prototype.p_Do=function(a,b,c,d){a/=d/2;return 1>a?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*(a-1))+2)+b};function c_EaseInCirc(){Object.call(this);this.implments={c_Tweener:1}}c_EaseInCirc.m_new=function(){return this};
c_EaseInCirc.prototype.p_Do=function(a,b,c,d){a/=d;return-c*(Math.sqrt(1-a*a)-1)+b};function c_EaseOutCirc(){Object.call(this);this.implments={c_Tweener:1}}c_EaseOutCirc.m_new=function(){return this};c_EaseOutCirc.prototype.p_Do=function(a,b,c,d){a=a/d-1;return c*Math.sqrt(1-a*a)+b};function c_EaseInOutCirc(){Object.call(this);this.implments={c_Tweener:1}}c_EaseInOutCirc.m_new=function(){return this};
c_EaseInOutCirc.prototype.p_Do=function(a,b,c,d){a/=d/2;if(1>a)return-c/2*(Math.sqrt(1-a*a)-1)+b;a-=2;return c/2*(Math.sqrt(1-a*a)+1)+b};function c_EaseInBack(){Object.call(this);this.implments={c_Tweener:1}}c_EaseInBack.m_new=function(){return this};c_EaseInBack.prototype.p_Do=function(a,b,c,d){a/=d;return c*a*a*((bb_tweenfunctions_Bounce+1)*a-bb_tweenfunctions_Bounce)+b};function c_EaseOutBack(){Object.call(this);this.implments={c_Tweener:1}}c_EaseOutBack.m_new=function(){return this};
c_EaseOutBack.prototype.p_Do=function(a,b,c,d){a=a/d-1;return c*(a*a*((bb_tweenfunctions_Bounce+1)*a+bb_tweenfunctions_Bounce)+1)+b};function c_EaseInOutBack(){Object.call(this);this.implments={c_Tweener:1}}c_EaseInOutBack.m_new=function(){return this};
c_EaseInOutBack.prototype.p_Do=function(a,b,c,d){a/=d/2;if(1>a)return bb_tweenfunctions_Bounce*=2.525,c/2*a*a*(bb_tweenfunctions_Bounce*a-bb_tweenfunctions_Bounce)+b;a-=2;bb_tweenfunctions_Bounce*=2.525;return c/2*(a*a*(bb_tweenfunctions_Bounce*a+bb_tweenfunctions_Bounce)+2)+b};function c_EaseInBounce(){Object.call(this);this.implments={c_Tweener:1}}c_EaseInBounce.m_new=function(){return this};c_EaseInBounce.prototype.p_Do=function(a,b,c,d){return c-bb_tweenfunctions_Tweening(26,d-a,0,c,d)+b};
function c_EaseOutBounce(){Object.call(this);this.implments={c_Tweener:1}}c_EaseOutBounce.m_new=function(){return this};c_EaseOutBounce.prototype.p_Do=function(a,b,c,d){a/=d;if(0.36363636363636365>a)return 7.5625*c*a*a+b;if(0.7272727272727273>a)return a-=0.5454545454545454,c*(7.5625*a*a+0.75)+b;if(0.9090909090909091>a)return a-=0.8181818181818182,c*(7.5625*a*a+0.9375)+b;a-=0.9545454545454546;return c*(7.5625*a*a+0.984375)+b};
function c_EaseInOutBounce(){Object.call(this);this.implments={c_Tweener:1}}c_EaseInOutBounce.m_new=function(){return this};c_EaseInOutBounce.prototype.p_Do=function(a,b,c,d){return a<d/2?0.5*bb_tweenfunctions_Tweening(25,2*a,0,c,d)+b:0.5*bb_tweenfunctions_Tweening(26,2*a-d,0,c,d)+0.5*c+b};function c_EaseInElastic(){Object.call(this);this.implments={c_Tweener:1}}c_EaseInElastic.m_new=function(){return this};
c_EaseInElastic.prototype.p_Do=function(a,b,c,d){var e=0;if(0==a)return b;a/=d;if(1==a)return b+c;0==bb_tweenfunctions_Power&&(bb_tweenfunctions_Power=0.3*d);0==bb_tweenfunctions_Amplitude||bb_tweenfunctions_Amplitude<bb_math_Abs2(c)?(bb_tweenfunctions_Amplitude=c,e=bb_tweenfunctions_Power/4):e=bb_tweenfunctions_Power/6.2831853*Math.asin(c/bb_tweenfunctions_Amplitude)*R2D;a-=1;return-(bb_tweenfunctions_Amplitude*Math.pow(2,10*a)*Math.sin(6.2831853*(a*d-e)/bb_tweenfunctions_Power*D2R))+b};
function c_EaseOutElastic(){Object.call(this);this.implments={c_Tweener:1}}c_EaseOutElastic.m_new=function(){return this};
c_EaseOutElastic.prototype.p_Do=function(a,b,c,d){var e=0;if(0==a)return b;a/=d;if(1==a)return b+c;0==bb_tweenfunctions_Power&&(bb_tweenfunctions_Power=0.3*d);0==bb_tweenfunctions_Amplitude||bb_tweenfunctions_Amplitude<bb_math_Abs2(c)?(bb_tweenfunctions_Amplitude=c,e=bb_tweenfunctions_Power/4):e=bb_tweenfunctions_Power/6.2831853*Math.asin(c/bb_tweenfunctions_Amplitude)*R2D;return bb_tweenfunctions_Amplitude*Math.pow(2,-10*a)*Math.sin(6.2831853*(a*d-e)/bb_tweenfunctions_Power*D2R)+c+b};
function c_EaseInOutElastic(){Object.call(this);this.implments={c_Tweener:1}}c_EaseInOutElastic.m_new=function(){return this};
c_EaseInOutElastic.prototype.p_Do=function(a,b,c,d){var e=0;if(0==a)return b;a/=d/2;if(2==a)return b+c;0==bb_tweenfunctions_Power&&(bb_tweenfunctions_Power=0.3*d*1.5);0==bb_tweenfunctions_Amplitude||bb_tweenfunctions_Amplitude<bb_math_Abs2(c)?(bb_tweenfunctions_Amplitude=c,e=bb_tweenfunctions_Power/4):e=bb_tweenfunctions_Power/6.2831853*Math.asin(c/bb_tweenfunctions_Amplitude)*R2D;if(1>a)return a-=1,-0.5*bb_tweenfunctions_Amplitude*Math.pow(2,10*a)*Math.sin(6.2831853*(a*d-e)/bb_tweenfunctions_Power*
D2R)+b;a-=1;return bb_tweenfunctions_Amplitude*Math.pow(2,-10*a)*Math.sin(6.2831853*(a*d-e)/bb_tweenfunctions_Power*D2R)*0.5+c+b};
function bb_tweenfunctions_InitTweenFunctions(){bb_tweenfunctions_TweenFunc[0]=c_LinearTween.m_new.call(new c_LinearTween);bb_tweenfunctions_TweenFunc[1]=c_EaseInQuad.m_new.call(new c_EaseInQuad);bb_tweenfunctions_TweenFunc[2]=c_EaseOutQuad.m_new.call(new c_EaseOutQuad);bb_tweenfunctions_TweenFunc[3]=c_EaseInOutQuad.m_new.call(new c_EaseInOutQuad);bb_tweenfunctions_TweenFunc[4]=c_EaseInCubic.m_new.call(new c_EaseInCubic);bb_tweenfunctions_TweenFunc[5]=c_EaseOutCubic.m_new.call(new c_EaseOutCubic);
bb_tweenfunctions_TweenFunc[6]=c_EaseInOutCubic.m_new.call(new c_EaseInOutCubic);bb_tweenfunctions_TweenFunc[7]=c_EaseInQuart.m_new.call(new c_EaseInQuart);bb_tweenfunctions_TweenFunc[8]=c_EaseOutQuart.m_new.call(new c_EaseOutQuart);bb_tweenfunctions_TweenFunc[9]=c_EaseInOutQuart.m_new.call(new c_EaseInOutQuart);bb_tweenfunctions_TweenFunc[10]=c_EaseInQuint.m_new.call(new c_EaseInQuint);bb_tweenfunctions_TweenFunc[11]=c_EaseOutQuint.m_new.call(new c_EaseOutQuint);bb_tweenfunctions_TweenFunc[12]=c_EaseInOutQuint.m_new.call(new c_EaseInOutQuint);
bb_tweenfunctions_TweenFunc[13]=c_EaseInSine.m_new.call(new c_EaseInSine);bb_tweenfunctions_TweenFunc[14]=c_EaseOutSine.m_new.call(new c_EaseOutSine);bb_tweenfunctions_TweenFunc[15]=c_EaseInOutSine.m_new.call(new c_EaseInOutSine);bb_tweenfunctions_TweenFunc[16]=c_EaseInExpo.m_new.call(new c_EaseInExpo);bb_tweenfunctions_TweenFunc[17]=c_EaseOutExpo.m_new.call(new c_EaseOutExpo);bb_tweenfunctions_TweenFunc[18]=c_EaseInOutExpo.m_new.call(new c_EaseInOutExpo);bb_tweenfunctions_TweenFunc[16]=c_EaseInExpo.m_new.call(new c_EaseInExpo);
bb_tweenfunctions_TweenFunc[17]=c_EaseOutExpo.m_new.call(new c_EaseOutExpo);bb_tweenfunctions_TweenFunc[18]=c_EaseInOutExpo.m_new.call(new c_EaseInOutExpo);bb_tweenfunctions_TweenFunc[19]=c_EaseInCirc.m_new.call(new c_EaseInCirc);bb_tweenfunctions_TweenFunc[20]=c_EaseOutCirc.m_new.call(new c_EaseOutCirc);bb_tweenfunctions_TweenFunc[21]=c_EaseInOutCirc.m_new.call(new c_EaseInOutCirc);bb_tweenfunctions_TweenFunc[22]=c_EaseInBack.m_new.call(new c_EaseInBack);bb_tweenfunctions_TweenFunc[23]=c_EaseOutBack.m_new.call(new c_EaseOutBack);
bb_tweenfunctions_TweenFunc[24]=c_EaseInOutBack.m_new.call(new c_EaseInOutBack);bb_tweenfunctions_TweenFunc[25]=c_EaseInBounce.m_new.call(new c_EaseInBounce);bb_tweenfunctions_TweenFunc[26]=c_EaseOutBounce.m_new.call(new c_EaseOutBounce);bb_tweenfunctions_TweenFunc[27]=c_EaseInOutBounce.m_new.call(new c_EaseInOutBounce);bb_tweenfunctions_TweenFunc[28]=c_EaseInElastic.m_new.call(new c_EaseInElastic);bb_tweenfunctions_TweenFunc[29]=c_EaseOutElastic.m_new.call(new c_EaseOutElastic);bb_tweenfunctions_TweenFunc[30]=
c_EaseInOutElastic.m_new.call(new c_EaseInOutElastic)}function c_TweenObject(){Object.call(this);this.m_tweening=!1;this.m__object=null;this.m__property="";this.m_delay=this.m_duration=this.m_tweenType=this.m_totalChange=this.m_endValue=this.m_startValue=0;this.m__reverse=this.m__repeat=this.m_delaying=!1;this.m_totalTime=0;this.m_paused=!1;this.m_currentValue=0}c_TweenObject.m_new=function(){this.m_tweening=!1;return this};
c_TweenObject.prototype.p_InitTween=function(a,b,c,d,e,h,f,k,l){this.m__object=a;this.m__property=b;this.m_startValue=c;this.m_endValue=d;this.m_totalChange=this.m_endValue-this.m_startValue;this.m_tweenType=e;this.m_duration=h;this.m_delay=f;this.m_delaying=0<this.m_delay?!0:!1;this.m__repeat=k;this.m__reverse=l;this.m_totalTime=0;this.m_tweening=!0;this.m_paused=!1};
c_TweenObject.prototype.p_InitTween2=function(a){this.m__object=a.m__object;this.m__property=a.m__property;this.m_startValue=a.m_startValue;this.m_endValue=a.m_endValue;this.m_totalChange=this.m_endValue-this.m_startValue;this.m_tweenType=a.m_tweenType;this.m_duration=a.m_duration;this.m_delay=a.m_delay;this.m_delaying=0<this.m_delay?!0:!1;this.m__repeat=a.m__repeat;this.m__reverse=a.m__reverse;this.m_totalTime=0;this.m_tweening=!0};
c_TweenObject.m_new2=function(a,b,c,d,e,h,f,k,l){this.p_InitTween(a,b,c,d,e,h,f,k,l);return this};c_TweenObject.prototype.p_IsTweening2=function(){return this.m_tweening};
c_TweenObject.prototype.p_UpdateTween=function(a){this.m_totalTime+=a;this.m_delaying&&this.m_totalTime<this.m_delay?this.m_currentValue=this.m_startValue:(this.m_delaying&&(this.m_totalTime=0,this.m_delaying=!1),this.m_totalTime>this.m_duration?this.m__repeat?(this.m_totalTime=0,this.m_duration=this.m_duration,this.m_delay=0,this.m__reverse&&(this.m_startValue+=this.m_endValue,this.m_endValue=this.m_startValue-this.m_endValue,this.m_startValue-=this.m_endValue,this.m_totalChange=this.m_endValue-
this.m_startValue),this.m_currentValue=this.m_startValue):(this.m_tweening=!1,this.m_currentValue=this.m_endValue):this.m_currentValue=bb_tweenfunctions_Tweening(this.m_tweenType,this.m_totalTime,this.m_startValue,this.m_totalChange,this.m_duration))};
c_TweenObject.prototype.p_UpdateObject=function(){null!=this.m__object&&("x"==this.m__property?this.m__object.p_SetX(this.m_currentValue|0):"y"==this.m__property?this.m__object.p_SetY(this.m_currentValue|0):"rotation"==this.m__property?this.m__object.p_SetRotation(this.m_currentValue|0):"xScale"==this.m__property?this.m__object.p_SetXScale(this.m_currentValue):"yScale"==this.m__property?this.m__object.p_SetYScale(this.m_currentValue):"alpha"==this.m__property&&this.m__object.p_SetObjectAlpha(this.m_currentValue),
this.m__object.p_IsTweening(this.m_tweening))};c_TweenObject.prototype.p_Update3=function(a){this.m_paused||(this.p_UpdateTween(a),this.p_UpdateObject())};c_TweenObject.prototype.p_Paused=function(a){this.m_paused=a};var bb_assets_tweenSystem=null;function c_DataConversion(){Object.call(this)}c_DataConversion.m_new=function(){return this};c_DataConversion.prototype.p_StringToInt=function(a){return parseInt(a,10)};c_DataConversion.prototype.p_IntToString=function(a){return String(a)};
function c_FileSystem(){c_DataConversion.call(this);this.m_fileData=this.m_delimiter="";this.m_index=null;this.m__header="MKYDATA"}c_FileSystem.prototype=extend_class(c_DataConversion);c_FileSystem.m_new=function(){c_DataConversion.m_new.call(this);return this};
c_FileSystem.prototype.p_LoadAll=function(){var a=0,b=null,c=0,d=0,e=[];this.m_fileData=bb_app_LoadState();this.m_index=c_StringMap4.m_new.call(new c_StringMap4);if(0<this.m_fileData.length){if(e=this.m_fileData.split(this.m_delimiter),e[c]==this.m__header&&(this.m_index.p_Clear(),c+=1,a=this.p_StringToInt(e[c]),c+=1,0<a))for(var h=1;h<=a;h+=1){b=c_FileStream.m_new.call(new c_FileStream);b.m_delimiter=this.m_delimiter;b.m_filename=e[c];c+=1;b.m_numElements=parseInt(e[c],10);c+=1;if(0<b.m_numElements){d=
0;do b.m_data+=e[c],d+=1,d<b.m_numElements&&(b.m_data+=this.m_delimiter),c+=1;while(d!=b.m_numElements)}this.m_index.p_Insert(b.m_filename,b)}}else bb_app_SaveState("")};c_FileSystem.m_Create=function(a){var b=c_FileSystem.m_new.call(new c_FileSystem);b.m_delimiter=a;b.p_LoadAll();return b};c_FileSystem.prototype.p_ReadFile=function(a){a=a.toLowerCase();if(!this.m_index.p_Contains2(a))return null;var b=null,b=this.m_index.p_ValueForKey(a);b.m_ptr=0;b.m_arr=b.m_data.split(b.m_delimiter);return b};
c_FileSystem.prototype.p_WriteFile=function(a){var b=c_FileStream.m_new.call(new c_FileStream);b.m_filename=a.toLowerCase();b.m_ptr=0;b.m_delimiter=this.m_delimiter;this.m_index.p_Insert(b.m_filename.toLowerCase(),b);return b};
c_FileSystem.prototype.p_SaveAll=function(){var a=null;this.m_fileData=this.m__header;this.m_fileData+=this.m_delimiter;this.m_fileData+=this.p_IntToString(this.m_index.p_Count());if(0<this.m_index.p_Count())for(var b=this.m_index.p_Values().p_ObjectEnumerator();b.p_HasNext();)a=b.p_NextObject(),this.m_fileData+=this.m_delimiter,this.m_fileData+=a.m_filename,this.m_fileData+=this.m_delimiter,this.m_fileData+=this.p_IntToString(a.m_numElements),0<a.m_numElements&&(this.m_fileData+=this.m_delimiter,
this.m_fileData+=a.m_data);bb_app_SaveState(this.m_fileData)};function c_FileStream(){c_DataConversion.call(this);this.m_filename=this.m_delimiter="";this.m_numElements=0;this.m_data="";this.m_ptr=0;this.m_arr=[];this.m_errStr=""}c_FileStream.prototype=extend_class(c_DataConversion);c_FileStream.m_new=function(){c_DataConversion.m_new.call(this);return this};c_FileStream.prototype.p_EofError=function(){this.m_errStr="End of file: "+this.m_filename};
c_FileStream.prototype.p_ReadBool=function(){var a=!1;if(this.m_ptr>=this.m_arr.length)return this.p_EofError(),!1;a="0"==this.m_arr[this.m_ptr]?!1:!0;this.m_ptr+=1;return a};c_FileStream.prototype.p_WriteBool=function(a){0<this.m_data.length&&(this.m_data+=this.m_delimiter);this.m_data+=a?"1":"0";this.m_numElements+=1};c_FileStream.prototype.p_WriteInt=function(a){0<this.m_data.length&&(this.m_data+=this.m_delimiter);this.m_data+=this.p_IntToString(a);this.m_numElements+=1};
c_FileStream.prototype.p_ReadInt=function(){var a=0;if(this.m_ptr>=this.m_arr.length)return this.p_EofError(),0;a=parseInt(this.m_arr[this.m_ptr],10);this.m_ptr+=1;return a};function bb_app_LoadState(){return bb_app__game.LoadState()}function c_Map4(){Object.call(this);this.m_root=null}c_Map4.m_new=function(){return this};c_Map4.prototype.p_Clear=function(){this.m_root=null;return 0};c_Map4.prototype.p_Compare=function(a,b){};
c_Map4.prototype.p_RotateLeft4=function(a){var b=a.m_right;a.m_right=b.m_left;null!=b.m_left&&(b.m_left.m_parent=a);b.m_parent=a.m_parent;null!=a.m_parent?a==a.m_parent.m_left?a.m_parent.m_left=b:a.m_parent.m_right=b:this.m_root=b;b.m_left=a;a.m_parent=b;return 0};
c_Map4.prototype.p_RotateRight4=function(a){var b=a.m_left;a.m_left=b.m_right;null!=b.m_right&&(b.m_right.m_parent=a);b.m_parent=a.m_parent;null!=a.m_parent?a==a.m_parent.m_right?a.m_parent.m_right=b:a.m_parent.m_left=b:this.m_root=b;b.m_right=a;a.m_parent=b;return 0};
c_Map4.prototype.p_InsertFixup4=function(a){for(;null!=a.m_parent&&-1==a.m_parent.m_color&&null!=a.m_parent.m_parent;)if(a.m_parent==a.m_parent.m_parent.m_left){var b=a.m_parent.m_parent.m_right;null!=b&&-1==b.m_color?(a.m_parent.m_color=1,b.m_color=1,b.m_parent.m_color=-1,a=b.m_parent):(a==a.m_parent.m_right&&(a=a.m_parent,this.p_RotateLeft4(a)),a.m_parent.m_color=1,a.m_parent.m_parent.m_color=-1,this.p_RotateRight4(a.m_parent.m_parent))}else b=a.m_parent.m_parent.m_left,null!=b&&-1==b.m_color?(a.m_parent.m_color=
1,b.m_color=1,b.m_parent.m_color=-1,a=b.m_parent):(a==a.m_parent.m_left&&(a=a.m_parent,this.p_RotateRight4(a)),a.m_parent.m_color=1,a.m_parent.m_parent.m_color=-1,this.p_RotateLeft4(a.m_parent.m_parent));this.m_root.m_color=1;return 0};
c_Map4.prototype.p_Set4=function(a,b){for(var c=this.m_root,d=null,e=0;null!=c;)if(d=c,e=this.p_Compare(a,c.m_key),0<e)c=c.m_right;else if(0>e)c=c.m_left;else return c.m_value=b,!1;c=c_Node2.m_new.call(new c_Node2,a,b,-1,d);null!=d?(0<e?d.m_right=c:d.m_left=c,this.p_InsertFixup4(c)):this.m_root=c;return!0};c_Map4.prototype.p_Insert=function(a,b){return this.p_Set4(a,b)};
c_Map4.prototype.p_FindNode=function(a){for(var b=this.m_root;null!=b;){var c=this.p_Compare(a,b.m_key);if(0<c)b=b.m_right;else if(0>c)b=b.m_left;else break}return b};c_Map4.prototype.p_Contains2=function(a){return null!=this.p_FindNode(a)};c_Map4.prototype.p_Get=function(a){a=this.p_FindNode(a);return null!=a?a.m_value:null};c_Map4.prototype.p_ValueForKey=function(a){return this.p_Get(a)};c_Map4.prototype.p_Count=function(){return null!=this.m_root?this.m_root.p_Count2(0):0};
c_Map4.prototype.p_Values=function(){return c_MapValues.m_new.call(new c_MapValues,this)};c_Map4.prototype.p_FirstNode=function(){if(null==this.m_root)return null;for(var a=this.m_root;null!=a.m_left;)a=a.m_left;return a};function c_StringMap4(){c_Map4.call(this)}c_StringMap4.prototype=extend_class(c_Map4);c_StringMap4.m_new=function(){c_Map4.m_new.call(this);return this};c_StringMap4.prototype.p_Compare=function(a,b){return string_compare(a,b)};
function c_Node2(){Object.call(this);this.m_key="";this.m_value=this.m_left=this.m_right=null;this.m_color=0;this.m_parent=null}c_Node2.m_new=function(a,b,c,d){this.m_key=a;this.m_value=b;this.m_color=c;this.m_parent=d;return this};c_Node2.m_new2=function(){return this};c_Node2.prototype.p_Count2=function(a){null!=this.m_left&&(a=this.m_left.p_Count2(a));null!=this.m_right&&(a=this.m_right.p_Count2(a));return a+1};
c_Node2.prototype.p_NextNode=function(){var a=null;if(null!=this.m_right){for(a=this.m_right;null!=a.m_left;)a=a.m_left;return a}for(var a=this,b=this.m_parent;null!=b&&a==b.m_right;)a=b,b=b.m_parent;return b};function bb_app_SaveState(a){return bb_app__game.SaveState(a)}var bb_assets_settings=null;function bb_audio_PauseMusic(){bb_audio_device.PauseMusic();return 0}function bb_audio_ResumeMusic(){bb_audio_device.ResumeMusic();return 0}
function c_Node3(){Object.call(this);this.m_key="";this.m_value=this.m_left=this.m_right=null;this.m_color=0;this.m_parent=null}c_Node3.m_new=function(a,b,c,d){this.m_key=a;this.m_value=b;this.m_color=c;this.m_parent=d;return this};c_Node3.m_new2=function(){return this};function c_Sound(){Object.call(this);this.m_sample=null}c_Sound.m_new=function(a){this.m_sample=a;return this};c_Sound.m_new2=function(){return this};
function bb_audio_PlaySound(a,b,c){null!=a&&null!=a.m_sample&&bb_audio_device.PlaySample(a.m_sample,b,c);return 0}var bb_assets_tutorialDone=!1,bb_assets_highScore=0;function c_MapValues(){Object.call(this);this.m_map=null}c_MapValues.m_new=function(a){this.m_map=a;return this};c_MapValues.m_new2=function(){return this};c_MapValues.prototype.p_ObjectEnumerator=function(){return c_ValueEnumerator.m_new.call(new c_ValueEnumerator,this.m_map.p_FirstNode())};
function c_ValueEnumerator(){Object.call(this);this.m_node=null}c_ValueEnumerator.m_new=function(a){this.m_node=a;return this};c_ValueEnumerator.m_new2=function(){return this};c_ValueEnumerator.prototype.p_HasNext=function(){return null!=this.m_node};c_ValueEnumerator.prototype.p_NextObject=function(){var a=this.m_node;this.m_node=this.m_node.p_NextNode();return a.m_value};
function bb_assets_SaveSettings(){var a=null,a=bb_assets_settings.p_WriteFile(".shockblastapps-settings/.gofishing.bin");a.p_WriteBool(bb_assets_soundManager.p_MuteSound());a.p_WriteBool(bb_assets_tutorialDone);a.p_WriteInt(bb_assets_highScore);bb_assets_settings.p_SaveAll()}
function bb_assets_LoadSettings(){bb_assets_settings=c_FileSystem.m_Create(String.fromCharCode(9));var a=bb_assets_settings.p_ReadFile(".shockblastapps-settings/.gofishing.bin");null!=a?(bb_assets_soundManager.p_MuteSound2(a.p_ReadBool()),bb_assets_tutorialDone=a.p_ReadBool(),bb_assets_highScore=a.p_ReadInt()):bb_assets_SaveSettings()}
function bb_assets_InitAssets(){bb_assets_DetermineAssetSize();bb_assets_atlasLoader=c_AtlasLoader.m_new.call(new c_AtlasLoader);bb_assets_atlasLoader.p_LoadAtlas("gameSprites"+bb_assets_assetSize,!0);bb_assets_fontManager=new_object_array(3);"_Lowest"==bb_assets_assetSize?(bb_assets_fontManager[0]=c_FontDrawer.m_new.call(new c_FontDrawer,"fonts/fredokaone22",0),bb_assets_fontManager[1]=c_FontDrawer.m_new.call(new c_FontDrawer,"fonts/fredokaone48",0),bb_assets_fontManager[2]=c_FontDrawer.m_new.call(new c_FontDrawer,
"fonts/fredokaone31",0)):"_Normal"==bb_assets_assetSize&&(bb_assets_fontManager[0]=c_FontDrawer.m_new.call(new c_FontDrawer,"fonts/fredokaone44",0),bb_assets_fontManager[1]=c_FontDrawer.m_new.call(new c_FontDrawer,"fonts/fredokaone96",0),bb_assets_fontManager[2]=c_FontDrawer.m_new.call(new c_FontDrawer,"fonts/fredokaone62",0));bb_assets_soundManager=c_SoundManager.m_new.call(new c_SoundManager,7);bb_assets_soundManager.p_LoadMusic("bgmusic");bb_assets_soundManager.p_Add("soundClick");bb_assets_soundManager.p_Add("soundCoin3");
bb_assets_soundManager.p_Add("soundShot");bb_assets_soundManager.p_Add("soundEmpty");bb_assets_soundManager.p_Add("soundHit3");bb_assets_soundManager.p_Add("soundTimeUp");bb_assets_inputManager=c_InputManager.m_new.call(new c_InputManager,4);bb_assets_tweenSystem=c_TweenSystem.m_new.call(new c_TweenSystem);bb_assets_LoadSettings()}var bb_asyncevent__current=null;function bb_math_Max(a,b){return a>b?a:b}function bb_math_Max2(a,b){return a>b?a:b}
function bb_asyncevent_UpdateAsyncEvents(){if(null!=bb_asyncevent__current)return 0;for(var a=0;a<bb_asyncevent__sources.p_Length2();)bb_asyncevent__current=bb_asyncevent__sources.p_Get2(a),bb_asyncevent__current.p_UpdateAsyncEvents(),null!=bb_asyncevent__current&&(a+=1);bb_asyncevent__current=null;return 0}function bb_functionslite_StripExt(a){var b=a.lastIndexOf(".");return-1!=b&&-1==a.indexOf("/",b+1)?a.slice(0,b):a}
function bb_functionslite_StripDir(a){var b=a.lastIndexOf("/");return-1!=b?a.slice(b+1):a}function bb_functionslite_StripAll(a){return bb_functionslite_StripDir(bb_functionslite_StripExt(a))}function c_Node4(){Object.call(this);this.m_key="";this.m_value=this.m_left=this.m_right=null;this.m_color=0;this.m_parent=null}c_Node4.m_new=function(a,b,c,d){this.m_key=a;this.m_value=b;this.m_color=c;this.m_parent=d;return this};c_Node4.m_new2=function(){return this};
c_Node4.prototype.p_NextNode=function(){var a=null;if(null!=this.m_right){for(a=this.m_right;null!=a.m_left;)a=a.m_left;return a}for(var a=this,b=this.m_parent;null!=b&&a==b.m_right;)a=b,b=b.m_parent;return b};function c_List(){Object.call(this);this.m__head=c_HeadNode.m_new.call(new c_HeadNode)}c_List.m_new=function(){return this};c_List.prototype.p_AddLast=function(a){return c_Node5.m_new.call(new c_Node5,this.m__head,this.m__head.m__pred,a)};
c_List.m_new2=function(a){for(var b=0;b<a.length;){var c=a[b],b=b+1;this.p_AddLast(c)}return this};c_List.prototype.p_ObjectEnumerator=function(){return c_Enumerator.m_new.call(new c_Enumerator,this)};function c_StringList(){c_List.call(this)}c_StringList.prototype=extend_class(c_List);c_StringList.m_new=function(a){c_List.m_new2.call(this,a);return this};c_StringList.m_new2=function(){c_List.m_new.call(this);return this};
function c_Node5(){Object.call(this);this.m__pred=this.m__succ=null;this.m__data=""}c_Node5.m_new=function(a,b,c){this.m__succ=a;this.m__pred=b;this.m__succ.m__pred=this;this.m__pred.m__succ=this;this.m__data=c;return this};c_Node5.m_new2=function(){return this};function c_HeadNode(){c_Node5.call(this)}c_HeadNode.prototype=extend_class(c_Node5);c_HeadNode.m_new=function(){c_Node5.m_new2.call(this);this.m__succ=this;this.m__pred=this;return this};
function c_Enumerator(){Object.call(this);this.m__curr=this.m__list=null}c_Enumerator.m_new=function(a){this.m__list=a;this.m__curr=a.m__head.m__succ;return this};c_Enumerator.m_new2=function(){return this};c_Enumerator.prototype.p_HasNext=function(){for(;this.m__curr.m__succ.m__pred!=this.m__curr;)this.m__curr=this.m__curr.m__succ;return this.m__curr!=this.m__list.m__head};c_Enumerator.prototype.p_NextObject=function(){var a=this.m__curr.m__data;this.m__curr=this.m__curr.m__succ;return a};
var bb_uibutton_BUTTON_PRESSED=0,bb_fishingjoy_distributionVersion=0;function c_SplashScreen(){c_AppScreen.call(this);this.m_splashLogo=null;this.m_totalTime=0}c_SplashScreen.prototype=extend_class(c_AppScreen);c_SplashScreen.m_new=function(){c_AppScreen.m_new.call(this);this.m_name="SplashScreen";return this};
c_SplashScreen.prototype.p_Start2=function(){this.m_splashLogo=c_UIImage.m_new.call(new c_UIImage,bb_frameworklite_diddyGame.m_images.p_Find("publisherSplash"),427,320,0,1,1);this.m_totalTime=0};
c_SplashScreen.prototype.p_Update=function(){bb_functionslite_SetGraphics(bb_graphics_DeviceWidth(),bb_graphics_DeviceHeight());this.m_events=bb_assets_inputManager.p_GetEvents();this.m_orientation=diddy.getOrientation();if("portrait"!=this.m_orientation){for(var a=0;a<bb_assets_inputManager.p_GetNumEvents();a+=1)this.m_splashLogo.p_ProcessEvent2(this.m_events[a])==bb_uiImage_IMAGE_PRESSED&&bb_functionslite_LaunchBrowser("http://www.a10.com",!0);this.m_totalTime=this.m_totalTime+bb_frameworklite_dt.m_delta|
0;45<this.m_totalTime&&this.p_FadeToScreen(bb_fishingjoy_gameScreen,bb_frameworklite_defaultFadeTime,!1,!1,!0)}bb_assets_inputManager.p_ClearEvents()};c_SplashScreen.prototype.p_Render=function(){"portrait"!=this.m_orientation&&(bb_graphics_SetColor(255,255,255),bb_graphics_DrawRect(bb_frameworklite_CVR(-143),0,bb_frameworklite_CVR(1140),bb_frameworklite_CVR(640)),this.m_splashLogo.p_Draw2(0,0))};var bb_fishingjoy_splashScreen=null;
function c_GameScreen(){c_AppScreen.call(this);this.m_objectsInit=!1;this.m_endWorld=this.m_menuWorld=this.m_world=this.m_background=null;this.m_aesthetics=[];this.m_currentWorld=0}c_GameScreen.prototype=extend_class(c_AppScreen);c_GameScreen.m_new=function(){c_AppScreen.m_new.call(this);this.m_name="GameScreen";return this};
c_GameScreen.prototype.p_InitObjects=function(){if(!this.m_objectsInit){this.m_background=bb_frameworklite_diddyGame.m_images.p_Find("background");this.m_world=c_World.m_new.call(new c_World);this.m_menuWorld=c_MenuWorld.m_new.call(new c_MenuWorld);this.m_endWorld=c_EndWorld.m_new.call(new c_EndWorld);var a=[bb_frameworklite_diddyGame.m_images.p_Find("fishBackground"),bb_frameworklite_diddyGame.m_images.p_Find("bubble1"),bb_frameworklite_diddyGame.m_images.p_Find("bubble2")];this.m_aesthetics=new_object_array(3);
for(var b=0;b<this.m_aesthetics.length;b+=1)this.m_aesthetics[b]=c_Aesthetic.m_new.call(new c_Aesthetic,b,a);this.m_objectsInit=!0}};c_GameScreen.prototype.p_Start2=function(){this.m_currentWorld=0;this.m_menuWorld.p_InTween();bb_assets_soundManager.p_PlayMusic("bgmusic");diddy.setRenderMode(1)};
c_GameScreen.prototype.p_Update=function(){bb_functionslite_SetGraphics(bb_graphics_DeviceWidth(),bb_graphics_DeviceHeight());this.m_events=bb_assets_inputManager.p_GetEvents();this.m_orientation=diddy.getOrientation();if("portrait"!=this.m_orientation){bb_assets_tweenSystem.p_Update3(bb_frameworklite_dt.m_delta);for(var a=0;a<this.m_aesthetics.length;a+=1)this.m_aesthetics[a].p_Update();if(0==this.m_currentWorld){for(a=0;a<bb_assets_inputManager.p_GetNumEvents();a+=1)1==this.m_menuWorld.p_ProcessInput(this.m_events[a])&&
(0==(0==bb_fishingjoy_distributionVersion?1:0)?bb_functionslite_LaunchBrowser("http://www.taiminh.com",!0):bb_functionslite_LaunchBrowser("http://www.taiminh.com/blog/our-mobile-apps/",!0));0==this.m_menuWorld.p_Update()&&(this.m_world.p_StartGame(),this.m_currentWorld=1)}else if(1==this.m_currentWorld){for(a=0;a<bb_assets_inputManager.p_GetNumEvents();a+=1)this.m_world.p_ProcessInput(this.m_events[a]);a=this.m_world.p_Update();0==a?(this.m_endWorld.p_SetScore(this.m_world.p_GetScore()),
this.m_endWorld.p_SetStats(this.m_world.p_GetStats()),this.m_endWorld.p_InTween(),this.m_currentWorld=2):1==a&&(this.m_menuWorld.p_InTween(),this.m_currentWorld=0)}else if(2==this.m_currentWorld){for(a=0;a<bb_assets_inputManager.p_GetNumEvents();a+=1)this.m_endWorld.p_ProcessInput(this.m_events[a]);0==this.m_endWorld.p_Update()&&(this.m_menuWorld.p_InTween(),this.m_currentWorld=0)}}bb_assets_inputManager.p_ClearEvents()};
c_GameScreen.prototype.p_Render=function(){if("portrait"!=this.m_orientation){this.m_background.p_Draw(bb_frameworklite_CVR(428),bb_frameworklite_CVR(320),0,1,1,0);for(var a=0;a<this.m_aesthetics.length;a+=1)this.m_aesthetics[a].p_Draw5();0==this.m_currentWorld?this.m_menuWorld.p_Draw5():1==this.m_currentWorld?this.m_world.p_Draw5():2==this.m_currentWorld&&this.m_endWorld.p_Draw5()}};var bb_fishingjoy_gameScreen=null,bb_uiImage_IMAGE_PRESSED=0;
function bb_functionslite_LaunchBrowser(a,b){var c="_self";b&&(c="_blank");diddy.launchBrowser(a,c);return 0}
function c_World(){Object.call(this);this.m_tutorialMode=!1;this.m_cannon=this.m_buttonMute=this.m_buttonPlay=this.m_buttonBack=this.m_buttonPause=this.m_textHowtoPlay=this.m_textTimeUp=null;this.m_bullets=[];this.m_fishes=[];this.m_coins=[];this.m_publisherLogo=this.m_statCollector=this.m_uiTimer=this.m_uiAmmo=this.m_uiCoins=null;this.m_currentScreen=0;this.m_timeUp2=this.m_timeUp=!1;this.m_fish=this.m_bullet=this.m_unPauseTween=this.m_exitGameTween=this.m_timeUpTween=null}
c_World.m_new=function(){bb_assets_TutorialDone3()?this.m_tutorialMode=!1:this.m_tutorialMode=!0;this.m_textTimeUp=c_UIImage.m_new.call(new c_UIImage,bb_frameworklite_diddyGame.m_images.p_Find("textTimeUp"),427,-250,0,1,1);this.m_textTimeUp.p_SetVisible(!1);this.m_textHowtoPlay=c_UIImage.m_new.call(new c_UIImage,bb_frameworklite_diddyGame.m_images.p_Find("textHowtoPlay"),432,-250,0,1,1);this.m_buttonPause=this.m_tutorialMode?c_UIButton.m_new.call(new c_UIButton,794,580,96,96,bb_frameworklite_diddyGame.m_images.p_Find("buttonPlay"),
bb_frameworklite_diddyGame.m_images.p_Find("buttonPlaySelected")):c_UIButton.m_new.call(new c_UIButton,794,580,96,96,bb_frameworklite_diddyGame.m_images.p_Find("buttonPause"),bb_frameworklite_diddyGame.m_images.p_Find("buttonPauseSelected"));this.m_buttonPause.p_SetY(1220);this.m_buttonBack=c_UIButton.m_new.call(new c_UIButton,427,320,112,112,bb_frameworklite_diddyGame.m_images.p_Find("bigButtonBack"),bb_frameworklite_diddyGame.m_images.p_Find("bigButtonBackSelected"));this.m_buttonBack.p_SetVisible(!1);
this.m_buttonBack.p_SetY(-320);this.m_buttonPlay=c_UIButton.m_new.call(new c_UIButton,657,320,112,112,bb_frameworklite_diddyGame.m_images.p_Find("bigButtonPlay"),bb_frameworklite_diddyGame.m_images.p_Find("bigButtonPlaySelected"));this.m_buttonPlay.p_SetVisible(!1);this.m_buttonPlay.p_SetY(-320);bb_assets_soundManager.p_MuteSound()?this.m_buttonMute=c_UIButton.m_new.call(new c_UIButton,197,320,112,112,bb_frameworklite_diddyGame.m_images.p_Find("bigButtonMute"),bb_frameworklite_diddyGame.m_images.p_Find("bigButtonMuteSelected")):
this.m_buttonMute=c_UIButton.m_new.call(new c_UIButton,197,320,112,112,bb_frameworklite_diddyGame.m_images.p_Find("bigButtonUnmute"),bb_frameworklite_diddyGame.m_images.p_Find("bigButtonUnmuteSelected"));this.m_buttonMute.p_SetVisible(!1);this.m_buttonMute.p_SetY(-320);this.m_cannon=c_Cannon.m_new.call(new c_Cannon);this.m_bullets=new_object_array(10);for(var a=0;a<this.m_bullets.length;a+=1)this.m_bullets[a]=c_Bullet.m_new.call(new c_Bullet);a=[bb_frameworklite_diddyGame.m_images.p_Find("fish1"),
bb_frameworklite_diddyGame.m_images.p_Find("fish2"),bb_frameworklite_diddyGame.m_images.p_Find("fish3"),bb_frameworklite_diddyGame.m_images.p_Find("fish4"),bb_frameworklite_diddyGame.m_images.p_Find("fish5"),bb_frameworklite_diddyGame.m_images.p_Find("fish6"),bb_frameworklite_diddyGame.m_images.p_Find("fish7"),bb_frameworklite_diddyGame.m_images.p_Find("fish8"),bb_frameworklite_diddyGame.m_images.p_Find("fish9"),bb_frameworklite_diddyGame.m_images.p_Find("fish10")];this.m_fishes=new_object_array(15);
for(var b=0;b<this.m_fishes.length;b+=1)this.m_fishes[b]=c_Fish.m_new.call(new c_Fish,a);a=[bb_frameworklite_diddyGame.m_images.p_Find("coin1"),bb_frameworklite_diddyGame.m_images.p_Find("coin2"),bb_frameworklite_diddyGame.m_images.p_Find("coin3"),bb_frameworklite_diddyGame.m_images.p_Find("coin4"),bb_frameworklite_diddyGame.m_images.p_Find("coin5"),bb_frameworklite_diddyGame.m_images.p_Find("coin6"),bb_frameworklite_diddyGame.m_images.p_Find("coin7"),bb_frameworklite_diddyGame.m_images.p_Find("coin8"),
bb_frameworklite_diddyGame.m_images.p_Find("coin9"),bb_frameworklite_diddyGame.m_images.p_Find("coin10")];this.m_coins=new_object_array(15);for(b=0;b<this.m_coins.length;b+=1)this.m_coins[b]=c_Coin.m_new.call(new c_Coin,a);this.m_uiCoins=c_UICoins.m_new.call(new c_UICoins,0);this.m_uiAmmo=c_UIAmmo.m_new.call(new c_UIAmmo);this.m_uiTimer=c_UITimer.m_new.call(new c_UITimer);this.m_statCollector=c_StatCollector.m_new.call(new c_StatCollector);this.m_publisherLogo=c_UIImage.m_new.call(new c_UIImage,bb_frameworklite_diddyGame.m_images.p_Find("publisherLogo"),
427,40,0,1,1);this.m_publisherLogo.p_SetY(-600);return this};c_World.prototype.p_InTween=function(){this.m_cannon.p_InTween();this.m_uiCoins.p_InTween();this.m_uiAmmo.p_InTween();this.m_uiTimer.p_InTween();this.m_tutorialMode&&this.m_textHowtoPlay.p_AddTween("y",-250,348,23,20,0,!1,!1);this.m_buttonPause.p_AddTween("y",1220,580,23,20,0,!1,!1);this.m_publisherLogo.p_AddTween("y",-600,40,23,20,0,!1,!1)};
c_World.prototype.p_StartGame=function(){this.m_currentScreen=0;this.m_cannon.p_Reset2();for(var a=0;a<this.m_bullets.length;a+=1)this.m_bullets[a].p_Reset2();for(a=0;a<this.m_fishes.length;a+=1)this.m_fishes[a].p_Reset2();for(a=0;a<this.m_coins.length;a+=1)this.m_coins[a].p_Reset2();this.m_uiCoins.p_Reset2();this.m_uiAmmo.p_Reset2();this.m_uiTimer.p_Reset2();this.m_statCollector.p_Reset2();this.m_buttonBack.p_SetVisible(!1);this.m_buttonBack.p_SetY(-320);this.m_buttonPlay.p_SetVisible(!1);this.m_buttonPlay.p_SetY(-320);
this.m_buttonMute.p_SetVisible(!1);this.m_buttonMute.p_SetY(-320);bb_assets_soundManager.p_MuteSound()?this.m_buttonMute.p_SetImage2(bb_frameworklite_diddyGame.m_images.p_Find("bigButtonMute"),bb_frameworklite_diddyGame.m_images.p_Find("bigButtonMute")):this.m_buttonMute.p_SetImage2(bb_frameworklite_diddyGame.m_images.p_Find("bigButtonUnmute"),bb_frameworklite_diddyGame.m_images.p_Find("bigButtonUnmute"));this.m_textTimeUp.p_SetVisible(!1);this.m_textTimeUp.p_SetY(320);this.m_timeUp2=this.m_timeUp=
!1;this.m_timeUpTween=null;this.m_publisherLogo.m_y=-600;this.p_InTween()};
c_World.prototype.p_PauseTween=function(){this.m_currentScreen=1;for(var a=0;a<this.m_coins.length;a+=1)this.m_coins[a].p_Pause();this.m_cannon.p_OutTween();this.m_uiCoins.p_OutTween();this.m_uiAmmo.p_OutTween();this.m_uiTimer.p_OutTween();this.m_buttonPause.p_AddTween("y",580,1220,0,30,0,!1,!1);this.m_buttonBack.p_SetVisible(!0);this.m_buttonPlay.p_SetVisible(!0);this.m_buttonMute.p_SetVisible(!0);this.m_buttonBack.p_AddTween("y",-320,320,23,20,0,!1,!1);this.m_buttonPlay.p_AddTween("y",-320,320,
23,20,0,!1,!1);this.m_buttonMute.p_AddTween("y",-320,320,23,20,0,!1,!1)};c_World.prototype.p_SpawnBullet=function(a,b){for(var c=0;c<this.m_bullets.length;c+=1)if(!this.m_bullets[c].m_visible){this.m_bullets[c].p_CreateBullet(a,b);break}};
c_World.prototype.p_ExitTween=function(){for(var a=0;a<this.m_fishes.length;a+=1)this.m_fishes[a].p_OutFish(),this.m_fishes[a].p_SpawningFish(!1);this.m_buttonBack.p_AddTween("y",320,-320,0,15,0,!1,!1);this.m_buttonPlay.p_AddTween("y",320,-320,0,15,0,!1,!1);this.m_exitGameTween=this.m_buttonMute.p_AddTween("y",320,-320,0,15,0,!1,!1)};
c_World.prototype.p_UnPauseTween=function(){for(var a=0;a<this.m_coins.length;a+=1)this.m_coins[a].p_UnPause();this.m_cannon.p_UnPauseTween();this.m_uiCoins.p_InTween();this.m_uiAmmo.p_InTween();this.m_uiTimer.p_InTween();this.m_unPauseTween=this.m_buttonPause.p_AddTween("y",1220,580,23,20,0,!1,!1);this.m_buttonBack.p_AddTween("y",320,-320,0,15,0,!1,!1);this.m_buttonPlay.p_AddTween("y",320,-320,0,15,0,!1,!1);this.m_buttonMute.p_AddTween("y",320,-320,0,15,0,!1,!1)};
c_World.prototype.p_ProcessInput=function(a){null!=a&&(this.m_publisherLogo.p_ProcessEvent2(a)==bb_uiImage_IMAGE_PRESSED?0==(0==bb_fishingjoy_distributionVersion?1:0)&&(bb_assets_soundManager.p_Play2("soundClick",0),bb_functionslite_LaunchBrowser("http://www.a10.com",!0)):0==this.m_currentScreen?this.m_buttonPause.p_ProcessEvent(a,0,0)==bb_uibutton_BUTTON_PRESSED?(bb_assets_soundManager.p_Play2("soundClick",0),this.m_tutorialMode?(bb_assets_TutorialDone2(!0),this.m_tutorialMode=!1,this.m_buttonPause.p_SetImage2(bb_frameworklite_diddyGame.m_images.p_Find("buttonPause"),
bb_frameworklite_diddyGame.m_images.p_Find("buttonPauseSelected"))):this.p_PauseTween()):a.m_touchevent!=bb_touchevent_TOUCH_DOWN||this.m_buttonPause.p_TouchButton(a)||(0<this.m_uiAmmo.p_NumAmmo()?(this.p_SpawnBullet(a.m_x,a.m_y),this.m_cannon.p_DetermineRotation(a.m_x,a.m_y),this.m_uiAmmo.p_AddAmmo(-1),bb_assets_soundManager.p_Play2("soundShot",0)):bb_assets_soundManager.p_Play2("soundEmpty",0)):1==this.m_currentScreen&&(this.m_buttonMute.p_ProcessEvent(a,0,0)==bb_uibutton_BUTTON_PRESSED?(bb_assets_soundManager.p_MuteSound()?
(this.m_buttonMute.p_SetImage2(bb_frameworklite_diddyGame.m_images.p_Find("bigButtonUnmute.png"),bb_frameworklite_diddyGame.m_images.p_Find("bigButtonUnmuteSelected.png")),bb_assets_soundManager.p_MuteSound2(!1)):(this.m_buttonMute.p_SetImage2(bb_frameworklite_diddyGame.m_images.p_Find("bigButtonMute.png"),bb_frameworklite_diddyGame.m_images.p_Find("bigButtonMuteSelected.png")),bb_assets_soundManager.p_MuteSound2(!0)),bb_assets_soundManager.p_Play2("soundClick",0)):this.m_buttonBack.p_ProcessEvent(a,
0,0)==bb_uibutton_BUTTON_PRESSED?(bb_assets_soundManager.p_Play2("soundClick",0),this.p_ExitTween()):this.m_buttonPlay.p_ProcessEvent(a,0,0)==bb_uibutton_BUTTON_PRESSED&&(bb_assets_soundManager.p_Play2("soundClick",0),this.p_UnPauseTween())))};
c_World.prototype.p_OutTween=function(){for(var a=0;a<this.m_fishes.length;a+=1)this.m_fishes[a].p_OutFish(),this.m_fishes[a].p_SpawningFish(!1);this.m_cannon.p_OutTween();this.m_uiCoins.p_OutTween();this.m_uiAmmo.p_OutTween();this.m_uiTimer.p_OutTween();this.m_buttonPause.p_AddTween("y",580,1220,0,30,0,!1,!1);this.m_publisherLogo.p_AddTween("y",40,-600,0,30,0,!1,!1)};
c_World.prototype.p_SpawnCoin=function(a,b,c){for(var d=0;d<this.m_coins.length;d+=1)if(!this.m_coins[d].m_visible){this.m_coins[d].p_CreateCoin(a,b,c);break}};
c_World.prototype.p_Update=function(){if(1==this.m_currentScreen)return null==this.m_unPauseTween||this.m_unPauseTween.p_IsTweening2()||(this.m_unPauseTween=null,this.m_buttonBack.p_SetVisible(!1),this.m_buttonPlay.p_SetVisible(!1),this.m_buttonMute.p_SetVisible(!1),this.m_currentScreen=0),null==this.m_exitGameTween||this.m_exitGameTween.p_IsTweening2()?-1:(this.m_exitGameTween=null,1);this.m_timeUp||0!=this.m_uiTimer.p_GetTime()||(this.m_textTimeUp.p_SetVisible(!0),this.m_textTimeUp.p_SetY(-150),
this.m_timeUpTween=this.m_textTimeUp.p_AddTween("y",-150,320,23,30,0,!1,!1),this.p_OutTween(),this.m_timeUp=!0,bb_assets_soundManager.p_Play2("soundTimeUp",0));if(null!=this.m_timeUpTween&&!this.m_timeUpTween.p_IsTweening2()){this.m_timeUpTween=null;if(this.m_timeUp2)return 0;this.m_timeUpTween=this.m_textTimeUp.p_AddTween("y",this.m_textTimeUp.m_y,790,0,15,30,!1,!1);this.m_timeUp2=!0}for(var a=0;a<this.m_bullets.length;a+=1)this.m_bullets[a].p_Update();if(this.m_tutorialMode)for(a=0;5>a;a+=1)this.m_fishes[a].p_Update();
else for(a=0;a<this.m_fishes.length;a+=1)this.m_fishes[a].p_Update();for(a=0;a<this.m_coins.length;a+=1)this.m_coins[a].p_Update();for(a=0;a<this.m_bullets.length;a+=1)if(this.m_bullet=this.m_bullets[a],this.m_bullet.p_Visible()&&!this.m_bullet.m_expandBullet)for(var b=0;b<this.m_fishes.length;b+=1)this.m_fish=this.m_fishes[b],this.m_fish.p_DetermineCollision(this.m_bullet)&&(this.m_bullet.m_expandBullet||(this.m_bullet.p_ExpandBullet(),b=-1),this.m_tutorialMode||(this.p_SpawnCoin(this.m_fish.m_x|
0,this.m_fish.m_y|0,this.m_fish.p_FishValue()),this.m_uiCoins.p_AddCoins(this.m_fish.p_FishValue()),this.m_statCollector.p_AddFish(this.m_fish.p_FishType())),bb_assets_soundManager.p_Play2("soundHit3",0));this.m_tutorialMode||this.m_uiTimer.p_Update();this.m_uiAmmo.p_Update();this.m_uiCoins.p_Update();return-1};c_World.prototype.p_GetScore=function(){return this.m_uiCoins.p_GetScore()};c_World.prototype.p_GetStats=function(){return this.m_statCollector.p_GetStats()};
c_World.prototype.p_Draw5=function(){for(var a=0;a<this.m_bullets.length;a+=1)this.m_bullets[a].p_Draw5();this.m_cannon.p_Draw5();for(a=0;a<this.m_fishes.length;a+=1)this.m_fishes[a].p_Draw5();this.m_uiTimer.p_Draw5();this.m_uiCoins.p_Draw5();this.m_uiAmmo.p_Draw5();this.m_buttonPause.p_Draw2(0,0);for(a=0;a<this.m_coins.length;a+=1)this.m_coins[a].p_Draw5();this.m_textTimeUp.p_IsVisible()&&this.m_textTimeUp.p_Draw2(0,0);this.m_buttonBack.p_Draw2(0,0);this.m_buttonPlay.p_Draw2(0,0);this.m_buttonMute.p_Draw2(0,
0);this.m_tutorialMode&&this.m_textHowtoPlay.p_Draw2(0,0);0==(0==bb_fishingjoy_distributionVersion?1:0)&&this.m_publisherLogo.p_Draw2(0,0)};function bb_assets_TutorialDone2(a){bb_assets_tutorialDone=a;bb_assets_SaveSettings()}function bb_assets_TutorialDone3(){return bb_assets_tutorialDone}function c_Cannon(){c_DynamicObject.call(this);this.m_cannonImage=null}c_Cannon.prototype=extend_class(c_DynamicObject);
c_Cannon.m_new=function(){c_DynamicObject.m_new.call(this);this.m_x=427;this.m_y=740;this.m_cannonImage=bb_frameworklite_diddyGame.m_images.p_Find("cannon");return this};c_Cannon.prototype.p_Reset2=function(){this.m_rotation=90};c_Cannon.prototype.p_InTween=function(){bb_assets_tweenSystem.p_AddTween2(this,"y",740,620,0,15,0,!1,!1)};c_Cannon.prototype.p_OutTween=function(){bb_assets_tweenSystem.p_AddTween2(this,"y",this.m_y,1260,0,30,0,!1,!1)};
c_Cannon.prototype.p_DetermineRotation=function(a,b){this.m_rotation=-(Math.atan2(b-this.m_y|0,a-this.m_x|0)*R2D)|0};c_Cannon.prototype.p_UnPauseTween=function(){bb_assets_tweenSystem.p_AddTween2(this,"y",740,620,0,15,0,!1,!1)};c_Cannon.prototype.p_Draw5=function(){this.m_cannonImage.p_Draw(bb_frameworklite_CVR(this.m_x|0),bb_frameworklite_CVR(this.m_y|0),this.m_rotation,1,1,0)};
function c_Bullet(){c_DynamicObject.call(this);this.m_fishnetImage=this.m_bombImage=null;this.m_visible=!1;this.m_size=0;this.m_expandBullet=!1;this.m_velocityY=this.m_velocityX=0;this.m_bulletTween=null;this.m_rotationS=4}c_Bullet.prototype=extend_class(c_DynamicObject);c_Bullet.m_new=function(){c_DynamicObject.m_new.call(this);this.m_bombImage=bb_frameworklite_diddyGame.m_images.p_Find("bomb");this.m_fishnetImage=bb_frameworklite_diddyGame.m_images.p_Find("fishNet");return this};
c_Bullet.prototype.p_Reset2=function(){this.m_visible=!1};c_Bullet.prototype.p_CreateBullet=function(a,b){this.m_x=427;this.m_y=620;this.m_size=24;this.m_expandBullet=!1;this.m_visible=!0;var c=a-this.m_x|0,d=b-this.m_y|0,e=10/Math.sqrt(c*c+d*d);this.m_velocityX=c*e|0;this.m_velocityY=d*e|0;c=Math.atan2(d,c)*R2D|0;this.m_x+=64*Math.cos(c*D2R);this.m_y+=64*Math.sin(c*D2R)};
c_Bullet.prototype.p_Update=function(){null==this.m_bulletTween||this.m_bulletTween.p_IsTweening2()||(this.m_bulletTween=null,this.m_visible=!1);!this.m_expandBullet&&(this.m_x+=this.m_velocityX,this.m_y+=this.m_velocityY,this.m_rotation+=this.m_rotationS,1054<this.m_x||-200>this.m_x||690<this.m_y||-50>this.m_y)&&(this.m_visible=!1)};c_Bullet.prototype.p_Visible=function(){return this.m_visible};
c_Bullet.prototype.p_ExpandBullet=function(){this.m_expandBullet=!0;this.m_size*=2;this.m_bulletTween=bb_assets_tweenSystem.p_AddTween2(this,"timer",0,0,0,30,0,!1,!1);bb_assets_tweenSystem.p_AddTween2(this,"xScale",0.5,1,26,25,0,!1,!1);bb_assets_tweenSystem.p_AddTween2(this,"yScale",0.5,1,26,25,0,!1,!1);this.m_rotation=bb_random_Rnd2(0,180)|0};
c_Bullet.prototype.p_Draw5=function(){this.m_visible&&(this.m_expandBullet?this.m_fishnetImage.p_Draw(bb_frameworklite_CVR(this.m_x|0),bb_frameworklite_CVR(this.m_y|0),this.m_rotation,this.m_xScale,this.m_yScale,0):this.m_bombImage.p_Draw(bb_frameworklite_CVR(this.m_x|0),bb_frameworklite_CVR(this.m_y|0),this.m_rotation,1,1,0))};
function c_Fish(){c_DynamicObject.call(this);this.m_spawningFish=this.m_visible=!1;this.m_availableFishes=[];this.m_explosionImage=null;this.m_velocityY=this.m_velocityX=this.m_spawnTime=0;this.m_explosionTween=null;this.m_showExplosion=!1;this.m_size=this.m_fishValue=this.m_fishType=this.m_prevOffset=this.m_orgY=this.m_sineStep=this.m_currentOffset=this.m_sineAmplitude=this.m_sineTime=0}c_Fish.prototype=extend_class(c_DynamicObject);
c_Fish.m_new=function(a){c_DynamicObject.m_new.call(this);this.m_visible=!1;this.m_spawningFish=!0;this.m_availableFishes=a;this.m_explosionImage=bb_frameworklite_diddyGame.m_images.p_Find("explosion");return this};c_Fish.m_new2=function(){c_DynamicObject.m_new.call(this);return this};c_Fish.prototype.p_Reset2=function(){this.m_visible=!1;this.m_spawningFish=!0;this.m_spawnTime=bb_random_Rnd2(60,210)|0};
c_Fish.prototype.p_OutFish=function(){this.m_spawningFish=!1;this.m_velocityX*=6;this.m_velocityY*=6};c_Fish.prototype.p_SpawningFish=function(a){this.m_spawningFish=a};c_Fish.prototype.p_CreateCollisionBox=function(){this.m_size=this.m_availableFishes[this.m_fishType].m_w>this.m_availableFishes[this.m_fishType].m_h?0.85*this.m_availableFishes[this.m_fishType].m_w2|0:0.85*this.m_availableFishes[this.m_fishType].m_h2|0;"_Lowest"==bb_assets_assetSize&&(this.m_size*=2)};
c_Fish.prototype.p_DetermineFishType=function(){var a=bb_random_Rnd2(0,100)|0;15>a?(this.m_fishType=0,this.m_fishValue=1):28>a?(this.m_fishType=1,this.m_fishValue=2):41>a?(this.m_fishType=2,this.m_fishValue=4):53>a?(this.m_fishType=3,this.m_fishValue=6):64>a?(this.m_fishType=4,this.m_fishValue=8):74>a?(this.m_fishType=5,this.m_fishValue=10):82>a?(this.m_fishType=6,this.m_fishValue=15):89>a?(this.m_fishType=7,this.m_fishValue=20):95>a?(this.m_fishType=8,this.m_fishValue=25):(this.m_fishType=9,this.m_fishValue=
30);this.p_CreateCollisionBox()};
c_Fish.prototype.p_DetermineLocation=function(){if(8==this.m_fishType)this.m_x=bb_random_Rnd2(50,804),this.m_y=-50,this.m_velocityX=0,this.m_velocityY=bb_random_Rnd2(4,8);else{var a=bb_random_Rnd2(0,2)|0;0==a?(this.m_x=-200,this.m_y=bb_random_Rnd2(75,540),this.m_velocityX=bb_random_Rnd2(4,8),this.m_velocityY=0):1==a&&(this.m_x=1054,this.m_y=bb_random_Rnd2(75,540),this.m_velocityX=bb_random_Rnd2(-8,-4),this.m_velocityY=0)}this.m_orgY=8!=this.m_fishType?this.m_y|0:this.m_x|0;this.m_rotation=0;this.m_sineTime=
bb_random_Rnd2(0,180);this.m_sineAmplitude=bb_random_Rnd2(30,40);this.m_sineStep=3;this.m_visible=!0;this.m_showExplosion=!1};
c_Fish.prototype.p_Update=function(){null==this.m_explosionTween||this.m_explosionTween.p_IsTweening2()||(this.m_explosionTween=null,this.m_visible=!1);if(!this.m_showExplosion&&this.m_visible){if(0!=this.m_velocityX?this.m_x+=this.m_velocityX:this.m_y+=this.m_velocityY,this.m_currentOffset=Math.sin(this.m_sineTime*D2R)*this.m_sineAmplitude,this.m_sineTime+=this.m_sineStep,360<this.m_sineTime&&(this.m_sineTime-=360),0!=this.m_velocityX?(this.m_y=this.m_orgY,this.m_y+=this.m_currentOffset):(this.m_x=
this.m_orgY,this.m_x+=this.m_currentOffset),this.m_rotation=0!=this.m_velocityX?-(Math.atan2(this.m_currentOffset-this.m_prevOffset,this.m_velocityX)*R2D)|0:-(Math.atan2(this.m_currentOffset-this.m_prevOffset,this.m_velocityY)*R2D)|0,this.m_prevOffset=this.m_currentOffset,1054<this.m_x||-200>this.m_x||840<this.m_y||-200>this.m_y)this.m_visible=!1}else!this.m_visible&&this.m_spawningFish&&(0!=this.m_spawnTime&&(this.m_spawnTime=this.m_spawnTime-bb_frameworklite_dt.m_delta|0,0>=this.m_spawnTime&&(this.m_spawnTime=
0,this.p_DetermineFishType(),this.p_DetermineLocation())),0==this.m_spawnTime&&(this.m_spawnTime=1))};c_Fish.prototype.p_ExplodeFish=function(){this.m_showExplosion=!0;this.m_explosionTween=bb_assets_tweenSystem.p_AddTween2(this,"timer",0,0,0,30,0,!1,!1);bb_assets_tweenSystem.p_AddTween2(this,"xScale",0.25,1,23,25,0,!1,!1);bb_assets_tweenSystem.p_AddTween2(this,"yScale",0.25,1,23,25,0,!1,!1);this.m_rotation=bb_random_Rnd2(0,360)|0};
c_Fish.prototype.p_DetermineCollision=function(a){return this.m_visible&&!this.m_showExplosion&&(this.m_x-a.m_x)*(this.m_x-a.m_x)+(this.m_y-a.m_y)*(this.m_y-a.m_y)<(this.m_size+a.m_size)*(this.m_size+a.m_size)?(this.p_ExplodeFish(),!0):!1};c_Fish.prototype.p_FishValue=function(){return this.m_fishValue};c_Fish.prototype.p_FishType=function(){return this.m_fishType};
c_Fish.prototype.p_Draw5=function(){this.m_visible&&(this.m_showExplosion?this.m_explosionImage.p_Draw(bb_frameworklite_CVR(this.m_x|0),bb_frameworklite_CVR(this.m_y|0),this.m_rotation,this.m_xScale,this.m_yScale,0):0<=this.m_velocityX?this.m_availableFishes[this.m_fishType].p_Draw(bb_frameworklite_CVR(this.m_x|0),bb_frameworklite_CVR(this.m_y|0),this.m_rotation,1,1,0):0>this.m_velocityX&&this.m_availableFishes[this.m_fishType].p_Draw(bb_frameworklite_CVR(this.m_x|0),bb_frameworklite_CVR(this.m_y|
0),this.m_rotation,1,-1,0))};function c_Coin(){c_DynamicObject.call(this);this.m_coinImages=[];this.m_visible=!1;this.m_coinTween3=this.m_coinTween=null;this.m_coinTween2=!1;this.m_valueIndex=this.m_value=0}c_Coin.prototype=extend_class(c_DynamicObject);c_Coin.m_new=function(a){c_DynamicObject.m_new.call(this);this.m_coinImages=a;return this};c_Coin.m_new2=function(){c_DynamicObject.m_new.call(this);return this};c_Coin.prototype.p_Reset2=function(){this.m_visible=!1};
c_Coin.prototype.p_Pause=function(){null!=this.m_coinTween&&this.m_coinTween.p_Paused(!0);null!=this.m_coinTween3&&this.m_coinTween3.p_Paused(!0)};c_Coin.prototype.p_UnPause=function(){null!=this.m_coinTween&&this.m_coinTween.p_Paused(!1);null!=this.m_coinTween3&&this.m_coinTween3.p_Paused(!1)};
c_Coin.prototype.p_Update=function(){null==this.m_coinTween||this.m_coinTween.p_IsTweening2()||(this.m_coinTween3=this.m_coinTween=null,this.m_coinTween2?(this.m_visible=!1,bb_assets_soundManager.p_Play2("soundCoin3",0)):(this.m_coinTween2=!0,this.m_coinTween3=bb_assets_tweenSystem.p_AddTween2(this,"x",this.m_x,720,0,30,5,!1,!1),this.m_coinTween=bb_assets_tweenSystem.p_AddTween2(this,"y",this.m_y,122,0,30,5,!1,!1)))};
c_Coin.prototype.p_CoinTween=function(){this.m_coinTween=bb_assets_tweenSystem.p_AddTween2(this,"y",this.m_y,this.m_y-48,0,30,0,!1,!1)};
c_Coin.prototype.p_CreateCoin=function(a,b,c){this.m_x=a;this.m_y=b;this.m_value=c;1==c?this.m_valueIndex=0:2==c?this.m_valueIndex=1:4==c?this.m_valueIndex=2:6==c?this.m_valueIndex=3:8==c?this.m_valueIndex=4:10==c?this.m_valueIndex=5:15==c?this.m_valueIndex=6:20==c?this.m_valueIndex=7:25==c?this.m_valueIndex=8:30==c&&(this.m_valueIndex=9);this.m_visible=!0;this.m_coinTween2=!1;this.p_CoinTween()};
c_Coin.prototype.p_Draw5=function(){this.m_visible&&this.m_coinImages[this.m_valueIndex].p_Draw(bb_frameworklite_CVR(this.m_x|0),bb_frameworklite_CVR(this.m_y|0),0,1,1,0)};function c_UICoins(){c_DynamicObject.call(this);this.m_numCoins=0;this.m_infoImage=null;this.m_addingCoins=0}c_UICoins.prototype=extend_class(c_DynamicObject);
c_UICoins.m_new=function(a){c_DynamicObject.m_new.call(this);this.m_numCoins=a;this.m_x=720;this.m_y=-518;this.m_infoImage=bb_frameworklite_diddyGame.m_images.p_Find("infoScore");return this};c_UICoins.m_new2=function(){c_DynamicObject.m_new.call(this);return this};c_UICoins.prototype.p_Reset2=function(){this.m_addingCoins=this.m_numCoins=0};c_UICoins.prototype.p_InTween=function(){bb_assets_tweenSystem.p_AddTween2(this,"y",-518,122,23,20,0,!1,!1)};
c_UICoins.prototype.p_OutTween=function(){bb_assets_tweenSystem.p_AddTween2(this,"y",this.m_y,-640+this.m_y,0,30,0,!1,!1)};c_UICoins.prototype.p_AddCoins=function(a){this.m_addingCoins+=a};c_UICoins.prototype.p_Update=function(){0<this.m_addingCoins?(this.m_numCoins+=1,this.m_addingCoins-=1):0>this.m_addingCoins&&(this.m_numCoins-=1,this.m_addingCoins+=1)};c_UICoins.prototype.p_GetScore=function(){return this.m_numCoins+this.m_addingCoins};
c_UICoins.prototype.p_Draw5=function(){this.m_infoImage.p_Draw(bb_frameworklite_CVR(this.m_x|0),bb_frameworklite_CVR(this.m_y|0),0,1,1,0);bb_assets_fontManager[0].p_Draw3(String(this.m_numCoins),bb_frameworklite_CVR(this.m_x+58|0),bb_frameworklite_CVR(this.m_y-20|0),0)};function c_UIAmmo(){c_DynamicObject.call(this);this.m_currentTime=this.m_numAmmo=0;this.m_infoImage=null}c_UIAmmo.prototype=extend_class(c_DynamicObject);
c_UIAmmo.m_new=function(){c_DynamicObject.m_new.call(this);this.m_numAmmo=8;this.m_currentTime=30;this.m_x=133;this.m_y=1222;this.m_infoImage=bb_frameworklite_diddyGame.m_images.p_Find("infoAmmo");return this};c_UIAmmo.prototype.p_Reset2=function(){this.m_numAmmo=8;this.m_currentTime=30};c_UIAmmo.prototype.p_InTween=function(){bb_assets_tweenSystem.p_AddTween2(this,"y",1222,582,23,20,0,!1,!1)};
c_UIAmmo.prototype.p_OutTween=function(){bb_assets_tweenSystem.p_AddTween2(this,"y",this.m_y,640+this.m_y,0,30,0,!1,!1)};c_UIAmmo.prototype.p_NumAmmo=function(){return this.m_numAmmo};c_UIAmmo.prototype.p_AddAmmo=function(a){this.m_numAmmo+=a};c_UIAmmo.prototype.p_Update=function(){0>=this.m_currentTime&&(this.m_currentTime=30,8>this.m_numAmmo&&(this.m_numAmmo+=1));8>this.m_numAmmo&&(this.m_currentTime=this.m_currentTime-bb_frameworklite_dt.m_delta|0)};
c_UIAmmo.prototype.p_Draw5=function(){this.m_infoImage.p_Draw(bb_frameworklite_CVR(this.m_x|0),bb_frameworklite_CVR(this.m_y|0),0,1,1,0);bb_assets_fontManager[0].p_Draw3(String(this.m_numAmmo),bb_frameworklite_CVR(this.m_x+65|0),bb_frameworklite_CVR(this.m_y-21|0),0)};
function c_UITimer(){c_DynamicObject.call(this);this.m_timeCurrent=0;this.m_infoImage=null;this.m_timeSeconds=this.m_timeMinutes=0;this.m_timeTable="00:00 00:01 00:02 00:03 00:04 00:05 00:06 00:07 00:08 00:09 00:10 00:11 00:12 00:13 00:14 00:15 00:16 00:17 00:18 00:19 00:20 00:21 00:22 00:23 00:24 00:25 00:26 00:27 00:28 00:29 00:30 00:31 00:32 00:33 00:34 00:35 00:36 00:37 00:38 00:39 00:40 00:41 00:42 00:43 00:44 00:45 00:46 00:47 00:48 00:49 00:50 00:51 00:52 00:53 00:54 00:55 00:56 00:57 00:58 00:59 01:00 01:01 01:02 01:03 01:04 01:05 01:06 01:07 01:08 01:09 01:10 01:11 01:12 01:13 01:14 01:15 01:16 01:17 01:18 01:19 01:20 01:21 01:22 01:23 01:24 01:25 01:26 01:27 01:28 01:29 01:30 01:31 01:32 01:33 01:34 01:35 01:36 01:37 01:38 01:39 01:40 01:41 01:42 01:43 01:44 01:45 01:46 01:47 01:48 01:49 01:50 01:51 01:52 01:53 01:54 01:55 01:56 01:57 01:58 01:59 02:00 02:01 02:02 02:03 02:04 02:05 02:06 02:07 02:08 02:09 02:10 02:11 02:12 02:13 02:14 02:15 02:16 02:17 02:18 02:19 02:20 02:21 02:22 02:23 02:24 02:25 02:26 02:27 02:28 02:29 02:30 02:31 02:32 02:33 02:34 02:35 02:36 02:37 02:38 02:39 02:40 02:41 02:42 02:43 02:44 02:45 02:46 02:47 02:48 02:49 02:50 02:51 02:52 02:53 02:54 02:55 02:56 02:57 02:58 02:59 03:00".split(" ");this.m_freeze=
!1}c_UITimer.prototype=extend_class(c_DynamicObject);c_UITimer.prototype.p_TimeToString=function(){this.m_timeMinutes=this.m_timeCurrent/6E4|0;this.m_timeSeconds=this.m_timeCurrent%6E4/1E3|0;0==this.m_timeMinutes&&0==this.m_timeSeconds&&(this.m_timeCurrent=0);return this.m_timeTable[60*this.m_timeMinutes+this.m_timeSeconds]};
c_UITimer.m_new=function(){c_DynamicObject.m_new.call(this);this.m_timeCurrent=18E4;this.m_x=142;this.m_y=-518;this.m_infoImage=bb_frameworklite_diddyGame.m_images.p_Find("infoTime");this.p_TimeToString();return this};c_UITimer.prototype.p_Reset2=function(){this.m_timeCurrent=18E4;this.m_freeze=!1};c_UITimer.prototype.p_InTween=function(){bb_assets_tweenSystem.p_AddTween2(this,"y",-518,122,23,20,0,!1,!1)};
c_UITimer.prototype.p_OutTween=function(){bb_assets_tweenSystem.p_AddTween2(this,"y",this.m_y,-640+this.m_y,0,30,0,!1,!1)};c_UITimer.prototype.p_GetTime=function(){return this.m_timeCurrent};c_UITimer.prototype.p_Update=function(){this.m_freeze||(this.m_timeCurrent=this.m_timeCurrent-bb_frameworklite_dt.m_frametime|0,0>this.m_timeCurrent&&(this.m_timeCurrent=0))};
c_UITimer.prototype.p_Draw5=function(){this.m_infoImage.p_Draw(bb_frameworklite_CVR(this.m_x|0),bb_frameworklite_CVR(this.m_y|0),0,1,1,0);bb_assets_fontManager[0].p_Draw3(this.p_TimeToString(),bb_frameworklite_CVR(this.m_x+52|0),bb_frameworklite_CVR(this.m_y-18|0),0)};function c_StatCollector(){Object.call(this);this.m_stats=[]}c_StatCollector.m_new=function(){this.m_stats=new_number_array(10);return this};
c_StatCollector.prototype.p_Reset2=function(){for(var a=0;a<this.m_stats.length;a+=1)this.m_stats[a]=0};c_StatCollector.prototype.p_AddFish=function(a){this.m_stats[a]+=1};c_StatCollector.prototype.p_GetStats=function(){return this.m_stats};function c_MenuWorld(){Object.call(this);this.m_outTween=this.m_highscoreInfo=this.m_gameLogo=this.m_developerLogo=this.m_publisherLogo=this.m_buttonMute=this.m_buttonMoreGames=this.m_buttonStart=null}
c_MenuWorld.m_new=function(){this.m_buttonStart=c_UIButton.m_new.call(new c_UIButton,427,410,385,96,bb_frameworklite_diddyGame.m_images.p_Find("buttonStart"),bb_frameworklite_diddyGame.m_images.p_Find("buttonStartSelected"));this.m_buttonMoreGames=c_UIButton.m_new.call(new c_UIButton,427,540,385,96,bb_frameworklite_diddyGame.m_images.p_Find("buttonMoreGames"),bb_frameworklite_diddyGame.m_images.p_Find("buttonMoreGamesSelected"));bb_assets_soundManager.p_MuteSound()?this.m_buttonMute=c_UIButton.m_new.call(new c_UIButton,
780,464,96,96,bb_frameworklite_diddyGame.m_images.p_Find("buttonMute"),bb_frameworklite_diddyGame.m_images.p_Find("buttonMuteSelected")):this.m_buttonMute=c_UIButton.m_new.call(new c_UIButton,780,464,96,96,bb_frameworklite_diddyGame.m_images.p_Find("buttonUnmute"),bb_frameworklite_diddyGame.m_images.p_Find("buttonUnmuteSelected"));this.m_publisherLogo=c_UIImage.m_new.call(new c_UIImage,bb_frameworklite_diddyGame.m_images.p_Find("publisherLogo"),116,52,0,1,1);this.m_developerLogo=c_UIImage.m_new.call(new c_UIImage,
bb_frameworklite_diddyGame.m_images.p_Find("developerLogo"),708,52,0,1,1);this.m_gameLogo=c_UIImage.m_new.call(new c_UIImage,bb_frameworklite_diddyGame.m_images.p_Find("gameLogo"),426,210,0,1,1);this.m_highscoreInfo=c_HighscoreInfo.m_new.call(new c_HighscoreInfo);this.m_buttonStart.p_SetY(1050);this.m_buttonMoreGames.p_SetY(1180);this.m_buttonMute.p_SetY(1104);this.m_publisherLogo.p_SetY(-588);this.m_developerLogo.p_SetY(-588);this.m_gameLogo.p_SetY(-430);return this};
c_MenuWorld.prototype.p_InTween=function(){bb_tweenfunctions_TweenSetBounce(1);bb_assets_soundManager.p_MuteSound()?this.m_buttonMute.p_SetImage2(bb_frameworklite_diddyGame.m_images.p_Find("buttonMute"),bb_frameworklite_diddyGame.m_images.p_Find("buttonMuteSelected")):this.m_buttonMute.p_SetImage2(bb_frameworklite_diddyGame.m_images.p_Find("buttonUnmute"),bb_frameworklite_diddyGame.m_images.p_Find("buttonUnmuteSelected"));this.m_buttonStart.p_AddTween("y",1050,410,23,30,0,!1,!1);this.m_buttonMoreGames.p_AddTween("y",
1180,540,23,30,0,!1,!1);this.m_buttonMute.p_AddTween("y",1104,464,23,30,0,!1,!1);this.m_highscoreInfo.p_SetScore(bb_assets_GetHighscore());this.m_highscoreInfo.p_InTween();this.m_publisherLogo.p_AddTween("y",-588,52,23,15,5,!1,!1);this.m_developerLogo.p_AddTween("y",-588,52,23,15,5,!1,!1);this.m_gameLogo.p_AddTween("y",-430,210,23,15,0,!1,!1)};
c_MenuWorld.prototype.p_OutTween=function(){this.m_buttonStart.p_AddTween("y",this.m_buttonStart.m_y,640+this.m_buttonStart.m_y,0,15,0,!1,!1);this.m_buttonMoreGames.p_AddTween("y",this.m_buttonMoreGames.m_y,640+this.m_buttonMoreGames.m_y,0,15,0,!1,!1);this.m_buttonMute.p_AddTween("y",this.m_buttonMute.m_y,640+this.m_buttonMute.m_y,0,15,0,!1,!1);this.m_highscoreInfo.p_OutTween();this.m_publisherLogo.p_AddTween("y",this.m_publisherLogo.m_y,-640+this.m_publisherLogo.m_y,0,15,0,!1,!1);this.m_developerLogo.p_AddTween("y",
this.m_developerLogo.m_y,-640+this.m_developerLogo.m_y,0,15,0,!1,!1);this.m_outTween=this.m_gameLogo.p_AddTween("y",this.m_gameLogo.m_y,-640+this.m_gameLogo.m_y,0,15,0,!1,!1)};
c_MenuWorld.prototype.p_ProcessInput=function(a){if(null!=a){this.m_publisherLogo.p_ProcessEvent2(a)==bb_uiImage_IMAGE_PRESSED&&0==(0==bb_fishingjoy_distributionVersion?1:0)&&(bb_assets_soundManager.p_Play2("soundClick",0),bb_functionslite_LaunchBrowser("http://www.a10.com",!0));this.m_buttonStart.p_ProcessEvent(a,0,0)==bb_uibutton_BUTTON_PRESSED&&(bb_assets_soundManager.p_Play2("soundClick",0),this.p_OutTween());if(this.m_buttonMoreGames.p_ProcessEvent(a,0,0)==bb_uibutton_BUTTON_PRESSED)return bb_assets_soundManager.p_Play2("soundClick",
0),1;this.m_buttonMute.p_ProcessEvent(a,0,0)==bb_uibutton_BUTTON_PRESSED&&(bb_assets_soundManager.p_MuteSound()?(this.m_buttonMute.p_SetImage2(bb_frameworklite_diddyGame.m_images.p_Find("buttonUnmute"),bb_frameworklite_diddyGame.m_images.p_Find("buttonUnmuteSelected")),bb_assets_soundManager.p_MuteSound2(!1)):(this.m_buttonMute.p_SetImage2(bb_frameworklite_diddyGame.m_images.p_Find("buttonMute"),bb_frameworklite_diddyGame.m_images.p_Find("buttonMuteSelected")),bb_assets_soundManager.p_MuteSound2(!0)),
bb_assets_soundManager.p_Play2("soundClick",0))}return-1};c_MenuWorld.prototype.p_Update=function(){return null==this.m_outTween||this.m_outTween.p_IsTweening2()?-1:(this.m_outTween=null,0)};c_MenuWorld.prototype.p_Draw5=function(){0==(0==bb_fishingjoy_distributionVersion?1:0)&&this.m_publisherLogo.p_Draw2(0,0);this.m_developerLogo.p_Draw2(0,0);this.m_gameLogo.p_Draw2(0,0);this.m_buttonStart.p_Draw2(0,0);this.m_buttonMoreGames.p_Draw2(0,0);this.m_buttonMute.p_Draw2(0,0);this.m_highscoreInfo.p_Draw5()};
function c_HighscoreInfo(){c_DynamicObject.call(this);this.m_infoImage=null;this.m_score=0}c_HighscoreInfo.prototype=extend_class(c_DynamicObject);c_HighscoreInfo.m_new=function(){c_DynamicObject.m_new.call(this);this.m_x=120;this.m_y=948;this.m_infoImage=bb_frameworklite_diddyGame.m_images.p_Find("highscoreInfo");return this};c_HighscoreInfo.prototype.p_SetScore=function(a){this.m_score=a};
c_HighscoreInfo.prototype.p_InTween=function(){bb_assets_tweenSystem.p_AddTween2(this,"y",948,308,23,30,0,!1,!1)};c_HighscoreInfo.prototype.p_OutTween=function(){bb_assets_tweenSystem.p_AddTween2(this,"y",308,948,0,15,0,!1,!1)};
c_HighscoreInfo.prototype.p_Draw5=function(){0!=this.m_score&&(this.m_infoImage.p_Draw(bb_frameworklite_CVR(this.m_x|0),bb_frameworklite_CVR(this.m_y|0),0,1,1,0),bb_assets_fontManager[0].p_Draw3(String(this.m_score),bb_frameworklite_CVR(this.m_x|0),bb_frameworklite_CVR(this.m_y|0),0))};
function c_EndWorld(){Object.call(this);this.m_publisherLogo=this.m_fishStats=this.m_textHighscore=this.m_textTotalScore=this.m_textFishesCaught=this.m_buttonBack=this.m_buttonMoreGames=null;this.m_totalScore=0;this.m_isHighscore=!1;this.m_outTween=null}
c_EndWorld.m_new=function(){this.m_buttonMoreGames=c_UIButton.m_new.call(new c_UIButton,209,576,385,96,bb_frameworklite_diddyGame.m_images.p_Find("buttonMoreGames"),bb_frameworklite_diddyGame.m_images.p_Find("buttonMoreGamesSelected"));this.m_buttonMoreGames.p_SetY(1216);this.m_buttonBack=c_UIButton.m_new.call(new c_UIButton,794,580,96,96,bb_frameworklite_diddyGame.m_images.p_Find("buttonBack"),bb_frameworklite_diddyGame.m_images.p_Find("buttonBackSelected"));this.m_buttonBack.p_SetY(1220);this.m_textFishesCaught=
c_UIImage.m_new.call(new c_UIImage,bb_frameworklite_diddyGame.m_images.p_Find("textFishesCaught"),540,-589,0,1,1);this.m_textTotalScore=c_UIImage.m_new.call(new c_UIImage,bb_frameworklite_diddyGame.m_images.p_Find("textTotalscore"),260,1090,0,1,1);this.m_textHighscore=c_UIImage.m_new.call(new c_UIImage,bb_frameworklite_diddyGame.m_images.p_Find("textHighscore"),260,450,0,1,1);this.m_textHighscore.p_SetXScale(0);this.m_textHighscore.p_SetYScale(0);this.m_textHighscore.p_AddTween("rotation",-10,10,
0,20,15,!0,!0);this.m_fishStats=c_FishStats.m_new.call(new c_FishStats);this.m_publisherLogo=c_UIImage.m_new.call(new c_UIImage,bb_frameworklite_diddyGame.m_images.p_Find("publisherLogo"),116,43,0,1,1);this.m_publisherLogo.p_SetY(-597);return this};c_EndWorld.prototype.p_SetScore=function(a){this.m_totalScore=a;this.m_isHighscore=!1;bb_assets_GetHighscore()<this.m_totalScore&&(bb_assets_SetHighscore(this.m_totalScore),this.m_isHighscore=!0)};c_EndWorld.prototype.p_SetStats=function(a){this.m_fishStats.p_Set5(a)};
c_EndWorld.prototype.p_InTween=function(){this.m_textFishesCaught.p_AddTween("y",-691,51,23,20,0,!1,!1);this.m_textTotalScore.p_AddTween("y",1120,450,23,20,0,!1,!1);this.m_buttonBack.p_AddTween("y",1220,580,23,20,0,!1,!1);this.m_buttonMoreGames.p_AddTween("y",1216,576,23,20,0,!1,!1);this.m_textHighscore.p_AddTween("xScale",0,1,23,20,15,!1,!1);this.m_textHighscore.p_AddTween("yScale",0,1,23,20,15,!1,!1);this.m_publisherLogo.p_AddTween("y",-597,43,23,20,0,!1,!1);this.m_fishStats.p_InTween()};
c_EndWorld.prototype.p_OutTween=function(){this.m_textFishesCaught.p_AddTween("y",51,-589,0,15,0,!1,!1);this.m_textTotalScore.p_AddTween("y",480,1120,0,15,0,!1,!1);this.m_buttonBack.p_AddTween("y",580,1220,0,15,0,!1,!1);this.m_buttonMoreGames.p_AddTween("y",576,1216,0,15,0,!1,!1);this.m_textHighscore.p_AddTween("xScale",1,0,0,10,0,!1,!1);this.m_outTween=this.m_textHighscore.p_AddTween("yScale",1,0,0,10,0,!1,!1);this.m_publisherLogo.p_AddTween("y",43,-597,0,30,0,!1,!1);this.m_fishStats.p_OutTween()};
c_EndWorld.prototype.p_ProcessInput=function(a){return null!=a&&(this.m_publisherLogo.p_ProcessEvent2(a)==bb_uiImage_IMAGE_PRESSED&&0==(0==bb_fishingjoy_distributionVersion?1:0)&&(bb_assets_soundManager.p_Play2("soundClick",0),bb_functionslite_LaunchBrowser("http://www.a10.com",!0)),this.m_buttonMoreGames.p_ProcessEvent(a,0,0)==bb_uibutton_BUTTON_PRESSED&&(bb_assets_soundManager.p_Play2("soundClick",0),0==(0==bb_fishingjoy_distributionVersion?1:0)?bb_functionslite_LaunchBrowser("http://www.a10.com",
!0):bb_functionslite_LaunchBrowser("http://www.shockblastapps.com",!0)),this.m_buttonBack.p_ProcessEvent(a,0,0)==bb_uibutton_BUTTON_PRESSED)?(bb_assets_soundManager.p_Play2("soundClick",0),this.p_OutTween(),0):-1};c_EndWorld.prototype.p_Update=function(){return null==this.m_outTween||this.m_outTween.p_IsTweening2()?-1:(this.m_outTween=null,0)};
c_EndWorld.prototype.p_Draw5=function(){this.m_textFishesCaught.p_Draw2(0,0);bb_assets_fontManager[1].p_Draw3(String(this.m_totalScore),bb_frameworklite_CVR(660),bb_frameworklite_CVR(this.m_textTotalScore.m_y-52|0),0);this.m_isHighscore?this.m_textHighscore.p_Draw2(0,0):this.m_textTotalScore.p_Draw2(0,0);this.m_fishStats.p_Draw5();this.m_buttonMoreGames.p_Draw2(0,0);this.m_buttonBack.p_Draw2(0,0);0==(0==bb_fishingjoy_distributionVersion?1:0)&&this.m_publisherLogo.p_Draw2(0,0)};
function c_FishStats(){c_DynamicObject.call(this);this.m_stats=[];this.m_nameFish="fish1 fish2 fish3 fish4 fish5 fish6 fish7 fish8 fish9 fish10".split(" ");this.m_xFish=[70,64,70,70,326,318,316,576,578,580];this.m_yFish=[136,206,274,346,154,236,320,136,234,336];this.m_xText=[188,188,188,188,436,436,436,686,686,686];this.m_yText=[112,184,256,326,134,218,290,114,206,318]}c_FishStats.prototype=extend_class(c_DynamicObject);c_FishStats.m_new=function(){c_DynamicObject.m_new.call(this);this.m_y=-640;return this};
c_FishStats.prototype.p_Set5=function(a){this.m_stats=a};c_FishStats.prototype.p_InTween=function(){bb_assets_tweenSystem.p_AddTween2(this,"y",-640,0,23,20,0,!1,!1)};c_FishStats.prototype.p_OutTween=function(){bb_assets_tweenSystem.p_AddTween2(this,"y",0,-640,0,15,0,!1,!1)};
c_FishStats.prototype.p_Draw5=function(){for(var a=0;a<this.m_nameFish.length;a+=1)bb_frameworklite_diddyGame.m_images.p_Find(this.m_nameFish[a]).p_Draw(bb_frameworklite_CVR(this.m_xFish[a]),bb_frameworklite_CVR(this.m_y+this.m_yFish[a]|0),0,1,1,0),bb_assets_fontManager[0].p_Draw3("x"+String(this.m_stats[a]),bb_frameworklite_CVR(this.m_xText[a]),bb_frameworklite_CVR(this.m_y+this.m_yText[a]|0),0)};
function c_Aesthetic(){c_DynamicObject.call(this);this.m_id=0;this.m_aestheticImages=[];this.m_startSide=this.m_aestheticType=0;this.m_visible=!1}c_Aesthetic.prototype=extend_class(c_DynamicObject);
c_Aesthetic.prototype.p_DetermineType=function(){if(0==this.m_id){var a=this.m_aestheticType=0,b=0,c=bb_random_Rnd2(0,2)|0,b=bb_random_Rnd2(120,210)|0;0==c?(this.m_x=-300,bb_assets_tweenSystem.p_AddTween2(this,"x",this.m_x,1154,0,b,b/2|0,!1,!1),a=1054,this.m_startSide=0):1==c&&(this.m_x=1204,bb_assets_tweenSystem.p_AddTween2(this,"x",this.m_x,-300,0,b,b/2|0,!1,!1),a=-1054,this.m_startSide=1);this.m_y=bb_random_Rnd2(100,540);c=bb_random_Rnd2(100,540)|0;bb_assets_tweenSystem.p_AddTween2(this,"y",this.m_y,
c,0,b,b/2|0,!1,!1);b=c-this.m_y|0;this.m_rotation=-(Math.atan2(b,a)*R2D)|0}else a=bb_random_Rnd2(0,2)|0,0==a?this.m_aestheticType=1:1==a&&(this.m_aestheticType=2),this.m_x=bb_random_Rnd2(100,754),this.m_y=690,bb_assets_tweenSystem.p_AddTween2(this,"y",this.m_y,-50,0,bb_random_Rnd2(150,300)|0,bb_random_Rnd2(30,90)|0,!1,!1)};c_Aesthetic.m_new=function(a,b){c_DynamicObject.m_new.call(this);this.m_id=a;this.m_aestheticImages=b;this.p_DetermineType();return this};
c_Aesthetic.m_new2=function(){c_DynamicObject.m_new.call(this);return this};c_Aesthetic.prototype.p_Update=function(){this.p_IsTweening2()||this.p_DetermineType();this.m_visible=-300<this.m_x&&1154>this.m_x&&-50<this.m_y&&690>this.m_y?!0:!1};
c_Aesthetic.prototype.p_Draw5=function(){this.m_visible&&(0==this.m_startSide?this.m_aestheticImages[this.m_aestheticType].p_Draw(bb_frameworklite_CVR(this.m_x|0),bb_frameworklite_CVR(this.m_y|0),this.m_rotation,1,1,0):1==this.m_startSide&&this.m_aestheticImages[this.m_aestheticType].p_Draw(bb_frameworklite_CVR(this.m_x|0),bb_frameworklite_CVR(this.m_y|0),this.m_rotation,1,-1,0))};
function bb_random_Rnd(){bb_random_Seed=1664525*bb_random_Seed+1013904223|0;return(bb_random_Seed>>8&16777215)/16777216}function bb_random_Rnd2(a,b){return bb_random_Rnd3(b-a)+a}function bb_random_Rnd3(a){return bb_random_Rnd()*a}function bb_frameworklite_CVR(a){return a*bb_frameworklite_diddyGame.p_AssetRatio2()|0}
function bb_graphics_DrawImageRect(a,b,c,d,e,h,f,k){k=a.m_frames[k];bb_graphics_context.p_Validate();bb_graphics_renderDevice.DrawSurface2(a.m_surface,-a.m_tx+b,-a.m_ty+c,d+k.m_x,e+k.m_y,h,f);return 0}function bb_graphics_Rotate(a){bb_graphics_Transform(Math.cos(a*D2R),-Math.sin(a*D2R),Math.sin(a*D2R),Math.cos(a*D2R),0,0);return 0}
function bb_graphics_DrawImageRect2(a,b,c,d,e,h,f,k,l,g,q){q=a.m_frames[q];bb_graphics_PushMatrix();bb_graphics_Translate(b,c);bb_graphics_Rotate(k);bb_graphics_Scale(l,g);bb_graphics_Translate(-a.m_tx,-a.m_ty);bb_graphics_context.p_Validate();bb_graphics_renderDevice.DrawSurface2(a.m_surface,0,0,d+q.m_x,e+q.m_y,h,f);bb_graphics_PopMatrix();return 0}
function bb_graphics_DrawImage(a,b,c,d){d=a.m_frames[d];bb_graphics_context.p_Validate();0!=(a.m_flags&65536)?bb_graphics_renderDevice.DrawSurface(a.m_surface,b-a.m_tx,c-a.m_ty):bb_graphics_renderDevice.DrawSurface2(a.m_surface,b-a.m_tx,c-a.m_ty,d.m_x,d.m_y,a.m_width,a.m_height);return 0}
function bb_graphics_DrawImage2(a,b,c,d,e,h,f){f=a.m_frames[f];bb_graphics_PushMatrix();bb_graphics_Translate(b,c);bb_graphics_Rotate(d);bb_graphics_Scale(e,h);bb_graphics_Translate(-a.m_tx,-a.m_ty);bb_graphics_context.p_Validate();0!=(a.m_flags&65536)?bb_graphics_renderDevice.DrawSurface(a.m_surface,0,0):bb_graphics_renderDevice.DrawSurface2(a.m_surface,0,0,f.m_x,f.m_y,a.m_width,a.m_height);bb_graphics_PopMatrix();return 0}function c_MapKeys(){Object.call(this);this.m_map=null}
c_MapKeys.m_new=function(a){this.m_map=a;return this};c_MapKeys.m_new2=function(){return this};c_MapKeys.prototype.p_ObjectEnumerator=function(){return c_KeyEnumerator.m_new.call(new c_KeyEnumerator,this.m_map.p_FirstNode())};function c_KeyEnumerator(){Object.call(this);this.m_node=null}c_KeyEnumerator.m_new=function(a){this.m_node=a;return this};c_KeyEnumerator.m_new2=function(){return this};c_KeyEnumerator.prototype.p_HasNext=function(){return null!=this.m_node};
c_KeyEnumerator.prototype.p_NextObject=function(){var a=this.m_node;this.m_node=this.m_node.p_NextNode();return a.m_key};function bb_asyncevent_RemoveAsyncEventSource(a){a==bb_asyncevent__current&&(bb_asyncevent__current=null);bb_asyncevent__sources.p_RemoveEach(a)}var bb_tweenfunctions_Bounce=0;function bb_tweenfunctions_TweenSetBounce(a){bb_tweenfunctions_Bounce=a}function bb_assets_GetHighscore(){return bb_assets_highScore}
function bb_tweenfunctions_Tweening(a,b,c,d,e){null==bb_tweenfunctions_TweenFunc[a]&&error("Tween: TweenSystem has not been initialized with InitTweenSystem()");return bb_tweenfunctions_TweenFunc[a].p_Do(b,c,d,e)}function bb_assets_SetHighscore(a){bb_assets_highScore=a;bb_assets_SaveSettings()}function bb_audio_LoadSound(a){a=bb_audio_device.LoadSample(bb_data_FixDataPath(a));return null!=a?c_Sound.m_new.call(new c_Sound,a):null}var bb_tweenfunctions_Power=0,bb_tweenfunctions_Amplitude=0;
function bbInit(){bb_app__delegate=bb_app__app=null;bb_app__game=BBGame.Game();bb_graphics_device=bb_frameworklite_diddyGame=null;bb_graphics_context=c_GraphicsContext.m_new.call(new c_GraphicsContext);c_Image.m_DefaultFlags=0;bb_graphics_renderDevice=bb_input_device=bb_audio_device=null;bb_random_Seed=1234;bb_frameworklite_SCREEN_HEIGHT=bb_frameworklite_SCREEN_WIDTH=bb_frameworklite_DEVICE_HEIGHT=bb_frameworklite_DEVICE_WIDTH=0;bb_frameworklite_SCREENY_RATIO=bb_frameworklite_SCREENX_RATIO=1;bb_frameworklite_dt=
null;bb_frameworklite_defaultFadeTime=600;bb_frameworklite_SCREEN_HEIGHT2=bb_frameworklite_SCREEN_WIDTH2=bb_app__updateRate=0;bb_fishingjoy_preloaderScreen=c_PreloaderScreen.m_new.call(new c_PreloaderScreen);bb_assets_inputManager=null;bb_touchevent_TOUCH_DOWN=0;bb_touchevent_TOUCH_MOVE=2;bb_touchevent_TOUCH_FLING=5;bb_touchevent_TOUCH_UP=1;bb_assets_assetSize="";bb_assets_atlasLoader=null;bb_asyncevent__sources=c_Stack.m_new.call(new c_Stack);bb_assets_fontManager=[];bb_assets_soundManager=null;
bb_tweenfunctions_TweenFunc=new_object_array(31);bb_assets_settings=bb_assets_tweenSystem=null;bb_assets_tutorialDone=!1;bb_assets_highScore=0;bb_asyncevent__current=null;c_Stack.m_NIL=null;bb_uibutton_BUTTON_PRESSED=1;bb_fishingjoy_distributionVersion=0;bb_fishingjoy_splashScreen=c_SplashScreen.m_new.call(new c_SplashScreen);bb_fishingjoy_gameScreen=c_GameScreen.m_new.call(new c_GameScreen);bb_uiImage_IMAGE_PRESSED=1;bb_tweenfunctions_Bounce=1.70158;bb_tweenfunctions_Amplitude=bb_tweenfunctions_Power=
1};var mojoHtml5Gl=function(a){document.addEventListener("DOMContentLoaded",function(){if(window.WebGLRenderingContext!==a)try{new b(document.getElementById("GameCanvas"))}catch(c){}},!1);var b=function(b){this.api=a;this.canvas=b;this.gl=a;this.width=b.width;this.height=b.height;this.maxTextureSize=this.textureShader=this.simpleShader=a;b.gl2d=this;var e=this.gl=b.getContext("webgl",{alpha:!1})||b.getContext("experimental-webgl",{alpha:!1});if(e!==a&&null!==e){try{this.simpleShader=this.loadShaders(!1),
this.textureShader=this.loadShaders(!0)}catch(h){throw h;}this.api=new c(this);b.getContext=this.api;b.getContext=function(a,b){return function(c){return"webgl"===c||"experimental-webgl"===c?b:a}}(this.api,this.gl)}};b.prototype.getFragmentShaderSource=function(a){var b=[];b.push("precision mediump float;","varying vec4 vColor;");a&&b.push("varying vec2 vTextureCoord;","uniform sampler2D uSampler;");b.push("void main(void) {");a?b.push("gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor;"):
b.push("gl_FragColor = vColor;");b.push("}");return b.join("\n")};b.prototype.getVertexShaderSource=function(a){var b=[];b.push("attribute vec4 aVertexPosition;","attribute vec4 aVertexColor;","varying vec4 vColor;","const mat4 pMatrix = mat4("+2/this.canvas.width+",0,0,0, 0,"+-2/this.canvas.height+",0,0, 0,0,1.0,1.0, -1.0,1.0,0,0);");a&&b.push("varying vec2 vTextureCoord;");b.push("void main(void) {","vec3 position = vec3(aVertexPosition.x, aVertexPosition.y, 1.0);","gl_Position = pMatrix * vec4(position, 1.0);",
"vColor = aVertexColor;");a&&b.push("vTextureCoord = aVertexPosition.zw;");b.push("}");return b.join("\n")};b.prototype.loadShaders=function(a){var b=this.gl,c=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(c,this.getFragmentShaderSource(a));b.compileShader(c);if(!b.getShaderParameter(c,b.COMPILE_STATUS))throw"fragment shader error: "+b.getShaderInfoLog(c);var f=b.createShader(b.VERTEX_SHADER);b.shaderSource(f,this.getVertexShaderSource(a));b.compileShader(f);if(!b.getShaderParameter(f,b.COMPILE_STATUS))throw"vertex shader error: "+
b.getShaderInfoLog(f);a=this.shaderProgram=b.createProgram();b.attachShader(a,c);b.attachShader(a,f);b.linkProgram(a);if(!b.getProgramParameter(a,b.LINK_STATUS))throw"Could not initialise shaders.";a.vertexPositionAttribute=b.getAttribLocation(a,"aVertexPosition");b.enableVertexAttribArray(a.vertexPositionAttribute);a.vertexColorAttribute=b.getAttribLocation(a,"aVertexColor");b.enableVertexAttribArray(a.vertexColorAttribute);a.uColor=b.getUniformLocation(a,"uColor");a.uSampler=b.getUniformLocation(a,
"uSampler");return a};var c=function(b){function c(a,b){(m.vcount+b>q||v.next===n)&&h();v.last=A[v.next];v.next+=1;v.last.type=a;v.last.count=b;v.last.texture=null;m.vpointer=4*m.vcount;m.cpointer=4*m.vcount;m.vcount+=b;for(var d=m.cpointer,e=0;e<b;e++)m.cdata[d]=t,m.cdata[d+1]=s,m.cdata[d+2]=x,m.cdata[d+3]=D,d+=4}function h(){if(0!==m.vcount){var a=null,b=0,c;switch(u){case w:g.useProgram(C);g.bindBuffer(g.ARRAY_BUFFER,m.vbuffer);g.bufferData(g.ARRAY_BUFFER,m.vdata,g.DYNAMIC_DRAW);g.vertexAttribPointer(C.vertexPositionAttribute,
4,g.FLOAT,!1,0,0);g.bindBuffer(g.ARRAY_BUFFER,m.cbuffer);g.bufferData(g.ARRAY_BUFFER,m.cdata,g.DYNAMIC_DRAW);g.vertexAttribPointer(C.vertexColorAttribute,4,g.FLOAT,!1,0,0);for(var d=0;d<v.next;d++)c=A[d],g.drawArrays(c.type,b,c.count),b+=c.count;break;case p:for(g.useProgram(y),g.bindBuffer(g.ARRAY_BUFFER,m.vbuffer),g.bufferData(g.ARRAY_BUFFER,m.vdata,g.DYNAMIC_DRAW),g.vertexAttribPointer(y.vertexPositionAttribute,4,g.FLOAT,!1,0,0),g.bindBuffer(g.ARRAY_BUFFER,m.cbuffer),g.bufferData(g.ARRAY_BUFFER,
m.cdata,g.DYNAMIC_DRAW),g.vertexAttribPointer(y.vertexColorAttribute,4,g.FLOAT,!1,0,0),d=0;d<v.next;d++)c=A[d],a!==c.texture&&(g.bindTexture(g.TEXTURE_2D,c.texture),g.activeTexture(g.TEXTURE0),g.uniform1i(y.uSampler,0),a=c.texture),g.drawArrays(c.type,b,c.count),b+=c.count}m.vcount=0;v.next=0}}function f(b,d,h,f,k,l,q,p){c(g.TRIANGLE_FAN,4);var n=b,u=b+h;h=b+h;var s=d,t=d,v=d+f;d+=f;if(r.tformed){f=n;var w=u,x=h,y=b,n=f*r.ix+s*r.jx+r.tx,s=f*r.iy+s*r.jy+r.ty,u=w*r.ix+t*r.jx+r.tx,t=w*r.iy+t*r.jy+r.ty;
h=x*r.ix+v*r.jx+r.tx;v=x*r.iy+v*r.jy+r.ty;b=y*r.ix+d*r.jx+r.tx;d=y*r.iy+d*r.jy+r.ty}f=m.vpointer;k===a?(m.vdata[f]=n,m.vdata[f+1]=s,m.vdata[f+2]=0,m.vdata[f+3]=0,m.vdata[f+4]=u,m.vdata[f+5]=t,m.vdata[f+6]=1,m.vdata[f+7]=0,m.vdata[f+8]=h,m.vdata[f+9]=v,m.vdata[f+10]=1,m.vdata[f+11]=1,m.vdata[f+12]=b,m.vdata[f+13]=d,m.vdata[f+14]=0,m.vdata[f+15]=1):(m.vdata[f]=n,m.vdata[f+1]=s,m.vdata[f+2]=k,m.vdata[f+3]=l,m.vdata[f+4]=u,m.vdata[f+5]=t,m.vdata[f+6]=q,m.vdata[f+7]=l,m.vdata[f+8]=h,m.vdata[f+9]=v,m.vdata[f+
10]=q,m.vdata[f+11]=p,m.vdata[f+12]=b,m.vdata[f+13]=d,m.vdata[f+14]=k,m.vdata[f+15]=p)}function k(c){if(c.texture===a||null===c.texture){c.texture=g.createTexture();var e="undefined"===typeof CFG_MOJO_IMAGE_FILTERING_ENABLED||"true"===CFG_MOJO_IMAGE_FILTERING_ENABLED||"1"===CFG_MOJO_IMAGE_FILTERING_ENABLED;if(c.width>b.maxTextureSize||c.height>b.maxTextureSize){var f=document.createElement("canvas");f.width=c.width>b.maxTextureSize?b.maxTextureSize:c.width;f.height=c.height>b.maxTextureSize?b.maxTextureSize:
c.height;f.getContext("2d").drawImage(c,0,0,c.width,c.height,0,0,f.width,f.height);c=f}g.bindTexture(g.TEXTURE_2D,c.texture);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,c);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);e?g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR):g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST);0<c.width&&0===(c.width-1&c.width)&&0<c.height&&0===(c.height-1&c.height)?
(e?g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR_MIPMAP_LINEAR):g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST_MIPMAP_NEAREST),g.generateMipmap(g.TEXTURE_2D)):e?g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR):g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST)}}function l(a,b,c){this.type=a;this.count=b;this.texture=c}"debug"===CFG_CONFIG&&print("WebGL enabled");var g=b.gl;b.width=-1;b.height=-1;b.maxTextureSize=g.getParameter(g.MAX_TEXTURE_SIZE);0<b.maxTextureSize&&
0===(b.maxTextureSize-1&b.maxTextureSize)||(b.maxTextureSize+=1);for(var q=2048,n=q/2|0,t=1,s=1,x=1,D=1,B=0,w=0,p=1,u=w,r=null,C=b.simpleShader,y=b.textureShader,m={vdata:new Float32Array(4*q),cdata:new Float32Array(4*q),vcount:0,vpointer:0,cpointer:0,vbuffer:g.createBuffer(),cbuffer:g.createBuffer()},v={last:new l(-1,0,null),next:0},A=Array(n),E=0;E<A.length;E++)A[E]=new l(-1,0,null);g.clearColor(0,0,0,1);g.clear(g.COLOR_BUFFER_BIT);g.enable(g.BLEND);g.blendFunc(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA);
gxtkGraphics.prototype.LoadSurface=function(a){var b=this.game;if(0!=b.GetMetaData(a,"type").indexOf("image/"))return null;b.IncLoading();var c=new Image;c.onload=function(){k(this);b.DecLoading()};c.meta_width=parseInt(b.GetMetaData(a,"width"));c.meta_height=parseInt(b.GetMetaData(a,"height"));c.src=b.PathToUrl(a);return new gxtkSurface(c,this)};BBAsyncImageLoaderThread.prototype.Start=function(){var a=this,b=new Image;b.crossOrigin="";b.onload=function(c){b.meta_width=b.width;b.meta_height=b.height;
a._surface=new gxtkSurface(b,a._device);k(this);a.running=!1};b.onerror=function(b){a._surface=null;a.running=!1};a.running=!0;b.src=BBGame.Game().PathToUrl(a._path)};gxtkSurface.prototype.Discard=function(){this.image&&(g.deleteTexture(this.image.texture),this.image=null)};gxtkGraphics.prototype.CreateSurface=function(a,b){var c=document.createElement("canvas");c.width=a;c.height=b;c.meta_width=a;c.meta_height=b;k(c);c.complete=!0;var d=new gxtkSurface(c,this);d.gc=c.getContext("2d");return d};gxtkGraphics.prototype.BeginRender=
function(){if(!this.gc)return 0;r=this;if(this.game.GetLoading())return 2;if(b.width!==b.canvas.width||b.height!==b.canvas.height)C=b.simpleShader=b.loadShaders(!1),y=b.textureShader=b.loadShaders(!0),this.width=b.width=b.canvas.width,this.height=b.height=b.canvas.height,g.viewport(0,0,this.width,this.height);return 1};gxtkGraphics.prototype.EndRender=function(){h()};gxtkGraphics.prototype.SetAlpha=function(a){D=a};gxtkGraphics.prototype.SetColor=function(a,b,c){t=a/255;s=b/255;x=c/255};gxtkGraphics.prototype.SetBlend=
function(a){if(B!==a){h();switch(a){case 1:g.blendFunc(g.SRC_ALPHA,g.ONE);break;default:g.blendFunc(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA)}B=a}};gxtkGraphics.prototype.SetScissor=function(a,b,c,d){h();0!==a||0!==b||c!==this.width||d!==this.height?(g.enable(g.SCISSOR_TEST),b=this.height-b-d,g.scissor(a,b,c,d)):g.disable(g.SCISSOR_TEST)};gxtkGraphics.prototype.SetMatrix=function(a,b,c,d,e,f){this.ix=a;this.iy=b;this.jx=c;this.jy=d;this.tx=e;this.ty=f;this.tformed=1!==a||0!==b||0!==c||1!==d||0!==e||0!==
f};gxtkGraphics.prototype.Cls=function(a,b,c){g.clearColor(a/255,b/255,c/255,1);g.clear(g.COLOR_BUFFER_BIT)};gxtkGraphics.prototype.DrawPoint=function(a,b){u!==w&&(h(),u=w);c(g.POINTS,1);if(this.tformed){var d=a;a=d*this.ix+b*this.jx+this.tx;b=d*this.iy+b*this.jy+this.ty}d=m.vpointer;m.vdata[d]=a;m.vdata[d+1]=b};gxtkGraphics.prototype.DrawRect=function(a,b,c,d){u!==w&&(h(),u=w);f(a,b,c,d)};gxtkGraphics.prototype.DrawLine=function(a,b,d,f){u!==w&&(h(),u=w);c(g.LINES,2);if(this.tformed){var k=a,l=d;
a=k*this.ix+b*this.jx+this.tx;b=k*this.iy+b*this.jy+this.ty;d=l*this.ix+f*this.jx+this.tx;f=l*this.iy+f*this.jy+this.ty}k=m.vpointer;m.vdata[k]=a;m.vdata[k+1]=b;m.vdata[k+2]=0;m.vdata[k+3]=0;m.vdata[k+4]=d;m.vdata[k+5]=f;m.vdata[k+6]=0;m.vdata[k+7]=0};gxtkGraphics.prototype.DrawOval=function(a,b,d,f){u!==w&&(h(),u=w);d/=2;f/=2;var k;if(this.tformed){k=d*this.ix;var l=d*this.iy;k=Math.sqrt(k*k+l*l);var l=f*this.jx,n=f*this.jy,l=Math.sqrt(l*l+n*n);k=k+l|0}else k=Math.abs(d)+Math.abs(f)|0;k=k>q?q:12>
k?12:k&-4;a+=d;b+=f;c(g.TRIANGLE_FAN,k);l=m.vpointer;for(n=0;n<k;n++){var p=6.28318531*n/k,r=a+Math.cos(p)*d,p=b+Math.sin(p)*f;if(this.tformed)var s=r,r=s*this.ix+p*this.jx+this.tx,p=s*this.iy+p*this.jy+this.ty;m.vdata[l]=r;m.vdata[l+1]=p;l+=4}};gxtkGraphics.prototype.DrawPoly=function(a){u!==w&&(h(),u=w);if(!(6>a.length||a.length>2*q)){c(g.TRIANGLE_FAN,a.length/2);var b=m.vpointer;if(this.tformed)for(var d=0;d<a.length;d+=2)m.vdata[b]=a[d]*this.ix+a[d+1]*this.jx+this.tx,m.vdata[b+1]=a[d]*this.iy+
a[d+1]*this.jy+this.ty,b+=4;else for(d=0;d<a.length;d+=2)m.vdata[b]=a[d],m.vdata[b+1]=a[d+1],b+=4}};gxtkGraphics.prototype.DrawPoly2=function(a,b,d,f){if(b.image.complete){u!==p&&(h(),u=p);var k=a.length/4;if(!(3>k||k>q)){c(g.TRIANGLE_FAN,k);for(var l=m.vpointer,n=0;n<k;n++){var r=4*n,s=a[r],t=a[r+1];if(this.tformed)var w=s,s=w*this.ix+t*this.jx+this.tx,t=w*this.iy+t*this.jy+this.ty;m.vdata[l]=s;m.vdata[l+1]=t;m.vdata[l+2]=(d+a[r+2])/b.image.meta_width;m.vdata[l+3]=(f+a[r+3])/b.image.meta_height;
l+=4}v.last.texture=b.image.texture}}};gxtkGraphics.prototype.DrawSurface=function(a,b,c){a.image.complete&&(u!==p&&(h(),u=p),f(b,c,a.swidth,a.sheight),v.last.texture=a.image.texture)};gxtkGraphics.prototype.DrawSurface2=function(a,b,c,d,e,g,k){a.image.complete&&(u!==p&&(h(),u=p),f(b,c,g,k,d/a.image.meta_width,e/a.image.meta_height,(d+g)/a.image.meta_width,(e+k)/a.image.meta_height),v.last.texture=a.image.texture)};gxtkGraphics.prototype.ReadPixels=function(a,b,c,d,e,f,k){h();var l=new Uint8Array(d*
e*4);g.readPixels(b,this.height-c-e,d,e,g.RGBA,g.UNSIGNED_BYTE,l);b=0;for(e-=1;0<=e;--e){c=f+e*k;for(var m=0;m<d;++m)a[c++]=l[b+3]<<24|l[b]<<16|l[b+1]<<8|l[b+2],b+=4}};gxtkGraphics.prototype.WritePixels2=function(a,b,c,d,e,f,h,l){var m=a.gc.createImageData(e,f),n=m.data,p=0,q,r,s;for(r=0;r<f;++r){for(q=0;q<e;++q)s=b[h++],n[p]=s>>16&255,n[p+1]=s>>8&255,n[p+2]=s&255,n[p+3]=s>>24&255,p+=4;h+=l-e}a.gc.putImageData(m,c,d);g.deleteTexture(a.image.texture);a.image.texture=null;k(a.image)}}};mojoHtml5Gl();