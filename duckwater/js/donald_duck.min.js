function runISL(){var a=["disney.com","disney.go.com","adisney.go.com","home.disney.go.com","playhousemagazine.it","disney.sk","disney.se","disney.rs","disney.ro","disney.pt","disney.pl","disney.no","disney.nl","disney.it","disney.hu","disney.gr","disney.fr","disney.fi","disney.es","disney.dk","disney.de","disney.cz","disney.co.za","disney.co.uk","disney.co.il","disney.ch","disney.be","disney.at","disney.dolmagic.cn","d.dolmagic.cn","games.dolmagic.cn","dev.dolmagic.cn","dev.disney.com.cn","mediacdn.dolmagic.cn","media.dolmagic.cn","disney.com.tw","disney.com.hk","disneygames.jp","yahoo.disneygames.jp","games.yahoo.co.jp","disney.kids.yahoo.co.jp","games.kids.yahoo.co.jp","home.ne.jp","disneychannel.jp","disney.co.jp","disneychannel-asia.com","sg.boonty.com","play.kids.daum.net","kr.disney.kids.yahoo.com","home.disney.com.au","disneygames.com.au","au.games.yahoo.com","disney.optusnet.com.au","203.13.134.172","trygames.com","disneychannel.com.au ","playhousedisney.com.au","disneygamedownloads.com.au","disney.com.com","disneylatino.com","br.games.yahoo.net","jogos.globo.com","kzam.atra.ig.com.br","jogos.msn.com.br","atrativa.uol.com.br","www.terra.com.br","passatempos.terra.com.br","www.atrativa.com.br","atrativa.click21.com.br","passatempo.limao.com.br","clicgames.clicrbs.com.br","clickjogos.uol.com.br","www.clickgratis.com.br","papajogos.uol.com.br","jogosdemeninas.uol.com.br","ultradownloads.com.br","latam.atrativa.com","www.atrativagames.com.ar","www.atrativa.cl","juegos.latam.msn.com","juegos.ar.msn.com","juegos.cl.msn.com","juegos.prodigymsn.com","msn-col.atrativa.com.br","juegos.msn.ve.atrativa.com.br","juegos.msn.pe.atrativa.com.br","msn-crica.atrativa.com.br","pasatiempos.gyggs.com","pasatiempos.esmas.com","juegos.ciudad.com.ar","pasatiempos.uol.com.ar","jogos.mdemulher.com.br","www.disney.com.au","dmc.go.com","toystory.disney.com.tw","disneylive.com.tw","disneymobile.com.tw","home.disney.com.tw","disneychannel.com.tw","disneychannel.com.hk","disneylive.com.hk","disneymovies.com.hk","toystory.disney.com.hk","disneymobile.com.hk","home.disney.com.sg","home.disney.com.my","disney.in","disneychannelindia.com","hungamatv.com","disneyxd.disney.in","data.disney.co.in","disneyxd.in","www.unjuegodisneypordia.com","disneychannel.com.ar","disneyxdla.com","prodigy.msn.com","www.juegos.com","www.esmas.com","www.reforma.com","www.terra.com.mx","home.disney.com.au","disneygames.com.au","au.games.yahoo.com","disney.optusnet.com.au","disneychannel.com.au ","playhousedisney.com.au","disneygamedownloads.com.au","www.disney.com.au","dev.disney.com.au","staging.disney.com.au","disneychannel.co.nz","playhousedisney.co.nz","dev.home.disney.com.au","staging.home.disney.com.au","disney.ru","www.melhoramentos.com.br","www.positivoinformatica.com.br","www.positivofamilia.com.br","canais.positivofamilia.com.br","rede.positivofamilia.com.br","www.canaloi.com.br","cdn.media.zylom.com","ad3.atrativagames.com.br","livrariasaraiva.com.br","disneyjunior-asia.com","disney.com.my","disney.com.sg","disneyxd.ca","disneyjunior.ca","disneychannel-asia.com","family.ca","disney.co.kr","www.disney.co.kr","dev.disney.co.kr","disneychannel.co.kr","www.disneychannel.co.kr","dev.disneychannel.co.kr","disneyjunior.co.kr","www.disneyjunior.co.kr","dev.disneyjunior.co.kr","ch.disney.co.kr","jr.disney.co.kr","www.miniclip.com","www.toggo.de","www.disneyturkiye.com.tr","catalogue.disneyinternational.com","staging.catalogue.disneyinternational.com","pre-staging.catalogue.disneyinternational.com","disneyxd.disney.nl","dev.disney.bg","dev.disney.cz","dev.disney.dk","dev.disney.es","dev.disney.gr","dev.disney.fi","dev.disney.fr","dev.disney.hu","dev.disney.it","dev.disney.nl","dev.disney.no","dev.disney.pl","dev.disney.pt","dev.disney.ro","dev.disney.rs","dev.disney.ru","dev.disney.se","dev.disney.be","dev.nl.disney.be","dev.fr.disney.be","dev.disney.ch","dev.fr.disney.ch","dev.de.disney.ch","dev.disney.co.il","dev.disney.co.uk","dev.disney.co.za","dev.disneyme.com","dev.disneyturkiye.com.tr","staging.disney.bg","staging.disney.cz","staging.disney.dk","staging.disney.es","staging.disney.gr","staging.disney.fi","staging.disney.fr","staging.disney.hu","staging.disney.it","staging.disney.nl","staging.disney.no","staging.disney.pl","staging.disney.pt","staging.disney.ro","staging.disney.rs","staging.disney.ru","staging.disney.se","staging.disney.be","staging.nl.disney.be","staging.fr.disney.be","staging.disney.ch","staging.fr.disney.ch","staging.de.disney.ch","staging.disney.co.il","staging.disney.co.uk","staging.disney.co.za","staging.disneyme.com","staging.disneyturkiye.com.tr","jr.naver.com","dev.jr.naver.com","disneyturkiye.com.tr","disney.com.au","facebook.com","www.facebook.com","sashosting.com.au","clickjogos.uol.com.br","img.clickjogos.uol.com.br","img2.clickjogos.uol.com.br","img3.clickjogos.uol.com.br","img4.clickjogos.uol.com.br","img5.clickjogos.uol.com.br","img6.clickjogos.uol.com.br","clickjogos.com.br","img.clickjogos.com.br","img2.clickjogos.com.br","img3.clickjogos.com.br","img4.clickjogos.com.br","img5.clickjogos.com.br","img6.clickjogos.com.br","espn.go.com","play.disney.go.com","www.jeemtv.net","www.jcctv.net","www.baraem.tv","www.disneyme.com","www.disneylatino.com","befsn.disneylatino.com","www.disney.com.br","befsn.disney.com.br","dev.disney.de","staging.disney.de","disney.bg","disneyme.com","de.disney.ch","fr.disney.ch","fr.disney.be","nl.disney.be","www.disneygames.jp","staging.disneygames.jp","ndev.disneygames.jp","nstaging.disneygames.jp","uol.com.br","www.mundojunior.com.ar","globo.com.br","www.danonino.com.ar","disneyxd.com.ar","r7.com.br","www.habibs.com.br","server1.disneyxd.ca","server1.family.ca","server1.disneyjunior.ca","www.disneyxd.ca","www.family.ca","www.disneyjunior.ca"];if((/:\/\/([a-zA-Z0-9]*[.])*disney[.]go[.]com/.test(window.location.href)||/:\/\/([a-zA-Z0-9]*[.])*dolimg[.]com/.test(window.location.href)||/:\/\/([a-zA-Z0-9]*[.])*disney[.]com/.test(window.location.href)||/:\/\/([a-zA-Z0-9]*[.])*dilcdn[.]com/.test(window.location.href)||/:\/\/([a-zA-Z0-9]*[.])*disneyjunior[.]com/.test(window.location.href)||/:\/\/([a-zA-Z0-9]*[.])*diznee[.]net/.test(window.location.href))&&(top===window||/:\/\/([a-zA-Z0-9]*[.])*disney[.]go[.]com/.test(document.referrer)||/:\/\/([a-zA-Z0-9]*[.])*dolimg[.]com/.test(document.referrer)||/:\/\/([a-zA-Z0-9]*[.])*disney[.]com/.test(document.referrer)||/:\/\/([a-zA-Z0-9]*[.])*dilcdn[.]com/.test(document.referrer)||/:\/\/([a-zA-Z0-9]*[.])*disneyjunior[.]com/.test(document.referrer)||/:\/\/([a-zA-Z0-9]*[.])*diznee[.]net/.test(document.referrer)))window.validAddress=!0;else for(var b in a){a=!1,window.validAddress=!0;break}}function hasCanvasSupport(){var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))}define("com/fido/app/Fallback",["require","exports","module"],function(a,b,c){Fallback=function(a){a=a||document.body;var b={message:'<p>Uh-oh! It looks like you need to update your browser before you\'ll be able to play this game</p><p>In the meantime, check out <a href="#brand_url">this</a> or <a href="#cbeebies_games_url">this</a>.',brand_url:"http://www.someurl.tld/",games_url:"http://www.someurl.tld/",enabled:!0},c=b.message;c=c.replace("#brand_url",b.brand_url),c=c.replace("#games_url",b.games_url);var d=document.createElement("link");d.type="text/css",d.rel="stylesheet",d.href="assets/css/unsupported.css",document.getElementsByTagName("head")[0].appendChild(d),a.innerHTML=c},Fallback.constructor=Fallback,c.exports=Fallback}),function(a){var b,c,d,e,f,g=a.GreenSockGlobals||a,h=function(a){var b,c=a.split("."),d=g;for(b=0;c.length>b;b++)d[c[b]]=d=d[c[b]]||{};return d},i=h("com.greensock"),j=[].slice,k=function(){},l={},m=function(b,c,d,e){this.sc=l[b]?l[b].sc:[],l[b]=this,this.gsClass=null,this.func=d;var f=[];this.check=function(i){for(var j,k,n,o,p=c.length,q=p;--p>-1;)(j=l[c[p]]||new m(c[p],[])).gsClass?(f[p]=j.gsClass,q--):i&&j.sc.push(this);if(0===q&&d)for(k=("com.greensock."+b).split("."),n=k.pop(),o=h(k.join("."))[n]=this.gsClass=d.apply(d,f),e&&(g[n]=o,"function"==typeof define&&define.amd?define((a.GreenSockAMDPath?a.GreenSockAMDPath+"/":"")+b.split(".").join("/"),[],function(){return o}):"undefined"!=typeof module&&module.exports&&(module.exports=o)),p=0;this.sc.length>p;p++)this.sc[p].check()},this.check(!0)},n=a._gsDefine=function(a,b,c,d){return new m(a,b,c,d)},o=i._class=function(a,b,c){return b=b||function(){},n(a,[],function(){return b},c),b};n.globals=g;var p=[0,0,1,1],q=[],r=o("easing.Ease",function(a,b,c,d){this._func=a,this._type=c||0,this._power=d||0,this._params=b?p.concat(b):p},!0),s=r.map={},t=r.register=function(a,b,c,d){for(var e,f,g,h,j=b.split(","),k=j.length,l=(c||"easeIn,easeOut,easeInOut").split(",");--k>-1;)for(f=j[k],e=d?o("easing."+f,null,!0):i.easing[f]||{},g=l.length;--g>-1;)h=l[g],s[f+"."+h]=s[h+f]=e[h]=a.getRatio?a:a[h]||new a};for(d=r.prototype,d._calcEnd=!1,d.getRatio=function(a){if(this._func)return this._params[0]=a,this._func.apply(null,this._params);var b=this._type,c=this._power,d=1===b?1-a:2===b?a:.5>a?2*a:2*(1-a);return 1===c?d*=d:2===c?d*=d*d:3===c?d*=d*d*d:4===c&&(d*=d*d*d*d),1===b?1-d:2===b?d:.5>a?d/2:1-d/2},b=["Linear","Quad","Cubic","Quart","Quint,Strong"],c=b.length;--c>-1;)d=b[c]+",Power"+c,t(new r(null,null,1,c),d,"easeOut",!0),t(new r(null,null,2,c),d,"easeIn"+(0===c?",easeNone":"")),t(new r(null,null,3,c),d,"easeInOut");s.linear=i.easing.Linear.easeIn,s.swing=i.easing.Quad.easeInOut;var u=o("events.EventDispatcher",function(a){this._listeners={},this._eventTarget=a||this});d=u.prototype,d.addEventListener=function(a,b,c,d,g){g=g||0;var h,i,j=this._listeners[a],k=0;for(null==j&&(this._listeners[a]=j=[]),i=j.length;--i>-1;)h=j[i],h.c===b&&h.s===c?j.splice(i,1):0===k&&g>h.pr&&(k=i+1);j.splice(k,0,{c:b,s:c,up:d,pr:g}),this!==e||f||e.wake()},d.removeEventListener=function(a,b){var c,d=this._listeners[a];if(d)for(c=d.length;--c>-1;)if(d[c].c===b)return void d.splice(c,1)},d.dispatchEvent=function(a){var b,c,d,e=this._listeners[a];if(e)for(b=e.length,c=this._eventTarget;--b>-1;)d=e[b],d.up?d.c.call(d.s||c,{type:a,target:c}):d.c.call(d.s||c)};var v=a.requestAnimationFrame,w=a.cancelAnimationFrame,x=Date.now||function(){return(new Date).getTime()},y=x();for(b=["ms","moz","webkit","o"],c=b.length;--c>-1&&!v;)v=a[b[c]+"RequestAnimationFrame"],w=a[b[c]+"CancelAnimationFrame"]||a[b[c]+"CancelRequestAnimationFrame"];o("Ticker",function(a,b){var c,d,g,h,i,j=this,l=x(),m=b!==!1&&v,n=function(a){y=x(),j.time=(y-l)/1e3;var b,e=j.time-i;(!c||e>0||a===!0)&&(j.frame++,i+=e+(e>=h?.004:h-e),b=!0),a!==!0&&(g=d(n)),b&&j.dispatchEvent("tick")};u.call(j),this.time=this.frame=0,this.tick=function(){n(!0)},this.sleep=function(){null!=g&&(m&&w?w(g):clearTimeout(g),d=k,g=null,j===e&&(f=!1))},this.wake=function(){null!==g&&j.sleep(),d=0===c?k:m&&v?v:function(a){return setTimeout(a,0|1e3*(i-j.time)+1)},j===e&&(f=!0),n(2)},this.fps=function(a){return arguments.length?(c=a,h=1/(c||60),i=this.time+h,void j.wake()):c},this.useRAF=function(a){return arguments.length?(j.sleep(),m=a,void j.fps(c)):m},j.fps(a),setTimeout(function(){m&&(!g||5>j.frame)&&j.useRAF(!1)},1500)}),d=i.Ticker.prototype=new i.events.EventDispatcher,d.constructor=i.Ticker;var z=o("core.Animation",function(a,b){if(this.vars=b=b||{},this._duration=this._totalDuration=a||0,this._delay=Number(b.delay)||0,this._timeScale=1,this._active=b.immediateRender===!0,this.data=b.data,this._reversed=b.reversed===!0,M){f||e.wake();var c=this.vars.useFrames?L:M;c.add(this,c._time),this.vars.paused&&this.paused(!0)}});e=z.ticker=new i.Ticker,d=z.prototype,d._dirty=d._gc=d._initted=d._paused=!1,d._totalTime=d._time=0,d._rawPrevTime=-1,d._next=d._last=d._onUpdate=d._timeline=d.timeline=null,d._paused=!1;var A=function(){x()-y>2e3&&e.wake(),setTimeout(A,2e3)};A(),d.play=function(a,b){return arguments.length&&this.seek(a,b),this.reversed(!1).paused(!1)},d.pause=function(a,b){return arguments.length&&this.seek(a,b),this.paused(!0)},d.resume=function(a,b){return arguments.length&&this.seek(a,b),this.paused(!1)},d.seek=function(a,b){return this.totalTime(Number(a),b!==!1)},d.restart=function(a,b){return this.reversed(!1).paused(!1).totalTime(a?-this._delay:0,b!==!1,!0)},d.reverse=function(a,b){return arguments.length&&this.seek(a||this.totalDuration(),b),this.reversed(!0).paused(!1)},d.render=function(){},d.invalidate=function(){return this},d._enabled=function(a,b){return f||e.wake(),this._gc=!a,this._active=a&&!this._paused&&this._totalTime>0&&this._totalTime<this._totalDuration,b!==!0&&(a&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!a&&this.timeline&&this._timeline._remove(this,!0)),!1},d._kill=function(){return this._enabled(!1,!1)},d.kill=function(a,b){return this._kill(a,b),this},d._uncache=function(a){for(var b=a?this:this.timeline;b;)b._dirty=!0,b=b.timeline;return this},d._swapSelfInParams=function(a){for(var b=a.length,c=a.concat();--b>-1;)"{self}"===a[b]&&(c[b]=this);return c},d.eventCallback=function(a,b,c,d){if("on"===(a||"").substr(0,2)){var e=this.vars;if(1===arguments.length)return e[a];null==b?delete e[a]:(e[a]=b,e[a+"Params"]=c instanceof Array&&-1!==c.join("").indexOf("{self}")?this._swapSelfInParams(c):c,e[a+"Scope"]=d),"onUpdate"===a&&(this._onUpdate=b)}return this},d.delay=function(a){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+a-this._delay),this._delay=a,this):this._delay},d.duration=function(a){return arguments.length?(this._duration=this._totalDuration=a,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==a&&this.totalTime(this._totalTime*(a/this._duration),!0),this):(this._dirty=!1,this._duration)},d.totalDuration=function(a){return this._dirty=!1,arguments.length?this.duration(a):this._totalDuration},d.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(a>this._duration?this._duration:a,b)):this._time},d.totalTime=function(a,b,c){if(f||e.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>a&&!c&&(a+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var d=this._totalDuration,g=this._timeline;if(a>d&&!c&&(a=d),this._startTime=(this._paused?this._pauseTime:g._time)-(this._reversed?d-a:a)/this._timeScale,g._dirty||this._uncache(!1),g._timeline)for(;g._timeline;)g._timeline._time!==(g._startTime+g._totalTime)/g._timeScale&&g.totalTime(g._totalTime,!0),g=g._timeline}this._gc&&this._enabled(!0,!1),this._totalTime!==a&&this.render(a,b,!1)}return this},d.startTime=function(a){return arguments.length?(a!==this._startTime&&(this._startTime=a,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,a-this._delay)),this):this._startTime},d.timeScale=function(a){if(!arguments.length)return this._timeScale;if(a=a||1e-6,this._timeline&&this._timeline.smoothChildTiming){var b=this._pauseTime,c=b||0===b?b:this._timeline.totalTime();this._startTime=c-(c-this._startTime)*this._timeScale/a}return this._timeScale=a,this._uncache(!1)},d.reversed=function(a){return arguments.length?(a!=this._reversed&&(this._reversed=a,this.totalTime(this._totalTime,!0)),this):this._reversed},d.paused=function(a){if(!arguments.length)return this._paused;if(a!=this._paused&&this._timeline){f||a||e.wake();var b=this._timeline,c=b.rawTime(),d=c-this._pauseTime;!a&&b.smoothChildTiming&&(this._startTime+=d,this._uncache(!1)),this._pauseTime=a?c:null,this._paused=a,this._active=!a&&this._totalTime>0&&this._totalTime<this._totalDuration,a||0===d||0===this._duration||this.render(b.smoothChildTiming?this._totalTime:(c-this._startTime)/this._timeScale,!0,!0)}return this._gc&&!a&&this._enabled(!0,!1),this};var B=o("core.SimpleTimeline",function(a){z.call(this,0,a),this.autoRemoveChildren=this.smoothChildTiming=!0});d=B.prototype=new z,d.constructor=B,d.kill()._gc=!1,d._first=d._last=null,d._sortChildren=!1,d.add=d.insert=function(a,b){var c,d;if(a._startTime=Number(b||0)+a._delay,a._paused&&this!==a._timeline&&(a._pauseTime=a._startTime+(this.rawTime()-a._startTime)/a._timeScale),a.timeline&&a.timeline._remove(a,!0),a.timeline=a._timeline=this,a._gc&&a._enabled(!0,!0),c=this._last,this._sortChildren)for(d=a._startTime;c&&c._startTime>d;)c=c._prev;return c?(a._next=c._next,c._next=a):(a._next=this._first,this._first=a),a._next?a._next._prev=a:this._last=a,a._prev=c,this._timeline&&this._uncache(!0),this},d._remove=function(a,b){return a.timeline===this&&(b||a._enabled(!1,!0),a.timeline=null,a._prev?a._prev._next=a._next:this._first===a&&(this._first=a._next),a._next?a._next._prev=a._prev:this._last===a&&(this._last=a._prev),this._timeline&&this._uncache(!0)),this},d.render=function(a,b,c){var d,e=this._first;for(this._totalTime=this._time=this._rawPrevTime=a;e;)d=e._next,(e._active||a>=e._startTime&&!e._paused)&&(e._reversed?e.render((e._dirty?e.totalDuration():e._totalDuration)-(a-e._startTime)*e._timeScale,b,c):e.render((a-e._startTime)*e._timeScale,b,c)),e=d},d.rawTime=function(){return f||e.wake(),this._totalTime};var C=o("TweenLite",function(b,c,d){if(z.call(this,c,d),this.render=C.prototype.render,null==b)throw"Cannot tween a null target.";this.target=b="string"!=typeof b?b:C.selector(b)||b;var e,f,g,h=b.jquery||b.length&&b!==a&&b[0]&&(b[0]===a||b[0].nodeType&&b[0].style&&!b.nodeType),i=this.vars.overwrite;if(this._overwrite=i=null==i?K[C.defaultOverwrite]:"number"==typeof i?i>>0:K[i],(h||b instanceof Array)&&"number"!=typeof b[0])for(this._targets=g=j.call(b,0),this._propLookup=[],this._siblings=[],e=0;g.length>e;e++)f=g[e],f?"string"!=typeof f?f.length&&f!==a&&f[0]&&(f[0]===a||f[0].nodeType&&f[0].style&&!f.nodeType)?(g.splice(e--,1),this._targets=g=g.concat(j.call(f,0))):(this._siblings[e]=N(f,this,!1),1===i&&this._siblings[e].length>1&&O(f,this,null,1,this._siblings[e])):(f=g[e--]=C.selector(f),"string"==typeof f&&g.splice(e+1,1)):g.splice(e--,1);else this._propLookup={},this._siblings=N(b,this,!1),1===i&&this._siblings.length>1&&O(b,this,null,1,this._siblings);(this.vars.immediateRender||0===c&&0===this._delay&&this.vars.immediateRender!==!1)&&this.render(-this._delay,!1,!0)},!0),D=function(b){return b.length&&b!==a&&b[0]&&(b[0]===a||b[0].nodeType&&b[0].style&&!b.nodeType)},E=function(a,b){var c,d={};for(c in a)J[c]||c in b&&"x"!==c&&"y"!==c&&"width"!==c&&"height"!==c&&"className"!==c&&"border"!==c||!(!G[c]||G[c]&&G[c]._autoCSS)||(d[c]=a[c],delete a[c]);a.css=d};d=C.prototype=new z,d.constructor=C,d.kill()._gc=!1,d.ratio=0,d._firstPT=d._targets=d._overwrittenProps=d._startAt=null,d._notifyPluginsOfEnabled=!1,C.version="1.10.2",C.defaultEase=d._ease=new r(null,null,1,1),C.defaultOverwrite="auto",C.ticker=e,C.autoSleep=!0,C.selector=a.$||a.jQuery||function(b){return a.$?(C.selector=a.$,a.$(b)):a.document?a.document.getElementById("#"===b.charAt(0)?b.substr(1):b):b};var F=C._internals={},G=C._plugins={},H=C._tweenLookup={},I=0,J=F.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1},K={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},L=z._rootFramesTimeline=new B,M=z._rootTimeline=new B;M._startTime=e.time,L._startTime=e.frame,M._active=L._active=!0,z._updateRoot=function(){if(M.render((e.time-M._startTime)*M._timeScale,!1,!1),L.render((e.frame-L._startTime)*L._timeScale,!1,!1),!(e.frame%120)){var a,b,c;for(c in H){for(b=H[c].tweens,a=b.length;--a>-1;)b[a]._gc&&b.splice(a,1);0===b.length&&delete H[c]}if(c=M._first,(!c||c._paused)&&C.autoSleep&&!L._first&&1===e._listeners.tick.length){for(;c&&c._paused;)c=c._next;c||e.sleep()}}},e.addEventListener("tick",z._updateRoot);var N=function(a,b,c){var d,e,f=a._gsTweenID;if(H[f||(a._gsTweenID=f="t"+I++)]||(H[f]={target:a,tweens:[]}),b&&(d=H[f].tweens,d[e=d.length]=b,c))for(;--e>-1;)d[e]===b&&d.splice(e,1);return H[f].tweens},O=function(a,b,c,d,e){var f,g,h,i;if(1===d||d>=4){for(i=e.length,f=0;i>f;f++)if((h=e[f])!==b)h._gc||h._enabled(!1,!1)&&(g=!0);else if(5===d)break;return g}var j,k=b._startTime+1e-10,l=[],m=0,n=0===b._duration;for(f=e.length;--f>-1;)(h=e[f])===b||h._gc||h._paused||(h._timeline!==b._timeline?(j=j||P(b,0,n),0===P(h,j,n)&&(l[m++]=h)):k>=h._startTime&&h._startTime+h.totalDuration()/h._timeScale+1e-10>k&&((n||!h._initted)&&2e-10>=k-h._startTime||(l[m++]=h)));for(f=m;--f>-1;)h=l[f],2===d&&h._kill(c,a)&&(g=!0),(2!==d||!h._firstPT&&h._initted)&&h._enabled(!1,!1)&&(g=!0);return g},P=function(a,b,c){for(var d=a._timeline,e=d._timeScale,f=a._startTime,g=1e-10;d._timeline;){if(f+=d._startTime,e*=d._timeScale,d._paused)return-100;d=d._timeline}return f/=e,f>b?f-b:c&&f===b||!a._initted&&2*g>f-b?g:(f+=a.totalDuration()/a._timeScale/e)>b+g?0:f-b-g};d._init=function(){var a,b,c,d,e=this.vars,f=this._overwrittenProps,g=this._duration,h=e.immediateRender,i=e.ease;if(e.startAt){if(this._startAt&&this._startAt.render(-1,!0),e.startAt.overwrite=0,e.startAt.immediateRender=!0,this._startAt=C.to(this.target,0,e.startAt),h)if(this._time>0)this._startAt=null;else if(0!==g)return}else if(e.runBackwards&&e.immediateRender&&0!==g)if(this._startAt)this._startAt.render(-1,!0),this._startAt=null;else if(0===this._time){c={};for(d in e)J[d]&&"autoCSS"!==d||(c[d]=e[d]);return c.overwrite=0,void(this._startAt=C.to(this.target,0,c))}if(this._ease=i?i instanceof r?e.easeParams instanceof Array?i.config.apply(i,e.easeParams):i:"function"==typeof i?new r(i,e.easeParams):s[i]||C.defaultEase:C.defaultEase,this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(a=this._targets.length;--a>-1;)this._initProps(this._targets[a],this._propLookup[a]={},this._siblings[a],f?f[a]:null)&&(b=!0);else b=this._initProps(this.target,this._propLookup,this._siblings,f);if(b&&C._onPluginEvent("_onInitAllProps",this),f&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),e.runBackwards)for(c=this._firstPT;c;)c.s+=c.c,c.c=-c.c,c=c._next;this._onUpdate=e.onUpdate,this._initted=!0},d._initProps=function(b,c,d,e){var f,g,h,i,j,k;if(null==b)return!1;this.vars.css||b.style&&b!==a&&b.nodeType&&G.css&&this.vars.autoCSS!==!1&&E(this.vars,b);for(f in this.vars){if(k=this.vars[f],J[f])k instanceof Array&&-1!==k.join("").indexOf("{self}")&&(this.vars[f]=k=this._swapSelfInParams(k,this));else if(G[f]&&(i=new G[f])._onInitTween(b,this.vars[f],this)){for(this._firstPT=j={_next:this._firstPT,t:i,p:"setRatio",s:0,c:1,f:!0,n:f,pg:!0,pr:i._priority},g=i._overwriteProps.length;--g>-1;)c[i._overwriteProps[g]]=this._firstPT;(i._priority||i._onInitAllProps)&&(h=!0),(i._onDisable||i._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=c[f]=j={_next:this._firstPT,t:b,p:f,f:"function"==typeof b[f],n:f,pg:!1,pr:0},j.s=j.f?b[f.indexOf("set")||"function"!=typeof b["get"+f.substr(3)]?f:"get"+f.substr(3)]():parseFloat(b[f]),j.c="string"==typeof k&&"="===k.charAt(1)?parseInt(k.charAt(0)+"1",10)*Number(k.substr(2)):Number(k)-j.s||0;j&&j._next&&(j._next._prev=j)}return e&&this._kill(e,b)?this._initProps(b,c,d,e):this._overwrite>1&&this._firstPT&&d.length>1&&O(b,this,c,this._overwrite,d)?(this._kill(c,b),this._initProps(b,c,d,e)):h},d.render=function(a,b,c){var d,e,f,g=this._time;if(a>=this._duration)this._totalTime=this._time=this._duration,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(d=!0,e="onComplete"),0===this._duration&&((0===a||0>this._rawPrevTime)&&this._rawPrevTime!==a&&(c=!0,this._rawPrevTime>0&&(e="onReverseComplete",b&&(a=-1))),this._rawPrevTime=a);else if(1e-7>a)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==g||0===this._duration&&this._rawPrevTime>0)&&(e="onReverseComplete",d=this._reversed),0>a?(this._active=!1,0===this._duration&&(this._rawPrevTime>=0&&(c=!0),this._rawPrevTime=a)):this._initted||(c=!0);else if(this._totalTime=this._time=a,this._easeType){var h=a/this._duration,i=this._easeType,j=this._easePower;(1===i||3===i&&h>=.5)&&(h=1-h),3===i&&(h*=2),1===j?h*=h:2===j?h*=h*h:3===j?h*=h*h*h:4===j&&(h*=h*h*h*h),this.ratio=1===i?1-h:2===i?h:.5>a/this._duration?h/2:1-h/2}else this.ratio=this._ease.getRatio(a/this._duration);if(this._time!==g||c){if(!this._initted){if(this._init(),!this._initted)return;this._time&&!d?this.ratio=this._ease.getRatio(this._time/this._duration):d&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._active||!this._paused&&this._time!==g&&a>=0&&(this._active=!0),0===g&&(this._startAt&&(a>=0?this._startAt.render(a,b,c):e||(e="_dummyGS")),this.vars.onStart&&(0!==this._time||0===this._duration)&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||q))),f=this._firstPT;f;)f.f?f.t[f.p](f.c*this.ratio+f.s):f.t[f.p]=f.c*this.ratio+f.s,f=f._next;this._onUpdate&&(0>a&&this._startAt&&this._startAt.render(a,b,c),b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||q)),e&&(this._gc||(0>a&&this._startAt&&!this._onUpdate&&this._startAt.render(a,b,c),d&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[e]&&this.vars[e].apply(this.vars[e+"Scope"]||this,this.vars[e+"Params"]||q)))}},d._kill=function(a,b){if("all"===a&&(a=null),null==a&&(null==b||b===this.target))return this._enabled(!1,!1);b="string"!=typeof b?b||this._targets||this.target:C.selector(b)||b;var c,d,e,f,g,h,i,j;if((b instanceof Array||D(b))&&"number"!=typeof b[0])for(c=b.length;--c>-1;)this._kill(a,b[c])&&(h=!0);else{if(this._targets){for(c=this._targets.length;--c>-1;)if(b===this._targets[c]){g=this._propLookup[c]||{},this._overwrittenProps=this._overwrittenProps||[],d=this._overwrittenProps[c]=a?this._overwrittenProps[c]||{}:"all";break}}else{if(b!==this.target)return!1;g=this._propLookup,d=this._overwrittenProps=a?this._overwrittenProps||{}:"all"}if(g){i=a||g,j=a!==d&&"all"!==d&&a!==g&&(null==a||a._tempKill!==!0);for(e in i)(f=g[e])&&(f.pg&&f.t._kill(i)&&(h=!0),f.pg&&0!==f.t._overwriteProps.length||(f._prev?f._prev._next=f._next:f===this._firstPT&&(this._firstPT=f._next),f._next&&(f._next._prev=f._prev),f._next=f._prev=null),delete g[e]),j&&(d[e]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return h},d.invalidate=function(){return this._notifyPluginsOfEnabled&&C._onPluginEvent("_onDisable",this),this._firstPT=null,this._overwrittenProps=null,this._onUpdate=null,this._startAt=null,this._initted=this._active=this._notifyPluginsOfEnabled=!1,this._propLookup=this._targets?{}:[],this},d._enabled=function(a,b){if(f||e.wake(),a&&this._gc){var c,d=this._targets;if(d)for(c=d.length;--c>-1;)this._siblings[c]=N(d[c],this,!0);else this._siblings=N(this.target,this,!0)}return z.prototype._enabled.call(this,a,b),this._notifyPluginsOfEnabled&&this._firstPT?C._onPluginEvent(a?"_onEnable":"_onDisable",this):!1},C.to=function(a,b,c){return new C(a,b,c)},C.from=function(a,b,c){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,new C(a,b,c)},C.fromTo=function(a,b,c,d){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,new C(a,b,d)},C.delayedCall=function(a,b,c,d,e){return new C(b,0,{delay:a,onComplete:b,onCompleteParams:c,onCompleteScope:d,onReverseComplete:b,onReverseCompleteParams:c,onReverseCompleteScope:d,immediateRender:!1,useFrames:e,overwrite:0})},C.set=function(a,b){return new C(a,0,b)},C.killTweensOf=C.killDelayedCallsTo=function(a,b){for(var c=C.getTweensOf(a),d=c.length;--d>-1;)c[d]._kill(b,a)},C.getTweensOf=function(a){if(null==a)return[];a="string"!=typeof a?a:C.selector(a)||a;var b,c,d,e;if((a instanceof Array||D(a))&&"number"!=typeof a[0]){for(b=a.length,c=[];--b>-1;)c=c.concat(C.getTweensOf(a[b]));for(b=c.length;--b>-1;)for(e=c[b],d=b;--d>-1;)e===c[d]&&c.splice(b,1)}else for(c=N(a).concat(),b=c.length;--b>-1;)c[b]._gc&&c.splice(b,1);return c};var Q=o("plugins.TweenPlugin",function(a,b){this._overwriteProps=(a||"").split(","),this._propName=this._overwriteProps[0],this._priority=b||0,this._super=Q.prototype},!0);if(d=Q.prototype,Q.version="1.10.1",Q.API=2,d._firstPT=null,d._addTween=function(a,b,c,d,e,f){var g,h;return null!=d&&(g="number"==typeof d||"="!==d.charAt(1)?Number(d)-c:parseInt(d.charAt(0)+"1",10)*Number(d.substr(2)))?(this._firstPT=h={_next:this._firstPT,t:a,p:b,s:c,c:g,f:"function"==typeof a[b],n:e||b,r:f},h._next&&(h._next._prev=h),h):void 0},d.setRatio=function(a){for(var b,c=this._firstPT,d=1e-6;c;)b=c.c*a+c.s,c.r?b=0|b+(b>0?.5:-.5):d>b&&b>-d&&(b=0),c.f?c.t[c.p](b):c.t[c.p]=b,c=c._next},d._kill=function(a){var b,c=this._overwriteProps,d=this._firstPT;if(null!=a[this._propName])this._overwriteProps=[];else for(b=c.length;--b>-1;)null!=a[c[b]]&&c.splice(b,1);for(;d;)null!=a[d.n]&&(d._next&&(d._next._prev=d._prev),d._prev?(d._prev._next=d._next,d._prev=null):this._firstPT===d&&(this._firstPT=d._next)),d=d._next;return!1},d._roundProps=function(a,b){for(var c=this._firstPT;c;)(a[this._propName]||null!=c.n&&a[c.n.split(this._propName+"_").join("")])&&(c.r=b),c=c._next},C._onPluginEvent=function(a,b){var c,d,e,f,g,h=b._firstPT;if("_onInitAllProps"===a){for(;h;){for(g=h._next,d=e;d&&d.pr>h.pr;)d=d._next;(h._prev=d?d._prev:f)?h._prev._next=h:e=h,(h._next=d)?d._prev=h:f=h,h=g}h=b._firstPT=e}for(;h;)h.pg&&"function"==typeof h.t[a]&&h.t[a]()&&(c=!0),h=h._next;return c},Q.activate=function(a){for(var b=a.length;--b>-1;)a[b].API===Q.API&&(G[(new a[b])._propName]=a[b]);return!0},n.plugin=function(a){if(!(a&&a.propName&&a.init&&a.API))throw"illegal plugin definition.";var b,c=a.propName,d=a.priority||0,e=a.overwriteProps,f={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},g=o("plugins."+c.charAt(0).toUpperCase()+c.substr(1)+"Plugin",function(){Q.call(this,c,d),this._overwriteProps=e||[]},a.global===!0),h=g.prototype=new Q(c);h.constructor=g,g.API=a.API;for(b in f)"function"==typeof a[b]&&(h[f[b]]=a[b]);return g.version=a.version,Q.activate([g]),g},b=a._gsQueue){for(c=0;b.length>c;c++)b[c]();for(d in l)l[d].func||a.console.log("GSAP encountered missing dependency: com.greensock."+d)}f=!1}(window),define("TWEEN",function(){}),(window._gsQueue||(window._gsQueue=[])).push(function(){window._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(a,b,c){var d=function(a){b.call(this,a),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;for(var c,d,f=this.vars,g=e.length;--g>-1;)if(d=f[e[g]])for(c=d.length;--c>-1;)"{self}"===d[c]&&(d=f[e[g]]=d.concat(),d[c]=this);f.tweens instanceof Array&&this.add(f.tweens,0,f.align,f.stagger)},e=["onStartParams","onUpdateParams","onCompleteParams","onReverseCompleteParams","onRepeatParams"],f=[],g=function(a){var b,c={};for(b in a)c[b]=a[b];return c},h=d.prototype=new b;return d.version="1.9.5",h.constructor=d,h.kill()._gc=!1,h.to=function(a,b,d,e){return this.add(new c(a,b,d),e)},h.from=function(a,b,d,e){return this.add(c.from(a,b,d),e)},h.fromTo=function(a,b,d,e,f){return this.add(c.fromTo(a,b,d,e),f)},h.staggerTo=function(a,b,e,f,h,i,j,k){var l,m,n=new d({onComplete:i,onCompleteParams:j,onCompleteScope:k});for("string"==typeof a&&(a=c.selector(a)||a),!(a instanceof Array)&&"function"==typeof a.each&&a[0]&&a[0].nodeType&&a[0].style&&(m=[],a.each(function(){m.push(this)}),a=m),f=f||0,l=0;a.length>l;l++)e.startAt&&(e.startAt=g(e.startAt)),n.add(new c(a[l],b,g(e)),l*f);return this.add(n,h)},h.staggerFrom=function(a,b,c,d,e,f,g,h){return c.immediateRender=0!=c.immediateRender,c.runBackwards=!0,this.staggerTo(a,b,c,d,e,f,g,h)},h.staggerFromTo=function(a,b,c,d,e,f,g,h,i){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,this.staggerTo(a,b,d,e,f,g,h,i)
},h.call=function(a,b,d,e){return this.add(c.delayedCall(0,a,b,d),e)},h.set=function(a,b,d){return d=this._parseTimeOrLabel(d,0,!0),null==b.immediateRender&&(b.immediateRender=d===this._time&&!this._paused),this.add(new c(a,0,b),d)},d.exportRoot=function(a,b){a=a||{},null==a.smoothChildTiming&&(a.smoothChildTiming=!0);var e,f,g=new d(a),h=g._timeline;for(null==b&&(b=!0),h._remove(g,!0),g._startTime=0,g._rawPrevTime=g._time=g._totalTime=h._time,e=h._first;e;)f=e._next,b&&e instanceof c&&e.target===e.vars.onComplete||g.add(e,e._startTime-e._delay),e=f;return h.add(g,0),g},h.add=function(e,f,g,h){var i,j,k,l,m;if("number"!=typeof f&&(f=this._parseTimeOrLabel(f,0,!0,e)),!(e instanceof a)){if(e instanceof Array){for(g=g||"normal",h=h||0,i=f,j=e.length,k=0;j>k;k++)(l=e[k])instanceof Array&&(l=new d({tweens:l})),this.add(l,i),"string"!=typeof l&&"function"!=typeof l&&("sequence"===g?i=l._startTime+l.totalDuration()/l._timeScale:"start"===g&&(l._startTime-=l.delay())),i+=h;return this._uncache(!0)}if("string"==typeof e)return this.addLabel(e,f);if("function"!=typeof e)throw"Cannot add "+e+" into the timeline: it is neither a tween, timeline, function, nor a string.";e=c.delayedCall(0,e)}if(b.prototype.add.call(this,e,f),this._gc&&!this._paused&&this._time===this._duration&&this._time<this.duration())for(m=this;m._gc&&m._timeline;)m._timeline.smoothChildTiming?m.totalTime(m._totalTime,!0):m._enabled(!0,!1),m=m._timeline;return this},h.remove=function(b){if(b instanceof a)return this._remove(b,!1);if(b instanceof Array){for(var c=b.length;--c>-1;)this.remove(b[c]);return this}return"string"==typeof b?this.removeLabel(b):this.kill(null,b)},h.append=function(a,b){return this.add(a,this._parseTimeOrLabel(null,b,!0,a))},h.insert=h.insertMultiple=function(a,b,c,d){return this.add(a,b||0,c,d)},h.appendMultiple=function(a,b,c,d){return this.add(a,this._parseTimeOrLabel(null,b,!0,a),c,d)},h.addLabel=function(a,b){return this._labels[a]=this._parseTimeOrLabel(b),this},h.removeLabel=function(a){return delete this._labels[a],this},h.getLabelTime=function(a){return null!=this._labels[a]?this._labels[a]:-1},h._parseTimeOrLabel=function(b,c,d,e){var f;if(e instanceof a&&e.timeline===this)this.remove(e);else if(e instanceof Array)for(f=e.length;--f>-1;)e[f]instanceof a&&e[f].timeline===this&&this.remove(e[f]);if("string"==typeof c)return this._parseTimeOrLabel(c,d&&"number"==typeof b&&null==this._labels[c]?b-this.duration():0,d);if(c=c||0,"string"!=typeof b||!isNaN(b)&&null==this._labels[b])null==b&&(b=this.duration());else{if(f=b.indexOf("="),-1===f)return null==this._labels[b]?d?this._labels[b]=this.duration()+c:c:this._labels[b]+c;c=parseInt(b.charAt(f-1)+"1",10)*Number(b.substr(f+1)),b=f>1?this._parseTimeOrLabel(b.substr(0,f-1),0,d):this.duration()}return Number(b)+c},h.seek=function(a,b){return this.totalTime("number"==typeof a?a:this._parseTimeOrLabel(a),b!==!1)},h.stop=function(){return this.paused(!0)},h.gotoAndPlay=function(a,b){return this.play(a,b)},h.gotoAndStop=function(a,b){return this.pause(a,b)},h.render=function(a,b,c){this._gc&&this._enabled(!0,!1),this._active=!this._paused;var d,e,g,h,i,j=this._dirty?this.totalDuration():this._totalDuration,k=this._time,l=this._startTime,m=this._timeScale,n=this._paused;if(a>=j?(this._totalTime=this._time=j,this._reversed||this._hasPausedChild()||(e=!0,h="onComplete",0===this._duration&&(0===a||0>this._rawPrevTime)&&this._rawPrevTime!==a&&this._first&&(i=!0,this._rawPrevTime>0&&(h="onReverseComplete"))),this._rawPrevTime=a,a=j+1e-6):1e-7>a?(this._totalTime=this._time=0,(0!==k||0===this._duration&&this._rawPrevTime>0)&&(h="onReverseComplete",e=this._reversed),0>a?(this._active=!1,0===this._duration&&this._rawPrevTime>=0&&this._first&&(i=!0)):this._initted||(i=!0),this._rawPrevTime=a,a=0):this._totalTime=this._time=this._rawPrevTime=a,this._time!==k&&this._first||c||i){if(this._initted||(this._initted=!0),0===k&&this.vars.onStart&&0!==this._time&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||f)),this._time>=k)for(d=this._first;d&&(g=d._next,!this._paused||n);)(d._active||d._startTime<=this._time&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=g;else for(d=this._last;d&&(g=d._prev,!this._paused||n);)(d._active||k>=d._startTime&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=g;this._onUpdate&&(b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||f)),h&&(this._gc||(l===this._startTime||m!==this._timeScale)&&(0===this._time||j>=this.totalDuration())&&(e&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[h]&&this.vars[h].apply(this.vars[h+"Scope"]||this,this.vars[h+"Params"]||f)))}},h._hasPausedChild=function(){for(var a=this._first;a;){if(a._paused||a instanceof d&&a._hasPausedChild())return!0;a=a._next}return!1},h.getChildren=function(a,b,d,e){e=e||-9999999999;for(var f=[],g=this._first,h=0;g;)e>g._startTime||(g instanceof c?b!==!1&&(f[h++]=g):(d!==!1&&(f[h++]=g),a!==!1&&(f=f.concat(g.getChildren(!0,b,d)),h=f.length))),g=g._next;return f},h.getTweensOf=function(a,b){for(var d=c.getTweensOf(a),e=d.length,f=[],g=0;--e>-1;)(d[e].timeline===this||b&&this._contains(d[e]))&&(f[g++]=d[e]);return f},h._contains=function(a){for(var b=a.timeline;b;){if(b===this)return!0;b=b.timeline}return!1},h.shiftChildren=function(a,b,c){c=c||0;for(var d,e=this._first,f=this._labels;e;)e._startTime>=c&&(e._startTime+=a),e=e._next;if(b)for(d in f)f[d]>=c&&(f[d]+=a);return this._uncache(!0)},h._kill=function(a,b){if(!a&&!b)return this._enabled(!1,!1);for(var c=b?this.getTweensOf(b):this.getChildren(!0,!0,!1),d=c.length,e=!1;--d>-1;)c[d]._kill(a,b)&&(e=!0);return e},h.clear=function(a){var b=this.getChildren(!1,!0,!0),c=b.length;for(this._time=this._totalTime=0;--c>-1;)b[c]._enabled(!1,!1);return a!==!1&&(this._labels={}),this._uncache(!0)},h.invalidate=function(){for(var a=this._first;a;)a.invalidate(),a=a._next;return this},h._enabled=function(a,c){if(a===this._gc)for(var d=this._first;d;)d._enabled(a,!0),d=d._next;return b.prototype._enabled.call(this,a,c)},h.progress=function(a){return arguments.length?this.totalTime(this.duration()*a,!1):this._time/this.duration()},h.duration=function(a){return arguments.length?(0!==this.duration()&&0!==a&&this.timeScale(this._duration/a),this):(this._dirty&&this.totalDuration(),this._duration)},h.totalDuration=function(a){if(!arguments.length){if(this._dirty){for(var b,c,d=0,e=this._last,f=999999999999;e;)b=e._prev,e._dirty&&e.totalDuration(),e._startTime>f&&this._sortChildren&&!e._paused?this.add(e,e._startTime-e._delay):f=e._startTime,0>e._startTime&&!e._paused&&(d-=e._startTime,this._timeline.smoothChildTiming&&(this._startTime+=e._startTime/this._timeScale),this.shiftChildren(-e._startTime,!1,-9999999999),f=0),c=e._startTime+e._totalDuration/e._timeScale,c>d&&(d=c),e=b;this._duration=this._totalDuration=d,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==a&&this.timeScale(this._totalDuration/a),this},h.usesFrames=function(){for(var b=this._timeline;b._timeline;)b=b._timeline;return b===a._rootFramesTimeline},h.rawTime=function(){return this._paused||0!==this._totalTime&&this._totalTime!==this._totalDuration?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},d},!0)}),window._gsDefine&&window._gsQueue.pop()(),define("TIMELINE",function(){}),(window._gsQueue||(window._gsQueue=[])).push(function(){window._gsDefine("easing.Back",["easing.Ease"],function(a){var b,c,d,e=window.GreenSockGlobals||window,f=e.com.greensock,g=2*Math.PI,h=Math.PI/2,i=f._class,j=function(b,c){var d=i("easing."+b,function(){},!0),e=d.prototype=new a;return e.constructor=d,e.getRatio=c,d},k=a.register||function(){},l=function(a,b,c,d){var e=i("easing."+a,{easeOut:new b,easeIn:new c,easeInOut:new d},!0);return k(e,a),e},m=function(a,b,c){this.t=a,this.v=b,c&&(this.next=c,c.prev=this,this.c=c.v-b,this.gap=c.t-a)},n=function(b,c){var d=i("easing."+b,function(a){this._p1=a||0===a?a:1.70158,this._p2=1.525*this._p1},!0),e=d.prototype=new a;return e.constructor=d,e.getRatio=c,e.config=function(a){return new d(a)},d},o=l("Back",n("BackOut",function(a){return(a-=1)*a*((this._p1+1)*a+this._p1)+1}),n("BackIn",function(a){return a*a*((this._p1+1)*a-this._p1)}),n("BackInOut",function(a){return 1>(a*=2)?.5*a*a*((this._p2+1)*a-this._p2):.5*((a-=2)*a*((this._p2+1)*a+this._p2)+2)})),p=i("easing.SlowMo",function(a,b,c){b=b||0===b?b:.7,null==a?a=.7:a>1&&(a=1),this._p=1!==a?b:0,this._p1=(1-a)/2,this._p2=a,this._p3=this._p1+this._p2,this._calcEnd=c===!0},!0),q=p.prototype=new a;return q.constructor=p,q.getRatio=function(a){var b=a+(.5-a)*this._p;return this._p1>a?this._calcEnd?1-(a=1-a/this._p1)*a:b-(a=1-a/this._p1)*a*a*a*b:a>this._p3?this._calcEnd?1-(a=(a-this._p3)/this._p1)*a:b+(a-b)*(a=(a-this._p3)/this._p1)*a*a*a:this._calcEnd?1:b},p.ease=new p(.7,.7),q.config=p.config=function(a,b,c){return new p(a,b,c)},b=i("easing.SteppedEase",function(a){a=a||1,this._p1=1/a,this._p2=a+1},!0),q=b.prototype=new a,q.constructor=b,q.getRatio=function(a){return 0>a?a=0:a>=1&&(a=.999999999),(this._p2*a>>0)*this._p1},q.config=b.config=function(a){return new b(a)},c=i("easing.RoughEase",function(b){b=b||{};for(var c,d,e,f,g,h,i=b.taper||"none",j=[],k=0,l=0|(b.points||20),n=l,o=b.randomize!==!1,p=b.clamp===!0,q=b.template instanceof a?b.template:null,r="number"==typeof b.strength?.4*b.strength:.4;--n>-1;)c=o?Math.random():1/l*n,d=q?q.getRatio(c):c,"none"===i?e=r:"out"===i?(f=1-c,e=f*f*r):"in"===i?e=c*c*r:.5>c?(f=2*c,e=.5*f*f*r):(f=2*(1-c),e=.5*f*f*r),o?d+=Math.random()*e-.5*e:n%2?d+=.5*e:d-=.5*e,p&&(d>1?d=1:0>d&&(d=0)),j[k++]={x:c,y:d};for(j.sort(function(a,b){return a.x-b.x}),h=new m(1,1,null),n=l;--n>-1;)g=j[n],h=new m(g.x,g.y,h);this._prev=new m(0,0,0!==h.t?h:h.next)},!0),q=c.prototype=new a,q.constructor=c,q.getRatio=function(a){var b=this._prev;if(a>b.t){for(;b.next&&a>=b.t;)b=b.next;b=b.prev}else for(;b.prev&&b.t>=a;)b=b.prev;return this._prev=b,b.v+(a-b.t)/b.gap*b.c},q.config=function(a){return new c(a)},c.ease=new c,l("Bounce",j("BounceOut",function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}),j("BounceIn",function(a){return 1/2.75>(a=1-a)?1-7.5625*a*a:2/2.75>a?1-(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?1-(7.5625*(a-=2.25/2.75)*a+.9375):1-(7.5625*(a-=2.625/2.75)*a+.984375)}),j("BounceInOut",function(a){var b=.5>a;return a=b?1-2*a:2*a-1,a=1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375,b?.5*(1-a):.5*a+.5})),l("Circ",j("CircOut",function(a){return Math.sqrt(1-(a-=1)*a)}),j("CircIn",function(a){return-(Math.sqrt(1-a*a)-1)}),j("CircInOut",function(a){return 1>(a*=2)?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)})),d=function(b,c,d){var e=i("easing."+b,function(a,b){this._p1=a||1,this._p2=b||d,this._p3=this._p2/g*(Math.asin(1/this._p1)||0)},!0),f=e.prototype=new a;return f.constructor=e,f.getRatio=c,f.config=function(a,b){return new e(a,b)},e},l("Elastic",d("ElasticOut",function(a){return this._p1*Math.pow(2,-10*a)*Math.sin((a-this._p3)*g/this._p2)+1},.3),d("ElasticIn",function(a){return-(this._p1*Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*g/this._p2))},.3),d("ElasticInOut",function(a){return 1>(a*=2)?-.5*this._p1*Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*g/this._p2):.5*this._p1*Math.pow(2,-10*(a-=1))*Math.sin((a-this._p3)*g/this._p2)+1},.45)),l("Expo",j("ExpoOut",function(a){return 1-Math.pow(2,-10*a)}),j("ExpoIn",function(a){return Math.pow(2,10*(a-1))-.001}),j("ExpoInOut",function(a){return 1>(a*=2)?.5*Math.pow(2,10*(a-1)):.5*(2-Math.pow(2,-10*(a-1)))})),l("Sine",j("SineOut",function(a){return Math.sin(a*h)}),j("SineIn",function(a){return-Math.cos(a*h)+1}),j("SineInOut",function(a){return-.5*(Math.cos(Math.PI*a)-1)})),i("easing.EaseLookup",{find:function(b){return a.map[b]}},!0),k(e.SlowMo,"SlowMo","ease,"),k(c,"RoughEase","ease,"),k(b,"SteppedEase","ease,"),o},!0)}),window._gsDefine&&window._gsQueue.pop()(),define("EASEPACK",function(){}),(window._gsQueue||(window._gsQueue=[])).push(function(){window._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(a,b){var c,d,e,f,g=function(){a.call(this,"css"),this._overwriteProps.length=0},h={},i=g.prototype=new a("css");i.constructor=g,g.version="1.9.6",g.API=2,g.defaultTransformPerspective=0,i="px",g.suffixMap={top:i,right:i,bottom:i,left:i,width:i,height:i,fontSize:i,padding:i,margin:i,perspective:i};var j,k,l,m,n,o,p=/(?:\d|\-\d|\.\d|\-\.\d)+/g,q=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,r=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,s=/[^\d\-\.]/g,t=/(?:\d|\-|\+|=|#|\.)*/g,u=/opacity *= *([^)]*)/,v=/opacity:([^;]*)/,w=/alpha\(opacity *=.+?\)/i,x=/^(rgb|hsl)/,y=/([A-Z])/g,z=/-([a-z])/gi,A=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,B=function(a,b){return b.toUpperCase()},C=/(?:Left|Right|Width)/i,D=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,E=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,F=/,(?=[^\)]*(?:\(|$))/gi,G=Math.PI/180,H=180/Math.PI,I={},J=document,K=J.createElement("div"),L=J.createElement("img"),M=g._internals={_specialProps:h},N=navigator.userAgent,O=function(){var a,b=N.indexOf("Android"),c=J.createElement("div");return l=-1!==N.indexOf("Safari")&&-1===N.indexOf("Chrome")&&(-1===b||Number(N.substr(b+8,1))>3),n=l&&6>Number(N.substr(N.indexOf("Version/")+8,1)),m=-1!==N.indexOf("Firefox"),/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(N),o=parseFloat(RegExp.$1),c.innerHTML="<a style='top:1px;opacity:.55;'>a</a>",a=c.getElementsByTagName("a")[0],a?/^0.55/.test(a.style.opacity):!1}(),P=function(a){return u.test("string"==typeof a?a:(a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100:1},Q=function(a){window.console&&void 0},R="",S="",T=function(a,b){b=b||K;var c,d,e=b.style;if(void 0!==e[a])return a;for(a=a.charAt(0).toUpperCase()+a.substr(1),c=["O","Moz","ms","Ms","Webkit"],d=5;--d>-1&&void 0===e[c[d]+a];);return d>=0?(S=3===d?"ms":c[d],R="-"+S.toLowerCase()+"-",S+a):null},U=J.defaultView?J.defaultView.getComputedStyle:function(){},V=g.getStyle=function(a,b,c,d,e){var f;return O||"opacity"!==b?(!d&&a.style[b]?f=a.style[b]:(c=c||U(a,null))?(a=c.getPropertyValue(b.replace(y,"-$1").toLowerCase()),f=a||c.length?a:c[b]):a.currentStyle&&(c=a.currentStyle,f=c[b]),null==e||f&&"none"!==f&&"auto"!==f&&"auto auto"!==f?f:e):P(a)},W=function(a,b,c,d,e){if("px"===d||!d)return c;if("auto"===d||!c)return 0;var f,g=C.test(b),h=a,i=K.style,j=0>c;return j&&(c=-c),"%"===d&&-1!==b.indexOf("border")?f=c/100*(g?a.clientWidth:a.clientHeight):(i.cssText="border-style:solid; border-width:0; position:absolute; line-height:0;","%"!==d&&h.appendChild?i[g?"borderLeftWidth":"borderTopWidth"]=c+d:(h=a.parentNode||J.body,i[g?"width":"height"]=c+d),h.appendChild(K),f=parseFloat(K[g?"offsetWidth":"offsetHeight"]),h.removeChild(K),0!==f||e||(f=W(a,b,c,d,!0))),j?-f:f},X=function(a,b,c){if("absolute"!==V(a,"position",c))return 0;var d="left"===b?"Left":"Top",e=V(a,"margin"+d,c);return a["offset"+d]-(W(a,b,parseFloat(e),e.replace(t,""))||0)},Y=function(a,b){var c,d,e={};if(b=b||U(a,null))if(c=b.length)for(;--c>-1;)e[b[c].replace(z,B)]=b.getPropertyValue(b[c]);else for(c in b)e[c]=b[c];else if(b=a.currentStyle||a.style)for(c in b)e[c.replace(z,B)]=b[c];return O||(e.opacity=P(a)),d=xb(a,b,!1),e.rotation=d.rotation*H,e.skewX=d.skewX*H,e.scaleX=d.scaleX,e.scaleY=d.scaleY,e.x=d.x,e.y=d.y,wb&&(e.z=d.z,e.rotationX=d.rotationX*H,e.rotationY=d.rotationY*H,e.scaleZ=d.scaleZ),e.filters&&delete e.filters,e},Z=function(a,b,c,d,e){var f,g,h,i={},j=a.style;for(g in c)"cssText"!==g&&"length"!==g&&isNaN(g)&&(b[g]!==(f=c[g])||e&&e[g])&&-1===g.indexOf("Origin")&&("number"==typeof f||"string"==typeof f)&&(i[g]="auto"!==f||"left"!==g&&"top"!==g?""!==f&&"auto"!==f&&"none"!==f||"string"!=typeof b[g]||""===b[g].replace(s,"")?f:0:X(a,g),void 0!==j[g]&&(h=new lb(j,g,j[g],h)));if(d)for(g in d)"className"!==g&&(i[g]=d[g]);return{difs:i,firstMPT:h}},$={width:["Left","Right"],height:["Top","Bottom"]},_=["marginLeft","marginRight","marginTop","marginBottom"],ab=function(a,b,c){var d=parseFloat("width"===b?a.offsetWidth:a.offsetHeight),e=$[b],f=e.length;for(c=c||U(a,null);--f>-1;)d-=parseFloat(V(a,"padding"+e[f],c,!0))||0,d-=parseFloat(V(a,"border"+e[f]+"Width",c,!0))||0;return d},bb=function(a,b){(null==a||""===a||"auto"===a||"auto auto"===a)&&(a="0 0");var c=a.split(" "),d=-1!==a.indexOf("left")?"0%":-1!==a.indexOf("right")?"100%":c[0],e=-1!==a.indexOf("top")?"0%":-1!==a.indexOf("bottom")?"100%":c[1];return null==e?e="0":"center"===e&&(e="50%"),("center"===d||isNaN(parseFloat(d)))&&(d="50%"),b&&(b.oxp=-1!==d.indexOf("%"),b.oyp=-1!==e.indexOf("%"),b.oxr="="===d.charAt(1),b.oyr="="===e.charAt(1),b.ox=parseFloat(d.replace(s,"")),b.oy=parseFloat(e.replace(s,""))),d+" "+e+(c.length>2?" "+c[2]:"")},cb=function(a,b){return"string"==typeof a&&"="===a.charAt(1)?parseInt(a.charAt(0)+"1",10)*parseFloat(a.substr(2)):parseFloat(a)-parseFloat(b)},db=function(a,b){return null==a?b:"string"==typeof a&&"="===a.charAt(1)?parseInt(a.charAt(0)+"1",10)*Number(a.substr(2))+b:parseFloat(a)},eb=function(a,b,c,d){var e,f,g,h,i=1e-6;return null==a?h=b:"number"==typeof a?h=a*G:(e=2*Math.PI,f=a.split("_"),g=Number(f[0].replace(s,""))*(-1===a.indexOf("rad")?G:1)-("="===a.charAt(1)?0:b),f.length&&(d&&(d[c]=b+g),-1!==a.indexOf("short")&&(g%=e,g!==g%(e/2)&&(g=0>g?g+e:g-e)),-1!==a.indexOf("_cw")&&0>g?g=(g+9999999999*e)%e-(0|g/e)*e:-1!==a.indexOf("ccw")&&g>0&&(g=(g-9999999999*e)%e-(0|g/e)*e)),h=b+g),i>h&&h>-i&&(h=0),h},fb={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},gb=function(a,b,c){return a=0>a?a+1:a>1?a-1:a,0|255*(1>6*a?b+6*(c-b)*a:.5>a?c:2>3*a?b+6*(c-b)*(2/3-a):b)+.5},hb=function(a){var b,c,d,e,f,g;return a&&""!==a?"number"==typeof a?[a>>16,255&a>>8,255&a]:(","===a.charAt(a.length-1)&&(a=a.substr(0,a.length-1)),fb[a]?fb[a]:"#"===a.charAt(0)?(4===a.length&&(b=a.charAt(1),c=a.charAt(2),d=a.charAt(3),a="#"+b+b+c+c+d+d),a=parseInt(a.substr(1),16),[a>>16,255&a>>8,255&a]):"hsl"===a.substr(0,3)?(a=a.match(p),e=Number(a[0])%360/360,f=Number(a[1])/100,g=Number(a[2])/100,c=.5>=g?g*(f+1):g+f-g*f,b=2*g-c,a.length>3&&(a[3]=Number(a[3])),a[0]=gb(e+1/3,b,c),a[1]=gb(e,b,c),a[2]=gb(e-1/3,b,c),a):(a=a.match(p)||fb.transparent,a[0]=Number(a[0]),a[1]=Number(a[1]),a[2]=Number(a[2]),a.length>3&&(a[3]=Number(a[3])),a)):fb.black},ib="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(i in fb)ib+="|"+i+"\\b";ib=RegExp(ib+")","gi");var jb=function(a,b,c,d){if(null==a)return function(a){return a};var e,f=b?(a.match(ib)||[""])[0]:"",g=a.split(f).join("").match(r)||[],h=a.substr(0,a.indexOf(g[0])),i=")"===a.charAt(a.length-1)?")":"",j=-1!==a.indexOf(" ")?" ":",",k=g.length,l=k>0?g[0].replace(p,""):"";return k?e=b?function(a){var b,m,n,o;if("number"==typeof a)a+=l;else if(d&&F.test(a)){for(o=a.replace(F,"|").split("|"),n=0;o.length>n;n++)o[n]=e(o[n]);return o.join(",")}if(b=(a.match(ib)||[f])[0],m=a.split(b).join("").match(r)||[],n=m.length,k>n--)for(;k>++n;)m[n]=c?m[0|(n-1)/2]:g[n];return h+m.join(j)+j+b+i+(-1!==a.indexOf("inset")?" inset":"")}:function(a){var b,f,m;if("number"==typeof a)a+=l;else if(d&&F.test(a)){for(f=a.replace(F,"|").split("|"),m=0;f.length>m;m++)f[m]=e(f[m]);return f.join(",")}if(b=a.match(r)||[],m=b.length,k>m--)for(;k>++m;)b[m]=c?b[0|(m-1)/2]:g[m];return h+b.join(j)+i}:function(a){return a}},kb=function(a){return a=a.split(","),function(b,c,d,e,f,g,h){var i,j=(c+"").split(" ");for(h={},i=0;4>i;i++)h[a[i]]=j[i]=j[i]||j[(i-1)/2>>0];return e.parse(b,h,f,g)}},lb=(M._setPluginRatio=function(a){this.plugin.setRatio(a);for(var b,c,d,e,f=this.data,g=f.proxy,h=f.firstMPT,i=1e-6;h;)b=g[h.v],h.r?b=b>0?0|b+.5:0|b-.5:i>b&&b>-i&&(b=0),h.t[h.p]=b,h=h._next;if(f.autoRotate&&(f.autoRotate.rotation=g.rotation),1===a)for(h=f.firstMPT;h;){if(c=h.t,c.type){if(1===c.type){for(e=c.xs0+c.s+c.xs1,d=1;c.l>d;d++)e+=c["xn"+d]+c["xs"+(d+1)];c.e=e}}else c.e=c.s+c.xs0;h=h._next}},function(a,b,c,d,e){this.t=a,this.p=b,this.v=c,this.r=e,d&&(d._prev=this,this._next=d)}),mb=(M._parseToProxy=function(a,b,c,d,e,f){var g,h,i,j,k,l=d,m={},n={},o=c._transform,p=I;for(c._transform=null,I=b,d=k=c.parse(a,b,d,e),I=p,f&&(c._transform=o,l&&(l._prev=null,l._prev&&(l._prev._next=null)));d&&d!==l;){if(1>=d.type&&(h=d.p,n[h]=d.s+d.c,m[h]=d.s,f||(j=new lb(d,"s",h,j,d.r),d.c=0),1===d.type))for(g=d.l;--g>0;)i="xn"+g,h=d.p+"_"+i,n[h]=d.data[i],m[h]=d[i],f||(j=new lb(d,i,h,j,d.rxp[i]));d=d._next}return{proxy:m,end:n,firstMPT:j,pt:k}},M.CSSPropTween=function(a,b,d,e,g,h,i,j,k,l,m){this.t=a,this.p=b,this.s=d,this.c=e,this.n=i||"css_"+b,a instanceof mb||f.push(this.n),this.r=j,this.type=h||0,k&&(this.pr=k,c=!0),this.b=void 0===l?d:l,this.e=void 0===m?d+e:m,g&&(this._next=g,g._prev=this)}),nb=g.parseComplex=function(a,b,c,d,e,f,g,h,i,k){g=new mb(a,b,0,0,g,k?2:1,null,!1,h,c,d),d+="";var l,m,n,o,r,s,t,u,v,w,y,z,A=c.split(", ").join(",").split(" "),B=d.split(", ").join(",").split(" "),C=A.length,D=j!==!1;for((-1!==d.indexOf(",")||-1!==c.indexOf(","))&&(A=A.join(" ").replace(F,", ").split(" "),B=B.join(" ").replace(F,", ").split(" "),C=A.length),C!==B.length&&(A=(f||"").split(" "),C=A.length),g.plugin=i,g.setRatio=k,l=0;C>l;l++)if(o=A[l],r=B[l],u=parseFloat(o),u||0===u)g.appendXtra("",u,cb(r,u),r.replace(q,""),D&&-1!==r.indexOf("px"),!0);else if(e&&("#"===o.charAt(0)||fb[o]||x.test(o)))z=","===r.charAt(r.length-1)?"),":")",o=hb(o),r=hb(r),v=o.length+r.length>6,v&&!O&&0===r[3]?(g["xs"+g.l]+=g.l?" transparent":"transparent",g.e=g.e.split(B[l]).join("transparent")):(O||(v=!1),g.appendXtra(v?"rgba(":"rgb(",o[0],r[0]-o[0],",",!0,!0).appendXtra("",o[1],r[1]-o[1],",",!0).appendXtra("",o[2],r[2]-o[2],v?",":z,!0),v&&(o=4>o.length?1:o[3],g.appendXtra("",o,(4>r.length?1:r[3])-o,z,!1)));else if(s=o.match(p)){if(t=r.match(q),!t||t.length!==s.length)return g;for(n=0,m=0;s.length>m;m++)y=s[m],w=o.indexOf(y,n),g.appendXtra(o.substr(n,w-n),Number(y),cb(t[m],y),"",D&&"px"===o.substr(w+y.length,2),0===m),n=w+y.length;g["xs"+g.l]+=o.substr(n)}else g["xs"+g.l]+=g.l?" "+o:o;if(-1!==d.indexOf("=")&&g.data){for(z=g.xs0+g.data.s,l=1;g.l>l;l++)z+=g["xs"+l]+g.data["xn"+l];g.e=z+g["xs"+l]}return g.l||(g.type=-1,g.xs0=g.e),g.xfirst||g},ob=9;for(i=mb.prototype,i.l=i.pr=0;--ob>0;)i["xn"+ob]=0,i["xs"+ob]="";i.xs0="",i._next=i._prev=i.xfirst=i.data=i.plugin=i.setRatio=i.rxp=null,i.appendXtra=function(a,b,c,d,e,f){var g=this,h=g.l;return g["xs"+h]+=f&&h?" "+a:a||"",c||0===h||g.plugin?(g.l++,g.type=g.setRatio?2:1,g["xs"+g.l]=d||"",h>0?(g.data["xn"+h]=b+c,g.rxp["xn"+h]=e,g["xn"+h]=b,g.plugin||(g.xfirst=new mb(g,"xn"+h,b,c,g.xfirst||g,0,g.n,e,g.pr),g.xfirst.xs0=0),g):(g.data={s:b+c},g.rxp={},g.s=b,g.c=c,g.r=e,g)):(g["xs"+h]+=b+(d||""),g)};var pb=function(a,b){b=b||{},this.p=b.prefix?T(a)||a:a,h[a]=h[this.p]=this,this.format=b.formatter||jb(b.defaultValue,b.color,b.collapsible,b.multi),b.parser&&(this.parse=b.parser),this.clrs=b.color,this.multi=b.multi,this.keyword=b.keyword,this.dflt=b.defaultValue,this.pr=b.priority||0},qb=M._registerComplexSpecialProp=function(a,b,c){"object"!=typeof b&&(b={parser:c});var d,e,f=a.split(","),g=b.defaultValue;for(c=c||[g],d=0;f.length>d;d++)b.prefix=0===d&&b.prefix,b.defaultValue=c[d]||g,e=new pb(f[d],b)},rb=function(a){if(!h[a]){var b=a.charAt(0).toUpperCase()+a.substr(1)+"Plugin";qb(a,{parser:function(a,c,d,e,f,g,i){var j=(window.GreenSockGlobals||window).com.greensock.plugins[b];return j?(j._cssRegister(),h[d].parse(a,c,d,e,f,g,i)):(Q("Error: "+b+" js file not loaded."),f)}})}};i=pb.prototype,i.parseComplex=function(a,b,c,d,e,f){var g,h,i,j,k,l,m=this.keyword;if(this.multi&&(F.test(c)||F.test(b)?(h=b.replace(F,"|").split("|"),i=c.replace(F,"|").split("|")):m&&(h=[b],i=[c])),i){for(j=i.length>h.length?i.length:h.length,g=0;j>g;g++)b=h[g]=h[g]||this.dflt,c=i[g]=i[g]||this.dflt,m&&(k=b.indexOf(m),l=c.indexOf(m),k!==l&&(c=-1===l?i:h,c[g]+=" "+m));b=h.join(", "),c=i.join(", ")}return nb(a,this.p,b,c,this.clrs,this.dflt,d,this.pr,e,f)},i.parse=function(a,b,c,d,f,g){return this.parseComplex(a.style,this.format(V(a,this.p,e,!1,this.dflt)),this.format(b),f,g)},g.registerSpecialProp=function(a,b,c){qb(a,{parser:function(a,d,e,f,g,h){var i=new mb(a,e,0,0,g,2,e,!1,c);return i.plugin=h,i.setRatio=b(a,d,f._tween,e),i},priority:c})};var sb="scaleX,scaleY,scaleZ,x,y,z,skewX,rotation,rotationX,rotationY,perspective".split(","),tb=T("transform"),ub=R+"transform",vb=T("transformOrigin"),wb=null!==T("perspective"),xb=function(a,b,c){var d,e,f,h,i,j,k,l,m,n,o,p,q,r=c?a._gsTransform||{skewY:0}:{skewY:0},s=0>r.scaleX,t=2e-5,u=1e5,v=-Math.PI+1e-4,w=Math.PI-1e-4,x=wb?parseFloat(V(a,vb,b,!1,"0 0 0").split(" ")[2])||r.zOrigin||0:0;if(tb)d=V(a,ub,b,!0);else if(a.currentStyle)if(d=a.currentStyle.filter.match(D),d&&4===d.length)d=[d[0].substr(4),Number(d[2].substr(4)),Number(d[1].substr(4)),d[3].substr(4),r.x||0,r.y||0].join(",");else{if(null!=r.x)return r;d=""}for(e=(d||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],f=e.length;--f>-1;)h=Number(e[f]),e[f]=(i=h-(h|=0))?(0|i*u+(0>i?-.5:.5))/u+h:h;if(16===e.length){var y=e[8],z=e[9],A=e[10],B=e[12],C=e[13],E=e[14];if(r.zOrigin&&(E=-r.zOrigin,B=y*E-e[12],C=z*E-e[13],E=A*E+r.zOrigin-e[14]),!c||null==r.rotationX){var F,G,H,I,J,K,L,M=e[0],N=e[1],O=e[2],P=e[3],Q=e[4],R=e[5],S=e[6],T=e[7],U=e[11],W=r.rotationX=Math.atan2(S,A),X=v>W||W>w;W&&(I=Math.cos(-W),J=Math.sin(-W),F=Q*I+y*J,G=R*I+z*J,H=S*I+A*J,y=Q*-J+y*I,z=R*-J+z*I,A=S*-J+A*I,U=T*-J+U*I,Q=F,R=G,S=H),W=r.rotationY=Math.atan2(y,M),W&&(K=v>W||W>w,I=Math.cos(-W),J=Math.sin(-W),F=M*I-y*J,G=N*I-z*J,H=O*I-A*J,z=N*J+z*I,A=O*J+A*I,U=P*J+U*I,M=F,N=G,O=H),W=r.rotation=Math.atan2(N,R),W&&(L=v>W||W>w,I=Math.cos(-W),J=Math.sin(-W),M=M*I+Q*J,G=N*I+R*J,R=N*-J+R*I,S=O*-J+S*I,N=G),L&&X?r.rotation=r.rotationX=0:L&&K?r.rotation=r.rotationY=0:K&&X&&(r.rotationY=r.rotationX=0),r.scaleX=(0|Math.sqrt(M*M+N*N)*u+.5)/u,r.scaleY=(0|Math.sqrt(R*R+z*z)*u+.5)/u,r.scaleZ=(0|Math.sqrt(S*S+A*A)*u+.5)/u,r.skewX=0,r.perspective=U?1/(0>U?-U:U):0,r.x=B,r.y=C,r.z=E}}else if(!(wb&&0!==e.length&&r.x===e[4]&&r.y===e[5]&&(r.rotationX||r.rotationY)||void 0!==r.x&&"none"===V(a,"display",b))){var Y=e.length>=6,Z=Y?e[0]:1,$=e[1]||0,_=e[2]||0,ab=Y?e[3]:1;r.x=e[4]||0,r.y=e[5]||0,j=Math.sqrt(Z*Z+$*$),k=Math.sqrt(ab*ab+_*_),l=Z||$?Math.atan2($,Z):r.rotation||0,m=_||ab?Math.atan2(_,ab)+l:r.skewX||0,n=j-Math.abs(r.scaleX||0),o=k-Math.abs(r.scaleY||0),Math.abs(m)>Math.PI/2&&Math.abs(m)<1.5*Math.PI&&(s?(j*=-1,m+=0>=l?Math.PI:-Math.PI,l+=0>=l?Math.PI:-Math.PI):(k*=-1,m+=0>=m?Math.PI:-Math.PI)),p=(l-r.rotation)%Math.PI,q=(m-r.skewX)%Math.PI,(void 0===r.skewX||n>t||-t>n||o>t||-t>o||p>v&&w>p&&!1|p*u||q>v&&w>q&&!1|q*u)&&(r.scaleX=j,r.scaleY=k,r.rotation=l,r.skewX=m),wb&&(r.rotationX=r.rotationY=r.z=0,r.perspective=parseFloat(g.defaultTransformPerspective)||0,r.scaleZ=1)}r.zOrigin=x;for(f in r)t>r[f]&&r[f]>-t&&(r[f]=0);return c&&(a._gsTransform=r),r},yb=function(a){var b,c,d=this.data,e=-d.rotation,f=e+d.skewX,g=1e5,h=(0|Math.cos(e)*d.scaleX*g)/g,i=(0|Math.sin(e)*d.scaleX*g)/g,j=(0|Math.sin(f)*-d.scaleY*g)/g,k=(0|Math.cos(f)*d.scaleY*g)/g,l=this.t.style,m=this.t.currentStyle;if(m){c=i,i=-j,j=-c,b=m.filter,l.filter="";var n,p,q=this.t.offsetWidth,r=this.t.offsetHeight,s="absolute"!==m.position,v="progid:DXImageTransform.Microsoft.Matrix(M11="+h+", M12="+i+", M21="+j+", M22="+k,w=d.x,x=d.y;if(null!=d.ox&&(n=(d.oxp?.01*q*d.ox:d.ox)-q/2,p=(d.oyp?.01*r*d.oy:d.oy)-r/2,w+=n-(n*h+p*i),x+=p-(n*j+p*k)),s)n=q/2,p=r/2,v+=", Dx="+(n-(n*h+p*i)+w)+", Dy="+(p-(n*j+p*k)+x)+")";else{var y,z,A,B=8>o?1:-1;for(n=d.ieOffsetX||0,p=d.ieOffsetY||0,d.ieOffsetX=Math.round((q-((0>h?-h:h)*q+(0>i?-i:i)*r))/2+w),d.ieOffsetY=Math.round((r-((0>k?-k:k)*r+(0>j?-j:j)*q))/2+x),ob=0;4>ob;ob++)z=_[ob],y=m[z],c=-1!==y.indexOf("px")?parseFloat(y):W(this.t,z,parseFloat(y),y.replace(t,""))||0,A=c!==d[z]?2>ob?-d.ieOffsetX:-d.ieOffsetY:2>ob?n-d.ieOffsetX:p-d.ieOffsetY,l[z]=(d[z]=Math.round(c-A*(0===ob||2===ob?1:B)))+"px";v+=", sizingMethod='auto expand')"}l.filter=-1!==b.indexOf("DXImageTransform.Microsoft.Matrix(")?b.replace(E,v):v+" "+b,(0===a||1===a)&&1===h&&0===i&&0===j&&1===k&&(s&&-1===v.indexOf("Dx=0, Dy=0")||u.test(b)&&100!==parseFloat(RegExp.$1)||-1===b.indexOf("gradient(")&&l.removeAttribute("filter"))}},zb=function(){var a,b,c,d,e,f,g,h,i,j=this.data,k=this.t.style,l=j.perspective,n=j.scaleX,o=0,p=0,q=0,r=0,s=j.scaleY,t=0,u=0,v=0,w=0,x=j.scaleZ,y=0,z=0,A=0,B=l?-1/l:0,C=j.rotation,D=j.zOrigin,E=1e5;m&&(g=k.top?"top":k.bottom?"bottom":parseFloat(V(this.t,"top",null,!1))?"bottom":"top",c=V(this.t,g,null,!1),h=parseFloat(c)||0,i=c.substr((h+"").length)||"px",j._ffFix=!j._ffFix,k[g]=(j._ffFix?h+.05:h-.05)+i),(C||j.skewX)&&(c=n*Math.cos(C),d=s*Math.sin(C),C-=j.skewX,o=n*-Math.sin(C),s*=Math.cos(C),n=c,r=d),C=j.rotationY,C&&(a=Math.cos(C),b=Math.sin(C),c=n*a,d=r*a,e=x*-b,f=B*-b,p=n*b,t=r*b,x*=a,B*=a,n=c,r=d,v=e,z=f),C=j.rotationX,C&&(a=Math.cos(C),b=Math.sin(C),c=o*a+p*b,d=s*a+t*b,e=w*a+x*b,f=A*a+B*b,p=o*-b+p*a,t=s*-b+t*a,x=w*-b+x*a,B=A*-b+B*a,o=c,s=d,w=e,A=f),D&&(y-=D,q=p*y,u=t*y,y=x*y+D),q=(c=(q+=j.x)-(q|=0))?(0|c*E+(0>c?-.5:.5))/E+q:q,u=(c=(u+=j.y)-(u|=0))?(0|c*E+(0>c?-.5:.5))/E+u:u,y=(c=(y+=j.z)-(y|=0))?(0|c*E+(0>c?-.5:.5))/E+y:y,k[tb]="matrix3d("+[(0|n*E)/E,(0|r*E)/E,(0|v*E)/E,(0|z*E)/E,(0|o*E)/E,(0|s*E)/E,(0|w*E)/E,(0|A*E)/E,(0|p*E)/E,(0|t*E)/E,(0|x*E)/E,(0|B*E)/E,q,u,y,l?1+-y/l:1].join(",")+")"},Ab=function(){var a,b,c,d,e,f,g,h,i,j=this.data,k=this.t,l=k.style;m&&(a=l.top?"top":l.bottom?"bottom":parseFloat(V(k,"top",null,!1))?"bottom":"top",b=V(k,a,null,!1),c=parseFloat(b)||0,d=b.substr((c+"").length)||"px",j._ffFix=!j._ffFix,l[a]=(j._ffFix?c+.05:c-.05)+d),j.rotation||j.skewX?(e=j.rotation,f=e-j.skewX,g=1e5,h=j.scaleX*g,i=j.scaleY*g,l[tb]="matrix("+(0|Math.cos(e)*h)/g+","+(0|Math.sin(e)*h)/g+","+(0|Math.sin(f)*-i)/g+","+(0|Math.cos(f)*i)/g+","+j.x+","+j.y+")"):l[tb]="matrix("+j.scaleX+",0,0,"+j.scaleY+","+j.x+","+j.y+")"};qb("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation",{parser:function(a,b,c,d,f,g,h){if(d._transform)return f;var i,j,k,l,m,n,o,p=d._transform=xb(a,e,!0),q=a.style,r=1e-6,s=sb.length,t=h,u={};if("string"==typeof t.transform&&tb)k=q.cssText,q[tb]=t.transform,q.display="block",i=xb(a,null,!1),q.cssText=k;else if("object"==typeof t){if(i={scaleX:db(null!=t.scaleX?t.scaleX:t.scale,p.scaleX),scaleY:db(null!=t.scaleY?t.scaleY:t.scale,p.scaleY),scaleZ:db(null!=t.scaleZ?t.scaleZ:t.scale,p.scaleZ),x:db(t.x,p.x),y:db(t.y,p.y),z:db(t.z,p.z),perspective:db(t.transformPerspective,p.perspective)},o=t.directionalRotation,null!=o)if("object"==typeof o)for(k in o)t[k]=o[k];else t.rotation=o;i.rotation=eb("rotation"in t?t.rotation:"shortRotation"in t?t.shortRotation+"_short":"rotationZ"in t?t.rotationZ:p.rotation*H,p.rotation,"rotation",u),wb&&(i.rotationX=eb("rotationX"in t?t.rotationX:"shortRotationX"in t?t.shortRotationX+"_short":p.rotationX*H||0,p.rotationX,"rotationX",u),i.rotationY=eb("rotationY"in t?t.rotationY:"shortRotationY"in t?t.shortRotationY+"_short":p.rotationY*H||0,p.rotationY,"rotationY",u)),i.skewX=null==t.skewX?p.skewX:eb(t.skewX,p.skewX),i.skewY=null==t.skewY?p.skewY:eb(t.skewY,p.skewY),(j=i.skewY-p.skewY)&&(i.skewX+=j,i.rotation+=j)}for(m=p.z||p.rotationX||p.rotationY||i.z||i.rotationX||i.rotationY||i.perspective,m||null==t.scale||(i.scaleZ=1);--s>-1;)c=sb[s],l=i[c]-p[c],(l>r||-r>l||null!=I[c])&&(n=!0,f=new mb(p,c,p[c],l,f),c in u&&(f.e=u[c]),f.xs0=0,f.plugin=g,d._overwriteProps.push(f.n));
return l=t.transformOrigin,(l||wb&&m&&p.zOrigin)&&(tb?(n=!0,l=(l||V(a,c,e,!1,"50% 50%"))+"",c=vb,f=new mb(q,c,0,0,f,-1,"css_transformOrigin"),f.b=q[c],f.plugin=g,wb?(k=p.zOrigin,l=l.split(" "),p.zOrigin=(l.length>2?parseFloat(l[2]):k)||0,f.xs0=f.e=q[c]=l[0]+" "+(l[1]||"50%")+" 0px",f=new mb(p,"zOrigin",0,0,f,-1,f.n),f.b=k,f.xs0=f.e=p.zOrigin):f.xs0=f.e=q[c]=l):bb(l+"",p)),n&&(d._transformType=m||3===this._transformType?3:2),f},prefix:!0}),qb("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),qb("borderRadius",{defaultValue:"0px",parser:function(a,b,c,f,g){b=this.format(b);var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],y=a.style;for(p=parseFloat(a.offsetWidth),q=parseFloat(a.offsetHeight),h=b.split(" "),i=0;x.length>i;i++)this.p.indexOf("border")&&(x[i]=T(x[i])),l=k=V(a,x[i],e,!1,"0px"),-1!==l.indexOf(" ")&&(k=l.split(" "),l=k[0],k=k[1]),m=j=h[i],n=parseFloat(l),s=l.substr((n+"").length),t="="===m.charAt(1),t?(o=parseInt(m.charAt(0)+"1",10),m=m.substr(2),o*=parseFloat(m),r=m.substr((o+"").length-(0>o?1:0))||""):(o=parseFloat(m),r=m.substr((o+"").length)),""===r&&(r=d[c]||s),r!==s&&(u=W(a,"borderLeft",n,s),v=W(a,"borderTop",n,s),"%"===r?(l=100*(u/p)+"%",k=100*(v/q)+"%"):"em"===r?(w=W(a,"borderLeft",1,"em"),l=u/w+"em",k=v/w+"em"):(l=u+"px",k=v+"px"),t&&(m=parseFloat(l)+o+r,j=parseFloat(k)+o+r)),g=nb(y,x[i],l+" "+k,m+" "+j,!1,"0px",g);return g},prefix:!0,formatter:jb("0px 0px 0px 0px",!1,!0)}),qb("backgroundPosition",{defaultValue:"0 0",parser:function(a,b,c,d,f,g){var h,i,j,k,l,m,n="background-position",p=e||U(a,null),q=this.format((p?o?p.getPropertyValue(n+"-x")+" "+p.getPropertyValue(n+"-y"):p.getPropertyValue(n):a.currentStyle.backgroundPositionX+" "+a.currentStyle.backgroundPositionY)||"0 0"),r=this.format(b);if(-1!==q.indexOf("%")!=(-1!==r.indexOf("%"))&&(m=V(a,"backgroundImage").replace(A,""),m&&"none"!==m)){for(h=q.split(" "),i=r.split(" "),L.setAttribute("src",m),j=2;--j>-1;)q=h[j],k=-1!==q.indexOf("%"),k!==(-1!==i[j].indexOf("%"))&&(l=0===j?a.offsetWidth-L.width:a.offsetHeight-L.height,h[j]=k?parseFloat(q)/100*l+"px":100*(parseFloat(q)/l)+"%");q=h.join(" ")}return this.parseComplex(a.style,q,r,f,g)},formatter:bb}),qb("backgroundSize",{defaultValue:"0 0",formatter:bb}),qb("perspective",{defaultValue:"0px",prefix:!0}),qb("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),qb("transformStyle",{prefix:!0}),qb("backfaceVisibility",{prefix:!0}),qb("margin",{parser:kb("marginTop,marginRight,marginBottom,marginLeft")}),qb("padding",{parser:kb("paddingTop,paddingRight,paddingBottom,paddingLeft")}),qb("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(a,b,c,d,f,g){var h,i,j;return 9>o?(i=a.currentStyle,j=8>o?" ":",",h="rect("+i.clipTop+j+i.clipRight+j+i.clipBottom+j+i.clipLeft+")",b=this.format(b).split(",").join(j)):(h=this.format(V(a,this.p,e,!1,this.dflt)),b=this.format(b)),this.parseComplex(a.style,h,b,f,g)}}),qb("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),qb("autoRound,strictUnits",{parser:function(a,b,c,d,e){return e}}),qb("border",{defaultValue:"0px solid #000",parser:function(a,b,c,d,f,g){return this.parseComplex(a.style,this.format(V(a,"borderTopWidth",e,!1,"0px")+" "+V(a,"borderTopStyle",e,!1,"solid")+" "+V(a,"borderTopColor",e,!1,"#000")),this.format(b),f,g)},color:!0,formatter:function(a){var b=a.split(" ");return b[0]+" "+(b[1]||"solid")+" "+(a.match(ib)||["#000"])[0]}}),qb("float,cssFloat,styleFloat",{parser:function(a,b,c,d,e){var f=a.style,g="cssFloat"in f?"cssFloat":"styleFloat";return new mb(f,g,0,0,e,-1,c,!1,0,f[g],b)}});var Bb=function(a){var b,c=this.t,d=c.filter,e=0|this.s+this.c*a;100===e&&(-1===d.indexOf("atrix(")&&-1===d.indexOf("radient(")?(c.removeAttribute("filter"),b=!V(this.data,"filter")):(c.filter=d.replace(w,""),b=!0)),b||(this.xn1&&(c.filter=d=d||"alpha(opacity=100)"),-1===d.indexOf("opacity")?c.filter+=" alpha(opacity="+e+")":c.filter=d.replace(u,"opacity="+e))};qb("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(a,b,c,d,f,g){var h,i=parseFloat(V(a,"opacity",e,!1,"1")),j=a.style;return b=parseFloat(b),"autoAlpha"===c&&(h=V(a,"visibility",e),1===i&&"hidden"===h&&0!==b&&(i=0),f=new mb(j,"visibility",0,0,f,-1,null,!1,0,0!==i?"visible":"hidden",0===b?"hidden":"visible"),f.xs0="visible",d._overwriteProps.push(f.n)),O?f=new mb(j,"opacity",i,b-i,f):(f=new mb(j,"opacity",100*i,100*(b-i),f),f.xn1="autoAlpha"===c?1:0,j.zoom=1,f.type=2,f.b="alpha(opacity="+f.s+")",f.e="alpha(opacity="+(f.s+f.c)+")",f.data=a,f.plugin=g,f.setRatio=Bb),f}});var Cb=function(a,b){b&&(a.removeProperty?a.removeProperty(b.replace(y,"-$1").toLowerCase()):a.removeAttribute(b))},Db=function(a){if(this.t._gsClassPT=this,1===a||0===a){this.t.className=0===a?this.b:this.e;for(var b=this.data,c=this.t.style;b;)b.v?c[b.p]=b.v:Cb(c,b.p),b=b._next;1===a&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.className!==this.e&&(this.t.className=this.e)};qb("className",{parser:function(a,b,d,f,g,h,i){var j,k,l,m,n,o=a.className,p=a.style.cssText;if(g=f._classNamePT=new mb(a,d,0,0,g,2),g.setRatio=Db,g.pr=-11,c=!0,g.b=o,k=Y(a,e),l=a._gsClassPT){for(m={},n=l.data;n;)m[n.p]=1,n=n._next;l.setRatio(1)}return a._gsClassPT=g,g.e="="!==b.charAt(1)?b:o.replace(RegExp("\\s*\\b"+b.substr(2)+"\\b"),"")+("+"===b.charAt(0)?" "+b.substr(2):""),f._tween._duration&&(a.className=g.e,j=Z(a,k,Y(a),i,m),a.className=o,g.data=j.firstMPT,a.style.cssText=p,g=g.xfirst=f.parse(a,j.difs,g,h)),g}});var Eb=function(a){if((1===a||0===a)&&this.data._totalTime===this.data._totalDuration)for(var b,c="all"===this.e,d=this.t.style,e=c?d.cssText.split(";"):this.e.split(","),f=e.length,g=h.transform.parse;--f>-1;)b=e[f],c&&(b=b.substr(0,b.indexOf(":")).split(" ").join("")),h[b]&&(b=h[b].parse===g?tb:h[b].p),Cb(d,b)};for(qb("clearProps",{parser:function(a,b,d,e,f){return f=new mb(a,d,0,0,f,2),f.setRatio=Eb,f.e=b,f.pr=-10,f.data=e._tween,c=!0,f}}),i="bezier,throwProps,physicsProps,physics2D".split(","),ob=i.length;ob--;)rb(i[ob]);i=g.prototype,i._firstPT=null,i._onInitTween=function(a,b,h){if(!a.nodeType)return!1;this._target=a,this._tween=h,this._vars=b,j=b.autoRound,c=!1,d=b.suffixMap||g.suffixMap,e=U(a,""),f=this._overwriteProps;var i,m,o,p,q,r,s,t,u,w=a.style;if(k&&""===w.zIndex&&(i=V(a,"zIndex",e),("auto"===i||""===i)&&(w.zIndex=0)),"string"==typeof b&&(p=w.cssText,i=Y(a,e),w.cssText=p+";"+b,i=Z(a,i,Y(a)).difs,!O&&v.test(b)&&(i.opacity=parseFloat(RegExp.$1)),b=i,w.cssText=p),this._firstPT=m=this.parse(a,b,null),this._transformType){for(u=3===this._transformType,tb?l&&(k=!0,""===w.zIndex&&(s=V(a,"zIndex",e),("auto"===s||""===s)&&(w.zIndex=0)),n&&(w.WebkitBackfaceVisibility=this._vars.WebkitBackfaceVisibility||(u?"visible":"hidden"))):w.zoom=1,o=m;o&&o._next;)o=o._next;t=new mb(a,"transform",0,0,null,2),this._linkCSSP(t,null,o),t.setRatio=u&&wb?zb:tb?Ab:yb,t.data=this._transform||xb(a,e,!0),f.pop()}if(c){for(;m;){for(r=m._next,o=p;o&&o.pr>m.pr;)o=o._next;(m._prev=o?o._prev:q)?m._prev._next=m:p=m,(m._next=o)?o._prev=m:q=m,m=r}this._firstPT=p}return!0},i.parse=function(a,b,c,f){var g,i,k,l,m,n,o,p,q,r,s=a.style;for(g in b)n=b[g],i=h[g],i?c=i.parse(a,n,g,this,c,f,b):(m=V(a,g,e)+"",q="string"==typeof n,"color"===g||"fill"===g||"stroke"===g||-1!==g.indexOf("Color")||q&&x.test(n)?(q||(n=hb(n),n=(n.length>3?"rgba(":"rgb(")+n.join(",")+")"),c=nb(s,g,m,n,!0,"transparent",c,0,f)):!q||-1===n.indexOf(" ")&&-1===n.indexOf(",")?(k=parseFloat(m),o=k||0===k?m.substr((k+"").length):"",(""===m||"auto"===m)&&("width"===g||"height"===g?(k=ab(a,g,e),o="px"):"left"===g||"top"===g?(k=X(a,g,e),o="px"):(k="opacity"!==g?0:1,o="")),r=q&&"="===n.charAt(1),r?(l=parseInt(n.charAt(0)+"1",10),n=n.substr(2),l*=parseFloat(n),p=n.replace(t,"")):(l=parseFloat(n),p=q?n.substr((l+"").length)||"":""),""===p&&(p=d[g]||o),n=l||0===l?(r?l+k:l)+p:b[g],o!==p&&""!==p&&(l||0===l)&&(k||0===k)&&(k=W(a,g,k,o),"%"===p?(k/=W(a,g,100,"%")/100,k>100&&(k=100),b.strictUnits!==!0&&(m=k+"%")):"em"===p?k/=W(a,g,1,"em"):(l=W(a,g,l,p),p="px"),r&&(l||0===l)&&(n=l+k+p)),r&&(l+=k),!k&&0!==k||!l&&0!==l?n||"NaN"!=n+""&&null!=n?(c=new mb(s,g,l||k||0,0,c,-1,"css_"+g,!1,0,m,n),c.xs0="none"!==n||"display"!==g&&-1===g.indexOf("Style")?n:m):Q("invalid "+g+" tween value: "+b[g]):(c=new mb(s,g,k,l-k,c,0,"css_"+g,j!==!1&&("px"===p||"zIndex"===g),0,m,n),c.xs0=p)):c=nb(s,g,m,n,!0,null,c,0,f)),f&&c&&!c.plugin&&(c.plugin=f);return c},i.setRatio=function(a){var b,c,d,e=this._firstPT,f=1e-6;if(1!==a||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(a||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;e;){if(b=e.c*a+e.s,e.r?b=b>0?0|b+.5:0|b-.5:f>b&&b>-f&&(b=0),e.type)if(1===e.type)if(d=e.l,2===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2;else if(3===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3;else if(4===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3+e.xn3+e.xs4;else if(5===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3+e.xn3+e.xs4+e.xn4+e.xs5;else{for(c=e.xs0+b+e.xs1,d=1;e.l>d;d++)c+=e["xn"+d]+e["xs"+(d+1)];e.t[e.p]=c}else-1===e.type?e.t[e.p]=e.xs0:e.setRatio&&e.setRatio(a);else e.t[e.p]=b+e.xs0;e=e._next}else for(;e;)2!==e.type?e.t[e.p]=e.b:e.setRatio(a),e=e._next;else for(;e;)2!==e.type?e.t[e.p]=e.e:e.setRatio(a),e=e._next},i._enableTransforms=function(a){this._transformType=a||3===this._transformType?3:2},i._linkCSSP=function(a,b,c,d){return a&&(b&&(b._prev=a),a._next&&(a._next._prev=a._prev),c?c._next=a:d||null!==this._firstPT||(this._firstPT=a),a._prev?a._prev._next=a._next:this._firstPT===a&&(this._firstPT=a._next),a._next=b,a._prev=c),a},i._kill=function(b){var c,d,e,f=b;if(b.css_autoAlpha||b.css_alpha){f={};for(d in b)f[d]=b[d];f.css_opacity=1,f.css_autoAlpha&&(f.css_visibility=1)}return b.css_className&&(c=this._classNamePT)&&(e=c.xfirst,e&&e._prev?this._linkCSSP(e._prev,c._next,e._prev._prev):e===this._firstPT&&(this._firstPT=c._next),c._next&&this._linkCSSP(c._next,c._next._next,e._prev),this._classNamePT=null),a.prototype._kill.call(this,f)};var Fb=function(a,b,c){var d,e,f,g;if(a.slice)for(e=a.length;--e>-1;)Fb(a[e],b,c);else for(d=a.childNodes,e=d.length;--e>-1;)f=d[e],g=f.type,f.style&&(b.push(Y(f)),c&&c.push(f)),1!==g&&9!==g&&11!==g||!f.childNodes.length||Fb(f,b,c)};return g.cascadeTo=function(a,c,d){var e,f,g,h=b.to(a,c,d),i=[h],j=[],k=[],l=[],m=b._internals.reservedProps;for(a=h._targets||h.target,Fb(a,j,l),h.render(c,!0),Fb(a,k),h.render(0,!0),h._enabled(!0),e=l.length;--e>-1;)if(f=Z(l[e],j[e],k[e]),f.firstMPT){f=f.difs;for(g in d)m[g]&&(f[g]=d[g]);i.push(b.to(l[e],c,f))}return i},a.activate([g]),g},!0)}),window._gsDefine&&window._gsQueue.pop()(),define("CSSPACK",function(){}),!function(){var a={},b=null,c=!0,d=!1;if("undefined"!=typeof AudioContext)b=new AudioContext;else if("undefined"!=typeof webkitAudioContext)b=new webkitAudioContext;else if("undefined"!=typeof Audio){c=!1;try{new Audio}catch(e){d=!0}}else c=!1,d=!0;if(c){var f=void 0===b.createGain?b.createGainNode():b.createGain();f.gain.value=1,f.connect(b.destination)}var g=function(){this._volume=1,this._muted=!1,this.usingWebAudio=c,this._howls=[]};g.prototype={volume:function(a){var b=this;if(a=parseFloat(a),a&&a>=0&&1>=a){b._volume=a,c&&(f.gain.value=a);for(var d in b._howls)if(b._howls.hasOwnProperty(d)&&b._howls[d]._webAudio===!1)for(var e=0;e<b._howls[d]._audioNode.length;e++)b._howls[d]._audioNode[e].volume=b._howls[d]._volume*b._volume;return b}return c?f.gain.value:b._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(a){var b=this;b._muted=a,c&&(f.gain.value=a?0:b._volume);for(var d in b._howls)if(b._howls.hasOwnProperty(d)&&b._howls[d]._webAudio===!1)for(var e=0;e<b._howls[d]._audioNode.length;e++)b._howls[d]._audioNode[e].muted=a}};var h=new g,i=null;if(!d){i=new Audio;var j={mp3:!!i.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!i.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),m4a:!!(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")}}var k=function(a){var b=this;b._autoplay=a.autoplay||!1,b._buffer=a.buffer||!1,b._duration=a.duration||0,b._format=a.format||null,b._loop=a.loop||!1,b._loaded=!1,b._sprite=a.sprite||{},b._src=a.src||"",b._pos3d=a.pos3d||[0,0,-.5],b._volume=a.volume||1,b._urls=a.urls||[],b._rate=a.rate||1,b._onload=[a.onload||function(){}],b._onloaderror=[a.onloaderror||function(){}],b._onend=[a.onend||function(){}],b._onpause=[a.onpause||function(){}],b._onplay=[a.onplay||function(){}],b._onendTimer=[],b._webAudio=c&&!b._buffer,b._audioNode=[],b._webAudio&&b._setupAudioNode(),h._howls.push(b),b.load()};if(k.prototype={load:function(){var b=this,c=null;if(d)return void b.on("loaderror");for(var e=0;e<b._urls.length;e++){var f,g;if(b._format)f=b._format;else{if(g=b._urls[e].toLowerCase().split("?")[0],f=g.match(/.+\.([^?]+)(\?|$)/),f=f&&f.length>=2?f:g.match(/data\:audio\/([^?]+);/),!f)return void b.on("loaderror");f=f[1]}if(j[f]){c=b._urls[e];break}}if(!c)return void b.on("loaderror");if(b._src=c,b._webAudio)l(b,c);else{var i=new Audio;b._audioNode.push(i),i.src=c,i._pos=0,i.preload="auto",i.volume=h._muted?0:b._volume*h.volume(),a[c]=b;var k=function(){b._duration=i.duration,0===Object.getOwnPropertyNames(b._sprite).length&&(b._sprite={_default:[0,1e3*b._duration]}),b._loaded||(b._loaded=!0,b.on("load")),b._autoplay&&b.play(),i.removeEventListener("canplaythrough",k,!1)};i.addEventListener("canplaythrough",k,!1),i.load()}return b},urls:function(a){var b=this;return a?(b.stop(),b._urls="string"==typeof a?[a]:a,b._loaded=!1,b.load(),b):b._urls},play:function(a,c){var d=this;return"function"==typeof a&&(c=a),a&&"function"!=typeof a||(a="_default"),d._loaded?d._sprite[a]?(d._inactiveNode(function(e){e._sprite=a;var f,g=e._pos>0?e._pos:d._sprite[a][0]/1e3,i=d._sprite[a][1]/1e3-e._pos,j=!(!d._loop&&!d._sprite[a][2]),k="string"==typeof c?c:Math.round(Date.now()*Math.random())+"";if(function(){var b={id:k,sprite:a,loop:j};f=setTimeout(function(){!d._webAudio&&j&&d.stop(b.id,b.timer).play(a,b.id),d._webAudio&&!j&&(d._nodeById(b.id).paused=!0),d._webAudio||j||d.stop(b.id,b.timer),d.on("end",k)},1e3*i),d._onendTimer.push(f),b.timer=d._onendTimer[d._onendTimer.length-1]}(),d._webAudio){var l=d._sprite[a][0]/1e3,m=d._sprite[a][1]/1e3;e.id=k,e.paused=!1,n(d,[j,l,m],k),d._playStart=b.currentTime,e.gain.value=d._volume,void 0===e.bufferSource.start?e.bufferSource.noteGrainOn(0,g,i):e.bufferSource.start(0,g,i)}else{if(4!==e.readyState)return d._clearEndTimer(f),function(){var b=d,f=a,g=c,h=e,i=function(){b.play(f,g),h.removeEventListener("canplaythrough",i,!1)};h.addEventListener("canplaythrough",i,!1)}(),d;e.id=k,e.currentTime=g,e.muted=h._muted,e.volume=d._volume*h.volume(),setTimeout(function(){e.play()},0)}return d.on("play"),"function"==typeof c&&c(k),d}),d):("function"==typeof c&&c(),d):(d.on("load",function(){d.play(a,c)}),d)},pause:function(a,b){var c=this;if(!c._loaded)return c.on("play",function(){c.pause(a)}),c;c._clearEndTimer(b||0);var d=a?c._nodeById(a):c._activeNode();if(d)if(d._pos=c.pos(null,a),c._webAudio){if(!d.bufferSource)return c;d.paused=!0,void 0===d.bufferSource.stop?d.bufferSource.noteOff(0):d.bufferSource.stop(0)}else d.pause();return c.on("pause"),c},stop:function(a,b){var c=this;if(!c._loaded)return c.on("play",function(){c.stop(a)}),c;c._clearEndTimer(b||0);var d=a?c._nodeById(a):c._activeNode();if(d)if(d._pos=0,c._webAudio){if(!d.bufferSource)return c;d.paused=!0,void 0===d.bufferSource.stop?d.bufferSource.noteOff(0):d.bufferSource.stop(0)}else d.pause(),d.currentTime=0;return c},mute:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.mute(a)}),b;var c=a?b._nodeById(a):b._activeNode();return c&&(b._webAudio?c.gain.value=0:c.volume=0),b},unmute:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.unmute(a)}),b;var c=a?b._nodeById(a):b._activeNode();return c&&(b._webAudio?c.gain.value=b._volume:c.volume=b._volume),b},volume:function(a,b){var c=this;if(a=parseFloat(a),a>=0&&1>=a){if(c._volume=a,!c._loaded)return c.on("play",function(){c.volume(a,b)}),c;var d=b?c._nodeById(b):c._activeNode();return d&&(c._webAudio?d.gain.value=a:d.volume=a*h.volume()),c}return c._volume},loop:function(a){var b=this;return"boolean"==typeof a?(b._loop=a,b):b._loop},sprite:function(a){var b=this;return"object"==typeof a?(b._sprite=a,b):b._sprite},pos:function(a,c){var d=this;if(!d._loaded)return d.on("load",function(){d.pos(a)}),"number"==typeof a?d:d._pos||0;a=parseFloat(a);var e=c?d._nodeById(c):d._activeNode();if(e)return d._webAudio?a>=0?(e._pos=a,d.pause(c).play(e._sprite,c),d):e._pos+(b.currentTime-d._playStart):a>=0?(e.currentTime=a,d):e.currentTime;if(a>=0)return d;for(var f=0;f<d._audioNode.length;f++)if(d._audioNode[f].paused&&4===d._audioNode[f].readyState)return d._webAudio?d._audioNode[f]._pos:d._audioNode[f].currentTime},pos3d:function(a,b,c,d){var e=this;if(b=void 0!==b&&b?b:0,c=void 0!==c&&c?c:-.5,!e._loaded)return e.on("play",function(){e.pos3d(a,b,c,d)}),e;if(!(a>=0||0>a))return e._pos3d;if(e._webAudio){var f=d?e._nodeById(d):e._activeNode();f&&(e._pos3d=[a,b,c],f.panner.setPosition(a,b,c))}return e},fade:function(a,b,c,d,e){var f=this,g=Math.abs(a-b),h=a>b?"down":"up",i=g/.01,j=c/i;if(!f._loaded)return f.on("load",function(){f.fade(a,b,c,d,e)}),f;f.volume(a,e);for(var k=1;i>=k;k++)!function(){var a=f._volume+("up"===h?.01:-.01)*k,c=Math.round(1e3*a)/1e3,g=b;setTimeout(function(){f.volume(c,e),c===g&&d&&d()},j*k)}()},fadeIn:function(a,b,c){return this.volume(0).play().fade(0,a,b,c)},fadeOut:function(a,b,c,d){var e=this;return e.fade(e._volume,a,b,function(){c&&c(),e.pause(d),e.on("end")},d)},_nodeById:function(a){for(var b=this,c=b._audioNode[0],d=0;d<b._audioNode.length;d++)if(b._audioNode[d].id===a){c=b._audioNode[d];break}return c},_activeNode:function(){for(var a=this,b=null,c=0;c<a._audioNode.length;c++)if(!a._audioNode[c].paused){b=a._audioNode[c];break}return a._drainPool(),b},_inactiveNode:function(a){for(var b=this,c=null,d=0;d<b._audioNode.length;d++)if(b._audioNode[d].paused&&4===b._audioNode[d].readyState){a(b._audioNode[d]),c=!0;break}if(b._drainPool(),!c){var e;b._webAudio?(e=b._setupAudioNode(),a(e)):(b.load(),e=b._audioNode[b._audioNode.length-1],e.addEventListener("loadedmetadata",function(){a(e)}))}},_drainPool:function(){var a,b=this,c=0;for(a=0;a<b._audioNode.length;a++)b._audioNode[a].paused&&c++;for(a=b._audioNode.length-1;a>=0&&!(5>=c);a--)b._audioNode[a].paused&&(b._webAudio&&b._audioNode[a].disconnect(0),c--,b._audioNode.splice(a,1))},_clearEndTimer:function(a){var b=this,c=b._onendTimer.indexOf(a);c=c>=0?c:0,b._onendTimer[c]&&(clearTimeout(b._onendTimer[c]),b._onendTimer.splice(c,1))},_setupAudioNode:function(){var a=this,c=a._audioNode,d=a._audioNode.length;return c[d]=void 0===b.createGain?b.createGainNode():b.createGain(),c[d].gain.value=a._volume,c[d].paused=!0,c[d]._pos=0,c[d].readyState=4,c[d].connect(f),c[d].panner=b.createPanner(),c[d].panner.setPosition(a._pos3d[0],a._pos3d[1],a._pos3d[2]),c[d].panner.connect(c[d]),c[d]},on:function(a,b){var c=this,d=c["_on"+a];if("function"==typeof b)d.push(b);else for(var e=0;e<d.length;e++)b?d[e].call(c,b):d[e].call(c);return c},off:function(a,b){for(var c=this,d=c["_on"+a],e=""+b,f=0;f<d.length;f++)if(e===""+d[f]){d.splice(f,1);break}return c},unload:function(){for(var b=this,c=b._audioNode,d=0;d<b._audioNode.length;d++)b.stop(c[d].id),b._webAudio?c[d].disconnect(0):c[d].src="";var e=h._howls.indexOf(b);e&&h._howls.splice(e,1),delete a[b._src],b=null}},c)var l=function(c,d){if(d in a)c._duration=a[d].duration,m(c);else{var e=new XMLHttpRequest;e.open("GET",d,!0),e.responseType="arraybuffer",e.onload=function(){b.decodeAudioData(e.response,function(b){b&&(a[d]=b,m(c,b))})},e.onerror=function(){c._webAudio&&(c._buffer=!0,c._webAudio=!1,c._audioNode=[],delete c._gainNode,c.load())};try{e.send()}catch(f){e.onerror()}}},m=function(a,b){a._duration=b?b.duration:a._duration,0===Object.getOwnPropertyNames(a._sprite).length&&(a._sprite={_default:[0,1e3*a._duration]}),a._loaded||(a._loaded=!0,a.on("load")),a._autoplay&&a.play()},n=function(c,d,e){var f=c._nodeById(e);f.bufferSource=b.createBufferSource(),f.bufferSource.buffer=a[c._src],f.bufferSource.connect(f.panner),f.bufferSource.loop=d[0],d[0]&&(f.bufferSource.loopStart=d[1],f.bufferSource.loopEnd=d[1]+d[2]),f.bufferSource.playbackRate.value=c._rate};"function"==typeof define&&define.amd&&define("HOWLER",[],function(){return{Howler:h,Howl:k}}),window.Howler=h,window.Howl=k}(),function(){var a=this,b=b||{};b.WEBGL_RENDERER=0,b.CANVAS_RENDERER=1,b.VERSION="v2.1.0",b.blendModes={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},b.scaleModes={DEFAULT:0,LINEAR:0,NEAREST:1},b._UID=0,"undefined"!=typeof Float32Array?(b.Float32Array=Float32Array,b.Uint16Array=Uint16Array):(b.Float32Array=Array,b.Uint16Array=Array),b.INTERACTION_FREQUENCY=30,b.AUTO_PREVENT_DEFAULT=!0,b.PI_2=2*Math.PI,b.RAD_TO_DEG=180/Math.PI,b.DEG_TO_RAD=Math.PI/180,b.RETINA_PREFIX="@2x",b.dontSayHello=!1,b.defaultRenderOptions={view:null,transparent:!1,antialias:!1,preserveDrawingBuffer:!1,resolution:1,clearBeforeRender:!0,autoResize:!1},b.sayHello=function(a){if(!b.dontSayHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var c=["%c %c %c Pixi.js "+b.VERSION+" - "+a+"  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ ","background: #ff66a5","background: #ff66a5","color: #ff66a5; background: #030307;","background: #ff66a5","background: #ffc3dc","background: #ff66a5","color: #ff2424; background: #fff","color: #ff2424; background: #fff","color: #ff2424; background: #fff"];console.log.apply(console,c)}else window.console;b.dontSayHello=!0}},b.Point=function(a,b){this.x=a||0,this.y=b||0},b.Point.prototype.clone=function(){return new b.Point(this.x,this.y)},b.Point.prototype.set=function(a,b){this.x=a||0,this.y=b||(0!==b?this.x:0)},b.Point.prototype.constructor=b.Point,b.Rectangle=function(a,b,c,d){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0},b.Rectangle.prototype.clone=function(){return new b.Rectangle(this.x,this.y,this.width,this.height)},b.Rectangle.prototype.contains=function(a,b){if(this.width<=0||this.height<=0)return!1;var c=this.x;if(a>=c&&a<=c+this.width){var d=this.y;if(b>=d&&b<=d+this.height)return!0}return!1},b.Rectangle.prototype.constructor=b.Rectangle,b.EmptyRectangle=new b.Rectangle(0,0,0,0),b.Polygon=function(a){if(a instanceof Array||(a=Array.prototype.slice.call(arguments)),a[0]instanceof b.Point){for(var c=[],d=0,e=a.length;e>d;d++)c.push(a[d].x,a[d].y);a=c}this.closed=!0,this.points=a},b.Polygon.prototype.clone=function(){var a=this.points.slice();return new b.Polygon(a)},b.Polygon.prototype.contains=function(a,b){for(var c=!1,d=this.points.length/2,e=0,f=d-1;d>e;f=e++){var g=this.points[2*e],h=this.points[2*e+1],i=this.points[2*f],j=this.points[2*f+1],k=h>b!=j>b&&(i-g)*(b-h)/(j-h)+g>a;k&&(c=!c)}return c},b.Polygon.prototype.constructor=b.Polygon,b.Circle=function(a,b,c){this.x=a||0,this.y=b||0,this.radius=c||0},b.Circle.prototype.clone=function(){return new b.Circle(this.x,this.y,this.radius)},b.Circle.prototype.contains=function(a,b){if(this.radius<=0)return!1;var c=this.x-a,d=this.y-b,e=this.radius*this.radius;return c*=c,d*=d,e>=c+d},b.Circle.prototype.getBounds=function(){return new b.Rectangle(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},b.Circle.prototype.constructor=b.Circle,b.Ellipse=function(a,b,c,d){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0},b.Ellipse.prototype.clone=function(){return new b.Ellipse(this.x,this.y,this.width,this.height)},b.Ellipse.prototype.contains=function(a,b){if(this.width<=0||this.height<=0)return!1;var c=(a-this.x)/this.width,d=(b-this.y)/this.height;return c*=c,d*=d,1>=c+d},b.Ellipse.prototype.getBounds=function(){return new b.Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)},b.Ellipse.prototype.constructor=b.Ellipse,b.RoundedRectangle=function(a,b,c,d,e){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0,this.radius=e||20},b.RoundedRectangle.prototype.clone=function(){return new b.RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},b.RoundedRectangle.prototype.contains=function(a,b){if(this.width<=0||this.height<=0)return!1;var c=this.x;if(a>=c&&a<=c+this.width){var d=this.y;if(b>=d&&b<=d+this.height)return!0}return!1},b.RoundedRectangle.prototype.constructor=b.RoundedRectangle,b.Matrix=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0},b.Matrix.prototype.fromArray=function(a){this.a=a[0],this.b=a[1],this.c=a[3],this.d=a[4],this.tx=a[2],this.ty=a[5]},b.Matrix.prototype.toArray=function(a){this.array||(this.array=new b.Float32Array(9));var c=this.array;return a?(c[0]=this.a,c[1]=this.b,c[2]=0,c[3]=this.c,c[4]=this.d,c[5]=0,c[6]=this.tx,c[7]=this.ty,c[8]=1):(c[0]=this.a,c[1]=this.c,c[2]=this.tx,c[3]=this.b,c[4]=this.d,c[5]=this.ty,c[6]=0,c[7]=0,c[8]=1),c},b.Matrix.prototype.apply=function(a,c){return c=c||new b.Point,c.x=this.a*a.x+this.c*a.y+this.tx,c.y=this.b*a.x+this.d*a.y+this.ty,c},b.Matrix.prototype.applyInverse=function(a,c){c=c||new b.Point;var d=1/(this.a*this.d+this.c*-this.b);return c.x=this.d*d*a.x+-this.c*d*a.y+(this.ty*this.c-this.tx*this.d)*d,c.y=this.a*d*a.y+-this.b*d*a.x+(-this.ty*this.a+this.tx*this.b)*d,c},b.Matrix.prototype.translate=function(a,b){return this.tx+=a,this.ty+=b,this},b.Matrix.prototype.scale=function(a,b){return this.a*=a,this.d*=b,this.c*=a,this.b*=b,this.tx*=a,this.ty*=b,this},b.Matrix.prototype.rotate=function(a){var b=Math.cos(a),c=Math.sin(a),d=this.a,e=this.c,f=this.tx;return this.a=d*b-this.b*c,this.b=d*c+this.b*b,this.c=e*b-this.d*c,this.d=e*c+this.d*b,this.tx=f*b-this.ty*c,this.ty=f*c+this.ty*b,this},b.Matrix.prototype.append=function(a){var b=this.a,c=this.b,d=this.c,e=this.d;return this.a=a.a*b+a.b*d,this.b=a.a*c+a.b*e,this.c=a.c*b+a.d*d,this.d=a.c*c+a.d*e,this.tx=a.tx*b+a.ty*d+this.tx,this.ty=a.tx*c+a.ty*e+this.ty,this},b.Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},b.identityMatrix=new b.Matrix,b.DisplayObject=function(){this.position=new b.Point,this.scale=new b.Point(1,1),this.pivot=new b.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.buttonMode=!1,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this._interactive=!1,this.defaultCursor="pointer",this.worldTransform=new b.Matrix,this._sr=0,this._cr=1,this.filterArea=null,this._bounds=new b.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cacheIsDirty=!1},b.DisplayObject.prototype.constructor=b.DisplayObject,Object.defineProperty(b.DisplayObject.prototype,"interactive",{get:function(){return this._interactive},set:function(a){this._interactive=a,this.stage&&(this.stage.dirty=!0)}}),Object.defineProperty(b.DisplayObject.prototype,"worldVisible",{get:function(){var a=this;do{if(!a.visible)return!1;a=a.parent}while(a);return!0}}),Object.defineProperty(b.DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(a){this._mask&&(this._mask.isMask=!1),this._mask=a,this._mask&&(this._mask.isMask=!0)}}),Object.defineProperty(b.DisplayObject.prototype,"filters",{get:function(){return this._filters},set:function(a){if(a){for(var b=[],c=0;c<a.length;c++)for(var d=a[c].passes,e=0;e<d.length;e++)b.push(d[e]);this._filterBlock={target:this,filterPasses:b}}this._filters=a}}),Object.defineProperty(b.DisplayObject.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(a){this._cacheAsBitmap!==a&&(a?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=a)}}),b.DisplayObject.prototype.updateTransform=function(){var a,c,d,e,f,g,h=this.parent.worldTransform,i=this.worldTransform;this.rotation%b.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),a=this._cr*this.scale.x,c=this._sr*this.scale.x,d=-this._sr*this.scale.y,e=this._cr*this.scale.y,f=this.position.x,g=this.position.y,(this.pivot.x||this.pivot.y)&&(f-=this.pivot.x*a+this.pivot.y*d,g-=this.pivot.x*c+this.pivot.y*e),i.a=a*h.a+c*h.c,i.b=a*h.b+c*h.d,i.c=d*h.a+e*h.c,i.d=d*h.b+e*h.d,i.tx=f*h.a+g*h.c+h.tx,i.ty=f*h.b+g*h.d+h.ty):(a=this.scale.x,e=this.scale.y,f=this.position.x-this.pivot.x*a,g=this.position.y-this.pivot.y*e,i.a=a*h.a,i.b=a*h.b,i.c=e*h.c,i.d=e*h.d,i.tx=f*h.a+g*h.c+h.tx,i.ty=f*h.b+g*h.d+h.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha},b.DisplayObject.prototype.displayObjectUpdateTransform=b.DisplayObject.prototype.updateTransform,b.DisplayObject.prototype.getBounds=function(a){return a=a,b.EmptyRectangle},b.DisplayObject.prototype.getLocalBounds=function(){return this.getBounds(b.identityMatrix)},b.DisplayObject.prototype.setStageReference=function(a){this.stage=a,this._interactive&&(this.stage.dirty=!0)},b.DisplayObject.prototype.generateTexture=function(a,c,d){var e=this.getLocalBounds(),f=new b.RenderTexture(0|e.width,0|e.height,d,c,a);return b.DisplayObject._tempMatrix.tx=-e.x,b.DisplayObject._tempMatrix.ty=-e.y,f.render(this,b.DisplayObject._tempMatrix),f},b.DisplayObject.prototype.updateCache=function(){this._generateCachedSprite()},b.DisplayObject.prototype.toGlobal=function(a){return this.displayObjectUpdateTransform(),this.worldTransform.apply(a)},b.DisplayObject.prototype.toLocal=function(a,b){return b&&(a=b.toGlobal(a)),this.displayObjectUpdateTransform(),this.worldTransform.applyInverse(a)},b.DisplayObject.prototype._renderCachedSprite=function(a){this._cachedSprite.worldAlpha=this.worldAlpha,a.gl?b.Sprite.prototype._renderWebGL.call(this._cachedSprite,a):b.Sprite.prototype._renderCanvas.call(this._cachedSprite,a)},b.DisplayObject.prototype._generateCachedSprite=function(){this._cacheAsBitmap=!1;var a=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.texture.resize(0|a.width,0|a.height);else{var c=new b.RenderTexture(0|a.width,0|a.height);this._cachedSprite=new b.Sprite(c),this._cachedSprite.worldTransform=this.worldTransform}var d=this._filters;this._filters=null,this._cachedSprite.filters=d,b.DisplayObject._tempMatrix.tx=-a.x,b.DisplayObject._tempMatrix.ty=-a.y,this._cachedSprite.texture.render(this,b.DisplayObject._tempMatrix,!0),this._cachedSprite.anchor.x=-(a.x/a.width),this._cachedSprite.anchor.y=-(a.y/a.height),this._filters=d,this._cacheAsBitmap=!0},b.DisplayObject.prototype._destroyCachedSprite=function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)},b.DisplayObject.prototype._renderWebGL=function(a){a=a},b.DisplayObject.prototype._renderCanvas=function(a){a=a},b.DisplayObject._tempMatrix=new b.Matrix,Object.defineProperty(b.DisplayObject.prototype,"x",{get:function(){return this.position.x},set:function(a){this.position.x=a}}),Object.defineProperty(b.DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(a){this.position.y=a}}),b.DisplayObjectContainer=function(){b.DisplayObject.call(this),this.children=[]},b.DisplayObjectContainer.prototype=Object.create(b.DisplayObject.prototype),b.DisplayObjectContainer.prototype.constructor=b.DisplayObjectContainer,Object.defineProperty(b.DisplayObjectContainer.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(a){var b=this.getLocalBounds().width;this.scale.x=0!==b?a/b:1,this._width=a}}),Object.defineProperty(b.DisplayObjectContainer.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(a){var b=this.getLocalBounds().height;
this.scale.y=0!==b?a/b:1,this._height=a}}),b.DisplayObjectContainer.prototype.addChild=function(a){return this.addChildAt(a,this.children.length)},b.DisplayObjectContainer.prototype.addChildAt=function(a,b){if(b>=0&&b<=this.children.length)return a.parent&&a.parent.removeChild(a),a.parent=this,this.children.splice(b,0,a),this.stage&&a.setStageReference(this.stage),a;throw new Error(a+"addChildAt: The index "+b+" supplied is out of bounds "+this.children.length)},b.DisplayObjectContainer.prototype.swapChildren=function(a,b){if(a!==b){var c=this.getChildIndex(a),d=this.getChildIndex(b);if(0>c||0>d)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[c]=b,this.children[d]=a}},b.DisplayObjectContainer.prototype.getChildIndex=function(a){var b=this.children.indexOf(a);if(-1===b)throw new Error("The supplied DisplayObject must be a child of the caller");return b},b.DisplayObjectContainer.prototype.setChildIndex=function(a,b){if(0>b||b>=this.children.length)throw new Error("The supplied index is out of bounds");var c=this.getChildIndex(a);this.children.splice(c,1),this.children.splice(b,0,a)},b.DisplayObjectContainer.prototype.getChildAt=function(a){if(0>a||a>=this.children.length)throw new Error("getChildAt: Supplied index "+a+" does not exist in the child list, or the supplied DisplayObject must be a child of the caller");return this.children[a]},b.DisplayObjectContainer.prototype.removeChild=function(a){var b=this.children.indexOf(a);if(-1!==b)return this.removeChildAt(b)},b.DisplayObjectContainer.prototype.removeChildAt=function(a){var b=this.getChildAt(a);return this.stage&&b.removeStageReference(),b.parent=void 0,this.children.splice(a,1),b},b.DisplayObjectContainer.prototype.removeChildren=function(a,b){var c=a||0,d="number"==typeof b?b:this.children.length,e=d-c;if(e>0&&d>=e){for(var f=this.children.splice(c,e),g=0;g<f.length;g++){var h=f[g];this.stage&&h.removeStageReference(),h.parent=void 0}return f}if(0===e&&0===this.children.length)return[];throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range")},b.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(this.displayObjectUpdateTransform(),!this._cacheAsBitmap))for(var a=0,b=this.children.length;b>a;a++)this.children[a].updateTransform()},b.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform=b.DisplayObjectContainer.prototype.updateTransform,b.DisplayObjectContainer.prototype.getBounds=function(){if(0===this.children.length)return b.EmptyRectangle;for(var a,c,d,e=1/0,f=1/0,g=-1/0,h=-1/0,i=!1,j=0,k=this.children.length;k>j;j++){var l=this.children[j];l.visible&&(i=!0,a=this.children[j].getBounds(),e=e<a.x?e:a.x,f=f<a.y?f:a.y,c=a.width+a.x,d=a.height+a.y,g=g>c?g:c,h=h>d?h:d)}if(!i)return b.EmptyRectangle;var m=this._bounds;return m.x=e,m.y=f,m.width=g-e,m.height=h-f,m},b.DisplayObjectContainer.prototype.getLocalBounds=function(){var a=this.worldTransform;this.worldTransform=b.identityMatrix;for(var c=0,d=this.children.length;d>c;c++)this.children[c].updateTransform();var e=this.getBounds();return this.worldTransform=a,e},b.DisplayObjectContainer.prototype.setStageReference=function(a){this.stage=a,this._interactive&&(this.stage.dirty=!0);for(var b=0,c=this.children.length;c>b;b++){var d=this.children[b];d.setStageReference(a)}},b.DisplayObjectContainer.prototype.removeStageReference=function(){for(var a=0,b=this.children.length;b>a;a++){var c=this.children[a];c.removeStageReference()}this._interactive&&(this.stage.dirty=!0),this.stage=null},b.DisplayObjectContainer.prototype._renderWebGL=function(a){if(this.visible&&!(this.alpha<=0)){if(this._cacheAsBitmap)return void this._renderCachedSprite(a);var b,c;if(this._mask||this._filters){for(this._filters&&(a.spriteBatch.flush(),a.filterManager.pushFilter(this._filterBlock)),this._mask&&(a.spriteBatch.stop(),a.maskManager.pushMask(this.mask,a),a.spriteBatch.start()),b=0,c=this.children.length;c>b;b++)this.children[b]._renderWebGL(a);a.spriteBatch.stop(),this._mask&&a.maskManager.popMask(this._mask,a),this._filters&&a.filterManager.popFilter(),a.spriteBatch.start()}else for(b=0,c=this.children.length;c>b;b++)this.children[b]._renderWebGL(a)}},b.DisplayObjectContainer.prototype._renderCanvas=function(a){if(this.visible!==!1&&0!==this.alpha){if(this._cacheAsBitmap)return void this._renderCachedSprite(a);this._mask&&a.maskManager.pushMask(this._mask,a);for(var b=0,c=this.children.length;c>b;b++){var d=this.children[b];d._renderCanvas(a)}this._mask&&a.maskManager.popMask(a)}},b.Sprite=function(a){b.DisplayObjectContainer.call(this),this.anchor=new b.Point,this.texture=a||b.Texture.emptyTexture,this._width=0,this._height=0,this.tint=16777215,this.blendMode=b.blendModes.NORMAL,this.shader=null,this.texture.baseTexture.hasLoaded?this.onTextureUpdate():this.texture.on("update",this.onTextureUpdate.bind(this)),this.renderable=!0},b.Sprite.prototype=Object.create(b.DisplayObjectContainer.prototype),b.Sprite.prototype.constructor=b.Sprite,Object.defineProperty(b.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(a){this.scale.x=a/this.texture.frame.width,this._width=a}}),Object.defineProperty(b.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(a){this.scale.y=a/this.texture.frame.height,this._height=a}}),b.Sprite.prototype.setTexture=function(a){this.texture=a,this.cachedTint=16777215},b.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},b.Sprite.prototype.getBounds=function(a){var b=this.texture.frame.width,c=this.texture.frame.height,d=b*(1-this.anchor.x),e=b*-this.anchor.x,f=c*(1-this.anchor.y),g=c*-this.anchor.y,h=a||this.worldTransform,i=h.a,j=h.b,k=h.c,l=h.d,m=h.tx,n=h.ty,o=-1/0,p=-1/0,q=1/0,r=1/0;if(0===j&&0===k)0>i&&(i*=-1),0>l&&(l*=-1),q=i*e+m,o=i*d+m,r=l*g+n,p=l*f+n;else{var s=i*e+k*g+m,t=l*g+j*e+n,u=i*d+k*g+m,v=l*g+j*d+n,w=i*d+k*f+m,x=l*f+j*d+n,y=i*e+k*f+m,z=l*f+j*e+n;o=-1/0,p=-1/0,q=1/0,r=1/0,q=q>s?s:q,q=q>u?u:q,q=q>w?w:q,q=q>y?y:q,r=r>t?t:r,r=r>v?v:r,r=r>x?x:r,r=r>z?z:r,o=s>o?s:o,o=u>o?u:o,o=w>o?w:o,o=y>o?y:o,p=t>p?t:p,p=v>p?v:p,p=x>p?x:p,p=z>p?z:p}var A=this._bounds;return A.x=q,A.width=o-q,A.y=r,A.height=p-r,this._currentBounds=A,A},b.Sprite.prototype._renderWebGL=function(a){if(this.visible&&!(this.alpha<=0)){var b,c;if(this._mask||this._filters){var d=a.spriteBatch;for(this._filters&&(d.flush(),a.filterManager.pushFilter(this._filterBlock)),this._mask&&(d.stop(),a.maskManager.pushMask(this.mask,a),d.start()),d.render(this),b=0,c=this.children.length;c>b;b++)this.children[b]._renderWebGL(a);d.stop(),this._mask&&a.maskManager.popMask(this._mask,a),this._filters&&a.filterManager.popFilter(),d.start()}else for(a.spriteBatch.render(this),b=0,c=this.children.length;c>b;b++)this.children[b]._renderWebGL(a)}},b.Sprite.prototype._renderCanvas=function(a){if(!(this.visible===!1||0===this.alpha||this.texture.crop.width<=0||this.texture.crop.height<=0)){if(this.blendMode!==a.currentBlendMode&&(a.currentBlendMode=this.blendMode,a.context.globalCompositeOperation=b.blendModesCanvas[a.currentBlendMode]),this._mask&&a.maskManager.pushMask(this._mask,a),this.texture.valid){var c=this.texture.baseTexture.resolution/a.resolution;a.context.globalAlpha=this.worldAlpha,a.roundPixels?a.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*a.resolution|0,this.worldTransform.ty*a.resolution|0):a.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*a.resolution,this.worldTransform.ty*a.resolution),a.smoothProperty&&a.scaleMode!==this.texture.baseTexture.scaleMode&&(a.scaleMode=this.texture.baseTexture.scaleMode,a.context[a.smoothProperty]=a.scaleMode===b.scaleModes.LINEAR);var d=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,e=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height;16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=b.CanvasTinter.getTintedTexture(this,this.tint)),a.context.drawImage(this.tintedTexture,0,0,this.texture.crop.width,this.texture.crop.height,d/c,e/c,this.texture.crop.width/c,this.texture.crop.height/c)):a.context.drawImage(this.texture.baseTexture.source,this.texture.crop.x,this.texture.crop.y,this.texture.crop.width,this.texture.crop.height,d/c,e/c,this.texture.crop.width/c,this.texture.crop.height/c)}for(var f=0,g=this.children.length;g>f;f++)this.children[f]._renderCanvas(a);this._mask&&a.maskManager.popMask(a)}},b.Sprite.fromFrame=function(a){var c=b.TextureCache[a];if(!c)throw new Error('The frameId "'+a+'" does not exist in the texture cache'+this);return new b.Sprite(c)},b.Sprite.fromImage=function(a,c,d){var e=b.Texture.fromImage(a,c,d);return new b.Sprite(e)},b.SpriteBatch=function(a){b.DisplayObjectContainer.call(this),this.textureThing=a,this.ready=!1},b.SpriteBatch.prototype=Object.create(b.DisplayObjectContainer.prototype),b.SpriteBatch.prototype.constructor=b.SpriteBatch,b.SpriteBatch.prototype.initWebGL=function(a){this.fastSpriteBatch=new b.WebGLFastSpriteBatch(a),this.ready=!0},b.SpriteBatch.prototype.updateTransform=function(){b.DisplayObject.prototype.updateTransform.call(this)},b.SpriteBatch.prototype._renderWebGL=function(a){!this.visible||this.alpha<=0||!this.children.length||(this.ready||this.initWebGL(a.gl),a.spriteBatch.stop(),a.shaderManager.setShader(a.shaderManager.fastShader),this.fastSpriteBatch.begin(this,a),this.fastSpriteBatch.render(this),a.spriteBatch.start())},b.SpriteBatch.prototype._renderCanvas=function(a){if(this.visible&&!(this.alpha<=0)&&this.children.length){var c=a.context;c.globalAlpha=this.worldAlpha,b.DisplayObject.prototype.updateTransform.call(this);for(var d=this.worldTransform,e=!0,f=0;f<this.children.length;f++){var g=this.children[f];if(g.visible){var h=g.texture,i=h.frame;if(c.globalAlpha=this.worldAlpha*g.alpha,g.rotation%(2*Math.PI)===0)e&&(c.setTransform(d.a,d.b,d.c,d.d,d.tx,d.ty),e=!1),c.drawImage(h.baseTexture.source,i.x,i.y,i.width,i.height,g.anchor.x*-i.width*g.scale.x+g.position.x+.5|0,g.anchor.y*-i.height*g.scale.y+g.position.y+.5|0,i.width*g.scale.x,i.height*g.scale.y);else{e||(e=!0),b.DisplayObject.prototype.updateTransform.call(g);var j=g.worldTransform;a.roundPixels?c.setTransform(j.a,j.b,j.c,j.d,0|j.tx,0|j.ty):c.setTransform(j.a,j.b,j.c,j.d,j.tx,j.ty),c.drawImage(h.baseTexture.source,i.x,i.y,i.width,i.height,g.anchor.x*-i.width+.5|0,g.anchor.y*-i.height+.5|0,i.width,i.height)}}}}},b.MovieClip=function(a){b.Sprite.call(this,a[0]),this.textures=a,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this.currentFrame=0,this.playing=!1},b.MovieClip.prototype=Object.create(b.Sprite.prototype),b.MovieClip.prototype.constructor=b.MovieClip,Object.defineProperty(b.MovieClip.prototype,"totalFrames",{get:function(){return this.textures.length}}),b.MovieClip.prototype.stop=function(){this.playing=!1},b.MovieClip.prototype.play=function(){this.playing=!0},b.MovieClip.prototype.gotoAndStop=function(a){this.playing=!1,this.currentFrame=a;var b=this.currentFrame+.5|0;this.setTexture(this.textures[b%this.textures.length])},b.MovieClip.prototype.gotoAndPlay=function(a){this.currentFrame=a,this.playing=!0},b.MovieClip.prototype.updateTransform=function(){if(this.displayObjectContainerUpdateTransform(),this.playing){this.currentFrame+=this.animationSpeed;var a=this.currentFrame+.5|0;this.currentFrame=this.currentFrame%this.textures.length,this.loop||a<this.textures.length?this.setTexture(this.textures[a%this.textures.length]):a>=this.textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())}},b.MovieClip.fromFrames=function(a){for(var c=[],d=0;d<a.length;d++)c.push(new b.Texture.fromFrame(a[d]));return new b.MovieClip(c)},b.MovieClip.fromImages=function(a){for(var c=[],d=0;d<a.length;d++)c.push(new b.Texture.fromImage(a[d]));return new b.MovieClip(c)},b.FilterBlock=function(){this.visible=!0,this.renderable=!0},b.FilterBlock.prototype.constructor=b.FilterBlock,b.Text=function(a,c){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=1,b.Sprite.call(this,b.Texture.fromCanvas(this.canvas)),this.setText(a),this.setStyle(c)},b.Text.prototype=Object.create(b.Sprite.prototype),b.Text.prototype.constructor=b.Text,Object.defineProperty(b.Text.prototype,"width",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*this.texture.frame.width},set:function(a){this.scale.x=a/this.texture.frame.width,this._width=a}}),Object.defineProperty(b.Text.prototype,"height",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*this.texture.frame.height},set:function(a){this.scale.y=a/this.texture.frame.height,this._height=a}}),b.Text.prototype.setStyle=function(a){a=a||{},a.font=a.font||"bold 20pt Arial",a.fill=a.fill||"black",a.align=a.align||"left",a.stroke=a.stroke||"black",a.strokeThickness=a.strokeThickness||0,a.wordWrap=a.wordWrap||!1,a.wordWrapWidth=a.wordWrapWidth||100,a.dropShadow=a.dropShadow||!1,a.dropShadowAngle=a.dropShadowAngle||Math.PI/6,a.dropShadowDistance=a.dropShadowDistance||4,a.dropShadowColor=a.dropShadowColor||"black",this.style=a,this.dirty=!0},b.Text.prototype.setText=function(a){this.text=a.toString()||" ",this.dirty=!0},b.Text.prototype.updateText=function(){this.texture.baseTexture.resolution=this.resolution,this.context.font=this.style.font;var a=this.text;this.style.wordWrap&&(a=this.wordWrap(this.text));for(var b=a.split(/(?:\r\n|\r|\n)/),c=[],d=0,e=this.determineFontProperties(this.style.font),f=0;f<b.length;f++){var g=this.context.measureText(b[f]).width;c[f]=g,d=Math.max(d,g)}var h=d+this.style.strokeThickness;this.style.dropShadow&&(h+=this.style.dropShadowDistance),this.canvas.width=(h+this.context.lineWidth)*this.resolution;var i=e.fontSize+this.style.strokeThickness,j=i*b.length;this.style.dropShadow&&(j+=this.style.dropShadowDistance),this.canvas.height=j*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="alphabetic";var k,l;if(this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;var m=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance,n=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance;for(f=0;f<b.length;f++)k=this.style.strokeThickness/2,l=this.style.strokeThickness/2+f*i+e.ascent,"right"===this.style.align?k+=d-c[f]:"center"===this.style.align&&(k+=(d-c[f])/2),this.style.fill&&this.context.fillText(b[f],k+m,l+n)}for(this.context.fillStyle=this.style.fill,f=0;f<b.length;f++)k=this.style.strokeThickness/2,l=this.style.strokeThickness/2+f*i+e.ascent,"right"===this.style.align?k+=d-c[f]:"center"===this.style.align&&(k+=(d-c[f])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(b[f],k,l),this.style.fill&&this.context.fillText(b[f],k,l);this.updateTexture()},b.Text.prototype.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width,this.texture.baseTexture.height=this.canvas.height,this.texture.crop.width=this.texture.frame.width=this.canvas.width,this.texture.crop.height=this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height,this.texture.baseTexture.dirty()},b.Text.prototype._renderWebGL=function(a){this.dirty&&(this.resolution=a.resolution,this.updateText(),this.dirty=!1),b.Sprite.prototype._renderWebGL.call(this,a)},b.Text.prototype._renderCanvas=function(a){this.dirty&&(this.resolution=a.resolution,this.updateText(),this.dirty=!1),b.Sprite.prototype._renderCanvas.call(this,a)},b.Text.prototype.determineFontProperties=function(a){var c=b.Text.fontPropertiesCache[a];if(!c){c={};var d=b.Text.fontPropertiesCanvas,e=b.Text.fontPropertiesContext;e.font=a;var f=Math.ceil(e.measureText("|Mq").width),g=Math.ceil(e.measureText("M").width),h=2*g;g=1.4*g|0,d.width=f,d.height=h,e.fillStyle="#f00",e.fillRect(0,0,f,h),e.font=a,e.textBaseline="alphabetic",e.fillStyle="#000",e.fillText("|MÉq",0,g);var i,j,k=e.getImageData(0,0,f,h).data,l=k.length,m=4*f,n=0,o=!1;for(i=0;g>i;i++){for(j=0;m>j;j+=4)if(255!==k[n+j]){o=!0;break}if(o)break;n+=m}for(c.ascent=g-i,n=l-m,o=!1,i=h;i>g;i--){for(j=0;m>j;j+=4)if(255!==k[n+j]){o=!0;break}if(o)break;n-=m}c.descent=i-g,c.fontSize=c.ascent+c.descent,b.Text.fontPropertiesCache[a]=c}return c},b.Text.prototype.wordWrap=function(a){for(var b="",c=a.split("\n"),d=0;d<c.length;d++){for(var e=this.style.wordWrapWidth,f=c[d].split(" "),g=0;g<f.length;g++){var h=this.context.measureText(f[g]).width,i=h+this.context.measureText(" ").width;0===g||i>e?(g>0&&(b+="\n"),b+=f[g],e=this.style.wordWrapWidth-h):(e-=i,b+=" "+f[g])}d<c.length-1&&(b+="\n")}return b},b.Text.prototype.getBounds=function(a){return this.dirty&&(this.updateText(),this.dirty=!1),b.Sprite.prototype.getBounds.call(this,a)},b.Text.prototype.destroy=function(a){this.context=null,this.canvas=null,this.texture.destroy(void 0===a?!0:a)},b.Text.fontPropertiesCache={},b.Text.fontPropertiesCanvas=document.createElement("canvas"),b.Text.fontPropertiesContext=b.Text.fontPropertiesCanvas.getContext("2d"),b.BitmapText=function(a,c){b.DisplayObjectContainer.call(this),this.textWidth=0,this.textHeight=0,this._pool=[],this.setText(a),this.setStyle(c),this.updateText(),this.dirty=!1},b.BitmapText.prototype=Object.create(b.DisplayObjectContainer.prototype),b.BitmapText.prototype.constructor=b.BitmapText,b.BitmapText.prototype.setText=function(a){this.text=a||" ",this.dirty=!0},b.BitmapText.prototype.setStyle=function(a){a=a||{},a.align=a.align||"left",this.style=a;var c=a.font.split(" ");this.fontName=c[c.length-1],this.fontSize=c.length>=2?parseInt(c[c.length-2],10):b.BitmapText.fonts[this.fontName].size,this.dirty=!0,this.tint=a.tint},b.BitmapText.prototype.updateText=function(){for(var a=b.BitmapText.fonts[this.fontName],c=new b.Point,d=null,e=[],f=0,g=[],h=0,i=this.fontSize/a.size,j=0;j<this.text.length;j++){var k=this.text.charCodeAt(j);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(j)))g.push(c.x),f=Math.max(f,c.x),h++,c.x=0,c.y+=a.lineHeight,d=null;else{var l=a.chars[k];l&&(d&&l.kerning[d]&&(c.x+=l.kerning[d]),e.push({texture:l.texture,line:h,charCode:k,position:new b.Point(c.x+l.xOffset,c.y+l.yOffset)}),c.x+=l.xAdvance,d=k)}}g.push(c.x),f=Math.max(f,c.x);var m=[];for(j=0;h>=j;j++){var n=0;"right"===this.style.align?n=f-g[j]:"center"===this.style.align&&(n=(f-g[j])/2),m.push(n)}var o=this.children.length,p=e.length,q=this.tint||16777215;for(j=0;p>j;j++){var r=o>j?this.children[j]:this._pool.pop();r?r.setTexture(e[j].texture):r=new b.Sprite(e[j].texture),r.position.x=(e[j].position.x+m[e[j].line])*i,r.position.y=e[j].position.y*i,r.scale.x=r.scale.y=i,r.tint=q,r.parent||this.addChild(r)}for(;this.children.length>p;){var s=this.getChildAt(this.children.length-1);this._pool.push(s),this.removeChild(s)}this.textWidth=f*i,this.textHeight=(c.y+a.lineHeight)*i},b.BitmapText.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),b.DisplayObjectContainer.prototype.updateTransform.call(this)},b.BitmapText.fonts={},b.InteractionData=function(){this.global=new b.Point,this.target=null,this.originalEvent=null},b.InteractionData.prototype.getLocalPosition=function(a,c){var d=a.worldTransform,e=this.global,f=d.a,g=d.c,h=d.tx,i=d.b,j=d.d,k=d.ty,l=1/(f*j+g*-i);return c=c||new b.Point,c.x=j*l*e.x+-g*l*e.y+(k*g-h*j)*l,c.y=f*l*e.y+-i*l*e.x+(-k*f+h*i)*l,c},b.InteractionData.prototype.constructor=b.InteractionData,b.InteractionManager=function(a){this.stage=a,this.mouse=new b.InteractionData,this.touches={},this.tempPoint=new b.Point,this.mouseoverEnabled=!0,this.pool=[],this.interactiveItems=[],this.interactionDOMElement=null,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this.mouseOut=!1,this.resolution=1,this._tempPoint=new b.Point},b.InteractionManager.prototype.constructor=b.InteractionManager,b.InteractionManager.prototype.collectInteractiveSprite=function(a,b){for(var c=a.children,d=c.length,e=d-1;e>=0;e--){var f=c[e];f._interactive?(b.interactiveChildren=!0,this.interactiveItems.push(f),f.children.length>0&&this.collectInteractiveSprite(f,f)):(f.__iParent=null,f.children.length>0&&this.collectInteractiveSprite(f,b))}},b.InteractionManager.prototype.setTarget=function(a){this.target=a,this.resolution=a.resolution,null===this.interactionDOMElement&&this.setTargetDomElement(a.view)},b.InteractionManager.prototype.setTargetDomElement=function(a){this.removeEvents(),window.navigator.msPointerEnabled&&(a.style["-ms-content-zooming"]="none",a.style["-ms-touch-action"]="none"),this.interactionDOMElement=a,a.addEventListener("mousemove",this.onMouseMove,!0),a.addEventListener("mousedown",this.onMouseDown,!0),a.addEventListener("mouseout",this.onMouseOut,!0),a.addEventListener("touchstart",this.onTouchStart,!0),a.addEventListener("touchend",this.onTouchEnd,!0),a.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0)},b.InteractionManager.prototype.removeEvents=function(){this.interactionDOMElement&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]="",this.interactionDOMElement.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0))},b.InteractionManager.prototype.update=function(){if(this.target){var a=Date.now(),c=a-this.last;if(c=c*b.INTERACTION_FREQUENCY/1e3,!(1>c)){this.last=a;var d=0;this.dirty&&this.rebuildInteractiveGraph();var e=this.interactiveItems.length,f="inherit",g=!1;for(d=0;e>d;d++){var h=this.interactiveItems[d];h.__hit=this.hitTest(h,this.mouse),this.mouse.target=h,h.__hit&&!g?(h.buttonMode&&(f=h.defaultCursor),h.interactiveChildren||(g=!0),h.__isOver||(h.mouseover&&h.mouseover(this.mouse),h.__isOver=!0)):h.__isOver&&(h.mouseout&&h.mouseout(this.mouse),h.__isOver=!1)}this.currentCursorStyle!==f&&(this.currentCursorStyle=f,this.interactionDOMElement.style.cursor=f)}}},b.InteractionManager.prototype.rebuildInteractiveGraph=function(){this.dirty=!1;for(var a=this.interactiveItems.length,b=0;a>b;b++)this.interactiveItems[b].interactiveChildren=!1;this.interactiveItems=[],this.stage.interactive&&this.interactiveItems.push(this.stage),this.collectInteractiveSprite(this.stage,this.stage)},b.InteractionManager.prototype.onMouseMove=function(a){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=a;var b=this.interactionDOMElement.getBoundingClientRect();this.mouse.global.x=(a.clientX-b.left)*(this.target.width/b.width)/this.resolution,this.mouse.global.y=(a.clientY-b.top)*(this.target.height/b.height)/this.resolution;for(var c=this.interactiveItems.length,d=0;c>d;d++){var e=this.interactiveItems[d];e.mousemove&&e.mousemove(this.mouse)}},b.InteractionManager.prototype.onMouseDown=function(a){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=a,b.AUTO_PREVENT_DEFAULT&&this.mouse.originalEvent.preventDefault();for(var c=this.interactiveItems.length,d=this.mouse.originalEvent,e=2===d.button||3===d.which,f=e?"rightdown":"mousedown",g=e?"rightclick":"click",h=e?"__rightIsDown":"__mouseIsDown",i=e?"__isRightDown":"__isDown",j=0;c>j;j++){var k=this.interactiveItems[j];if((k[f]||k[g])&&(k[h]=!0,k.__hit=this.hitTest(k,this.mouse),k.__hit&&(k[f]&&k[f](this.mouse),k[i]=!0,!k.interactiveChildren)))break}},b.InteractionManager.prototype.onMouseOut=function(a){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=a;var b=this.interactiveItems.length;this.interactionDOMElement.style.cursor="inherit";for(var c=0;b>c;c++){var d=this.interactiveItems[c];d.__isOver&&(this.mouse.target=d,d.mouseout&&d.mouseout(this.mouse),d.__isOver=!1)}this.mouseOut=!0,this.mouse.global.x=-1e4,this.mouse.global.y=-1e4},b.InteractionManager.prototype.onMouseUp=function(a){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=a;for(var b=this.interactiveItems.length,c=!1,d=this.mouse.originalEvent,e=2===d.button||3===d.which,f=e?"rightup":"mouseup",g=e?"rightclick":"click",h=e?"rightupoutside":"mouseupoutside",i=e?"__isRightDown":"__isDown",j=0;b>j;j++){var k=this.interactiveItems[j];(k[g]||k[f]||k[h])&&(k.__hit=this.hitTest(k,this.mouse),k.__hit&&!c?(k[f]&&k[f](this.mouse),k[i]&&k[g]&&k[g](this.mouse),k.interactiveChildren||(c=!0)):k[i]&&k[h]&&k[h](this.mouse),k[i]=!1)}},b.InteractionManager.prototype.hitTest=function(a,c){var d=c.global;if(!a.worldVisible)return!1;a.worldTransform.applyInverse(d,this._tempPoint);var e,f=this._tempPoint.x,g=this._tempPoint.y;if(c.target=a,a.hitArea&&a.hitArea.contains)return a.hitArea.contains(f,g);if(a instanceof b.Sprite){var h,i=a.texture.frame.width,j=a.texture.frame.height,k=-i*a.anchor.x;if(f>k&&k+i>f&&(h=-j*a.anchor.y,g>h&&h+j>g))return!0}else if(a instanceof b.Graphics){var l=a.graphicsData;for(e=0;e<l.length;e++){var m=l[e];if(m.fill&&m.shape&&m.shape.contains(f,g))return!0}}var n=a.children.length;for(e=0;n>e;e++){var o=a.children[e],p=this.hitTest(o,c);if(p)return c.target=a,!0}return!1},b.InteractionManager.prototype.onTouchMove=function(a){this.dirty&&this.rebuildInteractiveGraph();var b,c=this.interactionDOMElement.getBoundingClientRect(),d=a.changedTouches,e=0;for(e=0;e<d.length;e++){var f=d[e];b=this.touches[f.identifier],b.originalEvent=a,b.global.x=(f.clientX-c.left)*(this.target.width/c.width)/this.resolution,b.global.y=(f.clientY-c.top)*(this.target.height/c.height)/this.resolution,!navigator.isCocoonJS||c.left||c.top||a.target.style.width||a.target.style.height||(b.global.x=f.clientX,b.global.y=f.clientY);for(var g=0;g<this.interactiveItems.length;g++){var h=this.interactiveItems[g];h.touchmove&&h.__touchData&&h.__touchData[f.identifier]&&h.touchmove(b)}}},b.InteractionManager.prototype.onTouchStart=function(a){this.dirty&&this.rebuildInteractiveGraph();var c=this.interactionDOMElement.getBoundingClientRect();b.AUTO_PREVENT_DEFAULT&&a.preventDefault();for(var d=a.changedTouches,e=0;e<d.length;e++){var f=d[e],g=this.pool.pop();g||(g=new b.InteractionData),g.originalEvent=a,this.touches[f.identifier]=g,g.global.x=(f.clientX-c.left)*(this.target.width/c.width)/this.resolution,g.global.y=(f.clientY-c.top)*(this.target.height/c.height)/this.resolution,!navigator.isCocoonJS||c.left||c.top||a.target.style.width||a.target.style.height||(g.global.x=f.clientX,g.global.y=f.clientY);for(var h=this.interactiveItems.length,i=0;h>i;i++){var j=this.interactiveItems[i];if((j.touchstart||j.tap)&&(j.__hit=this.hitTest(j,g),j.__hit&&(j.touchstart&&j.touchstart(g),j.__isDown=!0,j.__touchData=j.__touchData||{},j.__touchData[f.identifier]=g,!j.interactiveChildren)))break}}},b.InteractionManager.prototype.onTouchEnd=function(a){this.dirty&&this.rebuildInteractiveGraph();for(var b=this.interactionDOMElement.getBoundingClientRect(),c=a.changedTouches,d=0;d<c.length;d++){var e=c[d],f=this.touches[e.identifier],g=!1;f.global.x=(e.clientX-b.left)*(this.target.width/b.width)/this.resolution,f.global.y=(e.clientY-b.top)*(this.target.height/b.height)/this.resolution,!navigator.isCocoonJS||b.left||b.top||a.target.style.width||a.target.style.height||(f.global.x=e.clientX,f.global.y=e.clientY);for(var h=this.interactiveItems.length,i=0;h>i;i++){var j=this.interactiveItems[i];j.__touchData&&j.__touchData[e.identifier]&&(j.__hit=this.hitTest(j,j.__touchData[e.identifier]),f.originalEvent=a,(j.touchend||j.tap)&&(j.__hit&&!g?(j.touchend&&j.touchend(f),j.__isDown&&j.tap&&j.tap(f),j.interactiveChildren||(g=!0)):j.__isDown&&j.touchendoutside&&j.touchendoutside(f),j.__isDown=!1),j.__touchData[e.identifier]=null)}this.pool.push(f),this.touches[e.identifier]=null}},b.Stage=function(a){b.DisplayObjectContainer.call(this),this.worldTransform=new b.Matrix,this.interactive=!0,this.interactionManager=new b.InteractionManager(this),this.dirty=!0,this.stage=this,this.stage.hitArea=new b.Rectangle(0,0,1e5,1e5),this.setBackgroundColor(a)},b.Stage.prototype=Object.create(b.DisplayObjectContainer.prototype),b.Stage.prototype.constructor=b.Stage,b.Stage.prototype.setInteractionDelegate=function(a){this.interactionManager.setTargetDomElement(a)},b.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var a=0,b=this.children.length;b>a;a++)this.children[a].updateTransform();this.dirty&&(this.dirty=!1,this.interactionManager.dirty=!0),this.interactive&&this.interactionManager.update()},b.Stage.prototype.setBackgroundColor=function(a){this.backgroundColor=a||0,this.backgroundColorSplit=b.hex2rgb(this.backgroundColor);var c=this.backgroundColor.toString(16);c="000000".substr(0,6-c.length)+c,this.backgroundColorString="#"+c},b.Stage.prototype.getMousePosition=function(){return this.interactionManager.mouse.global},function(a){for(var b=0,c=["ms","moz","webkit","o"],d=0;d<c.length&&!a.requestAnimationFrame;++d)a.requestAnimationFrame=a[c[d]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[c[d]+"CancelAnimationFrame"]||a[c[d]+"CancelRequestAnimationFrame"];a.requestAnimationFrame||(a.requestAnimationFrame=function(c){var d=(new Date).getTime(),e=Math.max(0,16-(d-b)),f=a.setTimeout(function(){c(d+e)},e);return b=d+e,f}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){clearTimeout(a)}),a.requestAnimFrame=a.requestAnimationFrame}(this),b.hex2rgb=function(a){return[(a>>16&255)/255,(a>>8&255)/255,(255&a)/255]},b.rgb2hex=function(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]},"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(){return function(a){function b(){for(var d=arguments.length,f=new Array(d);d--;)f[d]=arguments[d];return f=e.concat(f),c.apply(this instanceof b?this:a,f)}var c=this,d=arguments.length-1,e=[];if(d>0)for(e.length=d;d--;)e[d]=arguments[d+1];if("function"!=typeof c)throw new TypeError;return b.prototype=function f(a){return a&&(f.prototype=a),this instanceof f?void 0:new f}(c.prototype),b}}()),b.AjaxRequest=function(){var a=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];if(!window.ActiveXObject)return window.XMLHttpRequest?new window.XMLHttpRequest:!1;for(var b=0;b<a.length;b++)try{return new window.ActiveXObject(a[b])}catch(c){}},b.canUseNewCanvasBlendModes=function(){if("undefined"==typeof document)return!1;var a=document.createElement("canvas");a.width=1,a.height=1;var b=a.getContext("2d");return b.fillStyle="#000",b.fillRect(0,0,1,1),b.globalCompositeOperation="multiply",b.fillStyle="#fff",b.fillRect(0,0,1,1),0===b.getImageData(0,0,1,1).data[0]},b.getNextPowerOfTwo=function(a){if(a>0&&0===(a&a-1))return a;for(var b=1;a>b;)b<<=1;return b},b.EventTarget={call:function(a){a&&(a=a.prototype||a,b.EventTarget.mixin(a))},mixin:function(a){a.listeners=function(a){return this._listeners=this._listeners||{},this._listeners[a]?this._listeners[a].slice():[]
},a.emit=a.dispatchEvent=function(a,c){if(this._listeners=this._listeners||{},"object"==typeof a&&(c=a,a=a.type),c&&c.__isEventObject===!0||(c=new b.Event(this,a,c)),this._listeners&&this._listeners[a]){var d,e=this._listeners[a].slice(0),f=e.length,g=e[0];for(d=0;f>d;g=e[++d])if(g.call(this,c),c.stoppedImmediate)return this;if(c.stopped)return this}return this.parent&&this.parent.emit&&this.parent.emit.call(this.parent,a,c),this},a.on=a.addEventListener=function(a,b){return this._listeners=this._listeners||{},(this._listeners[a]=this._listeners[a]||[]).push(b),this},a.once=function(a,b){function c(){b.apply(d.off(a,c),arguments)}this._listeners=this._listeners||{};var d=this;return c._originalHandler=b,this.on(a,c)},a.off=a.removeEventListener=function(a,b){if(this._listeners=this._listeners||{},!this._listeners[a])return this;for(var c=this._listeners[a],d=b?c.length:0;d-->0;)(c[d]===b||c[d]._originalHandler===b)&&c.splice(d,1);return 0===c.length&&delete this._listeners[a],this},a.removeAllListeners=function(a){return this._listeners=this._listeners||{},this._listeners[a]?(delete this._listeners[a],this):this}}},b.Event=function(a,b,c){this.__isEventObject=!0,this.stopped=!1,this.stoppedImmediate=!1,this.target=a,this.type=b,this.data=c,this.content=c,this.timeStamp=Date.now()},b.Event.prototype.stopPropagation=function(){this.stopped=!0},b.Event.prototype.stopImmediatePropagation=function(){this.stoppedImmediate=!0},b.autoDetectRenderer=function(a,c,d){a||(a=800),c||(c=600);var e=function(){try{var a=document.createElement("canvas");return!!window.WebGLRenderingContext&&(a.getContext("webgl")||a.getContext("experimental-webgl"))}catch(b){return!1}}();return e&&window.Uint32Array?new b.WebGLRenderer(a,c,d):new b.CanvasRenderer(a,c,d)},b.autoDetectRecommendedRenderer=function(a,c,d){a||(a=800),c||(c=600);var e=function(){try{var a=document.createElement("canvas");return!!window.WebGLRenderingContext&&(a.getContext("webgl")||a.getContext("experimental-webgl"))}catch(b){return!1}}(),f=/Android/i.test(navigator.userAgent);return e&&!f?new b.WebGLRenderer(a,c,d):new b.CanvasRenderer(a,c,d)},b.PolyK={},b.PolyK.Triangulate=function(a){var c=!0,d=a.length>>1;if(3>d)return[];for(var e=[],f=[],g=0;d>g;g++)f.push(g);g=0;for(var h=d;h>3;){var i=f[(g+0)%h],j=f[(g+1)%h],k=f[(g+2)%h],l=a[2*i],m=a[2*i+1],n=a[2*j],o=a[2*j+1],p=a[2*k],q=a[2*k+1],r=!1;if(b.PolyK._convex(l,m,n,o,p,q,c)){r=!0;for(var s=0;h>s;s++){var t=f[s];if(t!==i&&t!==j&&t!==k&&b.PolyK._PointInTriangle(a[2*t],a[2*t+1],l,m,n,o,p,q)){r=!1;break}}}if(r)e.push(i,j,k),f.splice((g+1)%h,1),h--,g=0;else if(g++>3*h){if(!c)return null;for(e=[],f=[],g=0;d>g;g++)f.push(g);g=0,h=d,c=!1}}return e.push(f[0],f[1],f[2]),e},b.PolyK._PointInTriangle=function(a,b,c,d,e,f,g,h){var i=g-c,j=h-d,k=e-c,l=f-d,m=a-c,n=b-d,o=i*i+j*j,p=i*k+j*l,q=i*m+j*n,r=k*k+l*l,s=k*m+l*n,t=1/(o*r-p*p),u=(r*q-p*s)*t,v=(o*s-p*q)*t;return u>=0&&v>=0&&1>u+v},b.PolyK._convex=function(a,b,c,d,e,f,g){return(b-d)*(e-c)+(c-a)*(f-d)>=0===g},b.initDefaultShaders=function(){},b.CompileVertexShader=function(a,c){return b._CompileShader(a,c,a.VERTEX_SHADER)},b.CompileFragmentShader=function(a,c){return b._CompileShader(a,c,a.FRAGMENT_SHADER)},b._CompileShader=function(a,b,c){var d=b.join("\n"),e=a.createShader(c);return a.shaderSource(e,d),a.compileShader(e),a.getShaderParameter(e,a.COMPILE_STATUS)?e:(window.console.log(a.getShaderInfoLog(e)),null)},b.compileProgram=function(a,c,d){var e=b.CompileFragmentShader(a,d),f=b.CompileVertexShader(a,c),g=a.createProgram();return a.attachShader(g,f),a.attachShader(g,e),a.linkProgram(g),a.getProgramParameter(g,a.LINK_STATUS)||window.console.log("Could not initialise shaders"),g},b.PixiShader=function(a){this._UID=b._UID++,this.gl=a,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.textureCount=0,this.firstRun=!0,this.dirty=!0,this.attributes=[],this.init()},b.PixiShader.prototype.constructor=b.PixiShader,b.PixiShader.prototype.init=function(){var a=this.gl,c=b.compileProgram(a,this.vertexSrc||b.PixiShader.defaultVertexSrc,this.fragmentSrc);a.useProgram(c),this.uSampler=a.getUniformLocation(c,"uSampler"),this.projectionVector=a.getUniformLocation(c,"projectionVector"),this.offsetVector=a.getUniformLocation(c,"offsetVector"),this.dimensions=a.getUniformLocation(c,"dimensions"),this.aVertexPosition=a.getAttribLocation(c,"aVertexPosition"),this.aTextureCoord=a.getAttribLocation(c,"aTextureCoord"),this.colorAttribute=a.getAttribLocation(c,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var d in this.uniforms)this.uniforms[d].uniformLocation=a.getUniformLocation(c,d);this.initUniforms(),this.program=c},b.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var a,b=this.gl;for(var c in this.uniforms){a=this.uniforms[c];var d=a.type;"sampler2D"===d?(a._init=!1,null!==a.value&&this.initSampler2D(a)):"mat2"===d||"mat3"===d||"mat4"===d?(a.glMatrix=!0,a.glValueLength=1,"mat2"===d?a.glFunc=b.uniformMatrix2fv:"mat3"===d?a.glFunc=b.uniformMatrix3fv:"mat4"===d&&(a.glFunc=b.uniformMatrix4fv)):(a.glFunc=b["uniform"+d],a.glValueLength="2f"===d||"2i"===d?2:"3f"===d||"3i"===d?3:"4f"===d||"4i"===d?4:1)}},b.PixiShader.prototype.initSampler2D=function(a){if(a.value&&a.value.baseTexture&&a.value.baseTexture.hasLoaded){var b=this.gl;if(b.activeTexture(b["TEXTURE"+this.textureCount]),b.bindTexture(b.TEXTURE_2D,a.value.baseTexture._glTextures[b.id]),a.textureData){var c=a.textureData,d=c.magFilter?c.magFilter:b.LINEAR,e=c.minFilter?c.minFilter:b.LINEAR,f=c.wrapS?c.wrapS:b.CLAMP_TO_EDGE,g=c.wrapT?c.wrapT:b.CLAMP_TO_EDGE,h=c.luminance?b.LUMINANCE:b.RGBA;if(c.repeat&&(f=b.REPEAT,g=b.REPEAT),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!!c.flipY),c.width){var i=c.width?c.width:512,j=c.height?c.height:2,k=c.border?c.border:0;b.texImage2D(b.TEXTURE_2D,0,h,i,j,k,h,b.UNSIGNED_BYTE,null)}else b.texImage2D(b.TEXTURE_2D,0,h,b.RGBA,b.UNSIGNED_BYTE,a.value.baseTexture.source);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,d),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,e),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,f),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,g)}b.uniform1i(a.uniformLocation,this.textureCount),a._init=!0,this.textureCount++}},b.PixiShader.prototype.syncUniforms=function(){this.textureCount=1;var a,c=this.gl;for(var d in this.uniforms)a=this.uniforms[d],1===a.glValueLength?a.glMatrix===!0?a.glFunc.call(c,a.uniformLocation,a.transpose,a.value):a.glFunc.call(c,a.uniformLocation,a.value):2===a.glValueLength?a.glFunc.call(c,a.uniformLocation,a.value.x,a.value.y):3===a.glValueLength?a.glFunc.call(c,a.uniformLocation,a.value.x,a.value.y,a.value.z):4===a.glValueLength?a.glFunc.call(c,a.uniformLocation,a.value.x,a.value.y,a.value.z,a.value.w):"sampler2D"===a.type&&(a._init?(c.activeTexture(c["TEXTURE"+this.textureCount]),a.value.baseTexture._dirty[c.id]?b.instances[c.id].updateTexture(a.value.baseTexture):c.bindTexture(c.TEXTURE_2D,a.value.baseTexture._glTextures[c.id]),c.uniform1i(a.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(a))},b.PixiShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},b.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec2 aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vec3 color = mod(vec3(aColor.y/65536.0, aColor.y/256.0, aColor.y), 256.0) / 256.0;","   vColor = vec4(color * aColor.x, aColor.x);","}"],b.PixiFastShader=function(a){this._UID=b._UID++,this.gl=a,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);","   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"],this.textureCount=0,this.init()},b.PixiFastShader.prototype.constructor=b.PixiFastShader,b.PixiFastShader.prototype.init=function(){var a=this.gl,c=b.compileProgram(a,this.vertexSrc,this.fragmentSrc);a.useProgram(c),this.uSampler=a.getUniformLocation(c,"uSampler"),this.projectionVector=a.getUniformLocation(c,"projectionVector"),this.offsetVector=a.getUniformLocation(c,"offsetVector"),this.dimensions=a.getUniformLocation(c,"dimensions"),this.uMatrix=a.getUniformLocation(c,"uMatrix"),this.aVertexPosition=a.getAttribLocation(c,"aVertexPosition"),this.aPositionCoord=a.getAttribLocation(c,"aPositionCoord"),this.aScale=a.getAttribLocation(c,"aScale"),this.aRotation=a.getAttribLocation(c,"aRotation"),this.aTextureCoord=a.getAttribLocation(c,"aTextureCoord"),this.colorAttribute=a.getAttribLocation(c,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute],this.program=c},b.PixiFastShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},b.StripShader=function(a){this._UID=b._UID++,this.gl=a,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * alpha;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"],this.init()},b.StripShader.prototype.constructor=b.StripShader,b.StripShader.prototype.init=function(){var a=this.gl,c=b.compileProgram(a,this.vertexSrc,this.fragmentSrc);a.useProgram(c),this.uSampler=a.getUniformLocation(c,"uSampler"),this.projectionVector=a.getUniformLocation(c,"projectionVector"),this.offsetVector=a.getUniformLocation(c,"offsetVector"),this.colorAttribute=a.getAttribLocation(c,"aColor"),this.aVertexPosition=a.getAttribLocation(c,"aVertexPosition"),this.aTextureCoord=a.getAttribLocation(c,"aTextureCoord"),this.attributes=[this.aVertexPosition,this.aTextureCoord],this.translationMatrix=a.getUniformLocation(c,"translationMatrix"),this.alpha=a.getUniformLocation(c,"alpha"),this.program=c},b.StripShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},b.PrimitiveShader=function(a){this._UID=b._UID++,this.gl=a,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"],this.init()},b.PrimitiveShader.prototype.constructor=b.PrimitiveShader,b.PrimitiveShader.prototype.init=function(){var a=this.gl,c=b.compileProgram(a,this.vertexSrc,this.fragmentSrc);a.useProgram(c),this.projectionVector=a.getUniformLocation(c,"projectionVector"),this.offsetVector=a.getUniformLocation(c,"offsetVector"),this.tintColor=a.getUniformLocation(c,"tint"),this.aVertexPosition=a.getAttribLocation(c,"aVertexPosition"),this.colorAttribute=a.getAttribLocation(c,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=a.getUniformLocation(c,"translationMatrix"),this.alpha=a.getUniformLocation(c,"alpha"),this.program=c},b.PrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},b.ComplexPrimitiveShader=function(a){this._UID=b._UID++,this.gl=a,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"],this.init()},b.ComplexPrimitiveShader.prototype.constructor=b.ComplexPrimitiveShader,b.ComplexPrimitiveShader.prototype.init=function(){var a=this.gl,c=b.compileProgram(a,this.vertexSrc,this.fragmentSrc);a.useProgram(c),this.projectionVector=a.getUniformLocation(c,"projectionVector"),this.offsetVector=a.getUniformLocation(c,"offsetVector"),this.tintColor=a.getUniformLocation(c,"tint"),this.color=a.getUniformLocation(c,"color"),this.aVertexPosition=a.getAttribLocation(c,"aVertexPosition"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=a.getUniformLocation(c,"translationMatrix"),this.alpha=a.getUniformLocation(c,"alpha"),this.program=c},b.ComplexPrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},b.WebGLGraphics=function(){},b.WebGLGraphics.renderGraphics=function(a,c){var d,e=c.gl,f=c.projection,g=c.offset,h=c.shaderManager.primitiveShader;a.dirty&&b.WebGLGraphics.updateGraphics(a,e);for(var i=a._webGL[e.id],j=0;j<i.data.length;j++)1===i.data[j].mode?(d=i.data[j],c.stencilManager.pushStencil(a,d,c),e.drawElements(e.TRIANGLE_FAN,4,e.UNSIGNED_SHORT,2*(d.indices.length-4)),c.stencilManager.popStencil(a,d,c)):(d=i.data[j],c.shaderManager.setShader(h),h=c.shaderManager.primitiveShader,e.uniformMatrix3fv(h.translationMatrix,!1,a.worldTransform.toArray(!0)),e.uniform2f(h.projectionVector,f.x,-f.y),e.uniform2f(h.offsetVector,-g.x,-g.y),e.uniform3fv(h.tintColor,b.hex2rgb(a.tint)),e.uniform1f(h.alpha,a.worldAlpha),e.bindBuffer(e.ARRAY_BUFFER,d.buffer),e.vertexAttribPointer(h.aVertexPosition,2,e.FLOAT,!1,24,0),e.vertexAttribPointer(h.colorAttribute,4,e.FLOAT,!1,24,8),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,d.indexBuffer),e.drawElements(e.TRIANGLE_STRIP,d.indices.length,e.UNSIGNED_SHORT,0))},b.WebGLGraphics.updateGraphics=function(a,c){var d=a._webGL[c.id];d||(d=a._webGL[c.id]={lastIndex:0,data:[],gl:c}),a.dirty=!1;var e;if(a.clearDirty){for(a.clearDirty=!1,e=0;e<d.data.length;e++){var f=d.data[e];f.reset(),b.WebGLGraphics.graphicsDataPool.push(f)}d.data=[],d.lastIndex=0}var g;for(e=d.lastIndex;e<a.graphicsData.length;e++){var h=a.graphicsData[e];if(h.type===b.Graphics.POLY){if(h.points=h.shape.points.slice(),h.shape.closed&&h.points[0]!==h.points[h.points.length-2]&&h.points[1]!==h.points[h.points.length-1]&&h.points.push(h.points[0],h.points[1]),h.fill&&h.points.length>=6)if(h.points.length<12){g=b.WebGLGraphics.switchMode(d,0);var i=b.WebGLGraphics.buildPoly(h,g);i||(g=b.WebGLGraphics.switchMode(d,1),b.WebGLGraphics.buildComplexPoly(h,g))}else g=b.WebGLGraphics.switchMode(d,1),b.WebGLGraphics.buildComplexPoly(h,g);h.lineWidth>0&&(g=b.WebGLGraphics.switchMode(d,0),b.WebGLGraphics.buildLine(h,g))}else g=b.WebGLGraphics.switchMode(d,0),h.type===b.Graphics.RECT?b.WebGLGraphics.buildRectangle(h,g):h.type===b.Graphics.CIRC||h.type===b.Graphics.ELIP?b.WebGLGraphics.buildCircle(h,g):h.type===b.Graphics.RREC&&b.WebGLGraphics.buildRoundedRectangle(h,g);d.lastIndex++}for(e=0;e<d.data.length;e++)g=d.data[e],g.dirty&&g.upload()},b.WebGLGraphics.switchMode=function(a,c){var d;return a.data.length?(d=a.data[a.data.length-1],(d.mode!==c||1===c)&&(d=b.WebGLGraphics.graphicsDataPool.pop()||new b.WebGLGraphicsData(a.gl),d.mode=c,a.data.push(d))):(d=b.WebGLGraphics.graphicsDataPool.pop()||new b.WebGLGraphicsData(a.gl),d.mode=c,a.data.push(d)),d.dirty=!0,d},b.WebGLGraphics.buildRectangle=function(a,c){var d=a.shape,e=d.x,f=d.y,g=d.width,h=d.height;if(a.fill){var i=b.hex2rgb(a.fillColor),j=a.fillAlpha,k=i[0]*j,l=i[1]*j,m=i[2]*j,n=c.points,o=c.indices,p=n.length/6;n.push(e,f),n.push(k,l,m,j),n.push(e+g,f),n.push(k,l,m,j),n.push(e,f+h),n.push(k,l,m,j),n.push(e+g,f+h),n.push(k,l,m,j),o.push(p,p,p+1,p+2,p+3,p+3)}if(a.lineWidth){var q=a.points;a.points=[e,f,e+g,f,e+g,f+h,e,f+h,e,f],b.WebGLGraphics.buildLine(a,c),a.points=q}},b.WebGLGraphics.buildRoundedRectangle=function(a,c){var d=a.shape,e=d.x,f=d.y,g=d.width,h=d.height,i=d.radius,j=[];if(j.push(e,f+i),j=j.concat(b.WebGLGraphics.quadraticBezierCurve(e,f+h-i,e,f+h,e+i,f+h)),j=j.concat(b.WebGLGraphics.quadraticBezierCurve(e+g-i,f+h,e+g,f+h,e+g,f+h-i)),j=j.concat(b.WebGLGraphics.quadraticBezierCurve(e+g,f+i,e+g,f,e+g-i,f)),j=j.concat(b.WebGLGraphics.quadraticBezierCurve(e+i,f,e,f,e,f+i)),a.fill){var k=b.hex2rgb(a.fillColor),l=a.fillAlpha,m=k[0]*l,n=k[1]*l,o=k[2]*l,p=c.points,q=c.indices,r=p.length/6,s=b.PolyK.Triangulate(j),t=0;for(t=0;t<s.length;t+=3)q.push(s[t]+r),q.push(s[t]+r),q.push(s[t+1]+r),q.push(s[t+2]+r),q.push(s[t+2]+r);for(t=0;t<j.length;t++)p.push(j[t],j[++t],m,n,o,l)}if(a.lineWidth){var u=a.points;a.points=j,b.WebGLGraphics.buildLine(a,c),a.points=u}},b.WebGLGraphics.quadraticBezierCurve=function(a,b,c,d,e,f){function g(a,b,c){var d=b-a;return a+d*c}for(var h,i,j,k,l,m,n=20,o=[],p=0,q=0;n>=q;q++)p=q/n,h=g(a,c,p),i=g(b,d,p),j=g(c,e,p),k=g(d,f,p),l=g(h,j,p),m=g(i,k,p),o.push(l,m);return o},b.WebGLGraphics.buildCircle=function(a,c){var d,e,f=a.shape,g=f.x,h=f.y;a.type===b.Graphics.CIRC?(d=f.radius,e=f.radius):(d=f.width,e=f.height);var i=40,j=2*Math.PI/i,k=0;if(a.fill){var l=b.hex2rgb(a.fillColor),m=a.fillAlpha,n=l[0]*m,o=l[1]*m,p=l[2]*m,q=c.points,r=c.indices,s=q.length/6;for(r.push(s),k=0;i+1>k;k++)q.push(g,h,n,o,p,m),q.push(g+Math.sin(j*k)*d,h+Math.cos(j*k)*e,n,o,p,m),r.push(s++,s++);r.push(s-1)}if(a.lineWidth){var t=a.points;for(a.points=[],k=0;i+1>k;k++)a.points.push(g+Math.sin(j*k)*d,h+Math.cos(j*k)*e);b.WebGLGraphics.buildLine(a,c),a.points=t}},b.WebGLGraphics.buildLine=function(a,c){var d=0,e=a.points;if(0!==e.length){if(a.lineWidth%2)for(d=0;d<e.length;d++)e[d]+=.5;var f=new b.Point(e[0],e[1]),g=new b.Point(e[e.length-2],e[e.length-1]);if(f.x===g.x&&f.y===g.y){e=e.slice(),e.pop(),e.pop(),g=new b.Point(e[e.length-2],e[e.length-1]);var h=g.x+.5*(f.x-g.x),i=g.y+.5*(f.y-g.y);e.unshift(h,i),e.push(h,i)}var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=c.points,H=c.indices,I=e.length/2,J=e.length,K=G.length/6,L=a.lineWidth/2,M=b.hex2rgb(a.lineColor),N=a.lineAlpha,O=M[0]*N,P=M[1]*N,Q=M[2]*N;for(l=e[0],m=e[1],n=e[2],o=e[3],r=-(m-o),s=l-n,F=Math.sqrt(r*r+s*s),r/=F,s/=F,r*=L,s*=L,G.push(l-r,m-s,O,P,Q,N),G.push(l+r,m+s,O,P,Q,N),d=1;I-1>d;d++)l=e[2*(d-1)],m=e[2*(d-1)+1],n=e[2*d],o=e[2*d+1],p=e[2*(d+1)],q=e[2*(d+1)+1],r=-(m-o),s=l-n,F=Math.sqrt(r*r+s*s),r/=F,s/=F,r*=L,s*=L,t=-(o-q),u=n-p,F=Math.sqrt(t*t+u*u),t/=F,u/=F,t*=L,u*=L,x=-s+m-(-s+o),y=-r+n-(-r+l),z=(-r+l)*(-s+o)-(-r+n)*(-s+m),A=-u+q-(-u+o),B=-t+n-(-t+p),C=(-t+p)*(-u+o)-(-t+n)*(-u+q),D=x*B-A*y,Math.abs(D)<.1?(D+=10.1,G.push(n-r,o-s,O,P,Q,N),G.push(n+r,o+s,O,P,Q,N)):(j=(y*C-B*z)/D,k=(A*z-x*C)/D,E=(j-n)*(j-n)+(k-o)+(k-o),E>19600?(v=r-t,w=s-u,F=Math.sqrt(v*v+w*w),v/=F,w/=F,v*=L,w*=L,G.push(n-v,o-w),G.push(O,P,Q,N),G.push(n+v,o+w),G.push(O,P,Q,N),G.push(n-v,o-w),G.push(O,P,Q,N),J++):(G.push(j,k),G.push(O,P,Q,N),G.push(n-(j-n),o-(k-o)),G.push(O,P,Q,N)));for(l=e[2*(I-2)],m=e[2*(I-2)+1],n=e[2*(I-1)],o=e[2*(I-1)+1],r=-(m-o),s=l-n,F=Math.sqrt(r*r+s*s),r/=F,s/=F,r*=L,s*=L,G.push(n-r,o-s),G.push(O,P,Q,N),G.push(n+r,o+s),G.push(O,P,Q,N),H.push(K),d=0;J>d;d++)H.push(K++);H.push(K-1)}},b.WebGLGraphics.buildComplexPoly=function(a,c){var d=a.points.slice();if(!(d.length<6)){var e=c.indices;c.points=d,c.alpha=a.fillAlpha,c.color=b.hex2rgb(a.fillColor);for(var f,g,h=1/0,i=-1/0,j=1/0,k=-1/0,l=0;l<d.length;l+=2)f=d[l],g=d[l+1],h=h>f?f:h,i=f>i?f:i,j=j>g?g:j,k=g>k?g:k;d.push(h,j,i,j,i,k,h,k);var m=d.length/2;for(l=0;m>l;l++)e.push(l)}},b.WebGLGraphics.buildPoly=function(a,c){var d=a.points;if(!(d.length<6)){var e=c.points,f=c.indices,g=d.length/2,h=b.hex2rgb(a.fillColor),i=a.fillAlpha,j=h[0]*i,k=h[1]*i,l=h[2]*i,m=b.PolyK.Triangulate(d);if(!m)return!1;var n=e.length/6,o=0;for(o=0;o<m.length;o+=3)f.push(m[o]+n),f.push(m[o]+n),f.push(m[o+1]+n),f.push(m[o+2]+n),f.push(m[o+2]+n);for(o=0;g>o;o++)e.push(d[2*o],d[2*o+1],j,k,l,i);return!0}},b.WebGLGraphics.graphicsDataPool=[],b.WebGLGraphicsData=function(a){this.gl=a,this.color=[0,0,0],this.points=[],this.indices=[],this.lastIndex=0,this.buffer=a.createBuffer(),this.indexBuffer=a.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0},b.WebGLGraphicsData.prototype.reset=function(){this.points=[],this.indices=[],this.lastIndex=0},b.WebGLGraphicsData.prototype.upload=function(){var a=this.gl;this.glPoints=new b.Float32Array(this.points),a.bindBuffer(a.ARRAY_BUFFER,this.buffer),a.bufferData(a.ARRAY_BUFFER,this.glPoints,a.STATIC_DRAW),this.glIndicies=new b.Uint16Array(this.indices),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.glIndicies,a.STATIC_DRAW),this.dirty=!1},b.glContexts=[],b.instances=[],b.WebGLRenderer=function(a,c,d){if(d)for(var e in b.defaultRenderOptions)"undefined"==typeof d[e]&&(d[e]=b.defaultRenderOptions[e]);else d=b.defaultRenderOptions;b.defaultRenderer||(b.sayHello("webGL"),b.defaultRenderer=this),this.type=b.WEBGL_RENDERER,this.resolution=d.resolution,this.transparent=d.transparent,this.autoResize=d.autoResize||!1,this.preserveDrawingBuffer=d.preserveDrawingBuffer,this.clearBeforeRender=d.clearBeforeRender,this.width=a||800,this.height=c||600,this.view=d.view||document.createElement("canvas"),this.contextLostBound=this.handleContextLost.bind(this),this.contextRestoredBound=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.contextLostBound,!1),this.view.addEventListener("webglcontextrestored",this.contextRestoredBound,!1),this._contextOptions={alpha:this.transparent,antialias:d.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:d.preserveDrawingBuffer},this.projection=new b.Point,this.offset=new b.Point(0,0),this.shaderManager=new b.WebGLShaderManager,this.spriteBatch=new b.WebGLSpriteBatch,this.maskManager=new b.WebGLMaskManager,this.filterManager=new b.WebGLFilterManager,this.stencilManager=new b.WebGLStencilManager,this.blendModeManager=new b.WebGLBlendModeManager,this.renderSession={},this.renderSession.gl=this.gl,this.renderSession.drawCount=0,this.renderSession.shaderManager=this.shaderManager,this.renderSession.maskManager=this.maskManager,this.renderSession.filterManager=this.filterManager,this.renderSession.blendModeManager=this.blendModeManager,this.renderSession.spriteBatch=this.spriteBatch,this.renderSession.stencilManager=this.stencilManager,this.renderSession.renderer=this,this.renderSession.resolution=this.resolution,this.initContext(),this.mapBlendModes()},b.WebGLRenderer.prototype.constructor=b.WebGLRenderer,b.WebGLRenderer.prototype.initContext=function(){var a=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=a,!a)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=a.id=b.WebGLRenderer.glContextId++,b.glContexts[this.glContextId]=a,b.instances[this.glContextId]=this,a.disable(a.DEPTH_TEST),a.disable(a.CULL_FACE),a.enable(a.BLEND),this.shaderManager.setContext(a),this.spriteBatch.setContext(a),this.maskManager.setContext(a),this.filterManager.setContext(a),this.blendModeManager.setContext(a),this.stencilManager.setContext(a),this.renderSession.gl=this.gl,this.resize(this.width,this.height)},b.WebGLRenderer.prototype.render=function(a){if(!this.contextLost){this.__stage!==a&&(a.interactive&&a.interactionManager.removeEvents(),this.__stage=a),a.updateTransform();var b=this.gl;a._interactive?a._interactiveEventsAdded||(a._interactiveEventsAdded=!0,a.interactionManager.setTarget(this)):a._interactiveEventsAdded&&(a._interactiveEventsAdded=!1,a.interactionManager.setTarget(this)),b.viewport(0,0,this.width,this.height),b.bindFramebuffer(b.FRAMEBUFFER,null),this.clearBeforeRender&&(this.transparent?b.clearColor(0,0,0,0):b.clearColor(a.backgroundColorSplit[0],a.backgroundColorSplit[1],a.backgroundColorSplit[2],1),b.clear(b.COLOR_BUFFER_BIT)),this.renderDisplayObject(a,this.projection)}},b.WebGLRenderer.prototype.renderDisplayObject=function(a,c,d){this.renderSession.blendModeManager.setBlendMode(b.blendModes.NORMAL),this.renderSession.drawCount=0,this.renderSession.projection=c,this.renderSession.offset=this.offset,this.spriteBatch.begin(this.renderSession),this.filterManager.begin(this.renderSession,d),a._renderWebGL(this.renderSession),this.spriteBatch.end()},b.WebGLRenderer.prototype.resize=function(a,b){this.width=a*this.resolution,this.height=b*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px"),this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2/this.resolution,this.projection.y=-this.height/2/this.resolution},b.WebGLRenderer.prototype.updateTexture=function(a){if(a.hasLoaded){var c=this.gl;return a._glTextures[c.id]||(a._glTextures[c.id]=c.createTexture()),c.bindTexture(c.TEXTURE_2D,a._glTextures[c.id]),c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultipliedAlpha),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,a.source),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,a.scaleMode===b.scaleModes.LINEAR?c.LINEAR:c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,a.scaleMode===b.scaleModes.LINEAR?c.LINEAR:c.NEAREST),a._powerOf2?(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT)):(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE)),a._dirty[c.id]=!1,a._glTextures[c.id]}},b.WebGLRenderer.prototype.handleContextLost=function(a){a.preventDefault(),this.contextLost=!0},b.WebGLRenderer.prototype.handleContextRestored=function(){this.initContext();for(var a in b.TextureCache){var c=b.TextureCache[a].baseTexture;c._glTextures=[]}this.contextLost=!1},b.WebGLRenderer.prototype.destroy=function(){this.view.removeEventListener("webglcontextlost",this.contextLostBound),this.view.removeEventListener("webglcontextrestored",this.contextRestoredBound),b.glContexts[this.glContextId]=null,this.projection=null,this.offset=null,this.shaderManager.destroy(),this.spriteBatch.destroy(),this.maskManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.spriteBatch=null,this.maskManager=null,this.filterManager=null,this.gl=null,this.renderSession=null},b.WebGLRenderer.prototype.mapBlendModes=function(){var a=this.gl;b.blendModesWebGL||(b.blendModesWebGL=[],b.blendModesWebGL[b.blendModes.NORMAL]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.ADD]=[a.SRC_ALPHA,a.DST_ALPHA],b.blendModesWebGL[b.blendModes.MULTIPLY]=[a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.SCREEN]=[a.SRC_ALPHA,a.ONE],b.blendModesWebGL[b.blendModes.OVERLAY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.DARKEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.LIGHTEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.COLOR_DODGE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.COLOR_BURN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.HARD_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.SOFT_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.DIFFERENCE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.EXCLUSION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.HUE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.SATURATION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.COLOR]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b.blendModesWebGL[b.blendModes.LUMINOSITY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA])},b.WebGLRenderer.glContextId=0,b.WebGLBlendModeManager=function(){this.currentBlendMode=99999},b.WebGLBlendModeManager.prototype.constructor=b.WebGLBlendModeManager,b.WebGLBlendModeManager.prototype.setContext=function(a){this.gl=a},b.WebGLBlendModeManager.prototype.setBlendMode=function(a){if(this.currentBlendMode===a)return!1;this.currentBlendMode=a;var c=b.blendModesWebGL[this.currentBlendMode];return this.gl.blendFunc(c[0],c[1]),!0},b.WebGLBlendModeManager.prototype.destroy=function(){this.gl=null},b.WebGLMaskManager=function(){},b.WebGLMaskManager.prototype.constructor=b.WebGLMaskManager,b.WebGLMaskManager.prototype.setContext=function(a){this.gl=a},b.WebGLMaskManager.prototype.pushMask=function(a,c){var d=c.gl;a.dirty&&b.WebGLGraphics.updateGraphics(a,d),a._webGL[d.id].data.length&&c.stencilManager.pushStencil(a,a._webGL[d.id].data[0],c)},b.WebGLMaskManager.prototype.popMask=function(a,b){var c=this.gl;b.stencilManager.popStencil(a,a._webGL[c.id].data[0],b)},b.WebGLMaskManager.prototype.destroy=function(){this.gl=null},b.WebGLStencilManager=function(){this.stencilStack=[],this.reverse=!0,this.count=0},b.WebGLStencilManager.prototype.setContext=function(a){this.gl=a},b.WebGLStencilManager.prototype.pushStencil=function(a,b,c){var d=this.gl;this.bindGraphics(a,b,c),0===this.stencilStack.length&&(d.enable(d.STENCIL_TEST),d.clear(d.STENCIL_BUFFER_BIT),this.reverse=!0,this.count=0),this.stencilStack.push(b);var e=this.count;d.colorMask(!1,!1,!1,!1),d.stencilFunc(d.ALWAYS,0,255),d.stencilOp(d.KEEP,d.KEEP,d.INVERT),1===b.mode?(d.drawElements(d.TRIANGLE_FAN,b.indices.length-4,d.UNSIGNED_SHORT,0),this.reverse?(d.stencilFunc(d.EQUAL,255-e,255),d.stencilOp(d.KEEP,d.KEEP,d.DECR)):(d.stencilFunc(d.EQUAL,e,255),d.stencilOp(d.KEEP,d.KEEP,d.INCR)),d.drawElements(d.TRIANGLE_FAN,4,d.UNSIGNED_SHORT,2*(b.indices.length-4)),this.reverse?d.stencilFunc(d.EQUAL,255-(e+1),255):d.stencilFunc(d.EQUAL,e+1,255),this.reverse=!this.reverse):(this.reverse?(d.stencilFunc(d.EQUAL,e,255),d.stencilOp(d.KEEP,d.KEEP,d.INCR)):(d.stencilFunc(d.EQUAL,255-e,255),d.stencilOp(d.KEEP,d.KEEP,d.DECR)),d.drawElements(d.TRIANGLE_STRIP,b.indices.length,d.UNSIGNED_SHORT,0),this.reverse?d.stencilFunc(d.EQUAL,e+1,255):d.stencilFunc(d.EQUAL,255-(e+1),255)),d.colorMask(!0,!0,!0,!0),d.stencilOp(d.KEEP,d.KEEP,d.KEEP),this.count++
},b.WebGLStencilManager.prototype.bindGraphics=function(a,c,d){this._currentGraphics=a;var e,f=this.gl,g=d.projection,h=d.offset;1===c.mode?(e=d.shaderManager.complexPrimitiveShader,d.shaderManager.setShader(e),f.uniformMatrix3fv(e.translationMatrix,!1,a.worldTransform.toArray(!0)),f.uniform2f(e.projectionVector,g.x,-g.y),f.uniform2f(e.offsetVector,-h.x,-h.y),f.uniform3fv(e.tintColor,b.hex2rgb(a.tint)),f.uniform3fv(e.color,c.color),f.uniform1f(e.alpha,a.worldAlpha*c.alpha),f.bindBuffer(f.ARRAY_BUFFER,c.buffer),f.vertexAttribPointer(e.aVertexPosition,2,f.FLOAT,!1,8,0),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,c.indexBuffer)):(e=d.shaderManager.primitiveShader,d.shaderManager.setShader(e),f.uniformMatrix3fv(e.translationMatrix,!1,a.worldTransform.toArray(!0)),f.uniform2f(e.projectionVector,g.x,-g.y),f.uniform2f(e.offsetVector,-h.x,-h.y),f.uniform3fv(e.tintColor,b.hex2rgb(a.tint)),f.uniform1f(e.alpha,a.worldAlpha),f.bindBuffer(f.ARRAY_BUFFER,c.buffer),f.vertexAttribPointer(e.aVertexPosition,2,f.FLOAT,!1,24,0),f.vertexAttribPointer(e.colorAttribute,4,f.FLOAT,!1,24,8),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,c.indexBuffer))},b.WebGLStencilManager.prototype.popStencil=function(a,b,c){var d=this.gl;if(this.stencilStack.pop(),this.count--,0===this.stencilStack.length)d.disable(d.STENCIL_TEST);else{var e=this.count;this.bindGraphics(a,b,c),d.colorMask(!1,!1,!1,!1),1===b.mode?(this.reverse=!this.reverse,this.reverse?(d.stencilFunc(d.EQUAL,255-(e+1),255),d.stencilOp(d.KEEP,d.KEEP,d.INCR)):(d.stencilFunc(d.EQUAL,e+1,255),d.stencilOp(d.KEEP,d.KEEP,d.DECR)),d.drawElements(d.TRIANGLE_FAN,4,d.UNSIGNED_SHORT,2*(b.indices.length-4)),d.stencilFunc(d.ALWAYS,0,255),d.stencilOp(d.KEEP,d.KEEP,d.INVERT),d.drawElements(d.TRIANGLE_FAN,b.indices.length-4,d.UNSIGNED_SHORT,0),this.reverse?d.stencilFunc(d.EQUAL,e,255):d.stencilFunc(d.EQUAL,255-e,255)):(this.reverse?(d.stencilFunc(d.EQUAL,e+1,255),d.stencilOp(d.KEEP,d.KEEP,d.DECR)):(d.stencilFunc(d.EQUAL,255-(e+1),255),d.stencilOp(d.KEEP,d.KEEP,d.INCR)),d.drawElements(d.TRIANGLE_STRIP,b.indices.length,d.UNSIGNED_SHORT,0),this.reverse?d.stencilFunc(d.EQUAL,e,255):d.stencilFunc(d.EQUAL,255-e,255)),d.colorMask(!0,!0,!0,!0),d.stencilOp(d.KEEP,d.KEEP,d.KEEP)}},b.WebGLStencilManager.prototype.destroy=function(){this.stencilStack=null,this.gl=null},b.WebGLShaderManager=function(){this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var a=0;a<this.maxAttibs;a++)this.attribState[a]=!1;this.stack=[]},b.WebGLShaderManager.prototype.constructor=b.WebGLShaderManager,b.WebGLShaderManager.prototype.setContext=function(a){this.gl=a,this.primitiveShader=new b.PrimitiveShader(a),this.complexPrimitiveShader=new b.ComplexPrimitiveShader(a),this.defaultShader=new b.PixiShader(a),this.fastShader=new b.PixiFastShader(a),this.stripShader=new b.StripShader(a),this.setShader(this.defaultShader)},b.WebGLShaderManager.prototype.setAttribs=function(a){var b;for(b=0;b<this.tempAttribState.length;b++)this.tempAttribState[b]=!1;for(b=0;b<a.length;b++){var c=a[b];this.tempAttribState[c]=!0}var d=this.gl;for(b=0;b<this.attribState.length;b++)this.attribState[b]!==this.tempAttribState[b]&&(this.attribState[b]=this.tempAttribState[b],this.tempAttribState[b]?d.enableVertexAttribArray(b):d.disableVertexAttribArray(b))},b.WebGLShaderManager.prototype.setShader=function(a){return this._currentId===a._UID?!1:(this._currentId=a._UID,this.currentShader=a,this.gl.useProgram(a.program),this.setAttribs(a.attributes),!0)},b.WebGLShaderManager.prototype.destroy=function(){this.attribState=null,this.tempAttribState=null,this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),this.defaultShader.destroy(),this.fastShader.destroy(),this.stripShader.destroy(),this.gl=null},b.WebGLSpriteBatch=function(){this.vertSize=6,this.size=2e3;var a=4*this.size*this.vertSize,c=6*this.size;this.vertices=new b.Float32Array(a),this.indices=new b.Uint16Array(c),this.lastIndexCount=0;for(var d=0,e=0;c>d;d+=6,e+=4)this.indices[d+0]=e+0,this.indices[d+1]=e+1,this.indices[d+2]=e+2,this.indices[d+3]=e+0,this.indices[d+4]=e+2,this.indices[d+5]=e+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.dirty=!0,this.textures=[],this.blendModes=[],this.shaders=[],this.sprites=[],this.defaultShader=new b.AbstractFilter(["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"])},b.WebGLSpriteBatch.prototype.setContext=function(a){this.gl=a,this.vertexBuffer=a.createBuffer(),this.indexBuffer=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indices,a.STATIC_DRAW),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),a.bufferData(a.ARRAY_BUFFER,this.vertices,a.DYNAMIC_DRAW),this.currentBlendMode=99999;var c=new b.PixiShader(a);c.fragmentSrc=this.defaultShader.fragmentSrc,c.uniforms={},c.init(),this.defaultShader.shaders[a.id]=c},b.WebGLSpriteBatch.prototype.begin=function(a){this.renderSession=a,this.shader=this.renderSession.shaderManager.defaultShader,this.start()},b.WebGLSpriteBatch.prototype.end=function(){this.flush()},b.WebGLSpriteBatch.prototype.render=function(a){var b=a.texture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=b.baseTexture);var c=b._uvs;if(c){var d,e,f,g,h=a.worldAlpha,i=a.tint,j=this.vertices,k=a.anchor.x,l=a.anchor.y;if(b.trim){var m=b.trim;e=m.x-k*m.width,d=e+b.crop.width,g=m.y-l*m.height,f=g+b.crop.height}else d=b.frame.width*(1-k),e=b.frame.width*-k,f=b.frame.height*(1-l),g=b.frame.height*-l;var n=4*this.currentBatchSize*this.vertSize,o=b.baseTexture.resolution,p=a.worldTransform,q=p.a/o,r=p.b/o,s=p.c/o,t=p.d/o,u=p.tx,v=p.ty;j[n++]=q*e+s*g+u,j[n++]=t*g+r*e+v,j[n++]=c.x0,j[n++]=c.y0,j[n++]=h,j[n++]=i,j[n++]=q*d+s*g+u,j[n++]=t*g+r*d+v,j[n++]=c.x1,j[n++]=c.y1,j[n++]=h,j[n++]=i,j[n++]=q*d+s*f+u,j[n++]=t*f+r*d+v,j[n++]=c.x2,j[n++]=c.y2,j[n++]=h,j[n++]=i,j[n++]=q*e+s*f+u,j[n++]=t*f+r*e+v,j[n++]=c.x3,j[n++]=c.y3,j[n++]=h,j[n++]=i,this.sprites[this.currentBatchSize++]=a}},b.WebGLSpriteBatch.prototype.renderTilingSprite=function(a){var c=a.tilingTexture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=c.baseTexture),a._uvs||(a._uvs=new b.TextureUvs);var d=a._uvs;a.tilePosition.x%=c.baseTexture.width*a.tileScaleOffset.x,a.tilePosition.y%=c.baseTexture.height*a.tileScaleOffset.y;var e=a.tilePosition.x/(c.baseTexture.width*a.tileScaleOffset.x),f=a.tilePosition.y/(c.baseTexture.height*a.tileScaleOffset.y),g=a.width/c.baseTexture.width/(a.tileScale.x*a.tileScaleOffset.x),h=a.height/c.baseTexture.height/(a.tileScale.y*a.tileScaleOffset.y);d.x0=0-e,d.y0=0-f,d.x1=1*g-e,d.y1=0-f,d.x2=1*g-e,d.y2=1*h-f,d.x3=0-e,d.y3=1*h-f;var i=a.worldAlpha,j=a.tint,k=this.vertices,l=a.width,m=a.height,n=a.anchor.x,o=a.anchor.y,p=l*(1-n),q=l*-n,r=m*(1-o),s=m*-o,t=4*this.currentBatchSize*this.vertSize,u=c.baseTexture.resolution,v=a.worldTransform,w=v.a/u,x=v.b/u,y=v.c/u,z=v.d/u,A=v.tx,B=v.ty;k[t++]=w*q+y*s+A,k[t++]=z*s+x*q+B,k[t++]=d.x0,k[t++]=d.y0,k[t++]=i,k[t++]=j,k[t++]=w*p+y*s+A,k[t++]=z*s+x*p+B,k[t++]=d.x1,k[t++]=d.y1,k[t++]=i,k[t++]=j,k[t++]=w*p+y*r+A,k[t++]=z*r+x*p+B,k[t++]=d.x2,k[t++]=d.y2,k[t++]=i,k[t++]=j,k[t++]=w*q+y*r+A,k[t++]=z*r+x*q+B,k[t++]=d.x3,k[t++]=d.y3,k[t++]=i,k[t++]=j,this.sprites[this.currentBatchSize++]=a},b.WebGLSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var a,c=this.gl;if(this.dirty){this.dirty=!1,c.activeTexture(c.TEXTURE0),c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a=this.defaultShader.shaders[c.id];var d=4*this.vertSize;c.vertexAttribPointer(a.aVertexPosition,2,c.FLOAT,!1,d,0),c.vertexAttribPointer(a.aTextureCoord,2,c.FLOAT,!1,d,8),c.vertexAttribPointer(a.colorAttribute,2,c.FLOAT,!1,d,16)}if(this.currentBatchSize>.5*this.size)c.bufferSubData(c.ARRAY_BUFFER,0,this.vertices);else{var e=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);c.bufferSubData(c.ARRAY_BUFFER,0,e)}for(var f,g,h,i,j=0,k=0,l=null,m=this.renderSession.blendModeManager.currentBlendMode,n=null,o=!1,p=!1,q=0,r=this.currentBatchSize;r>q;q++){if(i=this.sprites[q],f=i.texture.baseTexture,g=i.blendMode,h=i.shader||this.defaultShader,o=m!==g,p=n!==h,(l!==f||o||p)&&(this.renderBatch(l,j,k),k=q,j=0,l=f,o&&(m=g,this.renderSession.blendModeManager.setBlendMode(m)),p)){n=h,a=n.shaders[c.id],a||(a=new b.PixiShader(c),a.fragmentSrc=n.fragmentSrc,a.uniforms=n.uniforms,a.init(),n.shaders[c.id]=a),this.renderSession.shaderManager.setShader(a),a.dirty&&a.syncUniforms();var s=this.renderSession.projection;c.uniform2f(a.projectionVector,s.x,s.y);var t=this.renderSession.offset;c.uniform2f(a.offsetVector,t.x,t.y)}j++}this.renderBatch(l,j,k),this.currentBatchSize=0}},b.WebGLSpriteBatch.prototype.renderBatch=function(a,b,c){if(0!==b){var d=this.gl;a._dirty[d.id]?this.renderSession.renderer.updateTexture(a):d.bindTexture(d.TEXTURE_2D,a._glTextures[d.id]),d.drawElements(d.TRIANGLES,6*b,d.UNSIGNED_SHORT,6*c*2),this.renderSession.drawCount++}},b.WebGLSpriteBatch.prototype.stop=function(){this.flush(),this.dirty=!0},b.WebGLSpriteBatch.prototype.start=function(){this.dirty=!0},b.WebGLSpriteBatch.prototype.destroy=function(){this.vertices=null,this.indices=null,this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.indexBuffer),this.currentBaseTexture=null,this.gl=null},b.WebGLFastSpriteBatch=function(a){this.vertSize=10,this.maxSize=6e3,this.size=this.maxSize;var c=4*this.size*this.vertSize,d=6*this.maxSize;this.vertices=new b.Float32Array(c),this.indices=new b.Uint16Array(d),this.vertexBuffer=null,this.indexBuffer=null,this.lastIndexCount=0;for(var e=0,f=0;d>e;e+=6,f+=4)this.indices[e+0]=f+0,this.indices[e+1]=f+1,this.indices[e+2]=f+2,this.indices[e+3]=f+0,this.indices[e+4]=f+2,this.indices[e+5]=f+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.currentBlendMode=0,this.renderSession=null,this.shader=null,this.matrix=null,this.setContext(a)},b.WebGLFastSpriteBatch.prototype.constructor=b.WebGLFastSpriteBatch,b.WebGLFastSpriteBatch.prototype.setContext=function(a){this.gl=a,this.vertexBuffer=a.createBuffer(),this.indexBuffer=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indices,a.STATIC_DRAW),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),a.bufferData(a.ARRAY_BUFFER,this.vertices,a.DYNAMIC_DRAW)},b.WebGLFastSpriteBatch.prototype.begin=function(a,b){this.renderSession=b,this.shader=this.renderSession.shaderManager.fastShader,this.matrix=a.worldTransform.toArray(!0),this.start()},b.WebGLFastSpriteBatch.prototype.end=function(){this.flush()},b.WebGLFastSpriteBatch.prototype.render=function(a){var b=a.children,c=b[0];if(c.texture._uvs){this.currentBaseTexture=c.texture.baseTexture,c.blendMode!==this.renderSession.blendModeManager.currentBlendMode&&(this.flush(),this.renderSession.blendModeManager.setBlendMode(c.blendMode));for(var d=0,e=b.length;e>d;d++)this.renderSprite(b[d]);this.flush()}},b.WebGLFastSpriteBatch.prototype.renderSprite=function(a){if(a.visible&&(a.texture.baseTexture===this.currentBaseTexture||(this.flush(),this.currentBaseTexture=a.texture.baseTexture,a.texture._uvs))){var b,c,d,e,f,g,h,i,j=this.vertices;if(b=a.texture._uvs,c=a.texture.frame.width,d=a.texture.frame.height,a.texture.trim){var k=a.texture.trim;f=k.x-a.anchor.x*k.width,e=f+a.texture.crop.width,h=k.y-a.anchor.y*k.height,g=h+a.texture.crop.height}else e=a.texture.frame.width*(1-a.anchor.x),f=a.texture.frame.width*-a.anchor.x,g=a.texture.frame.height*(1-a.anchor.y),h=a.texture.frame.height*-a.anchor.y;i=4*this.currentBatchSize*this.vertSize,j[i++]=f,j[i++]=h,j[i++]=a.position.x,j[i++]=a.position.y,j[i++]=a.scale.x,j[i++]=a.scale.y,j[i++]=a.rotation,j[i++]=b.x0,j[i++]=b.y1,j[i++]=a.alpha,j[i++]=e,j[i++]=h,j[i++]=a.position.x,j[i++]=a.position.y,j[i++]=a.scale.x,j[i++]=a.scale.y,j[i++]=a.rotation,j[i++]=b.x1,j[i++]=b.y1,j[i++]=a.alpha,j[i++]=e,j[i++]=g,j[i++]=a.position.x,j[i++]=a.position.y,j[i++]=a.scale.x,j[i++]=a.scale.y,j[i++]=a.rotation,j[i++]=b.x2,j[i++]=b.y2,j[i++]=a.alpha,j[i++]=f,j[i++]=g,j[i++]=a.position.x,j[i++]=a.position.y,j[i++]=a.scale.x,j[i++]=a.scale.y,j[i++]=a.rotation,j[i++]=b.x3,j[i++]=b.y3,j[i++]=a.alpha,this.currentBatchSize++,this.currentBatchSize>=this.size&&this.flush()}},b.WebGLFastSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var a=this.gl;if(this.currentBaseTexture._glTextures[a.id]||this.renderSession.renderer.updateTexture(this.currentBaseTexture,a),a.bindTexture(a.TEXTURE_2D,this.currentBaseTexture._glTextures[a.id]),this.currentBatchSize>.5*this.size)a.bufferSubData(a.ARRAY_BUFFER,0,this.vertices);else{var b=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);a.bufferSubData(a.ARRAY_BUFFER,0,b)}a.drawElements(a.TRIANGLES,6*this.currentBatchSize,a.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderSession.drawCount++}},b.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()},b.WebGLFastSpriteBatch.prototype.start=function(){var a=this.gl;a.activeTexture(a.TEXTURE0),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var b=this.renderSession.projection;a.uniform2f(this.shader.projectionVector,b.x,b.y),a.uniformMatrix3fv(this.shader.uMatrix,!1,this.matrix);var c=4*this.vertSize;a.vertexAttribPointer(this.shader.aVertexPosition,2,a.FLOAT,!1,c,0),a.vertexAttribPointer(this.shader.aPositionCoord,2,a.FLOAT,!1,c,8),a.vertexAttribPointer(this.shader.aScale,2,a.FLOAT,!1,c,16),a.vertexAttribPointer(this.shader.aRotation,1,a.FLOAT,!1,c,24),a.vertexAttribPointer(this.shader.aTextureCoord,2,a.FLOAT,!1,c,28),a.vertexAttribPointer(this.shader.colorAttribute,1,a.FLOAT,!1,c,36)},b.WebGLFilterManager=function(){this.filterStack=[],this.offsetX=0,this.offsetY=0},b.WebGLFilterManager.prototype.constructor=b.WebGLFilterManager,b.WebGLFilterManager.prototype.setContext=function(a){this.gl=a,this.texturePool=[],this.initShaderBuffers()},b.WebGLFilterManager.prototype.begin=function(a,b){this.renderSession=a,this.defaultShader=a.shaderManager.defaultShader;var c=this.renderSession.projection;this.width=2*c.x,this.height=2*-c.y,this.buffer=b},b.WebGLFilterManager.prototype.pushFilter=function(a){var c=this.gl,d=this.renderSession.projection,e=this.renderSession.offset;a._filterArea=a.target.filterArea||a.target.getBounds(),this.filterStack.push(a);var f=a.filterPasses[0];this.offsetX+=a._filterArea.x,this.offsetY+=a._filterArea.y;var g=this.texturePool.pop();g?g.resize(this.width,this.height):g=new b.FilterTexture(this.gl,this.width,this.height),c.bindTexture(c.TEXTURE_2D,g.texture);var h=a._filterArea,i=f.padding;h.x-=i,h.y-=i,h.width+=2*i,h.height+=2*i,h.x<0&&(h.x=0),h.width>this.width&&(h.width=this.width),h.y<0&&(h.y=0),h.height>this.height&&(h.height=this.height),c.bindFramebuffer(c.FRAMEBUFFER,g.frameBuffer),c.viewport(0,0,h.width,h.height),d.x=h.width/2,d.y=-h.height/2,e.x=-h.x,e.y=-h.y,c.colorMask(!0,!0,!0,!0),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT),a._glFilterTexture=g},b.WebGLFilterManager.prototype.popFilter=function(){var a=this.gl,c=this.filterStack.pop(),d=c._filterArea,e=c._glFilterTexture,f=this.renderSession.projection,g=this.renderSession.offset;if(c.filterPasses.length>1){a.viewport(0,0,d.width,d.height),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=d.height,this.vertexArray[2]=d.width,this.vertexArray[3]=d.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=d.width,this.vertexArray[7]=0,a.bufferSubData(a.ARRAY_BUFFER,0,this.vertexArray),a.bindBuffer(a.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=d.width/this.width,this.uvArray[5]=d.height/this.height,this.uvArray[6]=d.width/this.width,this.uvArray[7]=d.height/this.height,a.bufferSubData(a.ARRAY_BUFFER,0,this.uvArray);var h=e,i=this.texturePool.pop();i||(i=new b.FilterTexture(this.gl,this.width,this.height)),i.resize(this.width,this.height),a.bindFramebuffer(a.FRAMEBUFFER,i.frameBuffer),a.clear(a.COLOR_BUFFER_BIT),a.disable(a.BLEND);for(var j=0;j<c.filterPasses.length-1;j++){var k=c.filterPasses[j];a.bindFramebuffer(a.FRAMEBUFFER,i.frameBuffer),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,h.texture),this.applyFilterPass(k,d,d.width,d.height);var l=h;h=i,i=l}a.enable(a.BLEND),e=h,this.texturePool.push(i)}var m=c.filterPasses[c.filterPasses.length-1];this.offsetX-=d.x,this.offsetY-=d.y;var n=this.width,o=this.height,p=0,q=0,r=this.buffer;if(0===this.filterStack.length)a.colorMask(!0,!0,!0,!0);else{var s=this.filterStack[this.filterStack.length-1];d=s._filterArea,n=d.width,o=d.height,p=d.x,q=d.y,r=s._glFilterTexture.frameBuffer}f.x=n/2,f.y=-o/2,g.x=p,g.y=q,d=c._filterArea;var t=d.x-p,u=d.y-q;a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=t,this.vertexArray[1]=u+d.height,this.vertexArray[2]=t+d.width,this.vertexArray[3]=u+d.height,this.vertexArray[4]=t,this.vertexArray[5]=u,this.vertexArray[6]=t+d.width,this.vertexArray[7]=u,a.bufferSubData(a.ARRAY_BUFFER,0,this.vertexArray),a.bindBuffer(a.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=d.width/this.width,this.uvArray[5]=d.height/this.height,this.uvArray[6]=d.width/this.width,this.uvArray[7]=d.height/this.height,a.bufferSubData(a.ARRAY_BUFFER,0,this.uvArray),a.viewport(0,0,n,o),a.bindFramebuffer(a.FRAMEBUFFER,r),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,e.texture),this.applyFilterPass(m,d,n,o),this.texturePool.push(e),c._glFilterTexture=null},b.WebGLFilterManager.prototype.applyFilterPass=function(a,c,d,e){var f=this.gl,g=a.shaders[f.id];g||(g=new b.PixiShader(f),g.fragmentSrc=a.fragmentSrc,g.uniforms=a.uniforms,g.init(),a.shaders[f.id]=g),this.renderSession.shaderManager.setShader(g),f.uniform2f(g.projectionVector,d/2,-e/2),f.uniform2f(g.offsetVector,0,0),a.uniforms.dimensions&&(a.uniforms.dimensions.value[0]=this.width,a.uniforms.dimensions.value[1]=this.height,a.uniforms.dimensions.value[2]=this.vertexArray[0],a.uniforms.dimensions.value[3]=this.vertexArray[5]),g.syncUniforms(),f.bindBuffer(f.ARRAY_BUFFER,this.vertexBuffer),f.vertexAttribPointer(g.aVertexPosition,2,f.FLOAT,!1,0,0),f.bindBuffer(f.ARRAY_BUFFER,this.uvBuffer),f.vertexAttribPointer(g.aTextureCoord,2,f.FLOAT,!1,0,0),f.bindBuffer(f.ARRAY_BUFFER,this.colorBuffer),f.vertexAttribPointer(g.colorAttribute,2,f.FLOAT,!1,0,0),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,this.indexBuffer),f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0),this.renderSession.drawCount++},b.WebGLFilterManager.prototype.initShaderBuffers=function(){var a=this.gl;this.vertexBuffer=a.createBuffer(),this.uvBuffer=a.createBuffer(),this.colorBuffer=a.createBuffer(),this.indexBuffer=a.createBuffer(),this.vertexArray=new b.Float32Array([0,0,1,0,0,1,1,1]),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),a.bufferData(a.ARRAY_BUFFER,this.vertexArray,a.STATIC_DRAW),this.uvArray=new b.Float32Array([0,0,1,0,0,1,1,1]),a.bindBuffer(a.ARRAY_BUFFER,this.uvBuffer),a.bufferData(a.ARRAY_BUFFER,this.uvArray,a.STATIC_DRAW),this.colorArray=new b.Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]),a.bindBuffer(a.ARRAY_BUFFER,this.colorBuffer),a.bufferData(a.ARRAY_BUFFER,this.colorArray,a.STATIC_DRAW),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),a.STATIC_DRAW)},b.WebGLFilterManager.prototype.destroy=function(){var a=this.gl;this.filterStack=null,this.offsetX=0,this.offsetY=0;for(var b=0;b<this.texturePool.length;b++)this.texturePool[b].destroy();this.texturePool=null,a.deleteBuffer(this.vertexBuffer),a.deleteBuffer(this.uvBuffer),a.deleteBuffer(this.colorBuffer),a.deleteBuffer(this.indexBuffer)},b.FilterTexture=function(a,c,d,e){this.gl=a,this.frameBuffer=a.createFramebuffer(),this.texture=a.createTexture(),e=e||b.scaleModes.DEFAULT,a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,e===b.scaleModes.LINEAR?a.LINEAR:a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,e===b.scaleModes.LINEAR?a.LINEAR:a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.bindFramebuffer(a.FRAMEBUFFER,this.frameBuffer),a.bindFramebuffer(a.FRAMEBUFFER,this.frameBuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this.texture,0),this.renderBuffer=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,this.renderBuffer),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,this.renderBuffer),this.resize(c,d)},b.FilterTexture.prototype.constructor=b.FilterTexture,b.FilterTexture.prototype.clear=function(){var a=this.gl;a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT)},b.FilterTexture.prototype.resize=function(a,b){if(this.width!==a||this.height!==b){this.width=a,this.height=b;var c=this.gl;c.bindTexture(c.TEXTURE_2D,this.texture),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,a,b,0,c.RGBA,c.UNSIGNED_BYTE,null),c.bindRenderbuffer(c.RENDERBUFFER,this.renderBuffer),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,a,b)}},b.FilterTexture.prototype.destroy=function(){var a=this.gl;a.deleteFramebuffer(this.frameBuffer),a.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null},b.CanvasBuffer=function(a,b){this.width=a,this.height=b,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=a,this.canvas.height=b},b.CanvasBuffer.prototype.constructor=b.CanvasBuffer,b.CanvasBuffer.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height)},b.CanvasBuffer.prototype.resize=function(a,b){this.width=this.canvas.width=a,this.height=this.canvas.height=b},b.CanvasMaskManager=function(){},b.CanvasMaskManager.prototype.constructor=b.CanvasMaskManager,b.CanvasMaskManager.prototype.pushMask=function(a,c){var d=c.context;d.save();var e=a.alpha,f=a.worldTransform,g=c.resolution;d.setTransform(f.a*g,f.b*g,f.c*g,f.d*g,f.tx*g,f.ty*g),b.CanvasGraphics.renderGraphicsMask(a,d),d.clip(),a.worldAlpha=e},b.CanvasMaskManager.prototype.popMask=function(a){a.context.restore()},b.CanvasTinter=function(){},b.CanvasTinter.getTintedTexture=function(a,c){var d=a.texture;c=b.CanvasTinter.roundColor(c);var e="#"+("00000"+(0|c).toString(16)).substr(-6);if(d.tintCache=d.tintCache||{},d.tintCache[e])return d.tintCache[e];var f=b.CanvasTinter.canvas||document.createElement("canvas");if(b.CanvasTinter.tintMethod(d,c,f),b.CanvasTinter.convertTintToImage){var g=new Image;g.src=f.toDataURL(),d.tintCache[e]=g}else d.tintCache[e]=f,b.CanvasTinter.canvas=null;return f},b.CanvasTinter.tintWithMultiply=function(a,b,c){var d=c.getContext("2d"),e=a.crop;c.width=e.width,c.height=e.height,d.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),d.fillRect(0,0,e.width,e.height),d.globalCompositeOperation="multiply",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height),d.globalCompositeOperation="destination-atop",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height)},b.CanvasTinter.tintWithOverlay=function(a,b,c){var d=c.getContext("2d"),e=a.crop;c.width=e.width,c.height=e.height,d.globalCompositeOperation="copy",d.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),d.fillRect(0,0,e.width,e.height),d.globalCompositeOperation="destination-atop",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height)},b.CanvasTinter.tintWithPerPixel=function(a,c,d){var e=d.getContext("2d"),f=a.crop;d.width=f.width,d.height=f.height,e.globalCompositeOperation="copy",e.drawImage(a.baseTexture.source,f.x,f.y,f.width,f.height,0,0,f.width,f.height);for(var g=b.hex2rgb(c),h=g[0],i=g[1],j=g[2],k=e.getImageData(0,0,f.width,f.height),l=k.data,m=0;m<l.length;m+=4)l[m+0]*=h,l[m+1]*=i,l[m+2]*=j;e.putImageData(k,0,0)},b.CanvasTinter.roundColor=function(a){var c=b.CanvasTinter.cacheStepsPerColorChannel,d=b.hex2rgb(a);return d[0]=Math.min(255,d[0]/c*c),d[1]=Math.min(255,d[1]/c*c),d[2]=Math.min(255,d[2]/c*c),b.rgb2hex(d)},b.CanvasTinter.cacheStepsPerColorChannel=8,b.CanvasTinter.convertTintToImage=!1,b.CanvasTinter.canUseMultiply=b.canUseNewCanvasBlendModes(),b.CanvasTinter.tintMethod=b.CanvasTinter.canUseMultiply?b.CanvasTinter.tintWithMultiply:b.CanvasTinter.tintWithPerPixel,b.CanvasRenderer=function(a,c,d){if(d)for(var e in b.defaultRenderOptions)"undefined"==typeof d[e]&&(d[e]=b.defaultRenderOptions[e]);else d=b.defaultRenderOptions;b.defaultRenderer||(b.sayHello("Canvas"),b.defaultRenderer=this),this.type=b.CANVAS_RENDERER,this.resolution=d.resolution,this.clearBeforeRender=d.clearBeforeRender,this.transparent=d.transparent,this.autoResize=d.autoResize||!1,this.width=a||800,this.height=c||600,this.width*=this.resolution,this.height*=this.resolution,this.view=d.view||document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.view.width=this.width*this.resolution,this.view.height=this.height*this.resolution,this.count=0,this.maskManager=new b.CanvasMaskManager,this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:null,smoothProperty:null,roundPixels:!1},this.mapBlendModes(),this.resize(a,c),"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="oImageSmoothingEnabled":"msImageSmoothingEnabled"in this.context&&(this.renderSession.smoothProperty="msImageSmoothingEnabled")},b.CanvasRenderer.prototype.constructor=b.CanvasRenderer,b.CanvasRenderer.prototype.render=function(a){a.updateTransform(),this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.renderSession.currentBlendMode=b.blendModes.NORMAL,this.context.globalCompositeOperation=b.blendModesCanvas[b.blendModes.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=a.backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(a),a.interactive&&(a._interactiveEventsAdded||(a._interactiveEventsAdded=!0,a.interactionManager.setTarget(this)))},b.CanvasRenderer.prototype.destroy=function(a){"undefined"==typeof a&&(a=!0),a&&this.view.parent&&this.view.parent.removeChild(this.view),this.view=null,this.context=null,this.maskManager=null,this.renderSession=null},b.CanvasRenderer.prototype.resize=function(a,b){this.width=a*this.resolution,this.height=b*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},b.CanvasRenderer.prototype.renderDisplayObject=function(a,b){this.renderSession.context=b||this.context,this.renderSession.resolution=this.resolution,a._renderCanvas(this.renderSession)},b.CanvasRenderer.prototype.mapBlendModes=function(){b.blendModesCanvas||(b.blendModesCanvas=[],b.canUseNewCanvasBlendModes()?(b.blendModesCanvas[b.blendModes.NORMAL]="source-over",b.blendModesCanvas[b.blendModes.ADD]="lighter",b.blendModesCanvas[b.blendModes.MULTIPLY]="multiply",b.blendModesCanvas[b.blendModes.SCREEN]="screen",b.blendModesCanvas[b.blendModes.OVERLAY]="overlay",b.blendModesCanvas[b.blendModes.DARKEN]="darken",b.blendModesCanvas[b.blendModes.LIGHTEN]="lighten",b.blendModesCanvas[b.blendModes.COLOR_DODGE]="color-dodge",b.blendModesCanvas[b.blendModes.COLOR_BURN]="color-burn",b.blendModesCanvas[b.blendModes.HARD_LIGHT]="hard-light",b.blendModesCanvas[b.blendModes.SOFT_LIGHT]="soft-light",b.blendModesCanvas[b.blendModes.DIFFERENCE]="difference",b.blendModesCanvas[b.blendModes.EXCLUSION]="exclusion",b.blendModesCanvas[b.blendModes.HUE]="hue",b.blendModesCanvas[b.blendModes.SATURATION]="saturation",b.blendModesCanvas[b.blendModes.COLOR]="color",b.blendModesCanvas[b.blendModes.LUMINOSITY]="luminosity"):(b.blendModesCanvas[b.blendModes.NORMAL]="source-over",b.blendModesCanvas[b.blendModes.ADD]="lighter",b.blendModesCanvas[b.blendModes.MULTIPLY]="source-over",b.blendModesCanvas[b.blendModes.SCREEN]="source-over",b.blendModesCanvas[b.blendModes.OVERLAY]="source-over",b.blendModesCanvas[b.blendModes.DARKEN]="source-over",b.blendModesCanvas[b.blendModes.LIGHTEN]="source-over",b.blendModesCanvas[b.blendModes.COLOR_DODGE]="source-over",b.blendModesCanvas[b.blendModes.COLOR_BURN]="source-over",b.blendModesCanvas[b.blendModes.HARD_LIGHT]="source-over",b.blendModesCanvas[b.blendModes.SOFT_LIGHT]="source-over",b.blendModesCanvas[b.blendModes.DIFFERENCE]="source-over",b.blendModesCanvas[b.blendModes.EXCLUSION]="source-over",b.blendModesCanvas[b.blendModes.HUE]="source-over",b.blendModesCanvas[b.blendModes.SATURATION]="source-over",b.blendModesCanvas[b.blendModes.COLOR]="source-over",b.blendModesCanvas[b.blendModes.LUMINOSITY]="source-over"))},b.CanvasGraphics=function(){},b.CanvasGraphics.renderGraphics=function(a,c){var d=a.worldAlpha;a.dirty&&(this.updateGraphicsTint(a),a.dirty=!1);for(var e=0;e<a.graphicsData.length;e++){var f=a.graphicsData[e],g=f.shape,h=f._fillTint,i=f._lineTint;if(c.lineWidth=f.lineWidth,f.type===b.Graphics.POLY){c.beginPath();var j=g.points;c.moveTo(j[0],j[1]);for(var k=1;k<j.length/2;k++)c.lineTo(j[2*k],j[2*k+1]);g.closed&&c.lineTo(j[0],j[1]),j[0]===j[j.length-2]&&j[1]===j[j.length-1]&&c.closePath(),f.fill&&(c.globalAlpha=f.fillAlpha*d,c.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),c.fill()),f.lineWidth&&(c.globalAlpha=f.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|i).toString(16)).substr(-6),c.stroke())}else if(f.type===b.Graphics.RECT)(f.fillColor||0===f.fillColor)&&(c.globalAlpha=f.fillAlpha*d,c.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),c.fillRect(g.x,g.y,g.width,g.height)),f.lineWidth&&(c.globalAlpha=f.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|i).toString(16)).substr(-6),c.strokeRect(g.x,g.y,g.width,g.height));else if(f.type===b.Graphics.CIRC)c.beginPath(),c.arc(g.x,g.y,g.radius,0,2*Math.PI),c.closePath(),f.fill&&(c.globalAlpha=f.fillAlpha*d,c.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),c.fill()),f.lineWidth&&(c.globalAlpha=f.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|i).toString(16)).substr(-6),c.stroke());else if(f.type===b.Graphics.ELIP){var l=2*g.width,m=2*g.height,n=g.x-l/2,o=g.y-m/2;c.beginPath();var p=.5522848,q=l/2*p,r=m/2*p,s=n+l,t=o+m,u=n+l/2,v=o+m/2;c.moveTo(n,v),c.bezierCurveTo(n,v-r,u-q,o,u,o),c.bezierCurveTo(u+q,o,s,v-r,s,v),c.bezierCurveTo(s,v+r,u+q,t,u,t),c.bezierCurveTo(u-q,t,n,v+r,n,v),c.closePath(),f.fill&&(c.globalAlpha=f.fillAlpha*d,c.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),c.fill()),f.lineWidth&&(c.globalAlpha=f.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|i).toString(16)).substr(-6),c.stroke())}else if(f.type===b.Graphics.RREC){var w=g.x,x=g.y,y=g.width,z=g.height,A=g.radius,B=Math.min(y,z)/2|0;A=A>B?B:A,c.beginPath(),c.moveTo(w,x+A),c.lineTo(w,x+z-A),c.quadraticCurveTo(w,x+z,w+A,x+z),c.lineTo(w+y-A,x+z),c.quadraticCurveTo(w+y,x+z,w+y,x+z-A),c.lineTo(w+y,x+A),c.quadraticCurveTo(w+y,x,w+y-A,x),c.lineTo(w+A,x),c.quadraticCurveTo(w,x,w,x+A),c.closePath(),(f.fillColor||0===f.fillColor)&&(c.globalAlpha=f.fillAlpha*d,c.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),c.fill()),f.lineWidth&&(c.globalAlpha=f.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|i).toString(16)).substr(-6),c.stroke())}}},b.CanvasGraphics.renderGraphicsMask=function(a,c){var d=a.graphicsData.length;if(0!==d){d>1&&(d=1,window.console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"));for(var e=0;1>e;e++){var f=a.graphicsData[e],g=f.shape;if(f.type===b.Graphics.POLY){c.beginPath();var h=g.points;
c.moveTo(h[0],h[1]);for(var i=1;i<h.length/2;i++)c.lineTo(h[2*i],h[2*i+1]);h[0]===h[h.length-2]&&h[1]===h[h.length-1]&&c.closePath()}else if(f.type===b.Graphics.RECT)c.beginPath(),c.rect(g.x,g.y,g.width,g.height),c.closePath();else if(f.type===b.Graphics.CIRC)c.beginPath(),c.arc(g.x,g.y,g.radius,0,2*Math.PI),c.closePath();else if(f.type===b.Graphics.ELIP){var j=2*g.width,k=2*g.height,l=g.x-j/2,m=g.y-k/2;c.beginPath();var n=.5522848,o=j/2*n,p=k/2*n,q=l+j,r=m+k,s=l+j/2,t=m+k/2;c.moveTo(l,t),c.bezierCurveTo(l,t-p,s-o,m,s,m),c.bezierCurveTo(s+o,m,q,t-p,q,t),c.bezierCurveTo(q,t+p,s+o,r,s,r),c.bezierCurveTo(s-o,r,l,t+p,l,t),c.closePath()}else if(f.type===b.Graphics.RREC){var u=g.points,v=u[0],w=u[1],x=u[2],y=u[3],z=u[4],A=Math.min(x,y)/2|0;z=z>A?A:z,c.beginPath(),c.moveTo(v,w+z),c.lineTo(v,w+y-z),c.quadraticCurveTo(v,w+y,v+z,w+y),c.lineTo(v+x-z,w+y),c.quadraticCurveTo(v+x,w+y,v+x,w+y-z),c.lineTo(v+x,w+z),c.quadraticCurveTo(v+x,w,v+x-z,w),c.lineTo(v+z,w),c.quadraticCurveTo(v,w,v,w+z),c.closePath()}}}},b.CanvasGraphics.updateGraphicsTint=function(a){if(16777215!==a.tint)for(var b=(a.tint>>16&255)/255,c=(a.tint>>8&255)/255,d=(255&a.tint)/255,e=0;e<a.graphicsData.length;e++){var f=a.graphicsData[e],g=0|f.fillColor,h=0|f.lineColor;f._fillTint=((g>>16&255)/255*b*255<<16)+((g>>8&255)/255*c*255<<8)+(255&g)/255*d*255,f._lineTint=((h>>16&255)/255*b*255<<16)+((h>>8&255)/255*c*255<<8)+(255&h)/255*d*255}},b.Graphics=function(){b.DisplayObjectContainer.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this.blendMode=b.blendModes.NORMAL,this.currentPath=null,this._webGL=[],this.isMask=!1,this.boundsPadding=0,this._localBounds=new b.Rectangle(0,0,1,1),this.dirty=!0,this.webGLDirty=!1,this.cachedSpriteDirty=!1},b.Graphics.prototype=Object.create(b.DisplayObjectContainer.prototype),b.Graphics.prototype.constructor=b.Graphics,Object.defineProperty(b.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(a){this._cacheAsBitmap=a,this._cacheAsBitmap?this._generateCachedSprite():(this.destroyCachedSprite(),this.dirty=!0)}}),b.Graphics.prototype.lineStyle=function(a,c,d){if(this.lineWidth=a||0,this.lineColor=c||0,this.lineAlpha=arguments.length<3?1:d,this.currentPath){if(this.currentPath.shape.points.length)return this.drawShape(new b.Polygon(this.currentPath.shape.points.slice(-2))),this;this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha}return this},b.Graphics.prototype.moveTo=function(a,c){return this.drawShape(new b.Polygon([a,c])),this},b.Graphics.prototype.lineTo=function(a,b){return this.currentPath.shape.points.push(a,b),this.dirty=!0,this},b.Graphics.prototype.quadraticCurveTo=function(a,b,c,d){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var e,f,g=20,h=this.currentPath.shape.points;0===h.length&&this.moveTo(0,0);for(var i=h[h.length-2],j=h[h.length-1],k=0,l=1;g>=l;l++)k=l/g,e=i+(a-i)*k,f=j+(b-j)*k,h.push(e+(a+(c-a)*k-e)*k,f+(b+(d-b)*k-f)*k);return this.dirty=!0,this},b.Graphics.prototype.bezierCurveTo=function(a,b,c,d,e,f){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var g,h,i,j,k,l=20,m=this.currentPath.shape.points,n=m[m.length-2],o=m[m.length-1],p=0,q=1;l>=q;q++)p=q/l,g=1-p,h=g*g,i=h*g,j=p*p,k=j*p,m.push(i*n+3*h*p*a+3*g*j*c+k*e,i*o+3*h*p*b+3*g*j*d+k*f);return this.dirty=!0,this},b.Graphics.prototype.arcTo=function(a,b,c,d,e){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(a,b):this.moveTo(a,b);var f=this.currentPath.shape.points,g=f[f.length-2],h=f[f.length-1],i=h-b,j=g-a,k=d-b,l=c-a,m=Math.abs(i*l-j*k);if(1e-8>m||0===e)(f[f.length-2]!==a||f[f.length-1]!==b)&&f.push(a,b);else{var n=i*i+j*j,o=k*k+l*l,p=i*k+j*l,q=e*Math.sqrt(n)/m,r=e*Math.sqrt(o)/m,s=q*p/n,t=r*p/o,u=q*l+r*j,v=q*k+r*i,w=j*(r+s),x=i*(r+s),y=l*(q+t),z=k*(q+t),A=Math.atan2(x-v,w-u),B=Math.atan2(z-v,y-u);this.arc(u+a,v+b,e,A,B,j*k>l*i)}return this.dirty=!0,this},b.Graphics.prototype.arc=function(a,b,c,d,e,f){var g,h=a+Math.cos(d)*c,i=b+Math.sin(d)*c;if(this.currentPath?(g=this.currentPath.shape.points,0===g.length?g.push(h,i):(g[g.length-2]!==h||g[g.length-1]!==i)&&g.push(h,i)):(this.moveTo(h,i),g=this.currentPath.shape.points),d===e)return this;!f&&d>=e?e+=2*Math.PI:f&&e>=d&&(d+=2*Math.PI);var j=f?-1*(d-e):e-d,k=Math.abs(j)/(2*Math.PI)*40;if(0===j)return this;for(var l=j/(2*k),m=2*l,n=Math.cos(l),o=Math.sin(l),p=k-1,q=p%1/p,r=0;p>=r;r++){var s=r+q*r,t=l+d+m*s,u=Math.cos(t),v=-Math.sin(t);g.push((n*u+o*v)*c+a,(n*-v+o*u)*c+b)}return this.dirty=!0,this},b.Graphics.prototype.beginFill=function(a,b){return this.filling=!0,this.fillColor=a||0,this.fillAlpha=void 0===b?1:b,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},b.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},b.Graphics.prototype.drawRect=function(a,c,d,e){return this.drawShape(new b.Rectangle(a,c,d,e)),this},b.Graphics.prototype.drawRoundedRect=function(a,c,d,e,f){return this.drawShape(new b.RoundedRectangle(a,c,d,e,f)),this},b.Graphics.prototype.drawCircle=function(a,c,d){return this.drawShape(new b.Circle(a,c,d)),this},b.Graphics.prototype.drawEllipse=function(a,c,d,e){return this.drawShape(new b.Ellipse(a,c,d,e)),this},b.Graphics.prototype.drawPolygon=function(a){return a instanceof Array||(a=Array.prototype.slice.call(arguments)),this.drawShape(new b.Polygon(a)),this},b.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},b.Graphics.prototype.generateTexture=function(a,c){a=a||1;var d=this.getBounds(),e=new b.CanvasBuffer(d.width*a,d.height*a),f=b.Texture.fromCanvas(e.canvas,c);return f.baseTexture.resolution=a,e.context.scale(a,a),e.context.translate(-d.x,-d.y),b.CanvasGraphics.renderGraphics(this,e.context),f},b.Graphics.prototype._renderWebGL=function(a){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.worldAlpha=this.worldAlpha,void b.Sprite.prototype._renderWebGL.call(this._cachedSprite,a);if(a.spriteBatch.stop(),a.blendModeManager.setBlendMode(this.blendMode),this._mask&&a.maskManager.pushMask(this._mask,a),this._filters&&a.filterManager.pushFilter(this._filterBlock),this.blendMode!==a.spriteBatch.currentBlendMode){a.spriteBatch.currentBlendMode=this.blendMode;var c=b.blendModesWebGL[a.spriteBatch.currentBlendMode];a.spriteBatch.gl.blendFunc(c[0],c[1])}if(this.webGLDirty&&(this.dirty=!0,this.webGLDirty=!1),b.WebGLGraphics.renderGraphics(this,a),this.children.length){a.spriteBatch.start();for(var d=0,e=this.children.length;e>d;d++)this.children[d]._renderWebGL(a);a.spriteBatch.stop()}this._filters&&a.filterManager.popFilter(),this._mask&&a.maskManager.popMask(this.mask,a),a.drawCount++,a.spriteBatch.start()}},b.Graphics.prototype._renderCanvas=function(a){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.alpha=this.alpha,void b.Sprite.prototype._renderCanvas.call(this._cachedSprite,a);var c=a.context,d=this.worldTransform;this.blendMode!==a.currentBlendMode&&(a.currentBlendMode=this.blendMode,c.globalCompositeOperation=b.blendModesCanvas[a.currentBlendMode]),this._mask&&a.maskManager.pushMask(this._mask,a);var e=a.resolution;c.setTransform(d.a*e,d.b*e,d.c*e,d.d*e,d.tx*e,d.ty*e),b.CanvasGraphics.renderGraphics(this,c);for(var f=0,g=this.children.length;g>f;f++)this.children[f]._renderCanvas(a);this._mask&&a.maskManager.popMask(a)}},b.Graphics.prototype.getBounds=function(a){if(this.isMask)return b.EmptyRectangle;this.dirty&&(this.updateLocalBounds(),this.webGLDirty=!0,this.cachedSpriteDirty=!0,this.dirty=!1);var c=this._localBounds,d=c.x,e=c.width+c.x,f=c.y,g=c.height+c.y,h=a||this.worldTransform,i=h.a,j=h.b,k=h.c,l=h.d,m=h.tx,n=h.ty,o=i*e+k*g+m,p=l*g+j*e+n,q=i*d+k*g+m,r=l*g+j*d+n,s=i*d+k*f+m,t=l*f+j*d+n,u=i*e+k*f+m,v=l*f+j*e+n,w=o,x=p,y=o,z=p;return y=y>q?q:y,y=y>s?s:y,y=y>u?u:y,z=z>r?r:z,z=z>t?t:z,z=z>v?v:z,w=q>w?q:w,w=s>w?s:w,w=u>w?u:w,x=r>x?r:x,x=t>x?t:x,x=v>x?v:x,this._bounds.x=y,this._bounds.width=w-y,this._bounds.y=z,this._bounds.height=x-z,this._bounds},b.Graphics.prototype.updateLocalBounds=function(){var a=1/0,c=-1/0,d=1/0,e=-1/0;if(this.graphicsData.length)for(var f,g,h,i,j,k,l=0;l<this.graphicsData.length;l++){var m=this.graphicsData[l],n=m.type,o=m.lineWidth;if(f=m.shape,n===b.Graphics.RECT||n===b.Graphics.RREC)h=f.x-o/2,i=f.y-o/2,j=f.width+o,k=f.height+o,a=a>h?h:a,c=h+j>c?h+j:c,d=d>i?i:d,e=i+k>e?i+k:e;else if(n===b.Graphics.CIRC)h=f.x,i=f.y,j=f.radius+o/2,k=f.radius+o/2,a=a>h-j?h-j:a,c=h+j>c?h+j:c,d=d>i-k?i-k:d,e=i+k>e?i+k:e;else if(n===b.Graphics.ELIP)h=f.x,i=f.y,j=f.width+o/2,k=f.height+o/2,a=a>h-j?h-j:a,c=h+j>c?h+j:c,d=d>i-k?i-k:d,e=i+k>e?i+k:e;else{g=f.points;for(var p=0;p<g.length;p+=2)h=g[p],i=g[p+1],a=a>h-o?h-o:a,c=h+o>c?h+o:c,d=d>i-o?i-o:d,e=i+o>e?i+o:e}}else a=0,c=0,d=0,e=0;var q=this.boundsPadding;this._localBounds.x=a-q,this._localBounds.width=c-a+2*q,this._localBounds.y=d-q,this._localBounds.height=e-d+2*q},b.Graphics.prototype._generateCachedSprite=function(){var a=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(a.width,a.height);else{var c=new b.CanvasBuffer(a.width,a.height),d=b.Texture.fromCanvas(c.canvas);this._cachedSprite=new b.Sprite(d),this._cachedSprite.buffer=c,this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=-(a.x/a.width),this._cachedSprite.anchor.y=-(a.y/a.height),this._cachedSprite.buffer.context.translate(-a.x,-a.y),this.worldAlpha=1,b.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},b.Graphics.prototype.updateCachedSpriteTexture=function(){var a=this._cachedSprite,b=a.texture,c=a.buffer.canvas;b.baseTexture.width=c.width,b.baseTexture.height=c.height,b.crop.width=b.frame.width=c.width,b.crop.height=b.frame.height=c.height,a._width=c.width,a._height=c.height,b.baseTexture.dirty()},b.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},b.Graphics.prototype.drawShape=function(a){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var c=new b.GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,a);return this.graphicsData.push(c),c.type===b.Graphics.POLY&&(c.shape.closed=this.filling,this.currentPath=c),this.dirty=!0,c},b.GraphicsData=function(a,b,c,d,e,f,g){this.lineWidth=a,this.lineColor=b,this.lineAlpha=c,this._lineTint=b,this.fillColor=d,this.fillAlpha=e,this._fillTint=d,this.fill=f,this.shape=g,this.type=g.type},b.Graphics.POLY=0,b.Graphics.RECT=1,b.Graphics.CIRC=2,b.Graphics.ELIP=3,b.Graphics.RREC=4,b.Polygon.prototype.type=b.Graphics.POLY,b.Rectangle.prototype.type=b.Graphics.RECT,b.Circle.prototype.type=b.Graphics.CIRC,b.Ellipse.prototype.type=b.Graphics.ELIP,b.RoundedRectangle.prototype.type=b.Graphics.RREC,b.Strip=function(a){b.DisplayObjectContainer.call(this),this.texture=a,this.uvs=new b.Float32Array([0,1,1,1,1,0,0,1]),this.verticies=new b.Float32Array([0,0,100,0,100,100,0,100]),this.colors=new b.Float32Array([1,1,1,1]),this.indices=new b.Uint16Array([0,1,2,3]),this.dirty=!0,this.blendMode=b.blendModes.NORMAL,this.padding=0},b.Strip.prototype=Object.create(b.DisplayObjectContainer.prototype),b.Strip.prototype.constructor=b.Strip,b.Strip.prototype._renderWebGL=function(a){!this.visible||this.alpha<=0||(a.spriteBatch.stop(),this._vertexBuffer||this._initWebGL(a),a.shaderManager.setShader(a.shaderManager.stripShader),this._renderStrip(a),a.spriteBatch.start())},b.Strip.prototype._initWebGL=function(a){var b=a.gl;this._vertexBuffer=b.createBuffer(),this._indexBuffer=b.createBuffer(),this._uvBuffer=b.createBuffer(),this._colorBuffer=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,this._vertexBuffer),b.bufferData(b.ARRAY_BUFFER,this.verticies,b.DYNAMIC_DRAW),b.bindBuffer(b.ARRAY_BUFFER,this._uvBuffer),b.bufferData(b.ARRAY_BUFFER,this.uvs,b.STATIC_DRAW),b.bindBuffer(b.ARRAY_BUFFER,this._colorBuffer),b.bufferData(b.ARRAY_BUFFER,this.colors,b.STATIC_DRAW),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this._indexBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,this.indices,b.STATIC_DRAW)},b.Strip.prototype._renderStrip=function(a){var b=a.gl,c=a.projection,d=a.offset,e=a.shaderManager.stripShader;a.blendModeManager.setBlendMode(this.blendMode),b.uniformMatrix3fv(e.translationMatrix,!1,this.worldTransform.toArray(!0)),b.uniform2f(e.projectionVector,c.x,-c.y),b.uniform2f(e.offsetVector,-d.x,-d.y),b.uniform1f(e.alpha,this.worldAlpha),this.dirty?(this.dirty=!1,b.bindBuffer(b.ARRAY_BUFFER,this._vertexBuffer),b.bufferData(b.ARRAY_BUFFER,this.verticies,b.STATIC_DRAW),b.vertexAttribPointer(e.aVertexPosition,2,b.FLOAT,!1,0,0),b.bindBuffer(b.ARRAY_BUFFER,this._uvBuffer),b.bufferData(b.ARRAY_BUFFER,this.uvs,b.STATIC_DRAW),b.vertexAttribPointer(e.aTextureCoord,2,b.FLOAT,!1,0,0),b.activeTexture(b.TEXTURE0),this.texture.baseTexture._dirty[b.id]?a.renderer.updateTexture(this.texture.baseTexture):b.bindTexture(b.TEXTURE_2D,this.texture.baseTexture._glTextures[b.id]),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this._indexBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,this.indices,b.STATIC_DRAW)):(b.bindBuffer(b.ARRAY_BUFFER,this._vertexBuffer),b.bufferSubData(b.ARRAY_BUFFER,0,this.verticies),b.vertexAttribPointer(e.aVertexPosition,2,b.FLOAT,!1,0,0),b.bindBuffer(b.ARRAY_BUFFER,this._uvBuffer),b.vertexAttribPointer(e.aTextureCoord,2,b.FLOAT,!1,0,0),b.activeTexture(b.TEXTURE0),this.texture.baseTexture._dirty[b.id]?a.renderer.updateTexture(this.texture.baseTexture):b.bindTexture(b.TEXTURE_2D,this.texture.baseTexture._glTextures[b.id]),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this._indexBuffer)),b.drawElements(b.TRIANGLE_STRIP,this.indices.length,b.UNSIGNED_SHORT,0)},b.Strip.prototype._renderCanvas=function(a){var b=a.context,c=this.worldTransform;a.roundPixels?b.setTransform(c.a,c.b,c.c,c.d,0|c.tx,0|c.ty):b.setTransform(c.a,c.b,c.c,c.d,c.tx,c.ty);var d=this,e=d.verticies,f=d.uvs,g=e.length/2;this.count++;for(var h=0;g-2>h;h++){var i=2*h,j=e[i],k=e[i+2],l=e[i+4],m=e[i+1],n=e[i+3],o=e[i+5];if(this.padding>0){var p=(j+k+l)/3,q=(m+n+o)/3,r=j-p,s=m-q,t=Math.sqrt(r*r+s*s);j=p+r/t*(t+3),m=q+s/t*(t+3),r=k-p,s=n-q,t=Math.sqrt(r*r+s*s),k=p+r/t*(t+3),n=q+s/t*(t+3),r=l-p,s=o-q,t=Math.sqrt(r*r+s*s),l=p+r/t*(t+3),o=q+s/t*(t+3)}var u=f[i]*d.texture.width,v=f[i+2]*d.texture.width,w=f[i+4]*d.texture.width,x=f[i+1]*d.texture.height,y=f[i+3]*d.texture.height,z=f[i+5]*d.texture.height;b.save(),b.beginPath(),b.moveTo(j,m),b.lineTo(k,n),b.lineTo(l,o),b.closePath(),b.clip();var A=u*y+x*w+v*z-y*w-x*v-u*z,B=j*y+x*l+k*z-y*l-x*k-j*z,C=u*k+j*w+v*l-k*w-j*v-u*l,D=u*y*l+x*k*w+j*v*z-j*y*w-x*v*l-u*k*z,E=m*y+x*o+n*z-y*o-x*n-m*z,F=u*n+m*w+v*o-n*w-m*v-u*o,G=u*y*o+x*n*w+m*v*z-m*y*w-x*v*o-u*n*z;b.transform(B/A,E/A,C/A,F/A,D/A,G/A),b.drawImage(d.texture.baseTexture.source,0,0),b.restore()}},b.Strip.prototype.renderStripFlat=function(a){var b=this.context,c=a.verticies,d=c.length/2;this.count++,b.beginPath();for(var e=1;d-2>e;e++){var f=2*e,g=c[f],h=c[f+2],i=c[f+4],j=c[f+1],k=c[f+3],l=c[f+5];b.moveTo(g,j),b.lineTo(h,k),b.lineTo(i,l)}b.fillStyle="#FF0000",b.fill(),b.closePath()},b.Strip.prototype.onTextureUpdate=function(){this.updateFrame=!0},b.Rope=function(a,c){b.Strip.call(this,a),this.points=c,this.verticies=new b.Float32Array(4*c.length),this.uvs=new b.Float32Array(4*c.length),this.colors=new b.Float32Array(2*c.length),this.indices=new b.Uint16Array(2*c.length),this.refresh()},b.Rope.prototype=Object.create(b.Strip.prototype),b.Rope.prototype.constructor=b.Rope,b.Rope.prototype.refresh=function(){var a=this.points;if(!(a.length<1)){var b=this.uvs,c=a[0],d=this.indices,e=this.colors;this.count-=.2,b[0]=0,b[1]=0,b[2]=0,b[3]=1,e[0]=1,e[1]=1,d[0]=0,d[1]=1;for(var f,g,h,i=a.length,j=1;i>j;j++)f=a[j],g=4*j,h=j/(i-1),j%2?(b[g]=h,b[g+1]=0,b[g+2]=h,b[g+3]=1):(b[g]=h,b[g+1]=0,b[g+2]=h,b[g+3]=1),g=2*j,e[g]=1,e[g+1]=1,g=2*j,d[g]=g,d[g+1]=g+1,c=f}},b.Rope.prototype.updateTransform=function(){var a=this.points;if(!(a.length<1)){var c,d=a[0],e={x:0,y:0};this.count-=.2;for(var f,g,h,i,j,k=this.verticies,l=a.length,m=0;l>m;m++)f=a[m],g=4*m,c=m<a.length-1?a[m+1]:f,e.y=-(c.x-d.x),e.x=c.y-d.y,h=10*(1-m/(l-1)),h>1&&(h=1),i=Math.sqrt(e.x*e.x+e.y*e.y),j=this.texture.height/2,e.x/=i,e.y/=i,e.x*=j,e.y*=j,k[g]=f.x+e.x,k[g+1]=f.y+e.y,k[g+2]=f.x-e.x,k[g+3]=f.y-e.y,d=f;b.DisplayObjectContainer.prototype.updateTransform.call(this)}},b.Rope.prototype.setTexture=function(a){this.texture=a},b.TilingSprite=function(a,c,d){b.Sprite.call(this,a),this._width=c||100,this._height=d||100,this.tileScale=new b.Point(1,1),this.tileScaleOffset=new b.Point(1,1),this.tilePosition=new b.Point(0,0),this.renderable=!0,this.tint=16777215,this.blendMode=b.blendModes.NORMAL},b.TilingSprite.prototype=Object.create(b.Sprite.prototype),b.TilingSprite.prototype.constructor=b.TilingSprite,Object.defineProperty(b.TilingSprite.prototype,"width",{get:function(){return this._width},set:function(a){this._width=a}}),Object.defineProperty(b.TilingSprite.prototype,"height",{get:function(){return this._height},set:function(a){this._height=a}}),b.TilingSprite.prototype.setTexture=function(a){this.texture!==a&&(this.texture=a,this.refreshTexture=!0,this.cachedTint=16777215)},b.TilingSprite.prototype._renderWebGL=function(a){if(this.visible!==!1&&0!==this.alpha){var c,d;for(this._mask&&(a.spriteBatch.stop(),a.maskManager.pushMask(this.mask,a),a.spriteBatch.start()),this._filters&&(a.spriteBatch.flush(),a.filterManager.pushFilter(this._filterBlock)),!this.tilingTexture||this.refreshTexture?(this.generateTilingTexture(!0),this.tilingTexture&&this.tilingTexture.needsUpdate&&(b.updateWebGLTexture(this.tilingTexture.baseTexture,a.gl),this.tilingTexture.needsUpdate=!1)):a.spriteBatch.renderTilingSprite(this),c=0,d=this.children.length;d>c;c++)this.children[c]._renderWebGL(a);a.spriteBatch.stop(),this._filters&&a.filterManager.popFilter(),this._mask&&a.maskManager.popMask(this._mask,a),a.spriteBatch.start()}},b.TilingSprite.prototype._renderCanvas=function(a){if(this.visible!==!1&&0!==this.alpha){var c=a.context;this._mask&&a.maskManager.pushMask(this._mask,c),c.globalAlpha=this.worldAlpha;var d,e,f=this.worldTransform,g=a.resolution;if(c.setTransform(f.a*g,f.c*g,f.b*g,f.d*g,f.tx*g,f.ty*g),!this.__tilePattern||this.refreshTexture){if(this.generateTilingTexture(!1),!this.tilingTexture)return;this.__tilePattern=c.createPattern(this.tilingTexture.baseTexture.source,"repeat")}this.blendMode!==a.currentBlendMode&&(a.currentBlendMode=this.blendMode,c.globalCompositeOperation=b.blendModesCanvas[a.currentBlendMode]);var h=this.tilePosition,i=this.tileScale;for(h.x%=this.tilingTexture.baseTexture.width,h.y%=this.tilingTexture.baseTexture.height,c.scale(i.x,i.y),c.translate(h.x+this.anchor.x*-this._width,h.y+this.anchor.y*-this._height),c.fillStyle=this.__tilePattern,c.fillRect(-h.x,-h.y,this._width/i.x,this._height/i.y),c.scale(1/i.x,1/i.y),c.translate(-h.x+this.anchor.x*this._width,-h.y+this.anchor.y*this._height),this._mask&&a.maskManager.popMask(a.context),d=0,e=this.children.length;e>d;d++)this.children[d]._renderCanvas(a)}},b.TilingSprite.prototype.getBounds=function(){var a=this._width,b=this._height,c=a*(1-this.anchor.x),d=a*-this.anchor.x,e=b*(1-this.anchor.y),f=b*-this.anchor.y,g=this.worldTransform,h=g.a,i=g.b,j=g.c,k=g.d,l=g.tx,m=g.ty,n=h*d+j*f+l,o=k*f+i*d+m,p=h*c+j*f+l,q=k*f+i*c+m,r=h*c+j*e+l,s=k*e+i*c+m,t=h*d+j*e+l,u=k*e+i*d+m,v=-1/0,w=-1/0,x=1/0,y=1/0;x=x>n?n:x,x=x>p?p:x,x=x>r?r:x,x=x>t?t:x,y=y>o?o:y,y=y>q?q:y,y=y>s?s:y,y=y>u?u:y,v=n>v?n:v,v=p>v?p:v,v=r>v?r:v,v=t>v?t:v,w=o>w?o:w,w=q>w?q:w,w=s>w?s:w,w=u>w?u:w;var z=this._bounds;return z.x=x,z.width=v-x,z.y=y,z.height=w-y,this._currentBounds=z,z},b.TilingSprite.prototype.onTextureUpdate=function(){},b.TilingSprite.prototype.generateTilingTexture=function(a){if(this.texture.baseTexture.hasLoaded){var c,d,e=this.originalTexture||this.texture,f=e.frame,g=f.width!==e.baseTexture.width||f.height!==e.baseTexture.height,h=!1;if(a?(c=b.getNextPowerOfTwo(f.width),d=b.getNextPowerOfTwo(f.height),(f.width!==c||f.height!==d||e.baseTexture.width!==c||e.baseTexture.height||d)&&(h=!0)):g&&(c=f.width,d=f.height,h=!0),h){var i;this.tilingTexture&&this.tilingTexture.isTiling?(i=this.tilingTexture.canvasBuffer,i.resize(c,d),this.tilingTexture.baseTexture.width=c,this.tilingTexture.baseTexture.height=d,this.tilingTexture.needsUpdate=!0):(i=new b.CanvasBuffer(c,d),this.tilingTexture=b.Texture.fromCanvas(i.canvas),this.tilingTexture.canvasBuffer=i,this.tilingTexture.isTiling=!0),i.context.drawImage(e.baseTexture.source,e.crop.x,e.crop.y,e.crop.width,e.crop.height,0,0,c,d),this.tileScaleOffset.x=f.width/c,this.tileScaleOffset.y=f.height/d}else this.tilingTexture&&this.tilingTexture.isTiling&&this.tilingTexture.destroy(!0),this.tileScaleOffset.x=1,this.tileScaleOffset.y=1,this.tilingTexture=e;this.refreshTexture=!1,this.originalTexture=this.texture,this.texture=this.tilingTexture,this.tilingTexture.baseTexture._powerOf2=!0}};var c={};c.BoneData=function(a,b){this.name=a,this.parent=b},c.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1},c.SlotData=function(a,b){this.name=a,this.boneData=b},c.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null},c.Bone=function(a,b){this.data=a,this.parent=b,this.setToSetupPose()},c.Bone.yDown=!1,c.Bone.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,updateWorldTransform:function(a,b){var d=this.parent;null!=d?(this.worldX=this.x*d.m00+this.y*d.m01+d.worldX,this.worldY=this.x*d.m10+this.y*d.m11+d.worldY,this.worldScaleX=d.worldScaleX*this.scaleX,this.worldScaleY=d.worldScaleY*this.scaleY,this.worldRotation=d.worldRotation+this.rotation):(this.worldX=this.x,this.worldY=this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotation);var e=this.worldRotation*Math.PI/180,f=Math.cos(e),g=Math.sin(e);this.m00=f*this.worldScaleX,this.m10=g*this.worldScaleX,this.m01=-g*this.worldScaleY,this.m11=f*this.worldScaleY,a&&(this.m00=-this.m00,this.m01=-this.m01),b&&(this.m10=-this.m10,this.m11=-this.m11),c.Bone.yDown&&(this.m10=-this.m10,this.m11=-this.m11)},setToSetupPose:function(){var a=this.data;this.x=a.x,this.y=a.y,this.rotation=a.rotation,this.scaleX=a.scaleX,this.scaleY=a.scaleY}},c.Slot=function(a,b,c){this.data=a,this.skeleton=b,this.bone=c,this.setToSetupPose()},c.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,setAttachment:function(a){this.attachment=a,this._attachmentTime=this.skeleton.time},setAttachmentTime:function(a){this._attachmentTime=this.skeleton.time-a},getAttachmentTime:function(){return this.skeleton.time-this._attachmentTime},setToSetupPose:function(){var a=this.data;this.r=a.r,this.g=a.g,this.b=a.b,this.a=a.a;for(var b=this.skeleton.data.slots,c=0,d=b.length;d>c;c++)if(b[c]==a){this.setAttachment(a.attachmentName?this.skeleton.getAttachmentBySlotIndex(c,a.attachmentName):null);break}}},c.Skin=function(a){this.name=a,this.attachments={}},c.Skin.prototype={addAttachment:function(a,b,c){this.attachments[a+":"+b]=c},getAttachment:function(a,b){return this.attachments[a+":"+b]},_attachAll:function(a,b){for(var c in b.attachments){var d=c.indexOf(":"),e=parseInt(c.substring(0,d),10),f=c.substring(d+1),g=a.slots[e];if(g.attachment&&g.attachment.name==f){var h=this.getAttachment(e,f);h&&g.setAttachment(h)}}}},c.Animation=function(a,b,c){this.name=a,this.timelines=b,this.duration=c},c.Animation.prototype={apply:function(a,b,c){c&&this.duration&&(b%=this.duration);for(var d=this.timelines,e=0,f=d.length;f>e;e++)d[e].apply(a,b,1)},mix:function(a,b,c,d){c&&this.duration&&(b%=this.duration);for(var e=this.timelines,f=0,g=e.length;g>f;f++)e[f].apply(a,b,d)}},c.binarySearch=function(a,b,c){var d=0,e=Math.floor(a.length/c)-2;if(!e)return c;for(var f=e>>>1;;){if(a[(f+1)*c]<=b?d=f+1:e=f,d==e)return(d+1)*c;f=d+e>>>1}},c.linearSearch=function(a,b,c){for(var d=0,e=a.length-c;e>=d;d+=c)if(a[d]>b)return d;return-1},c.Curves=function(a){this.curves=[],this.curves.length=6*(a-1)},c.Curves.prototype={setLinear:function(a){this.curves[6*a]=0},setStepped:function(a){this.curves[6*a]=-1},setCurve:function(a,b,c,d,e){var f=.1,g=f*f,h=g*f,i=3*f,j=3*g,k=6*g,l=6*h,m=2*-b+d,n=2*-c+e,o=3*(b-d)+1,p=3*(c-e)+1,q=6*a,r=this.curves;r[q]=b*i+m*j+o*h,r[q+1]=c*i+n*j+p*h,r[q+2]=m*k+o*l,r[q+3]=n*k+p*l,r[q+4]=o*l,r[q+5]=p*l},getCurvePercent:function(a,b){b=0>b?0:b>1?1:b;var c=6*a,d=this.curves,e=d[c];if(!e)return b;if(-1==e)return 0;for(var f=d[c+1],g=d[c+2],h=d[c+3],i=d[c+4],j=d[c+5],k=e,l=f,m=8;;){if(k>=b){var n=k-e,o=l-f;return o+(l-o)*(b-n)/(k-n)}if(!m)break;m--,e+=g,f+=h,g+=i,h+=j,k+=e,l+=f}return l+(1-l)*(b-k)/(1-k)}},c.RotateTimeline=function(a){this.curves=new c.Curves(a),this.frames=[],this.frames.length=2*a},c.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(a,b,c){a*=2,this.frames[a]=b,this.frames[a+1]=c},apply:function(a,b,d){var e,f=this.frames;if(!(b<f[0])){var g=a.bones[this.boneIndex];if(b>=f[f.length-2]){for(e=g.data.rotation+f[f.length-1]-g.rotation;e>180;)e-=360;for(;-180>e;)e+=360;return void(g.rotation+=e*d)}var h=c.binarySearch(f,b,2),i=f[h-1],j=f[h],k=1-(b-j)/(f[h-2]-j);for(k=this.curves.getCurvePercent(h/2-1,k),e=f[h+1]-i;e>180;)e-=360;for(;-180>e;)e+=360;for(e=g.data.rotation+(i+e*k)-g.rotation;e>180;)e-=360;for(;-180>e;)e+=360;g.rotation+=e*d}}},c.TranslateTimeline=function(a){this.curves=new c.Curves(a),this.frames=[],this.frames.length=3*a},c.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(a,b,c,d){a*=3,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d},apply:function(a,b,d){var e=this.frames;if(!(b<e[0])){var f=a.bones[this.boneIndex];if(b>=e[e.length-3])return f.x+=(f.data.x+e[e.length-2]-f.x)*d,void(f.y+=(f.data.y+e[e.length-1]-f.y)*d);var g=c.binarySearch(e,b,3),h=e[g-2],i=e[g-1],j=e[g],k=1-(b-j)/(e[g+-3]-j);k=this.curves.getCurvePercent(g/3-1,k),f.x+=(f.data.x+h+(e[g+1]-h)*k-f.x)*d,f.y+=(f.data.y+i+(e[g+2]-i)*k-f.y)*d}}},c.ScaleTimeline=function(a){this.curves=new c.Curves(a),this.frames=[],this.frames.length=3*a},c.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(a,b,c,d){a*=3,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d},apply:function(a,b,d){var e=this.frames;if(!(b<e[0])){var f=a.bones[this.boneIndex];if(b>=e[e.length-3])return f.scaleX+=(f.data.scaleX-1+e[e.length-2]-f.scaleX)*d,void(f.scaleY+=(f.data.scaleY-1+e[e.length-1]-f.scaleY)*d);var g=c.binarySearch(e,b,3),h=e[g-2],i=e[g-1],j=e[g],k=1-(b-j)/(e[g+-3]-j);k=this.curves.getCurvePercent(g/3-1,k),f.scaleX+=(f.data.scaleX-1+h+(e[g+1]-h)*k-f.scaleX)*d,f.scaleY+=(f.data.scaleY-1+i+(e[g+2]-i)*k-f.scaleY)*d}}},c.ColorTimeline=function(a){this.curves=new c.Curves(a),this.frames=[],this.frames.length=5*a},c.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(a,b,c,d,e,f){a*=5,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d,this.frames[a+3]=e,this.frames[a+4]=f},apply:function(a,b,d){var e=this.frames;if(!(b<e[0])){var f=a.slots[this.slotIndex];if(b>=e[e.length-5]){var g=e.length-1;return f.r=e[g-3],f.g=e[g-2],f.b=e[g-1],void(f.a=e[g])}var h=c.binarySearch(e,b,5),i=e[h-4],j=e[h-3],k=e[h-2],l=e[h-1],m=e[h],n=1-(b-m)/(e[h-5]-m);n=this.curves.getCurvePercent(h/5-1,n);var o=i+(e[h+1]-i)*n,p=j+(e[h+2]-j)*n,q=k+(e[h+3]-k)*n,r=l+(e[h+4]-l)*n;1>d?(f.r+=(o-f.r)*d,f.g+=(p-f.g)*d,f.b+=(q-f.b)*d,f.a+=(r-f.a)*d):(f.r=o,f.g=p,f.b=q,f.a=r)}}},c.AttachmentTimeline=function(a){this.curves=new c.Curves(a),this.frames=[],this.frames.length=a,this.attachmentNames=[],this.attachmentNames.length=a},c.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.attachmentNames[a]=c},apply:function(a,b){var d=this.frames;if(!(b<d[0])){var e;e=b>=d[d.length-1]?d.length-1:c.binarySearch(d,b,1)-1;var f=this.attachmentNames[e];a.slots[this.slotIndex].setAttachment(f?a.getAttachmentBySlotIndex(this.slotIndex,f):null)}}},c.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.animations=[]},c.SkeletonData.prototype={defaultSkin:null,findBone:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findBoneIndex:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].name==a)return c;return-1},findSlot:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].name==a)return slot[c];return null},findSlotIndex:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].name==a)return c;return-1},findSkin:function(a){for(var b=this.skins,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findAnimation:function(a){for(var b=this.animations,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null}},c.Skeleton=function(a){this.data=a,this.bones=[];for(var b=0,d=a.bones.length;d>b;b++){var e=a.bones[b],f=e.parent?this.bones[a.bones.indexOf(e.parent)]:null;this.bones.push(new c.Bone(e,f))}for(this.slots=[],this.drawOrder=[],b=0,d=a.slots.length;d>b;b++){var g=a.slots[b],h=this.bones[a.bones.indexOf(g.boneData)],i=new c.Slot(g,this,h);this.slots.push(i),this.drawOrder.push(i)}},c.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateWorldTransform:function(){for(var a=this.flipX,b=this.flipY,c=this.bones,d=0,e=c.length;e>d;d++)c[d].updateWorldTransform(a,b)},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var a=this.bones,b=0,c=a.length;c>b;b++)a[b].setToSetupPose()},setSlotsToSetupPose:function(){for(var a=this.slots,b=0,c=a.length;c>b;b++)a[b].setToSetupPose(b)},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return b[c];return null},findBoneIndex:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return c;return-1},findSlot:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return b[c];return null},findSlotIndex:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return c;return-1},setSkinByName:function(a){var b=this.data.findSkin(a);if(!b)throw"Skin not found: "+a;this.setSkin(b)},setSkin:function(a){this.skin&&a&&a._attachAll(this,this.skin),this.skin=a},getAttachmentBySlotName:function(a,b){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(a),b)},getAttachmentBySlotIndex:function(a,b){if(this.skin){var c=this.skin.getAttachment(a,b);if(c)return c}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(a,b):null},setAttachment:function(a,b){for(var c=this.slots,d=0,e=c.size;e>d;d++){var f=c[d];if(f.data.name==a){var g=null;if(b&&(g=this.getAttachment(d,b),null==g))throw"Attachment not found: "+b+", for slot: "+a;return void f.setAttachment(g)}}throw"Slot not found: "+a},update:function(a){time+=a}},c.AttachmentType={region:0},c.RegionAttachment=function(){this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},c.RegionAttachment.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(a,b,c,d,e){var f=this.uvs;
e?(f[2]=a,f[3]=d,f[4]=a,f[5]=b,f[6]=c,f[7]=b,f[0]=c,f[1]=d):(f[0]=a,f[1]=d,f[2]=a,f[3]=b,f[4]=c,f[5]=b,f[6]=c,f[7]=d)},updateOffset:function(){var a=this.width/this.regionOriginalWidth*this.scaleX,b=this.height/this.regionOriginalHeight*this.scaleY,c=-this.width/2*this.scaleX+this.regionOffsetX*a,d=-this.height/2*this.scaleY+this.regionOffsetY*b,e=c+this.regionWidth*a,f=d+this.regionHeight*b,g=this.rotation*Math.PI/180,h=Math.cos(g),i=Math.sin(g),j=c*h+this.x,k=c*i,l=d*h+this.y,m=d*i,n=e*h+this.x,o=e*i,p=f*h+this.y,q=f*i,r=this.offset;r[0]=j-m,r[1]=l+k,r[2]=j-q,r[3]=p+k,r[4]=n-q,r[5]=p+o,r[6]=n-m,r[7]=l+o},computeVertices:function(a,b,c,d){a+=c.worldX,b+=c.worldY;var e=c.m00,f=c.m01,g=c.m10,h=c.m11,i=this.offset;d[0]=i[0]*e+i[1]*f+a,d[1]=i[0]*g+i[1]*h+b,d[2]=i[2]*e+i[3]*f+a,d[3]=i[2]*g+i[3]*h+b,d[4]=i[4]*e+i[5]*f+a,d[5]=i[4]*g+i[5]*h+b,d[6]=i[6]*e+i[7]*f+a,d[7]=i[6]*g+i[7]*h+b}},c.AnimationStateData=function(a){this.skeletonData=a,this.animationToMixTime={}},c.AnimationStateData.prototype={defaultMix:0,setMixByName:function(a,b,c){var d=this.skeletonData.findAnimation(a);if(!d)throw"Animation not found: "+a;var e=this.skeletonData.findAnimation(b);if(!e)throw"Animation not found: "+b;this.setMix(d,e,c)},setMix:function(a,b,c){this.animationToMixTime[a.name+":"+b.name]=c},getMix:function(a,b){var c=this.animationToMixTime[a.name+":"+b.name];return c?c:this.defaultMix}},c.AnimationState=function(a){this.data=a,this.queue=[]},c.AnimationState.prototype={animationSpeed:1,current:null,previous:null,currentTime:0,previousTime:0,currentLoop:!1,previousLoop:!1,mixTime:0,mixDuration:0,update:function(a){if(this.currentTime+=a*this.animationSpeed,this.previousTime+=a,this.mixTime+=a,this.queue.length>0){var b=this.queue[0];this.currentTime>=b.delay&&(this._setAnimation(b.animation,b.loop),this.queue.shift())}},apply:function(a){if(this.current)if(this.previous){this.previous.apply(a,this.previousTime,this.previousLoop);var b=this.mixTime/this.mixDuration;b>=1&&(b=1,this.previous=null),this.current.mix(a,this.currentTime,this.currentLoop,b)}else this.current.apply(a,this.currentTime,this.currentLoop)},clearAnimation:function(){this.previous=null,this.current=null,this.queue.length=0},_setAnimation:function(a,b){this.previous=null,a&&this.current&&(this.mixDuration=this.data.getMix(this.current,a),this.mixDuration>0&&(this.mixTime=0,this.previous=this.current,this.previousTime=this.currentTime,this.previousLoop=this.currentLoop)),this.current=a,this.currentLoop=b,this.currentTime=0},setAnimationByName:function(a,b){var c=this.data.skeletonData.findAnimation(a);if(!c)throw"Animation not found: "+a;this.setAnimation(c,b)},setAnimation:function(a,b){this.queue.length=0,this._setAnimation(a,b)},addAnimationByName:function(a,b,c){var d=this.data.skeletonData.findAnimation(a);if(!d)throw"Animation not found: "+a;this.addAnimation(d,b,c)},addAnimation:function(a,b,c){var d={};if(d.animation=a,d.loop=b,!c||0>=c){var e=this.queue.length?this.queue[this.queue.length-1].animation:this.current;c=null!=e?e.duration-this.data.getMix(e,a)+(c||0):0}d.delay=c,this.queue.push(d)},isComplete:function(){return!this.current||this.currentTime>=this.current.duration}},c.SkeletonJson=function(a){this.attachmentLoader=a},c.SkeletonJson.prototype={scale:1,readSkeletonData:function(a){for(var b,d=new c.SkeletonData,e=a.bones,f=0,g=e.length;g>f;f++){var h=e[f],i=null;if(h.parent&&(i=d.findBone(h.parent),!i))throw"Parent bone not found: "+h.parent;b=new c.BoneData(h.name,i),b.length=(h.length||0)*this.scale,b.x=(h.x||0)*this.scale,b.y=(h.y||0)*this.scale,b.rotation=h.rotation||0,b.scaleX=h.scaleX||1,b.scaleY=h.scaleY||1,d.bones.push(b)}var j=a.slots;for(f=0,g=j.length;g>f;f++){var k=j[f];if(b=d.findBone(k.bone),!b)throw"Slot bone not found: "+k.bone;var l=new c.SlotData(k.name,b),m=k.color;m&&(l.r=c.SkeletonJson.toColor(m,0),l.g=c.SkeletonJson.toColor(m,1),l.b=c.SkeletonJson.toColor(m,2),l.a=c.SkeletonJson.toColor(m,3)),l.attachmentName=k.attachment,d.slots.push(l)}var n=a.skins;for(var o in n)if(n.hasOwnProperty(o)){var p=n[o],q=new c.Skin(o);for(var r in p)if(p.hasOwnProperty(r)){var s=d.findSlotIndex(r),t=p[r];for(var u in t)if(t.hasOwnProperty(u)){var v=this.readAttachment(q,u,t[u]);null!=v&&q.addAttachment(s,u,v)}}d.skins.push(q),"default"==q.name&&(d.defaultSkin=q)}var w=a.animations;for(var x in w)w.hasOwnProperty(x)&&this.readAnimation(x,w[x],d);return d},readAttachment:function(a,b,d){b=d.name||b;var e=c.AttachmentType[d.type||"region"];if(e==c.AttachmentType.region){var f=new c.RegionAttachment;return f.x=(d.x||0)*this.scale,f.y=(d.y||0)*this.scale,f.scaleX=d.scaleX||1,f.scaleY=d.scaleY||1,f.rotation=d.rotation||0,f.width=(d.width||32)*this.scale,f.height=(d.height||32)*this.scale,f.updateOffset(),f.rendererObject={},f.rendererObject.name=b,f.rendererObject.scale={},f.rendererObject.scale.x=f.scaleX,f.rendererObject.scale.y=f.scaleY,f.rendererObject.rotation=-f.rotation*Math.PI/180,f}throw"Unknown attachment type: "+e},readAnimation:function(a,b,d){var e,f,g,h,i,j,k,l=[],m=0,n=b.bones;for(var o in n)if(n.hasOwnProperty(o)){var p=d.findBoneIndex(o);if(-1==p)throw"Bone not found: "+o;var q=n[o];for(g in q)if(q.hasOwnProperty(g))if(i=q[g],"rotate"==g){for(f=new c.RotateTimeline(i.length),f.boneIndex=p,e=0,j=0,k=i.length;k>j;j++)h=i[j],f.setFrame(e,h.time,h.angle),c.SkeletonJson.readCurve(f,e,h),e++;l.push(f),m=Math.max(m,f.frames[2*f.getFrameCount()-2])}else{if("translate"!=g&&"scale"!=g)throw"Invalid timeline type for a bone: "+g+" ("+o+")";var r=1;for("scale"==g?f=new c.ScaleTimeline(i.length):(f=new c.TranslateTimeline(i.length),r=this.scale),f.boneIndex=p,e=0,j=0,k=i.length;k>j;j++){h=i[j];var s=(h.x||0)*r,t=(h.y||0)*r;f.setFrame(e,h.time,s,t),c.SkeletonJson.readCurve(f,e,h),e++}l.push(f),m=Math.max(m,f.frames[3*f.getFrameCount()-3])}}var u=b.slots;for(var v in u)if(u.hasOwnProperty(v)){var w=u[v],x=d.findSlotIndex(v);for(g in w)if(w.hasOwnProperty(g))if(i=w[g],"color"==g){for(f=new c.ColorTimeline(i.length),f.slotIndex=x,e=0,j=0,k=i.length;k>j;j++){h=i[j];var y=h.color,z=c.SkeletonJson.toColor(y,0),A=c.SkeletonJson.toColor(y,1),B=c.SkeletonJson.toColor(y,2),C=c.SkeletonJson.toColor(y,3);f.setFrame(e,h.time,z,A,B,C),c.SkeletonJson.readCurve(f,e,h),e++}l.push(f),m=Math.max(m,f.frames[5*f.getFrameCount()-5])}else{if("attachment"!=g)throw"Invalid timeline type for a slot: "+g+" ("+v+")";for(f=new c.AttachmentTimeline(i.length),f.slotIndex=x,e=0,j=0,k=i.length;k>j;j++)h=i[j],f.setFrame(e++,h.time,h.name);l.push(f),m=Math.max(m,f.frames[f.getFrameCount()-1])}}d.animations.push(new c.Animation(a,l,m))}},c.SkeletonJson.readCurve=function(a,b,c){var d=c.curve;d&&("stepped"==d?a.curves.setStepped(b):d instanceof Array&&a.curves.setCurve(b,d[0],d[1],d[2],d[3]))},c.SkeletonJson.toColor=function(a,b){if(8!=a.length)throw"Color hexidecimal length must be 8, recieved: "+a;return parseInt(a.substr(2*b,2),16)/255},c.Atlas=function(a,b){this.textureLoader=b,this.pages=[],this.regions=[];var d=new c.AtlasReader(a),e=[];e.length=4;for(var f=null;;){var g=d.readLine();if(null==g)break;if(g=d.trim(g),g.length)if(f){var h=new c.AtlasRegion;h.name=g,h.page=f,h.rotate="true"==d.readValue(),d.readTuple(e);var i=parseInt(e[0],10),j=parseInt(e[1],10);d.readTuple(e);var k=parseInt(e[0],10),l=parseInt(e[1],10);h.u=i/f.width,h.v=j/f.height,h.rotate?(h.u2=(i+l)/f.width,h.v2=(j+k)/f.height):(h.u2=(i+k)/f.width,h.v2=(j+l)/f.height),h.x=i,h.y=j,h.width=Math.abs(k),h.height=Math.abs(l),4==d.readTuple(e)&&(h.splits=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)],4==d.readTuple(e)&&(h.pads=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)],d.readTuple(e))),h.originalWidth=parseInt(e[0],10),h.originalHeight=parseInt(e[1],10),d.readTuple(e),h.offsetX=parseInt(e[0],10),h.offsetY=parseInt(e[1],10),h.index=parseInt(d.readValue(),10),this.regions.push(h)}else{f=new c.AtlasPage,f.name=g,f.format=c.Atlas.Format[d.readValue()],d.readTuple(e),f.minFilter=c.Atlas.TextureFilter[e[0]],f.magFilter=c.Atlas.TextureFilter[e[1]];var m=d.readValue();f.uWrap=c.Atlas.TextureWrap.clampToEdge,f.vWrap=c.Atlas.TextureWrap.clampToEdge,"x"==m?f.uWrap=c.Atlas.TextureWrap.repeat:"y"==m?f.vWrap=c.Atlas.TextureWrap.repeat:"xy"==m&&(f.uWrap=f.vWrap=c.Atlas.TextureWrap.repeat),b.load(f,g),this.pages.push(f)}else f=null}},c.Atlas.prototype={findRegion:function(a){for(var b=this.regions,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},dispose:function(){for(var a=this.pages,b=0,c=a.length;c>b;b++)this.textureLoader.unload(a[b].rendererObject)},updateUVs:function(a){for(var b=this.regions,c=0,d=b.length;d>c;c++){var e=b[c];e.page==a&&(e.u=e.x/a.width,e.v=e.y/a.height,e.rotate?(e.u2=(e.x+e.height)/a.width,e.v2=(e.y+e.width)/a.height):(e.u2=(e.x+e.width)/a.width,e.v2=(e.y+e.height)/a.height))}}},c.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},c.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},c.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},c.AtlasPage=function(){},c.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},c.AtlasRegion=function(){},c.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},c.AtlasReader=function(a){this.lines=a.split(/\r\n|\r|\n/)},c.AtlasReader.prototype={index:0,trim:function(a){return a.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var a=this.readLine(),b=a.indexOf(":");if(-1==b)throw"Invalid line: "+a;return this.trim(a.substring(b+1))},readTuple:function(a){var b=this.readLine(),c=b.indexOf(":");if(-1==c)throw"Invalid line: "+b;for(var d=0,e=c+1;3>d;d++){var f=b.indexOf(",",e);if(-1==f){if(!d)throw"Invalid line: "+b;break}a[d]=this.trim(b.substr(e,f-e)),e=f+1}return a[d]=this.trim(b.substring(e)),d+1}},c.AtlasAttachmentLoader=function(a){this.atlas=a},c.AtlasAttachmentLoader.prototype={newAttachment:function(a,b,d){switch(b){case c.AttachmentType.region:var e=this.atlas.findRegion(d);if(!e)throw"Region not found in atlas: "+d+" ("+b+")";var f=new c.RegionAttachment(d);return f.rendererObject=e,f.setUVs(e.u,e.v,e.u2,e.v2,e.rotate),f.regionOffsetX=e.offsetX,f.regionOffsetY=e.offsetY,f.regionWidth=e.width,f.regionHeight=e.height,f.regionOriginalWidth=e.originalWidth,f.regionOriginalHeight=e.originalHeight,f}throw"Unknown attachment type: "+b}},c.Bone.yDown=!0,b.AnimCache={},b.Spine=function(a){if(b.DisplayObjectContainer.call(this),this.spineData=b.AnimCache[a],!this.spineData)throw new Error("Spine data must be preloaded using PIXI.SpineLoader or PIXI.AssetLoader: "+a);this.skeleton=new c.Skeleton(this.spineData),this.skeleton.updateWorldTransform(),this.stateData=new c.AnimationStateData(this.spineData),this.state=new c.AnimationState(this.stateData),this.slotContainers=[];for(var d=0,e=this.skeleton.drawOrder.length;e>d;d++){var f=this.skeleton.drawOrder[d],g=f.attachment,h=new b.DisplayObjectContainer;if(this.slotContainers.push(h),this.addChild(h),g instanceof c.RegionAttachment){var i=g.rendererObject.name,j=this.createSprite(f,g.rendererObject);f.currentSprite=j,f.currentSpriteName=i,h.addChild(j)}}},b.Spine.prototype=Object.create(b.DisplayObjectContainer.prototype),b.Spine.prototype.constructor=b.Spine,b.Spine.prototype.updateTransform=function(){this.lastTime=this.lastTime||Date.now();var a=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.state.update(a),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var d=this.skeleton.drawOrder,e=0,f=d.length;f>e;e++){var g=d[e],h=g.attachment,i=this.slotContainers[e];if(h instanceof c.RegionAttachment){if(h.rendererObject&&(!g.currentSpriteName||g.currentSpriteName!=h.name)){var j=h.rendererObject.name;if(void 0!==g.currentSprite&&(g.currentSprite.visible=!1),g.sprites=g.sprites||{},void 0!==g.sprites[j])g.sprites[j].visible=!0;else{var k=this.createSprite(g,h.rendererObject);i.addChild(k)}g.currentSprite=g.sprites[j],g.currentSpriteName=j}i.visible=!0;var l=g.bone;i.position.x=l.worldX+h.x*l.m00+h.y*l.m01,i.position.y=l.worldY+h.x*l.m10+h.y*l.m11,i.scale.x=l.worldScaleX,i.scale.y=l.worldScaleY,i.rotation=-(g.bone.worldRotation*Math.PI/180),i.alpha=g.a,g.currentSprite.tint=b.rgb2hex([g.r,g.g,g.b])}else i.visible=!1}b.DisplayObjectContainer.prototype.updateTransform.call(this)},b.Spine.prototype.createSprite=function(a,c){var d=b.TextureCache[c.name]?c.name:c.name+".png",e=new b.Sprite(b.Texture.fromFrame(d));return e.scale=c.scale,e.rotation=c.rotation,e.anchor.x=e.anchor.y=.5,a.sprites=a.sprites||{},a.sprites[c.name]=e,e},b.BaseTextureCache={},b.BaseTextureCacheIdGenerator=0,b.BaseTexture=function(a,c){if(this.resolution=1,this.width=100,this.height=100,this.scaleMode=c||b.scaleModes.DEFAULT,this.hasLoaded=!1,this.source=a,this._UID=b._UID++,this.premultipliedAlpha=!0,this._glTextures=[],this._dirty=[!0,!0,!0,!0],a){if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this.hasLoaded=!0,this.width=this.source.naturalWidth||this.source.width,this.height=this.source.naturalHeight||this.source.height,this.dirty();else{var d=this;this.source.onload=function(){d.hasLoaded=!0,d.width=d.source.naturalWidth||d.source.width,d.height=d.source.naturalHeight||d.source.height,d.dirty(),d.dispatchEvent({type:"loaded",content:d})},this.source.onerror=function(){d.dispatchEvent({type:"error",content:d})}}this.imageUrl=null,this._powerOf2=!1}},b.BaseTexture.prototype.constructor=b.BaseTexture,b.EventTarget.mixin(b.BaseTexture.prototype),b.BaseTexture.prototype.destroy=function(){this.imageUrl?(delete b.BaseTextureCache[this.imageUrl],delete b.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete b.BaseTextureCache[this.source._pixiId],this.source=null,this.unloadFromGPU()},b.BaseTexture.prototype.updateSourceImage=function(a){this.hasLoaded=!1,this.source.src=null,this.source.src=a},b.BaseTexture.prototype.dirty=function(){for(var a=0;a<this._glTextures.length;a++)this._dirty[a]=!0},b.BaseTexture.prototype.unloadFromGPU=function(){this.dirty();for(var a=this._glTextures.length-1;a>=0;a--){var c=this._glTextures[a],d=b.glContexts[a];d&&c&&d.deleteTexture(c)}this._glTextures.length=0,this.dirty()},b.BaseTexture.fromImage=function(a,c,d){var e=b.BaseTextureCache[a];if(void 0===c&&-1===a.indexOf("data:")&&(c=!0),!e){var f=new Image;c&&(f.crossOrigin=""),f.src=a,e=new b.BaseTexture(f,d),e.imageUrl=a,b.BaseTextureCache[a]=e,-1!==a.indexOf(b.RETINA_PREFIX+".")&&(e.resolution=2)}return e},b.BaseTexture.fromCanvas=function(a,c){a._pixiId||(a._pixiId="canvas_"+b.TextureCacheIdGenerator++);var d=b.BaseTextureCache[a._pixiId];return d||(d=new b.BaseTexture(a,c),b.BaseTextureCache[a._pixiId]=d),d},b.TextureCache={},b.FrameCache={},b.TextureCacheIdGenerator=0,b.Texture=function(a,c,d,e){this.noFrame=!1,c||(this.noFrame=!0,c=new b.Rectangle(0,0,1,1)),a instanceof b.Texture&&(a=a.baseTexture),this.baseTexture=a,this.frame=c,this.trim=e,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=d||new b.Rectangle(0,0,1,1),a.hasLoaded?(this.noFrame&&(c=new b.Rectangle(0,0,a.width,a.height)),this.setFrame(c)):a.addEventListener("loaded",this.onBaseTextureLoaded.bind(this))},b.Texture.prototype.constructor=b.Texture,b.EventTarget.mixin(b.Texture.prototype),b.Texture.prototype.onBaseTextureLoaded=function(){var a=this.baseTexture;a.removeEventListener("loaded",this.onLoaded),this.noFrame&&(this.frame=new b.Rectangle(0,0,a.width,a.height)),this.setFrame(this.frame),this.dispatchEvent({type:"update",content:this})},b.Texture.prototype.destroy=function(a){a&&this.baseTexture.destroy(),this.valid=!1},b.Texture.prototype.setFrame=function(a){if(this.noFrame=!1,this.frame=a,this.width=a.width,this.height=a.height,this.crop.x=a.x,this.crop.y=a.y,this.crop.width=a.width,this.crop.height=a.height,!this.trim&&(a.x+a.width>this.baseTexture.width||a.y+a.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=a&&a.width&&a.height&&this.baseTexture.source&&this.baseTexture.hasLoaded,this.trim&&(this.width=this.trim.width,this.height=this.trim.height,this.frame.width=this.trim.width,this.frame.height=this.trim.height),this.valid&&this._updateUvs()},b.Texture.prototype._updateUvs=function(){this._uvs||(this._uvs=new b.TextureUvs);var a=this.crop,c=this.baseTexture.width,d=this.baseTexture.height;this._uvs.x0=a.x/c,this._uvs.y0=a.y/d,this._uvs.x1=(a.x+a.width)/c,this._uvs.y1=a.y/d,this._uvs.x2=(a.x+a.width)/c,this._uvs.y2=(a.y+a.height)/d,this._uvs.x3=a.x/c,this._uvs.y3=(a.y+a.height)/d},b.Texture.fromImage=function(a,c,d){var e=b.TextureCache[a];return e||(e=new b.Texture(b.BaseTexture.fromImage(a,c,d)),b.TextureCache[a]=e),e},b.Texture.fromFrame=function(a){var c=b.TextureCache[a];if(!c)throw new Error('The frameId "'+a+'" does not exist in the texture cache ');return c},b.Texture.fromCanvas=function(a,c){var d=b.BaseTexture.fromCanvas(a,c);return new b.Texture(d)},b.Texture.addTextureToCache=function(a,c){b.TextureCache[c]=a},b.Texture.removeTextureFromCache=function(a){var c=b.TextureCache[a];return delete b.TextureCache[a],delete b.BaseTextureCache[a],c},b.TextureUvs=function(){this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0},b.Texture.emptyTexture=new b.Texture(new b.BaseTexture),b.RenderTexture=function(a,c,d,e,f){if(this.width=a||100,this.height=c||100,this.resolution=f||1,this.frame=new b.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.crop=new b.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.baseTexture=new b.BaseTexture,this.baseTexture.width=this.width*this.resolution,this.baseTexture.height=this.height*this.resolution,this.baseTexture._glTextures=[],this.baseTexture.resolution=this.resolution,this.baseTexture.scaleMode=e||b.scaleModes.DEFAULT,this.baseTexture.hasLoaded=!0,b.Texture.call(this,this.baseTexture,new b.Rectangle(0,0,this.width,this.height)),this.renderer=d||b.defaultRenderer,this.renderer.type===b.WEBGL_RENDERER){var g=this.renderer.gl;this.baseTexture._dirty[g.id]=!1,this.textureBuffer=new b.FilterTexture(g,this.width*this.resolution,this.height*this.resolution,this.baseTexture.scaleMode),this.baseTexture._glTextures[g.id]=this.textureBuffer.texture,this.render=this.renderWebGL,this.projection=new b.Point(.5*this.width,.5*-this.height)}else this.render=this.renderCanvas,this.textureBuffer=new b.CanvasBuffer(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()},b.RenderTexture.prototype=Object.create(b.Texture.prototype),b.RenderTexture.prototype.constructor=b.RenderTexture,b.RenderTexture.prototype.resize=function(a,c,d){(a!==this.width||c!==this.height)&&(this.valid=a>0&&c>0,this.width=this.frame.width=this.crop.width=a,this.height=this.frame.height=this.crop.height=c,d&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.renderer.type===b.WEBGL_RENDERER&&(this.projection.x=this.width/2,this.projection.y=-this.height/2),this.valid&&this.textureBuffer.resize(this.width*this.resolution,this.height*this.resolution))},b.RenderTexture.prototype.clear=function(){this.valid&&(this.renderer.type===b.WEBGL_RENDERER&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},b.RenderTexture.prototype.renderWebGL=function(a,b,c){if(this.valid){var d=a.worldTransform;d.identity(),d.translate(0,2*this.projection.y),b&&d.append(b),d.scale(1,-1),a.worldAlpha=1;for(var e=a.children,f=0,g=e.length;g>f;f++)e[f].updateTransform();var h=this.renderer.gl;h.viewport(0,0,this.width*this.resolution,this.height*this.resolution),h.bindFramebuffer(h.FRAMEBUFFER,this.textureBuffer.frameBuffer),c&&this.textureBuffer.clear(),this.renderer.spriteBatch.dirty=!0,this.renderer.renderDisplayObject(a,this.projection,this.textureBuffer.frameBuffer),this.renderer.spriteBatch.dirty=!0}},b.RenderTexture.prototype.renderCanvas=function(a,b,c){if(this.valid){var d=a.worldTransform;d.identity(),b&&d.append(b),a.worldAlpha=1;for(var e=a.children,f=0,g=e.length;g>f;f++)e[f].updateTransform();c&&this.textureBuffer.clear();var h=this.textureBuffer.context,i=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(a,h),this.renderer.resolution=i}},b.RenderTexture.prototype.getImage=function(){var a=new Image;return a.src=this.getBase64(),a},b.RenderTexture.prototype.getBase64=function(){return this.getCanvas().toDataURL()},b.RenderTexture.prototype.getCanvas=function(){if(this.renderer.type===b.WEBGL_RENDERER){var a=this.renderer.gl,c=this.textureBuffer.width,d=this.textureBuffer.height,e=new Uint8Array(4*c*d);a.bindFramebuffer(a.FRAMEBUFFER,this.textureBuffer.frameBuffer),a.readPixels(0,0,c,d,a.RGBA,a.UNSIGNED_BYTE,e),a.bindFramebuffer(a.FRAMEBUFFER,null);var f=new b.CanvasBuffer(c,d),g=f.context.getImageData(0,0,c,d);return g.data.set(e),f.context.putImageData(g,0,0),f.canvas}return this.textureBuffer.canvas},b.RenderTexture.tempMatrix=new b.Matrix,b.VideoTexture=function(a,c){if(!a)throw new Error("No video source element specified.");(a.readyState===a.HAVE_ENOUGH_DATA||a.readyState===a.HAVE_FUTURE_DATA)&&a.width&&a.height&&(a.complete=!0),b.BaseTexture.call(this,a,c),this.autoUpdate=!1,this.updateBound=this._onUpdate.bind(this),a.complete||(this._onCanPlay=this.onCanPlay.bind(this),a.addEventListener("canplay",this._onCanPlay),a.addEventListener("canplaythrough",this._onCanPlay),a.addEventListener("play",this.onPlayStart.bind(this)),a.addEventListener("pause",this.onPlayStop.bind(this)))},b.VideoTexture.prototype=Object.create(b.BaseTexture.prototype),b.VideoTexture.constructor=b.VideoTexture,b.VideoTexture.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this.updateBound),this.dirty())},b.VideoTexture.prototype.onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this.updateBound),this.autoUpdate=!0)},b.VideoTexture.prototype.onPlayStop=function(){this.autoUpdate=!1},b.VideoTexture.prototype.onCanPlay=function(){"canplaythrough"===event.type&&(this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.dispatchEvent({type:"loaded",content:this}))))},b.VideoTexture.prototype.destroy=function(){this.source&&this.source._pixiId&&(b.BaseTextureCache[this.source._pixiId]=null,delete b.BaseTextureCache[this.source._pixiId],this.source._pixiId=null,delete this.source._pixiId),b.BaseTexture.prototype.destroy.call(this)},b.VideoTexture.baseTextureFromVideo=function(a,c){a._pixiId||(a._pixiId="video_"+b.TextureCacheIdGenerator++);var d=b.BaseTextureCache[a._pixiId];return d||(d=new b.VideoTexture(a,c),b.BaseTextureCache[a._pixiId]=d),d},b.VideoTexture.textureFromVideo=function(a,c){var d=b.VideoTexture.baseTextureFromVideo(a,c);return new b.Texture(d)},b.VideoTexture.fromUrl=function(a,c){var d=document.createElement("video");return d.src=a,d.autoPlay=!0,d.play(),b.VideoTexture.textureFromVideo(d,c)},b.AssetLoader=function(a,c){this.assetURLs=a,this.crossorigin=c,this.loadersByType={jpg:b.ImageLoader,jpeg:b.ImageLoader,png:b.ImageLoader,gif:b.ImageLoader,webp:b.ImageLoader,json:b.JsonLoader,atlas:b.AtlasLoader,anim:b.SpineLoader,xml:b.BitmapFontLoader,fnt:b.BitmapFontLoader}},b.EventTarget.mixin(b.AssetLoader.prototype),b.AssetLoader.prototype.constructor=b.AssetLoader,b.AssetLoader.prototype._getDataType=function(a){var b="data:",c=a.slice(0,b.length).toLowerCase();if(c===b){var d=a.slice(b.length),e=d.indexOf(",");if(-1===e)return null;var f=d.slice(0,e).split(";")[0];return f&&"text/plain"!==f.toLowerCase()?f.split("/").pop().toLowerCase():"txt"}return null},b.AssetLoader.prototype.load=function(){function a(a){b.onAssetLoaded(a.data.content)}var b=this;this.loadCount=this.assetURLs.length;for(var c=0;c<this.assetURLs.length;c++){var d=this.assetURLs[c],e=this._getDataType(d);e||(e=d.split("?").shift().split(".").pop().toLowerCase());var f=this.loadersByType[e];if(!f)throw new Error(e+" is an unsupported file type");var g=new f(d,this.crossorigin);g.on("loaded",a),g.load()}},b.AssetLoader.prototype.onAssetLoaded=function(a){this.loadCount--,this.emit("onProgress",{content:this,loader:a}),this.onProgress&&this.onProgress(a),this.loadCount||(this.emit("onComplete",{content:this}),this.onComplete&&this.onComplete())},b.JsonLoader=function(a,b){this.url=a,this.crossorigin=b,this.baseUrl=a.replace(/[^\/]*$/,""),this.loaded=!1},b.JsonLoader.prototype.constructor=b.JsonLoader,b.EventTarget.mixin(b.JsonLoader.prototype),b.JsonLoader.prototype.load=function(){window.XDomainRequest&&this.crossorigin?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3e3,this.ajaxRequest.onerror=this.onError.bind(this),this.ajaxRequest.ontimeout=this.onError.bind(this),this.ajaxRequest.onprogress=function(){}):this.ajaxRequest=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),this.ajaxRequest.onload=this.onJSONLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.send()},b.JsonLoader.prototype.onJSONLoaded=function(){if(!this.ajaxRequest.responseText)return void this.onError();if(this.json=JSON.parse(this.ajaxRequest.responseText),this.json.frames){var a=this.baseUrl+this.json.meta.image,d=new b.ImageLoader(a,this.crossorigin),e=this.json.frames;this.texture=d.texture.baseTexture,d.addEventListener("loaded",this.onLoaded.bind(this));for(var f in e){var g=e[f].frame;if(g){var h=new b.Rectangle(g.x,g.y,g.w,g.h),i=h.clone(),j=null;if(e[f].trimmed){var k=e[f].sourceSize,l=e[f].spriteSourceSize;j=new b.Rectangle(l.x,l.y,k.w,k.h)}b.TextureCache[f]=new b.Texture(this.texture,h,i,j)}}d.load()}else if(this.json.bones){var m=new c.SkeletonJson,n=m.readSkeletonData(this.json);b.AnimCache[this.url]=n,this.onLoaded()}else this.onLoaded()},b.JsonLoader.prototype.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},b.JsonLoader.prototype.onError=function(){this.dispatchEvent({type:"error",content:this})},b.AtlasLoader=function(a,b){this.url=a,this.baseUrl=a.replace(/[^\/]*$/,""),this.crossorigin=b,this.loaded=!1},b.AtlasLoader.constructor=b.AtlasLoader,b.EventTarget.mixin(b.AtlasLoader.prototype),b.AtlasLoader.prototype.load=function(){this.ajaxRequest=new b.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onAtlasLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/json"),this.ajaxRequest.send(null)},b.AtlasLoader.prototype.onAtlasLoaded=function(){if(4===this.ajaxRequest.readyState)if(200===this.ajaxRequest.status||-1===window.location.href.indexOf("http")){this.atlas={meta:{image:[]},frames:[]};var a=this.ajaxRequest.responseText.split(/\r?\n/),c=-3,d=0,e=null,f=!1,g=0,h=0,i=this.onLoaded.bind(this);for(g=0;g<a.length;g++)if(a[g]=a[g].replace(/^\s+|\s+$/g,""),""===a[g]&&(f=g+1),a[g].length>0){if(f===g)this.atlas.meta.image.push(a[g]),d=this.atlas.meta.image.length-1,this.atlas.frames.push({}),c=-3;else if(c>0)if(c%7===1)null!=e&&(this.atlas.frames[d][e.name]=e),e={name:a[g],frame:{}};else{var j=a[g].split(" ");if(c%7===3)e.frame.x=Number(j[1].replace(",","")),e.frame.y=Number(j[2]);else if(c%7===4)e.frame.w=Number(j[1].replace(",","")),e.frame.h=Number(j[2]);else if(c%7===5){var k={x:0,y:0,w:Number(j[1].replace(",","")),h:Number(j[2])};k.w>e.frame.w||k.h>e.frame.h?(e.trimmed=!0,e.realSize=k):e.trimmed=!1}}c++}if(null!=e&&(this.atlas.frames[d][e.name]=e),this.atlas.meta.image.length>0){for(this.images=[],h=0;h<this.atlas.meta.image.length;h++){var l=this.baseUrl+this.atlas.meta.image[h],m=this.atlas.frames[h];this.images.push(new b.ImageLoader(l,this.crossorigin));for(g in m){var n=m[g].frame;n&&(b.TextureCache[g]=new b.Texture(this.images[h].texture.baseTexture,{x:n.x,y:n.y,width:n.w,height:n.h}),m[g].trimmed&&(b.TextureCache[g].realSize=m[g].realSize,b.TextureCache[g].trim.x=0,b.TextureCache[g].trim.y=0))}}for(this.currentImageId=0,h=0;h<this.images.length;h++)this.images[h].on("loaded",i);this.images[this.currentImageId].load()}else this.onLoaded()}else this.onError()},b.AtlasLoader.prototype.onLoaded=function(){this.images.length-1>this.currentImageId?(this.currentImageId++,this.images[this.currentImageId].load()):(this.loaded=!0,this.emit("loaded",{content:this}))},b.AtlasLoader.prototype.onError=function(){this.emit("error",{content:this})},b.SpriteSheetLoader=function(a,b){this.url=a,this.crossorigin=b,this.baseUrl=a.replace(/[^\/]*$/,""),this.texture=null,this.frames={}},b.SpriteSheetLoader.prototype.constructor=b.SpriteSheetLoader,b.EventTarget.mixin(b.SpriteSheetLoader.prototype),b.SpriteSheetLoader.prototype.load=function(){var a=this,c=new b.JsonLoader(this.url,this.crossorigin);c.on("loaded",function(b){a.json=b.data.content.json,a.onLoaded()}),c.load()},b.SpriteSheetLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},b.ImageLoader=function(a,c){this.texture=b.Texture.fromImage(a,c),this.frames=[]},b.ImageLoader.prototype.constructor=b.ImageLoader,b.EventTarget.mixin(b.ImageLoader.prototype),b.ImageLoader.prototype.load=function(){this.texture.baseTexture.hasLoaded?this.onLoaded():this.texture.baseTexture.on("loaded",this.onLoaded.bind(this))},b.ImageLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},b.ImageLoader.prototype.loadFramedSpriteSheet=function(a,c,d){this.frames=[];for(var e=Math.floor(this.texture.width/a),f=Math.floor(this.texture.height/c),g=0,h=0;f>h;h++)for(var i=0;e>i;i++,g++){var j=new b.Texture(this.texture.baseTexture,{x:i*a,y:h*c,width:a,height:c});this.frames.push(j),d&&(b.TextureCache[d+"-"+g]=j)}this.load()},b.BitmapFontLoader=function(a,b){this.url=a,this.crossorigin=b,this.baseUrl=a.replace(/[^\/]*$/,""),this.texture=null},b.BitmapFontLoader.prototype.constructor=b.BitmapFontLoader,b.EventTarget.mixin(b.BitmapFontLoader.prototype),b.BitmapFontLoader.prototype.load=function(){this.ajaxRequest=new b.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onXMLLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/xml"),this.ajaxRequest.send(null)},b.BitmapFontLoader.prototype.onXMLLoaded=function(){if(4===this.ajaxRequest.readyState&&(200===this.ajaxRequest.status||-1===window.location.protocol.indexOf("http"))){var a=this.ajaxRequest.responseXML;if(!a||/MSIE 9/i.test(navigator.userAgent)||navigator.isCocoonJS)if("function"==typeof window.DOMParser){var c=new DOMParser;a=c.parseFromString(this.ajaxRequest.responseText,"text/xml")}else{var d=document.createElement("div");d.innerHTML=this.ajaxRequest.responseText,a=d}var e=this.baseUrl+a.getElementsByTagName("page")[0].getAttribute("file"),f=new b.ImageLoader(e,this.crossorigin);this.texture=f.texture.baseTexture;var g={},h=a.getElementsByTagName("info")[0],i=a.getElementsByTagName("common")[0];g.font=h.getAttribute("face"),g.size=parseInt(h.getAttribute("size"),10),g.lineHeight=parseInt(i.getAttribute("lineHeight"),10),g.chars={};for(var j=a.getElementsByTagName("char"),k=0;k<j.length;k++){var l=parseInt(j[k].getAttribute("id"),10),m=new b.Rectangle(parseInt(j[k].getAttribute("x"),10),parseInt(j[k].getAttribute("y"),10),parseInt(j[k].getAttribute("width"),10),parseInt(j[k].getAttribute("height"),10));g.chars[l]={xOffset:parseInt(j[k].getAttribute("xoffset"),10),yOffset:parseInt(j[k].getAttribute("yoffset"),10),xAdvance:parseInt(j[k].getAttribute("xadvance"),10),kerning:{},texture:b.TextureCache[l]=new b.Texture(this.texture,m)}
}var n=a.getElementsByTagName("kerning");for(k=0;k<n.length;k++){var o=parseInt(n[k].getAttribute("first"),10),p=parseInt(n[k].getAttribute("second"),10),q=parseInt(n[k].getAttribute("amount"),10);g.chars[p].kerning[o]=q}b.BitmapText.fonts[g.font]=g,f.addEventListener("loaded",this.onLoaded.bind(this)),f.load()}},b.BitmapFontLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},b.SpineLoader=function(a,b){this.url=a,this.crossorigin=b,this.loaded=!1},b.SpineLoader.prototype.constructor=b.SpineLoader,b.EventTarget.mixin(b.SpineLoader.prototype),b.SpineLoader.prototype.load=function(){var a=this,c=new b.JsonLoader(this.url,this.crossorigin);c.on("loaded",function(b){a.json=b.data.content.json,a.onLoaded()}),c.load()},b.SpineLoader.prototype.onLoaded=function(){this.loaded=!0,this.emit("loaded",{content:this})},b.AbstractFilter=function(a,b){this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.uniforms=b||{},this.fragmentSrc=a||[]},b.AbstractFilter.prototype.constructor=b.AbstractFilter,b.AbstractFilter.prototype.syncUniforms=function(){for(var a=0,b=this.shaders.length;b>a;a++)this.shaders[a].dirty=!0},b.AlphaMaskFilter=function(a){b.AbstractFilter.call(this),this.passes=[this],a.baseTexture._powerOf2=!0,this.uniforms={mask:{type:"sampler2D",value:a},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},a.baseTexture.hasLoaded?(this.uniforms.mask.value.x=a.width,this.uniforms.mask.value.y=a.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),a.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D mask;","uniform sampler2D uSampler;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   mapCords *= dimensions.xy / mapDimensions;","   vec4 original =  texture2D(uSampler, vTextureCoord);","   float maskAlpha =  texture2D(mask, mapCords).r;","   original *= maskAlpha;","   gl_FragColor =  original;","}"]},b.AlphaMaskFilter.prototype=Object.create(b.AbstractFilter.prototype),b.AlphaMaskFilter.prototype.constructor=b.AlphaMaskFilter,b.AlphaMaskFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.mask.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.mask.value.height,this.uniforms.mask.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(b.AlphaMaskFilter.prototype,"map",{get:function(){return this.uniforms.mask.value},set:function(a){this.uniforms.mask.value=a}}),b.ColorMatrixFilter=function(){b.AbstractFilter.call(this),this.passes=[this],this.uniforms={matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform mat4 matrix;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;","}"]},b.ColorMatrixFilter.prototype=Object.create(b.AbstractFilter.prototype),b.ColorMatrixFilter.prototype.constructor=b.ColorMatrixFilter,Object.defineProperty(b.ColorMatrixFilter.prototype,"matrix",{get:function(){return this.uniforms.matrix.value},set:function(a){this.uniforms.matrix.value=a}}),b.GrayFilter=function(){b.AbstractFilter.call(this),this.passes=[this],this.uniforms={gray:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float gray;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);","}"]},b.GrayFilter.prototype=Object.create(b.AbstractFilter.prototype),b.GrayFilter.prototype.constructor=b.GrayFilter,Object.defineProperty(b.GrayFilter.prototype,"gray",{get:function(){return this.uniforms.gray.value},set:function(a){this.uniforms.gray.value=a}}),b.DisplacementFilter=function(a){b.AbstractFilter.call(this),this.passes=[this],a.baseTexture._powerOf2=!0,this.uniforms={displacementMap:{type:"sampler2D",value:a},scale:{type:"2f",value:{x:30,y:30}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},a.baseTexture.hasLoaded?(this.uniforms.mapDimensions.value.x=a.width,this.uniforms.mapDimensions.value.y=a.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),a.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D displacementMap;","uniform sampler2D uSampler;","uniform vec2 scale;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   vec2 matSample = texture2D(displacementMap, mapCords).xy;","   matSample -= 0.5;","   matSample *= scale;","   matSample /= mapDimensions;","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);","   vec2 cord = vTextureCoord;","}"]},b.DisplacementFilter.prototype=Object.create(b.AbstractFilter.prototype),b.DisplacementFilter.prototype.constructor=b.DisplacementFilter,b.DisplacementFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height,this.uniforms.displacementMap.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(b.DisplacementFilter.prototype,"map",{get:function(){return this.uniforms.displacementMap.value},set:function(a){this.uniforms.displacementMap.value=a}}),Object.defineProperty(b.DisplacementFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(a){this.uniforms.scale.value=a}}),Object.defineProperty(b.DisplacementFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(a){this.uniforms.offset.value=a}}),b.PixelateFilter=function(){b.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:0},dimensions:{type:"4fv",value:new b.Float32Array([1e4,100,10,10])},pixelSize:{type:"2f",value:{x:10,y:10}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 testDim;","uniform vec4 dimensions;","uniform vec2 pixelSize;","uniform sampler2D uSampler;","void main(void) {","   vec2 coord = vTextureCoord;","   vec2 size = dimensions.xy/pixelSize;","   vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;","   gl_FragColor = texture2D(uSampler, color);","}"]},b.PixelateFilter.prototype=Object.create(b.AbstractFilter.prototype),b.PixelateFilter.prototype.constructor=b.PixelateFilter,Object.defineProperty(b.PixelateFilter.prototype,"size",{get:function(){return this.uniforms.pixelSize.value},set:function(a){this.dirty=!0,this.uniforms.pixelSize.value=a}}),b.BlurXFilter=function(){b.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;","   gl_FragColor = sum;","}"]},b.BlurXFilter.prototype=Object.create(b.AbstractFilter.prototype),b.BlurXFilter.prototype.constructor=b.BlurXFilter,Object.defineProperty(b.BlurXFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(a){this.dirty=!0,this.uniforms.blur.value=1/7e3*a}}),b.BlurYFilter=function(){b.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;","   gl_FragColor = sum;","}"]},b.BlurYFilter.prototype=Object.create(b.AbstractFilter.prototype),b.BlurYFilter.prototype.constructor=b.BlurYFilter,Object.defineProperty(b.BlurYFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(a){this.uniforms.blur.value=1/7e3*a}}),b.BlurFilter=function(){this.blurXFilter=new b.BlurXFilter,this.blurYFilter=new b.BlurYFilter,this.passes=[this.blurXFilter,this.blurYFilter]},b.BlurFilter.prototype=Object.create(b.AbstractFilter.prototype),b.BlurFilter.prototype.constructor=b.BlurFilter,Object.defineProperty(b.BlurFilter.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=this.blurYFilter.blur=a}}),Object.defineProperty(b.BlurFilter.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=a}}),Object.defineProperty(b.BlurFilter.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(a){this.blurYFilter.blur=a}}),b.InvertFilter=function(){b.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);","}"]},b.InvertFilter.prototype=Object.create(b.AbstractFilter.prototype),b.InvertFilter.prototype.constructor=b.InvertFilter,Object.defineProperty(b.InvertFilter.prototype,"invert",{get:function(){return this.uniforms.invert.value},set:function(a){this.uniforms.invert.value=a}}),b.SepiaFilter=function(){b.AbstractFilter.call(this),this.passes=[this],this.uniforms={sepia:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float sepia;","uniform sampler2D uSampler;","const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);","}"]},b.SepiaFilter.prototype=Object.create(b.AbstractFilter.prototype),b.SepiaFilter.prototype.constructor=b.SepiaFilter,Object.defineProperty(b.SepiaFilter.prototype,"sepia",{get:function(){return this.uniforms.sepia.value},set:function(a){this.uniforms.sepia.value=a}}),b.TwistFilter=function(){b.AbstractFilter.call(this),this.passes=[this],this.uniforms={radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"2f",value:{x:.5,y:.5}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float radius;","uniform float angle;","uniform vec2 offset;","void main(void) {","   vec2 coord = vTextureCoord - offset;","   float distance = length(coord);","   if (distance < radius) {","       float ratio = (radius - distance) / radius;","       float angleMod = ratio * ratio * angle;","       float s = sin(angleMod);","       float c = cos(angleMod);","       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);","   }","   gl_FragColor = texture2D(uSampler, coord+offset);","}"]},b.TwistFilter.prototype=Object.create(b.AbstractFilter.prototype),b.TwistFilter.prototype.constructor=b.TwistFilter,Object.defineProperty(b.TwistFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(a){this.dirty=!0,this.uniforms.offset.value=a}}),Object.defineProperty(b.TwistFilter.prototype,"radius",{get:function(){return this.uniforms.radius.value},set:function(a){this.dirty=!0,this.uniforms.radius.value=a}}),Object.defineProperty(b.TwistFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(a){this.dirty=!0,this.uniforms.angle.value=a}}),b.ColorStepFilter=function(){b.AbstractFilter.call(this),this.passes=[this],this.uniforms={step:{type:"1f",value:5}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float step;","void main(void) {","   vec4 color = texture2D(uSampler, vTextureCoord);","   color = floor(color * step) / step;","   gl_FragColor = color;","}"]},b.ColorStepFilter.prototype=Object.create(b.AbstractFilter.prototype),b.ColorStepFilter.prototype.constructor=b.ColorStepFilter,Object.defineProperty(b.ColorStepFilter.prototype,"step",{get:function(){return this.uniforms.step.value},set:function(a){this.uniforms.step.value=a}}),b.DotScreenFilter=function(){b.AbstractFilter.call(this),this.passes=[this],this.uniforms={scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float angle;","uniform float scale;","float pattern() {","   float s = sin(angle), c = cos(angle);","   vec2 tex = vTextureCoord * dimensions.xy;","   vec2 point = vec2(","       c * tex.x - s * tex.y,","       s * tex.x + c * tex.y","   ) * scale;","   return (sin(point.x) * sin(point.y)) * 4.0;","}","void main() {","   vec4 color = texture2D(uSampler, vTextureCoord);","   float average = (color.r + color.g + color.b) / 3.0;","   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);","}"]},b.DotScreenFilter.prototype=Object.create(b.AbstractFilter.prototype),b.DotScreenFilter.prototype.constructor=b.DotScreenFilter,Object.defineProperty(b.DotScreenFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(a){this.dirty=!0,this.uniforms.scale.value=a}}),Object.defineProperty(b.DotScreenFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(a){this.dirty=!0,this.uniforms.angle.value=a}}),b.CrossHatchFilter=function(){b.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);","    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","    if (lum < 1.00) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.75) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.50) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.3) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","}"]},b.CrossHatchFilter.prototype=Object.create(b.AbstractFilter.prototype),b.CrossHatchFilter.prototype.constructor=b.CrossHatchFilter,Object.defineProperty(b.CrossHatchFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(a){this.uniforms.blur.value=1/7e3*a}}),b.RGBSplitFilter=function(){b.AbstractFilter.call(this),this.passes=[this],this.uniforms={red:{type:"2f",value:{x:20,y:20}},green:{type:"2f",value:{x:-20,y:20}},blue:{type:"2f",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 red;","uniform vec2 green;","uniform vec2 blue;","uniform vec4 dimensions;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;","   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;","   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;","   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;","}"]},b.RGBSplitFilter.prototype=Object.create(b.AbstractFilter.prototype),b.RGBSplitFilter.prototype.constructor=b.RGBSplitFilter,Object.defineProperty(b.RGBSplitFilter.prototype,"red",{get:function(){return this.uniforms.red.value},set:function(a){this.uniforms.red.value=a}}),Object.defineProperty(b.RGBSplitFilter.prototype,"green",{get:function(){return this.uniforms.green.value},set:function(a){this.uniforms.green.value=a}}),Object.defineProperty(b.RGBSplitFilter.prototype,"blue",{get:function(){return this.uniforms.blue.value},set:function(a){this.uniforms.blue.value=a}}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=b),exports.PIXI=b):"undefined"!=typeof define&&define.amd?define("PIXI",b):a.PIXI=b}.call(this),function(a){function b(a,b,c,d,e){this._listener=b,this._isOnce=c,this.context=d,this._signal=a,this._priority=e||0}function c(a,b){if("function"!=typeof a)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",b))}function d(){this._bindings=[],this._prevParams=null;var a=this;this.dispatch=function(){d.prototype.dispatch.apply(a,arguments)}}b.prototype={active:!0,params:null,execute:function(a){var b,c;return this.active&&this._listener&&(c=this.params?this.params.concat(a):a,b=this._listener.apply(this.context,c),this._isOnce&&this.detach()),b},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},d.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(a,c,d,e){var f,g=this._indexOfListener(a,d);if(-1!==g){if(f=this._bindings[g],f.isOnce()!==c)throw new Error("You cannot add"+(c?"":"Once")+"() then add"+(c?"Once":"")+"() the same listener without removing the relationship first.")}else f=new b(this,a,c,d,e),this._addBinding(f);return this.memorize&&this._prevParams&&f.execute(this._prevParams),f},_addBinding:function(a){var b=this._bindings.length;do--b;while(this._bindings[b]&&a._priority<=this._bindings[b]._priority);this._bindings.splice(b+1,0,a)},_indexOfListener:function(a,b){for(var c,d=this._bindings.length;d--;)if(c=this._bindings[d],c._listener===a&&c.context===b)return d;return-1},has:function(a,b){return-1!==this._indexOfListener(a,b)},add:function(a,b,d){return c(a,"add"),this._registerListener(a,!1,b,d)},addOnce:function(a,b,d){return c(a,"addOnce"),this._registerListener(a,!0,b,d)},remove:function(a,b){c(a,"remove");var d=this._indexOfListener(a,b);return-1!==d&&(this._bindings[d]._destroy(),this._bindings.splice(d,1)),a},removeAll:function(){for(var a=this._bindings.length;a--;)this._bindings[a]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active){var a,b=Array.prototype.slice.call(arguments),c=this._bindings.length;if(this.memorize&&(this._prevParams=b),c){a=this._bindings.slice(),this._shouldPropagate=!0;do c--;while(a[c]&&this._shouldPropagate&&a[c].execute(b)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var e=d;e.Signal=d,"function"==typeof define&&define.amd?define("signals",[],function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:a.signals=e}(this),define("com/fido/loader/Cache",["require","exports","module"],function(a,b,c){var d=function(){this._json={},this._text={}};d.prototype.addJson=function(a,b){this._json[b]=a},d.prototype.addText=function(a,b){this._text[b]=a},d.prototype.getJson=function(a){return this._json[a]?this._json[a]:void 0},d.prototype.getText=function(a){return this._text[a]?this._text[a]:void 0},c.exports=new d}),define("com/fido/loader/Loader",["require","exports","module","PIXI","signals","com/fido/loader/Cache"],function(a,b,c){var d=a("PIXI"),e=a("signals"),f=a("com/fido/loader/Cache"),g=function(){this.crossdomain=!1,window.XDomainRequest&&this.crossdomain?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3e3,this.ajaxRequest.onerror=function(){},this.ajaxRequest.ontimeout=function(){},this.ajaxRequest.onprogress=function(){}):window.XMLHttpRequest&&(this.ajaxRequest=new window.XMLHttpRequest),this.ajaxRequest.onload=this._onFileLoaded.bind(this),this.ajaxRequest.onreadystatechange=function(){},this.fileCount=0,this.filesToLoad=[],this.fontsToLoad=[],this.pixiAssetsToLoad=[],this.soundsToLoad=[],this.customToLoad=[],this.onComplete=new e,this.onProgress=new e};g.prototype.addFonts=function(a){this.fontsToLoad=this.fontsToLoad.concat(a)},g.prototype.addText=function(a,b){var c={url:a,id:b,type:g.TEXT};this.filesToLoad.push(c)},g.prototype.addJson=function(a,b){var c={url:a,id:b,type:g.JSON};this.filesToLoad.push(c)},g.prototype.addPixiAssets=function(a){this.pixiAssetsToLoad=this.pixiAssetsToLoad.concat(a)},g.prototype.addCSS=function(a){var b=document.createElement("link");b.type="text/css",b.rel="stylesheet",b.href=a,document.getElementsByTagName("head")[0].appendChild(b)},g.prototype.addCustom=function(a){var b={object:a,type:g.CUSTOM};this.filesToLoad.push(b)},g.prototype.load=function(){this._loadFonts()},g.prototype._loadFiles=function(){this.fileCount=0,this.filesToLoad.length?this._loadNextFile():this._loadPixiAssets()},g.prototype._loadNextFile=function(){var a=this.filesToLoad[this.fileCount];a.type===g.CUSTOM?(a.object.onLoaded.addOnce(this._onFileLoaded,this),a.object.load()):(this.ajaxRequest.open("GET",a.url,!0),this.ajaxRequest.send())},g.prototype._onFileLoaded=function(){var a=this.filesToLoad[this.fileCount];if(a.type===g.CUSTOM);else if(200!==this.ajaxRequest.status);else switch(a.type){case g.TEXT:var b=this.ajaxRequest.responseText;f.addText(b,a.id);break;case g.JSON:var c=JSON.parse(this.ajaxRequest.responseText);f.addJson(c,a.id)}this.fileCount++,this._onProgress(),this.fileCount===this.filesToLoad.length?this._loadPixiAssets():this._loadNextFile()},g.prototype._loadPixiAssets=function(){return 0===this.pixiAssetsToLoad.length?void this._onComplete():(this.pixiAssetLoader=new d.AssetLoader(this.pixiAssetsToLoad,!1),this.pixiAssetLoader.onComplete=this._onComplete.bind(this),this.pixiAssetLoader.onProgress=this._onProgress.bind(this),void this.pixiAssetLoader.load())},g.prototype._loadFonts=function(){return 0===this.fontsToLoad.length?void this._loadFiles():void WebFont.load({custom:{families:this.fontsToLoad,urls:[ASSET_URL+"fonts/fonts.css"]},active:function(){for(var a=0;a<this.fontsToLoad.length;a++){var b=new d.Text("cheeky",{font:"32px "+this.fontsToLoad});b.updateText()}this._loadFiles()}.bind(this)})},g.prototype._onComplete=function(){this.onComplete.dispatch()},g.prototype._onProgress=function(){var a=this.filesToLoad.length+this.pixiAssetsToLoad.length,b=this.fileCount;this.pixiAssetLoader&&(b+=this.pixiAssetsToLoad.length-this.pixiAssetLoader.loadCount),this.onProgress.dispatch(b/a)},g.TEXT=0,g.JSON=1,g.CUSTOM=2,c.exports=g}),define("com/fido/app/transitions/AlphaTransition",["require","exports","module"],function(a,b,c){AlphaTransition=function(){},AlphaTransition.constructor=AlphaTransition,AlphaTransition.prototype.begin=function(a,b,c){this.screenManager=a,this.currentScreen=b,this.nextScreen=c,this.currentScreen?(this.currentScreen.onHide&&this.currentScreen.onHide(),TweenLite.to(this.currentScreen,.4,{alpha:0,onComplete:this.onFadeout.bind(this)})):this.onFadeout()},AlphaTransition.prototype.onFadeout=function(){this.currentScreen&&(this.currentScreen.onHidden&&this.currentScreen.onHidden(),this.screenManager.container.removeChild(this.currentScreen),this.currentScreen.alpha=1),this.nextScreen.alpha=0,this.nextScreen.onShow&&this.nextScreen.onShow(),this.nextScreen.resize&&this.nextScreen.resize(this.screenManager.w,this.screenManager.h),TweenLite.to(this.nextScreen,.4,{alpha:1,onComplete:this.onFadein.bind(this)}),this.screenManager.container.addChild(this.nextScreen)},AlphaTransition.prototype.onFadein=function(){this.nextScreen.onShown&&this.nextScreen.onShown(),this.screenManager.onTransitionComplete()},AlphaTransition.prototype.resize=function(a,b){this.w=a,this.h=b},c.exports=AlphaTransition}),define("com/fido/app/AssetManager",["require","exports","module","PIXI","signals"],function(a,b,c){var d=a("PIXI"),e=a("signals"),f=function(){this.groupHash={},this.onAssetsLoaded=new e,this.onAssetsLoadBegin=new e,this.loadCount=0};f.prototype.registerGroup=function(a,b){var c={assets:b,id:a,loaded:!1};this.groupHash[a]=c},f.prototype.activateGroups=function(a){for(var b=[],c=0;c<a.length;c++){var e=this.groupHash[a[c]];e&&!e.loaded&&b.push(e)}for(var f=[],c=0;c<b.length;c++){var e=b[c];e.loaded=!0,f=f.concat(e.assets)}if(0===f.length)return void this.onAssetsLoaded.dispatch();var g=new d.AssetLoader(f,!1);g.onComplete=this._onComplete.bind(this),g.onProgress=this._onProgress.bind(this),g.load(),this.onAssetsLoadBegin.dispatch()},f.prototype.unloadGroup=function(){},f.prototype.unloadGroup=function(){},f.prototype.freeGroup=function(){},f.prototype._onProgress=function(){},f.prototype._onComplete=function(){this.onAssetsLoaded.dispatch()},c.exports=new f}),define("com/fido/app/ScreenManager",["require","exports","module","PIXI","./transitions/AlphaTransition","com/fido/app/AssetManager"],function(a,b,c){var d=a("PIXI"),e=a("./transitions/AlphaTransition"),f=a("com/fido/app/AssetManager");ScreenManager=function(a,b,c){this.container=a||new d.DisplayObjectContainer,this.screens={},this.currentScreen,this.fading=!1,this.w=b||400,this.h=c||400,this.history=[],this.defaultTransition=new e,this.transition=this.defaultTransition,this.active=!1,this.nextId=null},ScreenManager.constructor=ScreenManager,ScreenManager.prototype.gotoScreenByID=function(a,b){var c=this.screens[a];if(!c)throw new Error("screen not found with id : ",a);c._firstRun?(c._firstRun=!1,c.requiredAssets?(this.nextScreen=c,f.onAssetsLoaded.addOnce(this.onAssetsLoaded,this),f.activateGroups(c.requiredAssets)):(c.init&&c.init(),this.gotoScreen(c,b))):this.gotoScreen(c,b)},ScreenManager.prototype.onAssetsLoaded=function(a){var a=this.nextScreen;a.init&&a.init(),this.gotoScreen(a)},ScreenManager.prototype.addScreen=function(a,b){this.screens[b]=a,a._firstRun=!0,a._screenID=b,a.screenManager=this},ScreenManager.prototype.goBack=function(){this.history.pop();var a=this.history.pop();a&&this.gotoScreen(a)},ScreenManager.prototype.getScreenId=function(a){for(var b in this.screens)if(this.screens[b]===a)return b;return null},ScreenManager.prototype.gotoScreen=function(a){if(this.currentScreen!==a&&(this.history.push(a),this.nextScreen=a,!this.active)){this.active=!0,this.transition=a.transition||this.defaultTransition,this.transition.onResize&&this.transition.onResize(this.w,this.h);var b=this.currentScreen;this.nextScreen&&this.nextScreen.resize&&this.nextScreen.resize(this.w,this.h),this.currentScreen=a,this.transition.begin(this,b,this.nextScreen)}},ScreenManager.prototype.onTransitionComplete=function(){this.active=!1,this.currentScreen!=this.nextScreen&&this.gotoScreen(this.nextScreen)},ScreenManager.prototype.resize=function(a,b){this.w=a,this.h=b,this.transition.onResize&&this.transition.onResize(a,b),this.currentScreen&&this.currentScreen.resize&&this.currentScreen.resize(a,b)},c.exports=ScreenManager}),define("com/fido/system/Ticker",["require","exports","module","signals"],function(a,b,c){var d=a("signals"),e=function(){this.onUpdate=new d,this.updateBind=this.update.bind(this),this.active=!1,this.deltaTime=1,this.timeElapsed=0,this.lastTime=0,this.speed=1};e.prototype.start=function(){this.active||(this.active=!0,requestAnimationFrame(this.updateBind))},e.prototype.stop=function(){this.active&&(this.active=!1)},e.prototype.update=function(){if(this.active){requestAnimationFrame(this.updateBind);var a=(new Date).getTime(),b=a-this.lastTime;b>100&&(b=100),this.deltaTime=.06*b,this.deltaTime*=this.speed,this.onUpdate.dispatch(this.deltaTime),this.lastTime=a}},e.prototype.add=function(a,b){this.onUpdate.add(a,b)},e.prototype.remove=function(a,b){this.onUpdate.remove(a,b)},e.instance=new e,c.exports=e}),define("com/fido/system/Device",["require","exports","module"],function(a,b,c){Device=function(){this.arora=!1,this.chrome=!1,this.epiphany=!1,this.firefox=!1,this.mobileSafari=!1,this.ie=!1,this.ieVersion=0,this.midori=!1,this.opera=!1,this.safari=!1,this.webApp=!1,this.cocoonJS=!1,this.android=!1,this.chromeOS=!1,this.iOS=!1,this.linux=!1,this.macOS=!1,this.windows=!1,this.desktop=!1,this.pixelRatio=0,this.iPhone=!1,this.iPhone4=!1,this.iPad=!1,this.blob=!1,this.canvas=!1,this.localStorage=!1,this.file=!1,this.fileSystem=!1,this.webGL=!1,this.worker=!1,this.audioData=!1,this.webAudio=!1,this.ogg=!1,this.opus=!1,this.mp3=!1,this.wav=!1,this.m4a=!1,this.webm=!1;var a=navigator.userAgent;this._checkBrowser(a),this._checkOS(a),this._checkDevice(a),this._checkAudio(),this._checkFeatures(),this._checkIsMobile()},Device.prototype._checkBrowser=function(a){/Arora/.test(a)?this.arora=!0:/Chrome/.test(a)?this.chrome=!0:/Epiphany/.test(a)?this.epiphany=!0:/Firefox/.test(a)?this.firefox=!0:/Mobile Safari/.test(a)?this.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(a)||navigator.userAgent.match(/Trident.*rv[ :]*11\./)?(this.ie=!0,this.ieVersion=parseInt(RegExp.$1,10)):/Midori/.test(a)?this.midori=!0:/Opera/.test(a)?this.opera=!0:/Safari/.test(a)&&(this.safari=!0),navigator.standalone&&(this.webApp=!0),navigator.isCocoonJS&&(this.cocoonJS=!0)
},Device.prototype._checkOS=function(a){/Android/.test(a)?this.android=!0:/CrOS/.test(a)?this.chromeOS=!0:/iP[ao]d|iPhone/i.test(a)?(this.iOS=!0,this.iOS_version=parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||!1):/Linux/.test(a)?this.linux=!0:/Mac OS/.test(a)?this.macOS=!0:/Windows/.test(a)&&(this.windows=!0),(this.windows||this.macOS||this.linux)&&(this.desktop=!0)},Device.prototype._checkDevice=function(){this.pixelRatio=window.devicePixelRatio||1,this.iPhone=-1!==navigator.userAgent.toLowerCase().indexOf("iphone"),this.iPhone4=2===this.pixelRatio&&this.iPhone,this.iPad=-1!==navigator.userAgent.toLowerCase().indexOf("ipad")},Device.prototype._checkFeatures=function(){"undefined"!=typeof window.Blob&&(this.blob=!0),this.canvas=!!window.CanvasRenderingContext2D;try{this.localStorage=!!localStorage.getItem}catch(a){this.localStorage=!1}this.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),this.fileSystem=!!window.requestFileSystem,this.webGL=function(){try{var a=document.createElement("canvas");return!!window.WebGLRenderingContext&&(a.getContext("webgl")||a.getContext("experimental-webgl"))}catch(b){return!1}}(),(this.android||this.ie)&&(this.webGL=!1),this.worker=!!window.Worker,("ontouchstart"in document.documentElement||window.navigator.msPointerEnabled)&&(this.touch=!0)},Device.prototype._checkAudio=function(){this.audioData=!!window.Audio,this.webaudio=!(!window.webkitAudioContext&&!window.AudioContext);var a=document.createElement("audio"),b=!1;try{(b=!!a.canPlayType)&&(a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(this.ogg=!0),a.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(this.mp3=!0),a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(this.wav=!0),(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;").replace(/^no$/,""))&&(this.m4a=!0))}catch(c){}},Device.prototype._checkIsMobile=function(){var a=!1;!function(b){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=!0)}(navigator.userAgent||navigator.vendor||window.opera),this.mobile=a},Device.prototype.getInfo=function(){var a="DEVICE OUTPUT\n\n";return a+="---\n",a+="Browser Info :: \n",a+="Arora : "+this.arora+"\n",a+="Chrome : "+this.chrome+"\n",a+="Epiphany : "+this.epiphany+"\n",a+="Firefox : "+this.firefox+"\n",a+="Mobile Safari : "+this.mobileSafari+"\n",a+="IE : "+this.ie,a+=this.ie?" (Version "+this.ieVersion+")\n":"\n",a+="Midori : "+this.midori+"\n",a+="Opera : "+this.opera+"\n",a+="Safari : "+this.safari+"\n",a+="Web App : "+this.webApp+"\n",a+="CocoonJS : "+this.cocoonJS+"\n",a+="Android : "+this.android+"\n",a+="---\n",a+="Operating System :: \n",a+="Chrome OS : "+this.chromeOS+"\n",a+="iOS : "+this.iOS+"\n",a+="Linux : "+this.linux+"\n",a+="Mac OS : "+this.macOS+"\n",a+="Windows : "+this.windows+"\n",a+="Desktop : "+this.desktop+"\n",a+="---\n",a+="Device Type : \n",a+="Pixel Ratio : "+this.pixelRatio+"\n",a+="iPhone : "+this.iPhone+"\n",a+="iPhone 4 : "+this.iPhone4+"\n",a+="iPad : "+this.iPad+"\n",a+="---\n",a+="Features :: \n",a+="Blob : "+this.blob+"\n",a+="Canvas : "+this.canvas+"\n",a+="LocalStorage : "+this.localStorage+"\n",a+="File : "+this.file+"\n",a+="File System : "+this.fileSystem+"\n",a+="WebGL : "+this.webGL+"\n",a+="Workers : "+this.worker+"\n",a+="---\n",a+="Audio :: \n",a+="AudioData : "+this.audioData+"\n",a+="WebAudio : "+this.webAudio+"\n",a+="Supports .ogg : "+this.ogg+"\n",a+="Supports Opus : "+this.opus+"\n",a+="Supports .mp3 : "+this.mp3+"\n",a+="Supports .wav : "+this.wav+"\n",a+="Supports .m4a : "+this.m4a+"\n",a+="Supports .webm : "+this.webm},c.exports=new Device}),define("com/fido/utils/FrameWait",["require","exports","module"],function(a,b,c){var d=function(){this.updateBind=this.update.bind(this),this.waits=[]};d.prototype.wait=function(a,b){var c={callback:a,count:b||2};this.waits.push(c),requestAnimationFrame(this.updateBind)},d.prototype.update=function(){for(var a=this.waits.length-1;a>=0;a--){var b=this.waits[a];b.count--,b.count<=0&&(b.callback(),this.waits.splice(a,1))}this.waits.length>0&&requestAnimationFrame(this.updateBind)},c.exports=new d}),define("com/fido/app/LoaderScreen",["require","exports","module","PIXI","com/fido/system/Ticker","com/fido/utils/FrameWait","signals"],function(a,b,c){var d=a("PIXI"),e=a("com/fido/system/Ticker"),f=a("com/fido/utils/FrameWait"),g=a("signals"),h=function(a){d.DisplayObjectContainer.call(this),this.app=a,this.easeLoad=0,this.targetLoad=0,this.onReady=new g,this.onComplete=new g,this.initLoader()};h.prototype=Object.create(d.DisplayObjectContainer.prototype),h.prototype.initLoader=function(){this.barBg=(new d.Graphics).beginFill(3554156).drawRect(0,0,100,100),this.bar=(new d.Graphics).beginFill(16729508).drawRect(0,0,100,100),e.instance.add(this.update,this),this.resize(this.w,this.h),f.wait(this.showLoader.bind(this))},h.prototype.showLoader=function(){this.onReady.dispatch()},h.prototype.update=function(){this.easeLoad+=.3*(this.targetLoad-this.easeLoad),this.easeLoad>.99&&(this.easeLoad=1,e.instance.remove(this.update,this),this.onComplete.dispatch()),this.bar.scale.x=this.easeLoad},h.prototype.updateProgress=function(a){this.targetLoad=a},h.prototype.onHide=function(){e.instance.remove(this.update,this)},h.prototype.resize=function(a,b){this.w=a,this.h=b,this.barBg&&(this.barBg.scale.x=a/100,this.barBg.y=b/2-50)},c.exports=h}),define("com/fido/app/OrientationManager",["require","exports","module","com/fido/system/Ticker"],function(a,b,c){var d=a("com/fido/system/Ticker");OrientationManager=function(a){this.mode=a,this.rotateScreen=document.createElement("div"),this.rotateScreen.style.backgroundImage="url('"+ASSET_URL+"img/orientation_iphone.png')",this.rotateScreen.style.backgroundPosition="50% 50%",this.rotateScreen.style.backgroundColor="#000",this.rotateScreen.style.position="absolute",this.rotateScreen.style.top="0",this.rotateScreen.style.left="0",this.rotateScreen.style.bottom="0",this.rotateScreen.style.right="0",this.rotateScreen.style.zIndex=1e7,this.rotateScreen.style.display="none",this.rotateScreen.height="100%",this.rotateScreen.width="100%",this.rotateScreen.style.backgroundRepeat="no-repeat",this.rotateScreen.style.backgroundSize="50%",document.body.appendChild(this.rotateScreen),this.supportsOrientationChange="onorientationchange"in window,this.supportsOrientationChange&&window.addEventListener("orientationchange",this.checkOrientation.bind(this),!1)},OrientationManager.constructor=OrientationManager,OrientationManager.prototype.checkOrientation=function(){var a=90===window.orientation||-90===window.orientation;0===this.mode&&(a=!a),a?(d.instance.stop(),this.rotateScreen.style.display="block"):(d.instance.start(),this.rotateScreen.style.display="none")},OrientationManager.prototype.check=function(a,b){var c=0===this.mode?!(b>a):b>a,e=a/892,f=b/576,g=Math.max(e,f);this.rotateScreen.width=892*g,this.rotateScreen.height=576*g,this.rotateScreen.style.left=a/2-this.rotateScreen.width/2+"px",this.rotateScreen.style.top=b/2-this.rotateScreen.height/2+"px",this.supportsOrientationChange||(c?(d.instance.stop(),this.rotateScreen.style.display="block"):(d.instance.start(),this.rotateScreen.style.display="none"))},c.exports=OrientationManager}),define("com/fido/app/App",["require","exports","module","PIXI","com/fido/loader/Loader","com/fido/app/ScreenManager","com/fido/system/Ticker","com/fido/system/Device","com/fido/app/LoaderScreen","com/fido/app/OrientationManager","signals","com/fido/app/AssetManager"],function(a,b,c){var d=a("PIXI"),e=a("com/fido/loader/Loader"),f=a("com/fido/app/ScreenManager"),g=a("com/fido/system/Ticker"),h=a("com/fido/system/Device"),i=a("com/fido/app/LoaderScreen"),j=a("com/fido/app/OrientationManager"),k=a("signals"),l=(a("com/fido/app/AssetManager"),function(a){a=a||l.defaultOptions,this.options={};for(var b in l.defaultOptions)this.options[b]=a[b]||l.defaultOptions[b];this.setupPixi(),g.instance.start(),g.instance.add(this.update,this),this.options.orientationMode!==l.orientationModes.BOTH&&(this.orientationManager=new j(this.options.orientationMode)),this.screenManager=new f(null,300,300),this.stage.addChild(this.screenManager.container),this.loader=new e,this.onReady=new k});l.prototype.setupPixi=function(){var a=this.options;this.renderer=a.forceCanvas||h.android&&!h.chrome?new d.CanvasRenderer(a.width,a.height,h.android&&!h.chrome?{resolution:.5}:{}):d.autoDetectRenderer(a.width,a.height),window.WEBGL=d.isWebGL=this.renderer instanceof d.WebGLRenderer,this.view=this.renderer.view,this.view.style.position="absolute",this.stage=new d.Stage(a.backgroundColor),d.stage=this.stage},l.prototype.update=function(){this.renderer.render(this.stage)},l.prototype.startup=function(){this.loaderScreen=new this.options.loaderScreen(this),this.loaderScreen.onReady.addOnce(this.onLoaderScreenReady,this),this.loaderScreen.onComplete.addOnce(this.onLoaderScreenComplete,this),this.screenManager.addScreen(this.loaderScreen,"loader"),this.screenManager.gotoScreenByID("loader")},l.prototype.onLoaderScreenReady=function(){this.loader.onComplete.addOnce(this.onAssetsLoaded,this),this.loader.onProgress.add(this.onProgresss,this),this.loader.load()},l.prototype.onAssetsLoaded=function(){},l.prototype.onProgresss=function(a){this.loaderScreen.updateProgress(a)},l.prototype.onLoaderScreenComplete=function(){this.onReady.dispatch()},l.prototype.resize=function(a,b){this.orientationManager&&this.orientationManager.check(a,b),this.options.resizeMode===l.resizeModes.DEFUALT?(this.renderer.resize(a,b),this.view.style.width="auto",this.view.style.height="auto"):this.this.options.resizeMode===l.resizeModes.CSS_RESIZE_PRESERVE_RATIO||this.options.resizeMode===l.resizeModes.CSS_RESIZE&&(this.view.style.width=a+"px",this.view.style.height=b+"px")},l.resizeModes={DEFUALT:0,CSS_RESIZE_PRESERVE_RATIO:1,CSS_RESIZE:2},l.orientationModes={LANDSCAPE:0,PORTRAIT:1,BOTH:2},l.defaultOptions={width:800,height:600,forceCanvas:!1,backgroundColor:16777215,resizeMode:l.resizeModes.DEFUALT,orientationMode:l.orientationModes.LANDSCAPE,loaderScreen:i},c.exports=l}),define("com/fido/system/VisibilityChecker",["require","exports","module","signals"],function(a,b,c){var d=a("signals"),e=function(){"undefined"!=typeof document.hidden?(this.hidden="hidden",this.visibilityChange="visibilitychange"):"undefined"!=typeof document.mozHidden?(this.hidden="mozHidden",this.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(this.hidden="msHidden",this.visibilityChange="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(this.hidden="webkitHidden",this.visibilityChange="webkitvisibilitychange"),this.onHide=new d,this.onShow=new d,this.init()};e.prototype.handleVisibilityChange=function(){document[this.hidden]?this.onHide.dispatch():this.onShow.dispatch()},e.prototype.init=function(){document.addEventListener(this.visibilityChange,this.handleVisibilityChange.bind(this),!1)},c.exports=new e}),define("com/fido/sound/SoundManager",["require","exports","module","signals","com/fido/system/VisibilityChecker"],function(a,b,c){var d=a("signals"),e=a("com/fido/system/VisibilityChecker"),f=function(){this.disabled=!1,this.preload=!0,this.sounds={},this.groups={},this.globalVolume=1,this.isMuted=!1,this.onMuteToggle=new d};f.prototype.addSound=function(a,b,c){if(!this.disabled&&!this.sounds[b]){c=c||{};var d=new Howl({urls:[a+".mp3",a+".ogg"],autoplay:c.autoplay||!1,loop:c.loop||!1,volume:c.volume||1});d.realVolume=c.volume||1,this.sounds[b]=d}},f.prototype.addGroup=function(a,b){if(!this.disabled&&!this.groups[b]){var c={index:0,type:0,sounds:a};this.groups[b]=c}},f.prototype.play=function(a){this.disabled||this.sounds[a].play()},f.prototype.playGroup=function(a){if(!this.disabled){var b=this.groups[a],c=Math.random()*b.sounds.length|0;this.sounds[b.sounds[c]].play()}},f.prototype.setVolume=function(a,b){if(!this.disabled){var c=this.sounds[a];c.realVolume=b,c.volume(b*this.globalVolume)}},f.prototype.stop=function(a){this.disabled||this.sounds[a].stop()},f.prototype.setPlaybackSpeed=function(a,b){if(!this.disabled){var c=this.sounds[a];c._playbackSpeed=b;var d="music"==a?0:1;c._webAudio&&Howler._howls[d]._audioNode[0]&&(Howler._howls[d]._audioNode[0].bufferSource.playbackRate.value=b)}},f.prototype.getPlaybackSpeed=function(a){if(!this.disabled){var b=this.sounds[a];return b._playbackSpeed||1}},f.prototype.setGlobalVolume=function(a){this.globalVolume=a;for(var b in this.sounds){var c=this.sounds[b];c.volume(c.realVolume*a)}},f.prototype.mute=function(){this.isMuted=!0,this.setGlobalVolume(0),this.onMuteToggle.dispatch(!0)},f.prototype.unmute=function(){this.isMuted=!1,this.setGlobalVolume(1),this.onMuteToggle.dispatch(!1)},f.prototype.check=function(){this.lastSeen=Date.now();var a=function(){lastSeen=Date.now(),setTimeout(a,50)};a();var c=document.getElementById("music");c.addEventListener("timeupdate",function(){Date.now()-b.lastSeen>100&&this.pause()},!1)},f.sfx=new f,f.music=new f,f.sfx.disabled=!Howler.usingWebAudio,e.onHide.add(Howler.mute,Howler),e.onShow.add(Howler.unmute,Howler),c.exports=f}),define("com/fido/utils/Utils",["require","exports","module","PIXI"],function(a,b,c){var d=a("PIXI"),e={};e.getTexturesFromFrames=function(a){for(var b=[],c=0;c<a.length;c++)b.push(new d.Texture.fromFrame(a[c]));return b},e.getTexturesFromImages=function(a){for(var b=[],c=0;c<a.length;c++)b.push(new d.Texture.fromImage(a[c]));return b},e.getTexturesFromFramesWithPrefix=function(a,b,c){var e=[];void 0==c&&(c=0);for(var f=0;b>f;f++){var g=f+c,h=a.replace("%%",10>g?"0"+g:g);e.push(new d.Texture.fromFrame(h))}return e},e.formatScore=function(a){if(window.doNotFormat)return""+a;for(var b=a.toString().split(""),c="",d=b.length,e=d%3-1,f=0;d>f;f++)c+=b[f],(f-e)%3==0&&f!=d-1&&(c+=",");return c},e.formatName=function(a){for(var b=a.split(" "),c=b.length-1;c>=0;c--)0!==b[c].length&&(wordArray=b[c].split(""),wordArray[0]=wordArray[0].toUpperCase(),b[c]=wordArray.join(""));return word=b.join(" ")},window.console||(window.console={log:function(){}}),e.get_query=function(a){for(var b=location.href,c=b.substring(b.indexOf("?")+1).split("&"),d=0,e={};d<c.length;d++)c[d]=c[d].split("="),e[c[d][0]]=decodeURIComponent(c[d][1]);return e.hasOwnProperty(a)?e[a]:!1},c.exports=e}),define("com/fido/physics/SimpleBouncer",["require","exports","module"],function(a,b,c){var d=function(){this.x=-50,this.dx=0,this.floor=0,this.bounce=1,this.gravity=1,this.max=30};d.prototype.update=function(){return this.dx+=this.gravity,this.dx<-this.max&&(this.dx=-this.max),this.dx>this.max&&(this.dx=this.max),this.x+=this.dx,this.x>this.floor?(this.x=this.floor,this.dx*=-this.bounce,!0):!1},d.prototype.reset=function(){this.x=0,this.dx=-10,this.floor=0},c.exports=d}),define("com/fido/physics/Spring",["require","exports","module"],function(a,b,c){var d=function(){this.x=0,this.ax=0,this.dx=0,this.tx=0,this.max=160,this.damp=.8,this.springiness=.3};d.prototype.update=function(){this.ax=(this.tx-this.x)*this.springiness,this.dx+=this.ax,this.dx*=this.damp,this.dx<-this.max?this.dx=-this.max:this.dx>this.max&&(this.dx=this.max),this.x+=this.dx},d.prototype.reset=function(){this.x=0,this.ax=0,this.dx=0,this.tx=0},c.exports=d}),define("com/duck/app/screens/LoaderScreen",["require","exports","module","PIXI","com/fido/system/Ticker","com/fido/utils/FrameWait","com/fido/utils/Utils","signals","com/fido/physics/SimpleBouncer","com/fido/physics/Spring","com/fido/loader/Cache","com/fido/loader/Loader"],function(a,b,c){var d=a("PIXI"),e=a("com/fido/system/Ticker"),f=a("com/fido/utils/FrameWait"),g=(a("com/fido/utils/Utils"),a("signals")),h=a("com/fido/physics/SimpleBouncer"),i=a("com/fido/physics/Spring"),j=a("com/fido/loader/Cache"),k=a("com/fido/loader/Loader"),l=function(a){d.DisplayObjectContainer.call(this),this.w=100,this.h=100,this.app=a,this.easeLoad=0,this.targetLoad=0,this.onReady=new g,this.onComplete=new g,this.bouncer=new h,this.spring=new i,this.spring2=new i,this.spring2.damp=.7,this.initLoader()};l.prototype=Object.create(d.DisplayObjectContainer.prototype),l.prototype.initLoader=function(){this.loader=new k,this.loader.addJson("config.json","config"),this.loader.addJson(TRANSLATION_URL+"strings.json","translation"),this.loader.addPixiAssets([ASSET_URL+"img/loader/loader.json",ASSET_URL+"img/localized/disney_logo.png"]),this.loader.onComplete.add(this.onAssetsLoaded,this),this.loader.load(),this.resize(this.w,this.h)},l.prototype.showLoader=function(){this.onReady.dispatch()},l.prototype.onAssetsLoaded=function(){var a=j.getJson("config").config,b=!("true"===a.REMOVE_LOADER_LOGO),c=j.getJson("translation").strings;b?(this.logo=new d.Sprite.fromImage(ASSET_URL+"img/localized/disney_logo.png"),this.logo.anchor.set(.5)):this.logo=new d.DisplayObjectContainer,this.logo.alpha=0;var g=new d.Text(c.STR_PRESENTS,{fill:"#fefbdc"});this.addChild(this.logo),this.logo.addChild(g),b&&(g.y=45),g.anchor.set(.5),this.presents=g,this.loadingContainer=new d.DisplayObjectContainer,this.loadingBg=(new d.Graphics).beginFill(5992322).drawRect(30,35,560,40),this.loadingContainer.addChild(this.loadingBg),this.loadingWater=new d.Sprite.fromFrame("loader_fill.png");var h=new d.Sprite.fromFrame("loader_fill.png");this.loadingWater.addChild(h),h.x=h.width,this.loadingWater.y=25,this.loadingContainer.addChild(this.loadingWater),this.loadingMask=(new d.Graphics).beginFill(5992322).drawRect(0,35,515,45),this.loadingMask.x=45,this.loadingContainer.addChild(this.loadingMask),this.loadingWater.mask=this.loadingMask,this.loadingCap=new d.Sprite.fromFrame("loader_end.png"),this.loadingContainer.addChild(this.loadingCap),this.loadingCap.y=30,this.loaderFrame=new d.Sprite.fromFrame("loader_frame.png"),this.loadingContainer.addChild(this.loaderFrame),this.gubbles=new d.Sprite.fromFrame("loader_gubbles.png"),this.loadingContainer.addChild(this.gubbles),this.gubbles.anchor.set(.5),this.addChild(this.loadingContainer),this.loadingContainer.alpha=0,TweenLite.to(this.loadingContainer,.3,{alpha:1,ease:Sine.easeOut}),e.instance.add(this.update,this),this.resize(this.w,this.h),this.dx=5,this.jumping=!1,this.bouncer.x=-200,f.wait(this.showLoader.bind(this))},l.prototype.update=function(){var a=this.bouncer.update();this.loadingWater.x+=8*e.instance.deltaTime,this.loadingWater.x+=this.loadingWater.width,this.loadingWater.x%=this.loadingWater.width,this.loadingWater.x-=this.loadingWater.width,a&&(this.spring.dx=1,this.spring2.dx=-10),this.spring.update(),this.spring2.update(),this.loadingContainer.pivot.y=this.spring2.x,this.gubbles.scale.x=.9+.2*this.spring.x,this.gubbles.scale.y=.9-.2*this.spring.x,this.gubbles.position.y=this.bouncer.x-30;var b=.1*(this.targetLoad-this.easeLoad);b>.01&&(b=.01),this.easeLoad+=b,this.jumping||this.easeLoad>.99&&a?(this.jumping=!0,this.bouncer.floor=1e5,this.gubbles.x+=this.dx,this.dx*=.99,this.gubbles.y>900&&(e.instance.remove(this.update,this),TweenLite.to(this.loadingContainer,.4,{alpha:0,ease:Sine.easeOut,onComplete:function(){TweenLite.to(this.logo,1,{alpha:1,ease:Sine.easeIn,delay:1,onComplete:function(){TweenLite.to(this.logo,1,{alpha:0,ease:Sine.easeIn,delay:1,onComplete:function(){this.onComplete.dispatch()}.bind(this)})}.bind(this)})}.bind(this)}))):this.gubbles.x=540*this.easeLoad+20,this.loadingCap.x=45+515*this.easeLoad-3,this.loadingMask.scale.x=1e-7+this.easeLoad},l.prototype.updateProgress=function(a){this.targetLoad=a},l.prototype.onHide=function(){e.instance.remove(this.update,this)},l.prototype.resize=function(a,b){this.w=a,this.h=b,this.loadingContainer&&(this.loadingContainer.x=a/2-304,this.loadingContainer.y=b/2-54,this.logo.x=a/2,this.logo.y=b/2)},c.exports=l}),define("com/fido/ui/buttons/Button",["require","exports","module","signals"],function(a,b,c){var d=a("signals"),e=function(a){if(!a)throw"FIDO: Button view must not be undefined";this.view=a,this.onPress=new d,this.onDown=new d,this.onUp=new d,this.view.interactive=!0,this.view.buttonMode=!0,this.view.mousedown=this.view.touchstart=this.onDown.dispatch.bind(this,this),this.view.mouseupoutside=this.view.mouseup=this.view.touchend=this.onUp.dispatch.bind(this,this),this.view.click=this.view.tap=this.onPress.dispatch.bind(this,this)};e.constructor=e,c.exports=e}),define("com/fido/utils/ThreeSlice",["require","exports","module","PIXI"],function(a,b,c){var d=a("PIXI"),e=function(a,b,c){this.left=new d.Sprite(a),this.middle=new d.Sprite(b),this.right=new d.Sprite(c),d.DisplayObjectContainer.call(this),this.addChild(this.left),this.addChild(this.middle),this.addChild(this.right)};e.prototype=Object.create(d.DisplayObjectContainer.prototype),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(a){this._width=a,this.left.position.x=0,this.middle.position.x=this.left.width,this.middle.width=a-(this.left.width+this.right.width),this.right.position.x=this.middle.position.x+this.middle.width-1}}),e.fromFrames=function(a,b,c){return new e(d.Texture.fromFrame(a),d.Texture.fromFrame(b),d.Texture.fromFrame(c))},c.exports=e}),define("com/duck/app/buttons/AabButton",["require","exports","module","PIXI","com/fido/ui/buttons/Button","com/fido/utils/ThreeSlice"],function(a,b,c){var d=a("PIXI"),e=a("com/fido/ui/buttons/Button"),f=a("com/fido/utils/ThreeSlice"),g=function(a){this.label=new d.Text(a,{fill:"#FFFFFF"}),this.label.x=23,this.label.y=32;var b=this.createBackground(this.label.width);b.addChild(this.label),e.call(this,b)};g.prototype=Object.create(e.prototype),g.prototype.createBackground=function(a){var b=f.fromFrames("3_slice_left_frame.png","3_slice_mid_frame.png","3_slice_right_frame.png"),c=(new d.Graphics).beginFill(3516639).drawRect(0,0,100,71);b.addChildAt(c,0),b.width=Math.max(a+40,90),c.scale.x=(b.width-14)/100,c.position.x=10,c.position.y=11;var e=!0;return e&&(this.rolloverMask=(new d.Graphics).beginFill(16763904).drawRect(0,0,100,71),this.rolloverMask.position.x=10,this.rolloverMask.position.y=11,this.rolloverMask.scale.x=c.scale.x,b.addChild(this.rolloverMask),b.mouseover=this.onMouseOver.bind(this),b.mouseout=this.onMouseOut.bind(this),b.touchstart=this.onMouseOver.bind(this),b.touchend=b.touchendoutside=this.onMouseOut.bind(this)),b.hitArea=new d.Rectangle(0,0,Math.max(a+40,90),90),b},g.prototype.onMouseOver=function(){},g.prototype.onMouseOut=function(){},c.exports=g}),define("com/duck/app/buttons/BaseAabButton",["require","exports","module","PIXI","com/fido/ui/buttons/Button","com/fido/utils/ThreeSlice","com/fido/system/Ticker"],function(a,b,c){var d=a("PIXI"),e=a("com/fido/ui/buttons/Button"),f=a("com/fido/utils/ThreeSlice"),g=(a("com/fido/system/Ticker"),function(a){e.call(this,a)});g.prototype=Object.create(e.prototype),g.prototype.createBackground=function(a,b){b=b||1,a/=b;var c=f.fromFrames("3_slice_left_frame.png","3_slice_mid_frame.png","3_slice_right_frame.png"),e=(new d.Graphics).beginFill(3516639).drawRect(0,0,100,71);c.addChildAt(e,0),c.width=Math.max(a+40,90),e.scale.x=(c.width-14)/100,e.position.x=10,e.position.y=11;return this.blueBg=e,c.scale.set(b),c.pivot.x=c.width/2,c.pivot.y=45,this.bg=c,c},g.prototype.activateDefaultRollover=function(){this.view.mouseover=this.onMouseOver.bind(this),this.view.mouseout=this.onMouseOut.bind(this),this.view.touchstart=this.onMouseOver.bind(this),this.view.touchend=this.view.touchendoutside=this.onMouseOut.bind(this),this.count=0,this.scale=1,this.intensity=.1,this.defaultScale=1,this.overScale=1.1},g.prototype.toggleOn=function(){this.view.interactive=!1},g.prototype.toggleOff=function(){this.view.interactive=!0},g.prototype.onMouseOver=function(){TweenLite.to(this.view.scale,.5,{x:this.overScale,y:this.overScale,ease:Elastic.easeOut}),TweenLite.to(this.view,.75,{rotation:.1*(Math.random()-.5),ease:Elastic.easeOut})},g.prototype.onMouseOut=function(){TweenLite.to(this.view.scale,.5,{x:this.defaultScale,y:this.defaultScale,ease:Elastic.easeOut}),TweenLite.to(this.view,.75,{rotation:0,ease:Elastic.easeOut})},c.exports=g}),define("com/duck/app/buttons/AabLabelButton",["require","exports","module","PIXI","./BaseAabButton","com/fido/sound/SoundManager"],function(a,b,c){var d=a("PIXI"),e=a("./BaseAabButton"),f=(a("com/fido/sound/SoundManager"),function(a,b){this.label=new d.Sprite.fromFrame(a),this.label.anchor.set(.5),b&&(this.label.x=-b/2+this.label.width/2+5),b=b||this.label.width+10;var c=.7;this.createBackground(b,c);var f=new d.DisplayObjectContainer;f.addChild(this.bg);var g=b+20;f.hitArea=new d.Rectangle(-g/2,-90*c/2,g,90*c),f.addChild(this.label),e.call(this,f),f.mousedown=f.touchstart=this.onTouch.bind(this),this.activateDefaultRollover()});f.prototype=Object.create(e.prototype),f.prototype.onTouch=function(){},c.exports=f}),define("com/duck/app/buttons/AabIconButton",["require","exports","module","PIXI","./BaseAabButton"],function(a,b,c){var d=a("PIXI"),e=a("./BaseAabButton"),f=function(a){var b=this.createBackground(10);this.icon=new d.Sprite.fromFrame(a),this.icon.anchor.set(.5),this.icon.position.set(45),b.addChild(this.icon),e.call(this,b),b.hitArea=new d.Rectangle(0,0,90,90);b.mousedown=b.touchstart=this.onTouch.bind(this),this.activateDefaultRollover()};f.prototype=Object.create(e.prototype),f.prototype.onTouch=function(){},f.prototype.setIcon=function(a){this.icon.setTexture(d.Texture.fromFrame(a))},f.prototype.setSize=function(a){this.view.scale.set(a),this.defaultScale=a,this.overScale=1.1*a},c.exports=f}),define("com/duck/app/buttons/WaterButton",["require","exports","module","PIXI","com/fido/ui/buttons/Button","com/fido/sound/SoundManager"],function(a,b,c){var d=a("PIXI"),e=a("com/fido/ui/buttons/Button"),f=a("com/fido/sound/SoundManager"),g=function(a,b){var c=new d.Sprite(d.Texture.fromFrame(b?"button_big_extrude.png":"button_extrude.png"));c.anchor.set(.5),e.call(this,c),this.colorFrame=d.Sprite.fromFrame(b?"button_big_col.png":"button_col.png"),this.colorFrame.anchor.set(.5),this.blackFrame=d.Sprite.fromFrame(b?"button_big_stroke.png":"button_stroke.png"),this.blackFrame.anchor.set(.5),this.blackFrame.position.set(10,-10),this.blackFrame.pivot.set(1,-1),c.addChild(this.colorFrame),a&&(this.icon=new d.Sprite(a),this.icon.anchor.set(.5),this.icon.x=-5,this.icon.y=-10,this.colorFrame.addChild(this.icon)),c.addChild(this.blackFrame),this._downRatio=0,this._onUp(),this.__isOver=!1,this.__isDown=!1,this.onDown.add(this._onDown,this),this.onUp.add(this._onUp,this),this.view.mouseover=this._onOver.bind(this),this.view.mouseout=this._onOut.bind(this),this.colorFrame.pivot.set(-10,-10)};g.prototype=Object.create(e.prototype),Object.defineProperty(g.prototype,"downRatio",{get:function(){return this._downRatio},set:function(a){this._downRatio=a;var b=1.08+(1-1.08)*this._downRatio,c=10,d=2,e=-10,f=-2;this.colorFrame.position.x=d+(c-d)*a,this.colorFrame.position.y=f+(e-f)*a,this.blackFrame.position.x=d+(c-d)*a,this.blackFrame.position.y=f+(e-f)*a,this.colorFrame.scale.set(b),this.blackFrame.scale.set(b),this.__isDown=!1,this.__isOver=!1}}),g.prototype._onOver=function(){TweenLite.to(this.colorFrame.pivot,.4,{x:0,y:0,ease:Elastic.easeOut}),this.__isOver=!1,f.sfx.play("roll")},g.prototype._onOut=function(){this.__isOver=!0,TweenLite.to(this.colorFrame.pivot,.4,{x:-10,y:-10,ease:Elastic.easeOut})},g.prototype._onDown=function(){this.__isDown=!0,this.icon&&(this.icon.y=1),TweenLite.to(this,.4,{downRatio:0,ease:Elastic.easeOut}),f.sfx.play("press")},g.prototype._onUp=function(){this.__isDown=!1,this.icon&&(this.icon.y=0),TweenLite.to(this,.4,{downRatio:1,ease:Elastic.easeOut}),!this.__isOver},g.fromFrames=function(a,b,c){return new g(d.Texture.fromFrame(a),d.Texture.fromFrame(b),c?d.Texture.fromFrame(c):null)},g.smallButton=function(a){return new g(a?d.Texture.fromFrame(a):null,!1)},g.bigButton=function(a){return new g(a?d.Texture.fromFrame(a):null,!0)},g.closeButton=function(){return new g(d.Texture.fromFrame("close_up.png"),d.Texture.fromFrame("close_up.png"),null)},c.exports=g}),define("com/fido/game/gridworld/GridCell",["require","exports","module"],function(a,b,c){var d=function(a){this.id=0,this.owner,this.up,this.down,this.left,this.right,this.neighbors=[],this.x,this.y,this.centerX,this.centerY,this.realX,this.realY,this.nextCell,this.f=0,this.g=0,this.h=0,this.cost=.1,this.visited=!1,this.closed=!1,this.parent=null,this.view=(new PIXI.Graphics).beginFill(a?13421772:39167).drawRect(0,0,80,80).endFill()};c.exports=d}),define("com/fido/game/gridworld/astar/graph",["require","exports","module"],function(a,b,c){function d(a){for(var b=[],c=0;c<a.length;c++){b[c]=[];for(var d=0,f=a[c];d<f.length;d++)b[c][d]=new e(c,d,f[d])}this.input=a,this.nodes=b}function e(a,b,c){this.data={},this.x=a,this.y=b,this.pos={x:a,y:b},this.type=c}function f(a){this.content=[],this.scoreFunction=a}var g={OPEN:1,WALL:0};d.prototype.toString=function(){for(var a,b,c,d,e="\n",f=this.nodes,g=0,h=f.length;h>g;g++){for(a="",b=f[g],c=0,d=b.length;d>c;c++)a+=b[c].type+" ";e=e+a+"\n"}return e},e.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},e.prototype.isWall=function(){return this.type==g.WALL},f.prototype={push:function(a){this.content.push(a),this.sinkDown(this.content.length-1)},pop:function(){var a=this.content[0],b=this.content.pop();return this.content.length>0&&(this.content[0]=b,this.bubbleUp(0)),a},remove:function(a){var b=this.content.indexOf(a),c=this.content.pop();b!==this.content.length-1&&(this.content[b]=c,this.scoreFunction(c)<this.scoreFunction(a)?this.sinkDown(b):this.bubbleUp(b))},size:function(){return this.content.length},rescoreElement:function(a){this.sinkDown(this.content.indexOf(a))},sinkDown:function(a){for(var b=this.content[a];a>0;){var c=(a+1>>1)-1,d=this.content[c];if(!(this.scoreFunction(b)<this.scoreFunction(d)))break;this.content[c]=b,this.content[a]=d,a=c}},bubbleUp:function(a){for(var b=this.content.length,c=this.content[a],d=this.scoreFunction(c);;){var e=a+1<<1,f=e-1,g=null;if(b>f){var h=this.content[f],i=this.scoreFunction(h);d>i&&(g=f)}if(b>e){var j=this.content[e],k=this.scoreFunction(j);(null===g?d:i)>k&&(g=e)}if(null===g)break;this.content[a]=this.content[g],this.content[g]=c,a=g
}}},c.exports=f}),define("com/fido/game/gridworld/astar/astar",["require","exports","module","./graph"],function(a,b,c){var d=a("./graph"),e=function(){};e.prototype.resetGrid=function(a){for(i=0;i<a.totalCells;i++){var b=a.cells[i];b.f=0,b.g=0,b.h=0,b.cost=b.id,b.visited=!1,b.closed=!1,b.parent=null}},e.prototype.search=function(a,b,c,d){this.resetGrid(a),d=d||this.manhattan;var e=this.heap();for(e.push(b);e.size()>0;){var f=e.pop();if(f===c){for(var g=f,h=[];g.parent;)h.push(g),g=g.parent;return h.reverse()}f.closed=!0;for(var i=f.neighbors,j=0,k=i.length;k>j;j++){var l=i[j];if(!l.closed&&1!==l.id){var m=f.g+l.cost,n=l.visited;(!n||m<l.g)&&(l.visited=!0,l.parent=f,l.h=l.h||d(l,c),l.g=m,l.f=l.g+l.h,n?e.rescoreElement(l):e.push(l))}}}return[]},e.prototype.heap=function(){return new d(function(a){return a.f})},e.prototype.manhattan=function(a,b){var c=Math.abs(b.x-a.x),d=Math.abs(b.y-a.y);return c+d},c.exports=e}),define("com/fido/game/gridworld/GridWorld",["require","exports","module","./GridCell","./astar/astar"],function(a,b,c){var d=a("./GridCell"),e=a("./astar/astar"),f=function(){this.cells=[],this.cellSize=80,this.cellWidth,this.cellHeight,this.totalCells,this.widthy=800,this.heighty=600,this.view=new PIXI.DisplayObjectContainer;var a=new PIXI.Text("HI GRI");this.view.addChild(a),this.astar=new e(this)};f.prototype.build=function(a){a=a||[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.cellWidth=13,this.cellHeight=8,this.totalCells=this.cellWidth*this.cellHeight,this.cells=[];for(var b=0;b<this.totalCells;b++)this.cells[b]=new d(b%2==0);for(b=0;b<this.totalCells;b++){var c=this.cells[b],e=b%this.cellWidth,f=b/this.cellWidth|0;c.x=e,c.y=f,c.realX=e*this.cellSize,c.realY=f*this.cellSize,c.centerX=c.realX+this.cellSize/2,c.centerY=c.realY+this.cellSize/2,c.id=a[b],c.owner=this,c.neighbors=[],0!=e&&(c.left=this.cells[b-1],c.neighbors.push(c.left)),e!=this.cellWidth-1&&(c.right=this.cells[b+1],c.neighbors.push(c.right)),f!=this.cellHeight-1&&(c.down=this.cells[b+this.cellWidth],c.neighbors.push(c.down)),0!=f&&(c.up=this.cells[b-this.cellWidth],c.neighbors.push(c.up)),c.view.x=c.x*this.cellSize,c.view.y=c.y*this.cellSize,this.view.addChild(c.view)}},f.prototype.getCell=function(a,b){var c=a/this.cellSize|0,d=b/this.cellSize|0;return c>this.cellWidth-1&&(c=this.cellWidth-1),d>this.cellHeight-1&&(d=this.cellHeight-1),this.cells[d*this.cellWidth+c]},c.exports=f}),define("com/fido/game/gridworld/GridWorldTest",["require","exports","module","PIXI","./GridWorld"],function(a,b,c){var d=a("PIXI"),e=a("./GridWorld"),f=function(){this.view=new d.DisplayObjectContainer,this.gridWorld=new e,this.gridWorld.build(),this.view.addChild(this.gridWorld.view),this.view.hitArea=new d.Rectangle(0,0,1e3,1e3),this.view.interactive=!0,this.view.buttonMode=!0,this.view.mousedown=this.onCellSelect.bind(this);var a=this.gridWorld.getCell(380,300);a.id=1,a.view.visible=!1,this.startCell=null,this.endCell=null};f.prototype.onCellSelect=function(a){var b=a.global,c=this.gridWorld.getCell(b.x,b.y);if(this.startCell&&!this.endCell){this.endCell=c;for(var d=this.gridWorld.astar.search(this.gridWorld,this.startCell,this.endCell),e=Math.random(),f=0;f<d.length;f++)d[f].view.alpha=e}else{for(var f=0;f<this.gridWorld.cells.length;f++)this.gridWorld.cells[f].view.alpha=1;this.startCell=c,this.endCell=null,c.view.alpha=.5}},c.exports=f}),define("com/fido/game/GameObjectPool",["require","exports","module"],function(a,b,c){GameObjectPool=function(a){this.classType=a,this.pool=[]},GameObjectPool.constructor=GameObjectPool,GameObjectPool.prototype.getObject=function(){var a=this.pool.pop();return a||(a=new this.classType),a},GameObjectPool.prototype.returnObject=function(a){this.pool.push(a)},GameObjectPool.pools=[],GameObjectPool.idGenerator=1,GameObjectPool.getObject=function(a){a._CLASS_ID||(a._CLASS_ID=GameObjectPool.idGenerator++,GameObjectPool.pools[a._CLASS_ID]=new GameObjectPool(a));var b=GameObjectPool.pools[a._CLASS_ID].getObject();return b._CLASS_ID=a._CLASS_ID,b},GameObjectPool.returnObject=function(a){GameObjectPool.pools[a._CLASS_ID].returnObject(a)},c.exports=GameObjectPool}),define("com/fido/game/GameObject",["require","exports","module","signals"],function(a,b,c){function d(a){var b=(new PIXI.Graphics).beginFill(a||16711680).drawRect(-16,-16,32,32).endFill();return b}var e=(a("signals"),function(a){this.view=a||d(),this.view.go=this,this.position=new PIXI.Point,this.position.z=0,this.speed=new PIXI.Point,this.width=32,this.height=32,this.world=null});e.prototype.update=function(){},c.exports=e}),define("com/duck/game/donald/Collision",["require","exports","module"],function(a,b,c){var d={};d.circleLine=function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n;len=Math.sqrt((c-e)*(c-e)+(b-d)*(b-d));var o=(b-d)/len,p=(c-e)/len,q=(c-e)/(b-d),r=q*(0-b)+c;return n=90,f=-p*n+a.position.x,g=o*n+a.position.y,h=p*n+a.position.x,i=-o*n+a.position.y,j=(g-i)/(f-h),k=j*(0-f)+g,l=(k-r)/(q-j),m=j*l+k,(l>=b&&d>=l||b>=l&&l>=d||m>=c&&e>=m||c>=m&&m>=e)&&(l>=f&&h>=l||f>=l&&l>=h||m>=g&&i>=m||g>=m&&m>=i)?{x:l,y:m}:!1},d.lineLine=function(a,b,c,d,e,f,g,h){var i=((a*d-b*c)*(e-g)-(a-c)*(e*h-f*g))/((a-c)*(f-h)-(b-d)*(e-g)),j=((a*d-b*c)*(f-h)-(b-d)*(e*h-f*g))/((a-c)*(f-h)-(b-d)*(e-g));if(isNaN(i)||isNaN(j))return!1;if(a>=c){if(!(i>=c&&a>=i))return!1}else if(!(i>=a&&c>=i))return!1;if(b>=d){if(!(j>=d&&b>=j))return!1}else if(!(j>=b&&d>=j))return!1;if(e>=g){if(!(i>=g&&e>=i))return!1}else if(!(i>=e&&g>=i))return!1;if(f>=h){if(!(j>=h&&f>=j))return!1}else if(!(j>=f&&h>=j))return!1;return{x:i,y:j}},d.lineAABB=function(a,b){var c=a.x,d=a.x2,e=a.y,f=a.y2,g=b.x,h=b.x+b.width,i=b.y,j=b.y+b.height,k={x:0,y:0},l=Number.MAX_VALUE;if(g>=c&&g>=d||i>=e&&i>=f||c>=h&&d>=h||e>=j&&f>=j)return!1;var m=(f-e)/(d-c),n=m*(g-c)+e;if(n>i&&j>n){var o=(g-c)*(g-c)+(n-e)*(n-e);l>o&&(l=o,k.x=g,k.y=n)}if(n=m*(h-c)+e,n>i&&j>n){var o=(h-c)*(h-c)+(n-e)*(n-e);l>o&&(l=o,k.x=h,k.y=n)}var p=(i-e)/m+c;if(p>g&&h>p){var o=(p-c)*(p-c)+(i-e)*(i-e);l>o&&(l=o,k.x=p,k.y=i)}if(p=(j-e)/m+c,p>g&&h>p){var o=(p-c)*(p-c)+(j-e)*(j-e);l>o&&(l=o,k.x=p,k.y=j)}return l!==Number.MAX_VALUE?k:null},c.exports=d}),define("com/fido/physics/Line",["require","exports","module"],function(a,b,c){var d=function(){this.x,this.y,this.x2,this.y2};d.checkInterception=function(a,b){var c,d,e,f,g,h={x:null,y:null,onLine1:!1,onLine2:!1};return c=(b.y2-b.y)*(a.x2-a.x)-(b.x2-b.x)*(a.y2-a.y),0==c?h:(d=a.y-b.y,e=a.x-b.x,f=(b.x2-b.x)*d-(b.y2-b.y)*e,g=(a.x2-a.x)*d-(a.y2-a.y)*e,d=f/c,e=g/c,h.x=a.x+d*(a.x2-a.x),h.y=a.y+d*(a.y2-a.y),d>0&&1>d&&(h.onLine1=!0),e>0&&1>e&&(h.onLine2=!0),h)},d.checkInterceptionBox=function(a,b){for(var c=[a.x,a.x2,a.y,a.y2],d=[b.x,b.x+b.width,b.y,b.y+b.height],e=Math.NEGATIVE_INFINITY,f=Math.POSITIVE_INFINITY,g=0;4>g;g++)if(0==c[g]){if(d[g]<0)return!1}else{var h=d[g]/c[g];c[g]<0&&h>e?e=h:c[g]>0&&f>h&&(f=h)}return e>f||e>1||0>e?!1:!0},d.checkInterceptionBox=function(a,b){d.checkInterceptionBox2(a.x,a.y,a.x2,a.y2,b.x-b.width,b.y-b.width,b.x+b.width,b.y+b.height)},d.checkInterceptionBox2=function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p;return i=a,j=b,k=c-i,l=d-j,0==k&&0==l?0:(0!=k?(p=argument[4+2*(0>k)],n=(p-i)/k):n=0,0!=l?(p=argument[5+2*(0>l)],o=(p-j)/l):o=0,m=max(n,o),0>m?0:(_x=i+k*m,_y=j+l*m,o>=n&&(e>_x||_x>g)||n>=o&&(f>_y||_y>h)?0:1+(m>1)))},c.exports=d}),define("com/duck/game/donald/WaterSpray",["require","exports","module","PIXI","com/fido/game/GameObjectPool","com/fido/game/GameObject","./Collision","com/fido/physics/Line"],function(a,b,c){var d=a("PIXI"),e=(a("com/fido/game/GameObjectPool"),a("com/fido/game/GameObject"),a("./Collision"),a("com/fido/physics/Line"),function(){var a=30;points=[];for(var b=0;20>b;b++){points.push(new d.Point(b*a,0))}d.Rope.call(this,d.Texture.fromImage(ASSET_URL+"img/game/water_tile.png"),points),this.points=points,this.count=0,this.sprayShader=null,this.tick=0;var c=d.Texture.fromImage(ASSET_URL+"img/game/water_tile.png");c.baseTexture._powerOf2=!0,this.start=new d.Point(0,0),this.end=new d.Point(0,300),this.targetEnd=new d.Point(0,300),this.control=new d.Point(0,0),this.mid=new d.Point(0,0),this.direction=new d.Point(0,0),this.interactive=!0});e.prototype=Object.create(d.Rope.prototype),e.prototype.reset=function(){this.tick=0},e.prototype._renderWebGL=function(a){!this.visible||this.alpha<=0||(a.spriteBatch.stop(),this._vertexBuffer||(this.sprayShader=new f(a.gl),this._initWebGL(a)),a.shaderManager.setShader(this.sprayShader),this._renderStrip(a),a.spriteBatch.start())},e.prototype.quadraticCurveTo=function(){var a,b,c=this.points.length,d=this.points,e=this.start.x,f=this.start.y,g=this.end.x,h=this.end.y,i=this.control.x,j=this.control.y,k=this.mid.x-i,l=this.mid.y-j,m=Math.sqrt(k*k+l*l);k/=m,l/=m,i=this.mid.x+m*k*4,j=this.mid.y+m*l*4;for(var n=0,o=0;c>o;o++)n=o/c,a=e+(i-e)*n,b=f+(j-f)*n,d[o].x=a+(i+(g-i)*n-a)*n,d[o].y=b+(j+(h-j)*n-b)*n;return this},e.prototype.updateTransform=function(){this.tick-=1;var a=this.points;if(!(a.length<1)){this.end.x+=.3*(this.targetEnd.x-this.end.x),this.end.y+=.3*(this.targetEnd.y-this.end.y),this.quadraticCurveTo();var b,c=a[0],e={x:0,y:0};this.count-=.2;var f,g,h,i,j,k=this.verticies,l=a.length,m=20,n=50,o=this.end.x-this.start.x,p=this.end.y-this.start.y,q=Math.sqrt(o*o+p*p);this.sprayLength=q,o/=q,p/=q,this.direction.x=o,this.direction.y=p;var r=this.end.x-o*(q/2),s=this.end.y-p*(q/2);this.mid.x=r,this.mid.y=s,this.control.x+=.2*(r-this.control.x),this.control.y+=.2*(s-this.control.y),o*=q/20,p*=q/20;for(var t=0;l>t;t++)f=a[t],g=4*t,b=t<a.length-1?a[t+1]:f,e.y=-(b.x-c.x),e.x=b.y-c.y,h=10*(1-t/(l-1)),h>1&&(h=1),i=Math.sqrt(e.x*e.x+e.y*e.y),j=m+(n-m)*(t/l),e.x/=i,e.y/=i,j+=2*Math.sin(t+this.count),e.x*=j,e.y*=j,k[g]=f.x+e.x,k[g+1]=f.y+e.y,k[g+2]=f.x-e.x,k[g+3]=f.y-e.y,c=f;d.DisplayObjectContainer.prototype.updateTransform.call(this)}},e.prototype._renderStrip=function(a){var b=a.gl,c=a.projection,d=a.offset,e=this.sprayShader;b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA),b.uniformMatrix3fv(e.translationMatrix,!1,this.worldTransform.toArray(!0)),b.uniform2f(e.projectionVector,c.x,-c.y),b.uniform2f(e.offsetVector,-d.x,-d.y),b.uniform1f(e.alpha,this.worldAlpha),this.tick%=10/2.1,this.direction.set(1,0),b.uniform2f(e.tick,this.direction.x*this.tick*.1,this.direction.y*this.tick*.1),b.uniform1f(e.scale,this.sprayLength/256),this.dirty?(this.dirty=!1,b.bindBuffer(b.ARRAY_BUFFER,this._vertexBuffer),b.bufferData(b.ARRAY_BUFFER,this.verticies,b.STATIC_DRAW),b.vertexAttribPointer(e.aVertexPosition,2,b.FLOAT,!1,0,0),b.bindBuffer(b.ARRAY_BUFFER,this._uvBuffer),b.bufferData(b.ARRAY_BUFFER,this.uvs,b.STATIC_DRAW),b.vertexAttribPointer(e.aTextureCoord,2,b.FLOAT,!1,0,0),b.activeTexture(b.TEXTURE0),this.texture.baseTexture._dirty[b.id]?a.renderer.updateTexture(this.texture.baseTexture):b.bindTexture(b.TEXTURE_2D,this.texture.baseTexture._glTextures[b.id]),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this._indexBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,this.indices,b.STATIC_DRAW)):(b.bindBuffer(b.ARRAY_BUFFER,this._vertexBuffer),b.bufferSubData(b.ARRAY_BUFFER,0,this.verticies),b.vertexAttribPointer(e.aVertexPosition,2,b.FLOAT,!1,0,0),b.bindBuffer(b.ARRAY_BUFFER,this._uvBuffer),b.vertexAttribPointer(e.aTextureCoord,2,b.FLOAT,!1,0,0),b.activeTexture(b.TEXTURE0),this.texture.baseTexture._dirty[b.id]?a.renderer.updateTexture(this.texture.baseTexture):b.bindTexture(b.TEXTURE_2D,this.texture.baseTexture._glTextures[b.id]),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this._indexBuffer)),b.drawElements(b.TRIANGLE_STRIP,this.indices.length,b.UNSIGNED_SHORT,0)};var f=function(a){this._UID=d._UID++,this.gl=a,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform vec2 tick;","uniform float alpha;","uniform float scale;","uniform sampler2D uSampler;","void main(void) {","   vec2 textCord = vTextureCoord;","   textCord.x *= scale * 2.0;","   gl_FragColor = texture2D(uSampler, textCord + (tick*2.1)) * 0.8 * alpha;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"],this.init()};f.prototype.init=function(){var a=this.gl,b=d.compileProgram(a,this.vertexSrc,this.fragmentSrc);a.useProgram(b),this.uSampler=a.getUniformLocation(b,"uSampler"),this.projectionVector=a.getUniformLocation(b,"projectionVector"),this.offsetVector=a.getUniformLocation(b,"offsetVector"),this.colorAttribute=a.getAttribLocation(b,"aColor"),this.aVertexPosition=a.getAttribLocation(b,"aVertexPosition"),this.aTextureCoord=a.getAttribLocation(b,"aTextureCoord"),this.attributes=[this.aVertexPosition,this.aTextureCoord],this.translationMatrix=a.getUniformLocation(b,"translationMatrix"),this.alpha=a.getUniformLocation(b,"alpha"),this.tick=a.getUniformLocation(b,"tick"),this.scale=a.getUniformLocation(b,"scale"),this.program=b},c.exports=e}),define("com/fido/Flash",["require","exports","module","PIXI"],function(a,b,c){var d=a("PIXI"),e=function(a,b){d.Graphics.call(this),this.beginFill(16777215).drawRect(0,0,100,100),this.resize(a,b),this.alpha=0};e.prototype=Object.create(d.Graphics.prototype),e.prototype.flash=function(a,b){this.alpha=1,TweenLite.to(this,b||.5,{alpha:0,delay:a||0,ease:Expo.easeOut})},e.prototype.resize=function(a){this.scale.x=a/100,this.scale.y=a/100},c.exports=e}),define("com/fido/utils/HttpRequest",["require","exports","module","signals"],function(a,b,c){var d=a("signals"),e=function(){this.signals={},this.signals.completed=new d,this.signals.error=new d,this.requesting=!1,this.xmlRequest=null,this.result=null,this.crossDomain=!1};c.exports=e,e.toQueryString=function(a){var b=[];for(var c in a)b.push(c+"="+a[c].toString());var d="";return b.length&&(d+="?"+b.join("&")),d},e.toFormEncoded=function(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));var d=b.join("&").replace(/%20/g,"+");return d},e.prototype.send=function(a,b,c,d){if(!this.requesting){this.requesting=!0,this.parser=d;var f="";c&&"GET"===b&&(f=e.toQueryString(c)),a+=f;var g=3e4;if(this.crossDomain&&window.XDomainRequest?(this.xmlRequest=new window.XDomainRequest,this.xmlRequest.timeout&&(this.xmlRequest.timeout=g),this.xmlRequest.onerror=this.onError.bind(this),this.xmlRequest.ontimeout=this.onTimeout.bind(this),this.xmlRequest.onload=this.onLoad.bind(this)):window.XMLHttpRequest&&(this.xmlRequest=new XMLHttpRequest,this.xmlRequest.timeout&&(this.xmlRequest.timeout=g),this.xmlRequest.onerror=this.onError.bind(this),this.xmlRequest.ontimeout=this.onTimeout.bind(this),this.xmlRequest.onload=this.onLoad.bind(this)),this.xmlRequest.open(b,a,!0),"POST"===b){var h=e.toFormEncoded(c);window.XDomainRequest&&this.xmlRequest instanceof window.XDomainRequest?this.xmlRequest.send(e.toQueryString(c)):(this.xmlRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.xmlRequest.send(h))}else this.xmlRequest.send()}},e.prototype.onError=function(a){this.signals.error.dispatch("error",this)},e.prototype.onTimeout=function(a){this.signals.error.dispatch("timeout",this)},e.prototype.onLoad=function(){var a=this.xmlRequest.responseText;this.parser&&(a=this.parser(a)),this.signals.completed.dispatch(a,this)},e.prototype.onReadyStateChange=function(){switch(this.xmlRequest.readyState){case 0:break;case 1:break;case 2:break;case 3:break;case 4:0!==this.xmlRequest.status}}}),define("com/fido/system/LocalStorage",["require","exports","module"],function(a,b,c){var d=function(a){this.id=a,this.canSave=!1;try{localStorage.setItem(this.id+".access",!0),localStorage.removeItem(this.id+".access",!0),this.canSave=!0}catch(b){}};d.prototype.store=function(a,b){this.canSave&&localStorage.setItem(this.id+"."+a,b)},d.prototype.get=function(a){return localStorage.getItem(this.id+"."+a)||0},d.prototype.storeObject=function(a,b){this.canSave&&localStorage.setItem(this.id+"."+a,JSON.stringify(b))},d.prototype.getObject=function(a){return JSON.parse(localStorage.getItem(this.id+"."+a)||0)},d.prototype.remove=function(a){localStorage.removeItem(this.id+"."+a)},d.prototype.reset=function(){for(var a in localStorage)-1!==a.indexOf(this.id+".")&&localStorage.removeItem(a)},c.exports=d}),define("com/duck/app/Tracker",["require","exports","module","com/fido/utils/HttpRequest","com/fido/system/LocalStorage","com/fido/system/Device"],function(a,b,c){var d=a("com/fido/utils/HttpRequest"),e=a("com/fido/system/LocalStorage"),f=a("com/fido/system/Device"),g=function(){this.url="http://mobile.taiminh.com/duckwater",this.id="donaldsdunk_bd_bd",this.user_id=this.getUserId(),this.new_user=1,this.transaction_id=this.generateId(),this.locale=window.locale,this.requestPool=[]};g.prototype.init=function(a){this.id=a.id},g.prototype.trackAction=function(a,b,c,d){var e={app:"donaldsdunk_bd_bd",user_id:this.user_id,app_locale:this.locale,transaction_id:this.transaction_id,browser_id:this.user_id,network:"bd",view_network:"bd",level:c||"",message:d||"",tag:"game_action",action:a,context:b||"game"};this.send(e)},g.prototype.trackClick=function(){var a=(f.mobile?"mobile":"desktop",{app:"donaldsdunk_bd_bd",user_id:this.user_id,app_locale:this.locale,transaction_id:this.transaction_id,browser_id:this.user_id,network:"bd",view_network:"bd",is_new_user:this.new_user});this.send(a)},g.prototype.trackDevice=function(){var a=f.mobile?"mobile":"desktop",b={app:"donaldsdunk_bd_bd",user_id:this.user_id,app_locale:this.locale,transaction_id:this.transaction_id,browser_id:this.user_id,network:"bd",view_network:"bd",tag:"device_info",machine:a,user_agent:navigator.userAgent};this.send(b)},g.prototype.send=function(a){if(window.enableTracking){var b=this.requestPool.pop();b||(this.request=new d,this.request.crossDomain=!0,this.request.signals.completed.add(this.onRequestComplete,this)),this.request.send(this.url,"GET",a)}},g.prototype.onRequestComplete=function(a,b){this.requestPool.push(b)},g.prototype.getUserId=function(){var a=this.id+"_traker",b=new e(a),c=b.get("user_id");return c||(c=this.generateId(),b.store("user_id",c),this.new_user=0),c},g.prototype.generateId=function(){var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)});return a},c.exports=new g}),define("com/duck/app/screens/TitleScreen",["require","exports","module","PIXI","com/duck/app/buttons/AabButton","com/duck/app/buttons/AabLabelButton","com/duck/app/buttons/AabIconButton","com/fido/ui/buttons/Button","com/fido/system/Device","com/duck/app/buttons/WaterButton","com/fido/game/gridworld/GridWorldTest","com/duck/game/donald/WaterSpray","com/fido/loader/Cache","com/fido/Flash","com/fido/sound/SoundManager","com/duck/app/Tracker","com/duck/app/Tracker","com/duck/app/Tracker"],function(a,b,c){var d=a("PIXI"),e=(a("com/duck/app/buttons/AabButton"),a("com/duck/app/buttons/AabLabelButton"),a("com/duck/app/buttons/AabIconButton"),a("com/fido/ui/buttons/Button"),a("com/fido/system/Device")),f=a("com/duck/app/buttons/WaterButton"),g=(a("com/fido/game/gridworld/GridWorldTest"),a("com/duck/game/donald/WaterSpray"),a("com/fido/loader/Cache")),h=a("com/fido/Flash"),i=a("com/fido/sound/SoundManager"),j=function(a){this.app=a,d.DisplayObjectContainer.call(this)};j.prototype=Object.create(d.DisplayObjectContainer.prototype),j.prototype.init=function(){this.buttonContainer=new d.DisplayObjectContainer;var a=g.getJson("translation");this.playButton=f.bigButton("icon_play.png",!0),this.helpButton=f.smallButton("icon_help.png",!0),this.scoreButton=f.smallButton("icon_leaderboard.png",!0),this.isMobile=app.isMobile,this.flash=new h(1500,700),this.addChild(this.buttonContainer),this.playButton.onPress.add(this.onButtonPressed,this),this.helpButton.onPress.add(this.onButtonPressed,this),this.scoreButton.onPress.add(this.onButtonPressed,this),this.disneyLogo=new d.Sprite.fromImage(ASSET_URL+"img/localized/disney_logo.png"),this.disneyLogo.anchor.set(.5),this.addChild(this.disneyLogo),this.logo=new d.Sprite.fromImage(ASSET_URL+"img/localized/main_logo.png"),this.logo.anchor.set(.5),this.sub=new d.Text(a.strings.STR_TITLE_GAME,{fill:"#fefbdc",stroke:"#b40f20",strokeThickness:8,font:"56px Open Sans"}),this.subShadow=new d.Text(a.strings.STR_TITLE_GAME,{fill:"#001226",stroke:"#001226",strokeThickness:8,font:"56px Open Sans"}),this.subShadow.alpha=.5,this.sub.anchor.set(.5),this.sub.scale.x=.9,this.subShadow.scale.x=this.sub.scale.x,this.inText=new d.Text(a.strings.STR_TITLE_IN,{fill:"#fefbdc",stroke:"#b40f20",strokeThickness:8,font:"36px Open Sans"}),this.inTextShadow=new d.Text(a.strings.STR_TITLE_IN,{fill:"#001226",stroke:"#001226",strokeThickness:8,font:"36px Open Sans"}),this.inText.anchor.set(.5),this.inTextShadow.alpha=.5,this.logo.scale.x=.9,this.logo.anchor.set(.5),this.addChild(this.logo),this.buttonContainer.addChild(this.playButton.view),this.buttonContainer.addChild(this.helpButton.view),window.showLeaderboards&&this.buttonContainer.addChild(this.scoreButton.view),this.playButton.view.position.set(90,0),window.flipLanguage&&(this.playButton.icon.scale.x*=-1),this.helpButton.view.position.set(-90,-55),this.scoreButton.view.position.set(-90,55),this.helpButton.view.rotation=-.05,this.scoreButton.view.rotation=.05,this.logo.position.set(568,200),this.addChild(this.buttonContainer),this.container=new d.DisplayObjectContainer,this.duck=new d.Sprite.fromFrame("title_donald.png"),this.buttonContainer.addChild(this.duck),this.duck.anchor.set(.5),this.duck.x=-350,this.duck.y=-50,e.mobile,this.addChild(this.sub),this.addChild(this.inText),this.shadows=[],this.applyShadow(this.disneyLogo,d.Sprite.fromImage(ASSET_URL+"img/localized/disney_logo_shadow.png"),4),this.applyShadow(this.logo,d.Sprite.fromImage(ASSET_URL+"img/localized/main_logo_shadow.png")),this.applyShadow(this.duck,"title_donald_shadow.png"),this.applyShadow(this.sub,this.subShadow,4),this.applyShadow(this.inText,this.inTextShadow,4),this.logo.shadow.anchor.set(.51,.42),this.interactive=!0,this.hitArea=new d.Rectangle(-2e3,-2e3,4e3,4e3),this.lightTarget=new d.Point,this.light=new d.Point,this.app.bg.show(),this.addChild(this.flash),i.music.play("main")},j.prototype.onBackToMainSite=function(){window.location.href="http://www.someurl.com"},j.prototype.onMouseMove=function(a){this.lightTarget.x=a.global.x,this.lightTarget.y=a.global.y},j.prototype.onButtonPressed=function(b){b===this.playButton?(i.sfx.play("dScreech"),e.android&&(document.body.mozRequestFullScreen?document.body.mozRequestFullScreen():document.body.webkitRequestFullScreen&&document.body.webkitRequestFullScreen()),a("com/duck/app/Tracker").trackAction("play","main"),this.screenManager.gotoScreenByID("level")):b===this.scoreButton?(window.titleMode=!0,a("com/duck/app/Tracker").trackAction("leaderboard","main"),this.app.overlayManager.show("scores")):(a("com/duck/app/Tracker").trackAction("help","main"),this.app.overlayManager.show("tutorial"))},j.prototype.onShow=function(){this.disneyLogo.scale.set(0),this.logo.scale.set(0),this.inText.scale.set(0),this.sub.scale.set(0),this.playButton.view.scale.set(0),this.helpButton.view.scale.set(0),this.scoreButton.view.scale.set(0),this.duck.x=-1200},j.prototype.onShown=function(){TweenLite.to(this.disneyLogo.scale,1,{x:1,y:1,ease:Elastic.easeOut,delay:.1}),TweenLite.to(this.logo.scale,1,{x:1,y:1,ease:Elastic.easeOut,delay:.2}),TweenLite.to(this.inText.scale,1,{x:1,y:1,ease:Elastic.easeOut,delay:.3}),TweenLite.to(this.sub.scale,1,{x:1,y:1,ease:Elastic.easeOut,delay:.4}),TweenLite.to(this.playButton.view.scale,1,{x:1,y:1,ease:Elastic.easeOut,delay:.5}),TweenLite.to(this.helpButton.view.scale,1,{x:1,y:1,ease:Elastic.easeOut,delay:.6}),TweenLite.to(this.scoreButton.view.scale,1,{x:1,y:1,ease:Elastic.easeOut,delay:.7}),TweenLite.to(this.duck.position,.4,{x:-350,ease:Back.easeOut,delay:.6}),setTimeout(function(){this.flash.flash(.2,1)}.bind(this),800)},j.prototype.updateTransform=function(){this.light.x+=.1*(this.lightTarget.x-this.light.x),this.light.y+=.1*(this.lightTarget.y-this.light.y);for(var a=this.app.bg.vignette.pivot.x/75,b=this.app.bg.vignette.pivot.y/50,c=0;c<this.shadows.length;c++){var e=this.shadows[c];e.position.x=e.target.x,e.position.y=e.target.y,e.pivot.x=e.dist,e.pivot.y=-e.dist;var f=e.target.worldTransform.tx,g=e.target.worldTransform.ty,h=f-this.light.x,i=g-this.light.y,j=Math.sqrt(h*h+i*i);h/=j,i/=j,j>10&&(j=10),e.pivot.x=-5*a,e.pivot.y=-5*b}d.DisplayObjectContainer.prototype.updateTransform.call(this)},j.prototype.applyShadow=function(a,b,c){if("string"==typeof b||b instanceof String)var e=new d.Sprite.fromFrame(b);else e=b;e.dist=c||10,this.shadows.push(e),e.anchor.set(.5),e.scale=a.scale,e.target=a,a.shadow=e,a.parent.addChildAt(e,0)},j.prototype.resize=function(a,b){this.logo.x=a/2,this.logo.y=b/2-140,this.disneyLogo.x=a/2,this.disneyLogo.y=b/2-235,this.buttonContainer.x=a/2+150,this.buttonContainer.y=b/2+165,this.inText.x=a/2+48+18,this.inText.y=b/2-80+25,this.sub.x=a/2+70,this.sub.y=b/2},c.exports=j}),define("com/duck/app/buttons/ClickButton",["require","exports","module","PIXI","com/fido/ui/buttons/Button","com/fido/sound/SoundManager"],function(a,b,c){var d=a("PIXI"),e=a("com/fido/ui/buttons/Button"),f=a("com/fido/sound/SoundManager"),g=function(a,b,c,g){var h=new d.Sprite(a);h.anchor.set(.5),e.call(this,h),this.normalTexture=a,this.downTexture=b,this.overTexture=c,g&&(this.icon=new d.Sprite(g),this.icon.anchor.set(.5),this.icon.y=-13,h.addChild(this.icon)),this._onUp(),this.onDown.add(this._onDown,this),this.onUp.add(this._onUp,this),this.view.mouseover=function(){this.overTexture&&this.view.setTexture(this.overTexture),f.sfx.play("roll")}.bind(this),this.view.mouseout=function(){this.view.setTexture(this.normalTexture),f.sfx.play("roll")}.bind(this)};g.prototype=Object.create(e.prototype),g.prototype._onDown=function(){this.icon&&(this.icon.y=1),this.view.setTexture(this.downTexture),f.sfx.play("press")},g.prototype._onUp=function(){this.icon&&(this.icon.y=-7),this.view.setTexture(this.normalTexture)},g.fromFrames=function(a,b,c){return new g(d.Texture.fromFrame(a),d.Texture.fromFrame(b),null,c?d.Texture.fromFrame(c):null)},g.smallButton=function(a){return new g(d.Texture.fromFrame("button_extrude.png"),d.Texture.fromFrame("button_extrude.png"),null,a?d.Texture.fromFrame(a):null)},g.bigButton=function(a){return new g(d.Texture.fromFrame("button_extrude.png"),d.Texture.fromFrame("button_extrude.png"),null,a?d.Texture.fromFrame(a):null)},g.closeButton=function(){return new g(d.Texture.fromFrame("close_up.png"),d.Texture.fromFrame("close_down.png"),d.Texture.fromFrame("close_over.png"),null)},c.exports=g}),define("com/duck/game/clients/Client2",["require","exports","module","com/fido/utils/Utils"],function(a,b,c){var d=a("com/fido/utils/Utils"),e=function(){this.id=1,this.angrySound="angryBloke",this.walkFrontFrames=d.getTexturesFromFramesWithPrefix("dogwalk_front%%.png",10),this.walkFrontFramesHead=[90,13,-1.73,90,16,-.8,90,14,-0,90,9,-1,90,9,-2,90,13,-1.73,90,16,-.8,90,14,-0,90,9,-1,90,9,-2],this.walkBackFrames=d.getTexturesFromFramesWithPrefix("dogwalk_back%%.png",10),this.cupPosition=new PIXI.Point(22,-102),this.frontHeads={normalHead:d.getTexturesFromFrames(["doghead_normal.png"]),thirstHead:d.getTexturesFromFrames(["doghead_thirsty.png"]),happyHead:d.getTexturesFromFrames(["doghead_happy.png"]),angryHead:d.getTexturesFromFrames(["doghead_angry.png"]),worriedHead:d.getTexturesFromFrames(["doghead_worried.png"]),hypnoHead:d.getTexturesFromFrames(["doghead_hypno00.png"])},this.backHeads={normalHead:d.getTexturesFromFrames(["doghead_back_normal.png"]),thirstHead:d.getTexturesFromFrames(["doghead_back_normal.png"]),happyHead:d.getTexturesFromFrames(["doghead_back_normal.png"]),angryHead:d.getTexturesFromFrames(["doghead_back_normal.png"]),worriedHead:d.getTexturesFromFrames(["doghead_back_normal.png"]),hypnoHead:d.getTexturesFromFrames(["doghead_back_normal.png"])},this.sittingFrame=PIXI.Texture.fromFrame("dogsat.png"),this.sittingFrameHead=[44,19,0],this.eatingFrames=this.drinkHead=d.getTexturesFromFrames(["doghead_drink_01.png","doghead_drink_02.png"]),this.patience=1300,this.sitPosition=10,this.defaultCupSize=2};Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance}}),c.exports=e}),define("com/duck/game/clients/Client1",["require","exports","module","com/fido/utils/Utils"],function(a,b,c){var d=a("com/fido/utils/Utils"),e=function(){this.id=0,this.angrySound="angryBloke",this.walkFrontFrames=d.getTexturesFromFramesWithPrefix("granwalk_front%%.png",10),this.walkFrontFramesHead=[76,21,-1.73,76,22,-.8,76,22,-0,76,21,-1,76,20,-2,76,21,-1.73,76,22,-.8,76,22,-0,76,21,-1,76,20,-2],this.walkBackFrames=d.getTexturesFromFramesWithPrefix("granwalk_back%%.png",10),this.cupPosition=new PIXI.Point(32,-45),this.frontHeads={normalHead:d.getTexturesFromFrames(["granhead_normal.png"]),thirstHead:d.getTexturesFromFrames(["granhead_thirsty.png"]),happyHead:d.getTexturesFromFrames(["granhead_happy.png"]),angryHead:d.getTexturesFromFrames(["granhead_angry.png"]),worriedHead:d.getTexturesFromFrames(["granhead_worried.png"]),hypnoHead:d.getTexturesFromFrames(["granhead_hypno.png"])},this.backHeads={normalHead:d.getTexturesFromFrames(["granhead_back_normal.png"]),thirstHead:d.getTexturesFromFrames(["granhead_back_normal.png"]),happyHead:d.getTexturesFromFrames(["granhead_back_normal.png"]),angryHead:d.getTexturesFromFrames(["granhead_back_angry.png"]),worriedHead:d.getTexturesFromFrames(["granhead_back_worried.png"]),hypnoHead:d.getTexturesFromFrames(["granhead_back_normal.png"])},this.sittingFrame=PIXI.Texture.fromFrame("gransat.png"),this.sittingFrameHead=[67,13,0],this.eatingFrames=this.drinkHead=d.getTexturesFromFrames(["granhead_drink_01.png","granhead_drink_02.png"]),this.patience=1300,this._maxSpeed=4,this.sitPosition=-5,this.defaultCupSize=1};Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance}}),c.exports=e}),define("com/duck/game/clients/Client3",["require","exports","module","com/fido/utils/Utils"],function(a,b,c){var d=a("com/fido/utils/Utils"),e=function(){this.id=2,this.angrySound="angryBloke",this.walkFrontFrames=d.getTexturesFromFramesWithPrefix("bunnywalk_front%%.png",10),this.walkFrontFramesHead=[67,13,-1.73,67,16,-.8,67,14,-0,67,9,-1,67,9,-2,67,13,-1.73,67,16,-.8,67,14,-0,67,9,-1,67,9,-2],this.walkBackFrames=d.getTexturesFromFramesWithPrefix("bunnywalk_back%%.png",10),this.cupPosition=new PIXI.Point(19,-120),this.frontHeads={normalHead:d.getTexturesFromFrames(["bunnyhead_normal.png"]),thirstHead:d.getTexturesFromFrames(["bunnyhead_thirsty.png"]),happyHead:d.getTexturesFromFrames(["bunnyhead_happy.png"]),angryHead:d.getTexturesFromFrames(["bunnyhead_angry.png"]),worriedHead:d.getTexturesFromFrames(["bunnyhead_worried.png"]),hypnoHead:d.getTexturesFromFrames(["bunnyhead_hypno00.png"])},this.backHeads={normalHead:d.getTexturesFromFrames(["bunnyhead_back_normal.png"]),thirstHead:d.getTexturesFromFrames(["bunnyhead_back_normal.png"]),happyHead:d.getTexturesFromFrames(["bunnyhead_back_happy.png"]),angryHead:d.getTexturesFromFrames(["bunnyhead_back_angry.png"]),worriedHead:d.getTexturesFromFrames(["bunnyhead_back_worried.png"]),hypnoHead:d.getTexturesFromFrames(["bunnyhead_back_normal.png"])},this.sittingFrame=PIXI.Texture.fromFrame("bunnysat.png"),this.sittingFrameHead=[36,7,0],this.eatingFrames=this.drinkHead=d.getTexturesFromFrames(["bunnyhead_drink_01.png","bunnyhead_drink_02.png"]),this.patience=1300,this._maxSpeed=12,this._acceleration=4,this.sitPosition=55,this.defaultCupSize=2};Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance
}}),c.exports=e}),define("com/duck/game/clients/Client4",["require","exports","module","com/fido/utils/Utils"],function(a,b,c){var d=a("com/fido/utils/Utils"),e=function(){this.id=3,this.angrySound="angryBloke",this.walkFrontFrames=d.getTexturesFromFramesWithPrefix("rhinowalk_front%%.png",10),this.walkFrontFramesHead=[83,30,-1.73,82,32,-.8,83,31,-0,84,28,-1,84,27,-2,83,30,-1.73,82,32,-.8,83,31,-0,84,28,-1,84,27,-2],this.walkBackFrames=d.getTexturesFromFramesWithPrefix("rhinowalk_back%%.png",10),this.cupPosition=new PIXI.Point(28,-105),this.frontHeads={normalHead:d.getTexturesFromFrames(["rhinohead_normal.png"]),thirstHead:d.getTexturesFromFrames(["rhinohead_thirsty.png"]),happyHead:d.getTexturesFromFrames(["rhinohead_happy.png"]),angryHead:d.getTexturesFromFrames(["rhinohead_angry.png"]),worriedHead:d.getTexturesFromFrames(["rhinohead_worried.png"]),hypnoHead:d.getTexturesFromFrames(["rhinohead_hypno00.png"])},this.backHeads={normalHead:d.getTexturesFromFrames(["rhinohead_back_normal.png"]),thirstHead:d.getTexturesFromFrames(["rhinohead_back_normal.png"]),happyHead:d.getTexturesFromFrames(["rhinohead_back_normal.png"]),angryHead:d.getTexturesFromFrames(["rhinohead_back_angry.png"]),worriedHead:d.getTexturesFromFrames(["rhinohead_back_worried.png"]),hypnoHead:d.getTexturesFromFrames(["rhinohead_back_normal.png"])},this.sittingFrame=PIXI.Texture.fromFrame("rhinosat.png"),this.sittingFrameHead=[75,34,0],this.eatingFrames=this.drinkHead=d.getTexturesFromFrames(["rhinohead_drink_01.png","rhinohead_drink_02.png"]),this.patience=1300,this.sitPosition=45,this.defaultCupSize=1};Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance}}),c.exports=e}),define("com/duck/game/Levels",["require","exports","module","./clients/Client2","./clients/Client1","./clients/Client3","./clients/Client4"],function(a,b,c){for(var d=a("./clients/Client2"),e=a("./clients/Client1"),f=a("./clients/Client3"),g=a("./clients/Client4"),h=function(){this.name="Temp",this.lives=3,this.baseSpeed=1,this.increasePerThirtySeconds=.05,this.multiplyer=1,this.multiplyierIncrease=1,this.maxClientStart=1,this.maxClientIncrease=.5,this.clientSpawnRate=320,this.baseScoreMultiplyer=1,this.showTutorial=!1,this.clients=[e,d,f],this.time="8:00",this.benchs=[{x:1,y:3,size:2},{x:9,y:3,size:2},{x:1,y:5,size:2},{x:5,y:5,size:2},{x:9,y:5,size:2}],this.scoreTarget=1e3,this.levelImage="level1.png",this.scene={leg:1,sky:ASSET_URL+"img/game/sky_night.jpg",ground:ASSET_URL+"img/game/ground_night.png",canvas:ASSET_URL+"img/game/groundnight_canvas.png"}},i=function(){h.call(this),this.showTutorial=!0,this.time="8:00",this.name="ssMorning",this.levelImage="level1.png",this.copy="Copy Copy\nC",this.scene={leg:.75,sky:ASSET_URL+"img/game/sky_morning.jpg",ground:ASSET_URL+"img/game/ground_morning.jpg",canvas:ASSET_URL+"img/game/groundmorning_canvas.jpg"},this.clients=[d,f],this.night=!1},j=function(){h.call(this),this.time="12:00",this.name="ssNoon",this.levelImage="level2.png",this.copy="Copy Copy\nC",this.baseSpeed=1.1,this.baseScoreMultiplyer=2,this.showTutorial=!1,this.tables=[{x:2,y:3,size:2},{x:8,y:3,size:2},{x:2,y:5,size:2},{x:8,y:5,size:2}],this.scoreTarget=5e4,this.previewThumb="levelThumb_01.png",this.difficulty="stageSelect_day01.png",this.levelTitle="levelTitle_01.png",this.levelImage="level2.png",this.difficultyRating=1,this.difficultyColor="MonTues",this.maxClientStart=3,this.clients=[e,g],this.scene={leg:1,sky:ASSET_URL+"img/game/sky.jpg",ground:ASSET_URL+"img/game/ground.jpg",canvas:ASSET_URL+"img/game/ground_canvas.jpg"},this.night=!1},k=function(){h.call(this),this.baseSpeed=1.2,this.showTutorial=!1,this.time="18:00",this.name="ssNight",this.copy="Copy Copy",this.showTutorial=!1,this.lives=3,this.baseScoreMultiplyer=3,this.tables=[{x:1,y:3,size:2},{x:9,y:3,size:2},{x:2,y:5,size:2},{x:8,y:5,size:2}],this.scoreTarget=1e5,this.previewThumb="levelThumb_02.png",this.difficulty="stageSelect_day02.png",this.levelTitle="levelTitle_02.png",this.difficultyRating=2,this.difficultyColor="MonTues",this.levelImage="level3.png",this.maxClientStart=4,this.clients=[e,d,f,g],this.scene={leg:1,sky:ASSET_URL+"img/game/sky_night.jpg",ground:ASSET_URL+"img/game/ground_night.jpg",canvas:ASSET_URL+"img/game/groundnight_canvas.jpg",night:!0},this.night=!0},l=[new i,new j,new k],m=0;m<l.length;m++)l[m].id=m,m<l.length-1&&(l[m].nextLevelTargetScore=l[m+1].scoreTarget);c.exports=l}),define("com/duck/app/screens/LevelScreen",["require","exports","module","PIXI","com/duck/app/buttons/AabButton","com/duck/app/buttons/AabLabelButton","com/duck/app/buttons/AabIconButton","com/fido/ui/buttons/Button","com/fido/system/Device","com/duck/app/buttons/ClickButton","com/fido/game/gridworld/GridWorldTest","com/duck/game/donald/WaterSpray","com/fido/utils/Utils","com/duck/app/buttons/WaterButton","com/duck/game/Levels","com/fido/loader/Cache","com/fido/physics/Spring","com/fido/sound/SoundManager","com/duck/app/Tracker"],function(a,b,c){var d=a("PIXI"),e=(a("com/duck/app/buttons/AabButton"),a("com/duck/app/buttons/AabLabelButton"),a("com/duck/app/buttons/AabIconButton"),a("com/fido/ui/buttons/Button"),a("com/fido/system/Device")),f=(a("com/duck/app/buttons/ClickButton"),a("com/fido/game/gridworld/GridWorldTest"),a("com/duck/game/donald/WaterSpray"),a("com/fido/utils/Utils")),g=a("com/duck/app/buttons/WaterButton"),h=a("com/duck/game/Levels"),i=a("com/fido/loader/Cache"),j=a("com/fido/physics/Spring"),k=a("com/fido/sound/SoundManager"),l=function(a){this.app=a,this.requiredAssets=[],d.DisplayObjectContainer.call(this)};l.prototype=Object.create(d.DisplayObjectContainer.prototype),l.prototype.init=function(){var a=i.getJson("translation");h[0].title=h[0].name=a.strings.STR_LEVEL_1,h[1].title=h[1].name=a.strings.STR_LEVEL_2,h[2].title=h[2].name=a.strings.STR_LEVEL_3,h[0].copy=a.strings.STR_LEVEL_1_DESCRIPTION,h[1].copy=a.strings.STR_LEVEL_2_DESCRIPTION,h[2].copy=a.strings.STR_LEVEL_3_DESCRIPTION,this.level1=new m(h[0]),this.level2=new m(h[1]),this.level3=new m(h[2]),this.levelCards=[this.level1,this.level2,this.level3];for(var b=0;b<this.levelCards.length;b++){var c=this.levelCards[b];this.addChild(c),this.addChild(c),c.x=100+295*b+200,c.y=300,c.click=c.tap=this.onLevelPressed.bind(this)}this.title=new d.Text(a.strings.STR_LEVEL_SELECT,{fill:"#fcff8c",font:"66px "+window.HEADER_FONT,dropShadow:!0,dropShadowDistance:5,dropShadowColor:"rgba(0, 18, 38, 0.6"}),this.title.anchor.set(.5),this.title.x=568,this.title.y=105,this.addChild(this.title),this.backButton=g.smallButton("icon_left.png"),this.addChild(this.backButton.view),this.backButton.view.x=57.5,this.backButton.view.y=57.5,window.flipLanguage&&(this.backButton.icon.scale.x*=-1),e.mobile?this.backButton.view.y+=20:this.backButton.view.scale.set(.75),this.backButton.onPress.add(this.onButtonPressed,this)},l.prototype.onLevelPressed=function(b){var c=b.target;k.sfx.play("levelCardPress"),k.sfx.play("dSelect"),this.app.nextLevel=h[c.id],window.level=c.id+1,a("com/duck/app/Tracker").trackAction("game_start","game",""+(c.id+1)),this.app.screenManager.gotoScreenByID("game")},l.prototype.onButtonPressed=function(a){a===this.backButton?this.app.screenManager.gotoScreenByID("title"):this.app.overlayManager.show(a===this.leaderboardButton?"scores":"tutorial")},l.prototype.onShow=function(){for(var a=this.levelCards,b=this.app.gameSave,c=0;c<a.length;c++){var d=a[c],e=b.getLevelData(c);d.setLocked(e.locked),d.setBestScore(e.bestScore)}},l.prototype.onShown=function(){},l.prototype.resize=function(a){for(var b=0;b<this.levelCards.length;b++){var c=this.levelCards[b];this.addChild(c),this.addChild(c),c.x=window.flipLanguage?a/2+295*-b+340:a/2+295*b-250,c.y=300}window.flipLanguage&&(this.backButton.view.x=e.mobile?a-155:a-155),this.title.x=a/2},c.exports=l;var m=function(a){d.DisplayObjectContainer.call(this),this.spring=new j;var b=a.id;if(b%2)var c=[20,0,279,1,307,452,0,451],e=[36,15,275,15,302,447,12,448];else var c=[0,0,307,1,279,452,20,451],e=[3,6,293,6,266,438,27,439];var g=(new d.Graphics).beginFill(16777215).drawPolygon(c);this.hitArea=new d.Polygon(c),this.interactive=!0,this.buttonMode=!0,g.cacheAsBitmap=!0;var h=(new d.Graphics).beginFill(16711680).drawPolygon(e),i=new d.Sprite.fromFrame(a.levelImage);this.addChild(g),this.addChild(i),this.addChild(h),i.mask=h,this.lockState=99,this.freeOverlay=new d.DisplayObjectContainer,this.addChild(this.freeOverlay),timeText=new d.Text(a.title,{fill:"#FFFFFF",font:"66px "+window.HEADER_FONT,dropShadow:!0,dropShadowDistance:5,dropShadowAngle:-Math.PI/3,dropShadowColor:"rgba(0, 18, 38, 0.6"}),timeText.width>240&&timeText.scale.set(240/timeText.width),timeText.anchor.x=.5,timeText.x=150,timeText.y=20,this.freeOverlay.addChild(timeText);var l=(new d.Graphics).beginFill(16777215).drawRect(0,0,300,65);i.addChild(l),l.y=350,l.rotation=-.025;var m=new d.Sprite.fromFrame("icon_pb_medal.png");if(m.anchor.set(.5),m.x=90,m.y=380,this.freeOverlay.addChild(m),this.bestScoreLabel=new d.Text("100,000",{fill:"#000000",font:"46px "+window.MAIN_FONT}),this.bestScoreLabel.y=355,this.bestScoreLabel.x=119,this.freeOverlay.addChild(this.bestScoreLabel),this.lockOverlay=new d.DisplayObjectContainer,this.lockOverlay.addChild((new d.Graphics).beginFill(2042943).drawRect(0,0,300,450)),this.id=b,b%2||(this.lockOverlay.x=-10),0!=b){var n=new d.Sprite.fromFrame("lock_level"+(b+1)+".png");this.lockOverlay.addChild(n),n.x=160,n.y=190,n.anchor.set(.5)}var o=new d.Sprite.fromFrame("icon_score_key.png");o.x=48,o.y=280,this.lockOverlay.addChild(o);var p=new d.Text(f.formatScore(a.scoreTarget),{fill:"#d2d3d7",font:"46px "+window.MAIN_FONT});p.x=112,p.y=290,this.lockOverlay.addChild(p),i.addChild(this.lockOverlay),this.pivot.x=200,this.pivot.y=150,this.mouseover=function(){k.sfx.play("levelCardRoll"),TweenLite.to(this.scale,.3,{x:1.1,y:1.1,ease:Back.easeOut})}.bind(this),this.mouseout=function(){TweenLite.to(this.scale,.2,{x:1,y:1,ease:Back.easeOut})}.bind(this)};m.prototype=Object.create(d.DisplayObjectContainer.prototype),m.colors=["#717f00","#289f9e","#3c4897"],m.prototype.setLocked=function(a){this.lockState!==a&&(this.lockState=a,0===a?(this.interactive=!1,this.lockOverlay.visible=!0,this.freeOverlay.visible=!1):(this.interactive=!0,this.lockOverlay.visible=!1,this.freeOverlay.visible=!0))},m.prototype.setBestScore=function(a){this.bestScoreLabel.setText(f.formatScore(a))}}),function(a,b){"object"==typeof exports?module.exports=b(global):"function"==typeof define&&define.amd?define("libs/gl-matrix",[],function(){return b(a)}):b(a)}(this,function(a){function b(a){return f=a}function c(){return f="undefined"!=typeof Float32Array?Float32Array:Array}var d=1e-6,e={};!function(){if("undefined"!=typeof Float32Array){var a=new Float32Array(1),b=new Int32Array(a.buffer);e.invsqrt=function(c){var d=.5*c;a[0]=c;var e=1.5;b[0]=1597463007-(b[0]>>1);var f=a[0];return f*(e-d*f*f)}}else e.invsqrt=function(a){return 1/Math.sqrt(a)}}();var f=null;c();var g={};g.create=function(a){var b=new f(3);return a?(b[0]=a[0],b[1]=a[1],b[2]=a[2]):b[0]=b[1]=b[2]=0,b},g.createFrom=function(a,b,c){var d=new f(3);return d[0]=a,d[1]=b,d[2]=c,d},g.set=function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b},g.equal=function(a,b){return a===b||Math.abs(a[0]-b[0])<d&&Math.abs(a[1]-b[1])<d&&Math.abs(a[2]-b[2])<d},g.add=function(a,b,c){return c&&a!==c?(c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c):(a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a)},g.subtract=function(a,b,c){return c&&a!==c?(c[0]=a[0]-b[0],c[1]=a[1]-b[1],c[2]=a[2]-b[2],c):(a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a)},g.multiply=function(a,b,c){return c&&a!==c?(c[0]=a[0]*b[0],c[1]=a[1]*b[1],c[2]=a[2]*b[2],c):(a[0]*=b[0],a[1]*=b[1],a[2]*=b[2],a)},g.negate=function(a,b){return b||(b=a),b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b},g.scale=function(a,b,c){return c&&a!==c?(c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,c):(a[0]*=b,a[1]*=b,a[2]*=b,a)},g.normalize=function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=Math.sqrt(c*c+d*d+e*e);return f?1===f?(b[0]=c,b[1]=d,b[2]=e,b):(f=1/f,b[0]=c*f,b[1]=d*f,b[2]=e*f,b):(b[0]=0,b[1]=0,b[2]=0,b)},g.cross=function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],g=b[0],h=b[1],i=b[2];return c[0]=e*i-f*h,c[1]=f*g-d*i,c[2]=d*h-e*g,c},g.length=function(a){var b=a[0],c=a[1],d=a[2];return Math.sqrt(b*b+c*c+d*d)},g.squaredLength=function(a){var b=a[0],c=a[1],d=a[2];return b*b+c*c+d*d},g.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},g.direction=function(a,b,c){c||(c=a);var d=a[0]-b[0],e=a[1]-b[1],f=a[2]-b[2],g=Math.sqrt(d*d+e*e+f*f);return g?(g=1/g,c[0]=d*g,c[1]=e*g,c[2]=f*g,c):(c[0]=0,c[1]=0,c[2]=0,c)},g.lerp=function(a,b,c,d){return d||(d=a),d[0]=a[0]+c*(b[0]-a[0]),d[1]=a[1]+c*(b[1]-a[1]),d[2]=a[2]+c*(b[2]-a[2]),d},g.dist=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return Math.sqrt(c*c+d*d+e*e)};var h=null,i=new f(4);g.unproject=function(a,b,c,d,e){e||(e=a),h||(h=o.create());var f=h,g=i;return g[0]=2*(a[0]-d[0])/d[2]-1,g[1]=2*(a[1]-d[1])/d[3]-1,g[2]=2*a[2]-1,g[3]=1,o.multiply(c,b,f),o.inverse(f)?(o.multiplyVec4(f,g),0===g[3]?null:(e[0]=g[0]/g[3],e[1]=g[1]/g[3],e[2]=g[2]/g[3],e)):null};var j=g.createFrom(1,0,0),k=g.createFrom(0,1,0),l=g.createFrom(0,0,1),m=g.create();g.rotationTo=function(a,b,c){c||(c=p.create());var d=g.dot(a,b),e=m;if(d>=1)p.set(q,c);else if(1e-6-1>d)g.cross(j,a,e),g.length(e)<1e-6&&g.cross(k,a,e),g.length(e)<1e-6&&g.cross(l,a,e),g.normalize(e),p.fromAngleAxis(Math.PI,e,c);else{var f=Math.sqrt(2*(1+d)),h=1/f;g.cross(a,b,e),c[0]=e[0]*h,c[1]=e[1]*h,c[2]=e[2]*h,c[3]=.5*f,p.normalize(c)}return c[3]>1?c[3]=1:c[3]<-1&&(c[3]=-1),c},g.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};var n={};n.create=function(a){var b=new f(9);return a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8]):b[0]=b[1]=b[2]=b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=0,b},n.createFrom=function(a,b,c,d,e,f,g,h,i){var j=new 9;return j[0]=a,j[1]=b,j[2]=c,j[3]=d,j[4]=e,j[5]=f,j[6]=g,j[7]=h,j[8]=i,j},n.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8];return b*(j*f-g*i)+c*(-j*e+g*h)+d*(i*e-f*h)},n.inverse=function(a,b){var c,d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7],l=a[8],m=l*h-i*k,o=-l*g+i*j,p=k*g-h*j,q=d*m+e*o+f*p;return q?(c=1/q,b||(b=n.create()),b[0]=m*c,b[1]=(-l*e+f*k)*c,b[2]=(i*e-f*h)*c,b[3]=o*c,b[4]=(l*d-f*j)*c,b[5]=(-i*d+f*g)*c,b[6]=p*c,b[7]=(-k*d+e*j)*c,b[8]=(h*d-e*g)*c,b):null},n.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7],l=a[8],m=b[0],n=b[1],o=b[2],p=b[3],q=b[4],r=b[5],s=b[6],t=b[7],u=b[8];return c[0]=m*d+n*g+o*j,c[1]=m*e+n*h+o*k,c[2]=m*f+n*i+o*l,c[3]=p*d+q*g+r*j,c[4]=p*e+q*h+r*k,c[5]=p*f+q*i+r*l,c[6]=s*d+t*g+u*j,c[7]=s*e+t*h+u*k,c[8]=s*f+t*i+u*l,c},n.multiplyVec2=function(a,b,c){c||(c=b);var d=b[0],e=b[1];return c[0]=d*a[0]+e*a[3]+a[6],c[1]=d*a[1]+e*a[4]+a[7],c},n.multiplyVec3=function(a,b,c){c||(c=b);var d=b[0],e=b[1],f=b[2];return c[0]=d*a[0]+e*a[3]+f*a[6],c[1]=d*a[1]+e*a[4]+f*a[7],c[2]=d*a[2]+e*a[5]+f*a[8],c},n.set=function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},n.equal=function(a,b){return a===b||Math.abs(a[0]-b[0])<d&&Math.abs(a[1]-b[1])<d&&Math.abs(a[2]-b[2])<d&&Math.abs(a[3]-b[3])<d&&Math.abs(a[4]-b[4])<d&&Math.abs(a[5]-b[5])<d&&Math.abs(a[6]-b[6])<d&&Math.abs(a[7]-b[7])<d&&Math.abs(a[8]-b[8])<d},n.identity=function(a){return a||(a=n.create()),a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},n.transpose=function(a,b){if(!b||a===b){var c=a[1],d=a[2],e=a[5];return a[1]=a[3],a[2]=a[6],a[3]=c,a[5]=a[7],a[6]=d,a[7]=e,a}return b[0]=a[0],b[1]=a[3],b[2]=a[6],b[3]=a[1],b[4]=a[4],b[5]=a[7],b[6]=a[2],b[7]=a[5],b[8]=a[8],b},n.toMat4=function(a,b){return b||(b=o.create()),b[15]=1,b[14]=0,b[13]=0,b[12]=0,b[11]=0,b[10]=a[8],b[9]=a[7],b[8]=a[6],b[7]=0,b[6]=a[5],b[5]=a[4],b[4]=a[3],b[3]=0,b[2]=a[2],b[1]=a[1],b[0]=a[0],b},n.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"};var o={};o.create=function(a){var b=new f(16);return a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]),b},o.createFrom=function(a,b,c,d,e,g,h,i,j,k,l,m,n,o,p,q){var r=new f(16);return r[0]=a,r[1]=b,r[2]=c,r[3]=d,r[4]=e,r[5]=g,r[6]=h,r[7]=i,r[8]=j,r[9]=k,r[10]=l,r[11]=m,r[12]=n,r[13]=o,r[14]=p,r[15]=q,r},o.set=function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},o.equal=function(a,b){return a===b||Math.abs(a[0]-b[0])<d&&Math.abs(a[1]-b[1])<d&&Math.abs(a[2]-b[2])<d&&Math.abs(a[3]-b[3])<d&&Math.abs(a[4]-b[4])<d&&Math.abs(a[5]-b[5])<d&&Math.abs(a[6]-b[6])<d&&Math.abs(a[7]-b[7])<d&&Math.abs(a[8]-b[8])<d&&Math.abs(a[9]-b[9])<d&&Math.abs(a[10]-b[10])<d&&Math.abs(a[11]-b[11])<d&&Math.abs(a[12]-b[12])<d&&Math.abs(a[13]-b[13])<d&&Math.abs(a[14]-b[14])<d&&Math.abs(a[15]-b[15])<d},o.identity=function(a){return a||(a=o.create()),a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},o.transpose=function(a,b){if(!b||a===b){var c=a[1],d=a[2],e=a[3],f=a[6],g=a[7],h=a[11];return a[1]=a[4],a[2]=a[8],a[3]=a[12],a[4]=c,a[6]=a[9],a[7]=a[13],a[8]=d,a[9]=f,a[11]=a[14],a[12]=e,a[13]=g,a[14]=h,a}return b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15],b},o.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11],n=a[12],o=a[13],p=a[14],q=a[15];return n*k*h*e-j*o*h*e-n*g*l*e+f*o*l*e+j*g*p*e-f*k*p*e-n*k*d*i+j*o*d*i+n*c*l*i-b*o*l*i-j*c*p*i+b*k*p*i+n*g*d*m-f*o*d*m-n*c*h*m+b*o*h*m+f*c*p*m-b*g*p*m-j*g*d*q+f*k*d*q+j*c*h*q-b*k*h*q-f*c*l*q+b*g*l*q},o.inverse=function(a,b){b||(b=a);var c,d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7],l=a[8],m=a[9],n=a[10],o=a[11],p=a[12],q=a[13],r=a[14],s=a[15],t=d*i-e*h,u=d*j-f*h,v=d*k-g*h,w=e*j-f*i,x=e*k-g*i,y=f*k-g*j,z=l*q-m*p,A=l*r-n*p,B=l*s-o*p,C=m*r-n*q,D=m*s-o*q,E=n*s-o*r,F=t*E-u*D+v*C+w*B-x*A+y*z;return F?(c=1/F,b[0]=(i*E-j*D+k*C)*c,b[1]=(-e*E+f*D-g*C)*c,b[2]=(q*y-r*x+s*w)*c,b[3]=(-m*y+n*x-o*w)*c,b[4]=(-h*E+j*B-k*A)*c,b[5]=(d*E-f*B+g*A)*c,b[6]=(-p*y+r*v-s*u)*c,b[7]=(l*y-n*v+o*u)*c,b[8]=(h*D-i*B+k*z)*c,b[9]=(-d*D+e*B-g*z)*c,b[10]=(p*x-q*v+s*t)*c,b[11]=(-l*x+m*v-o*t)*c,b[12]=(-h*C+i*A-j*z)*c,b[13]=(d*C-e*A+f*z)*c,b[14]=(-p*w+q*u-r*t)*c,b[15]=(l*w-m*u+n*t)*c,b):null},o.toRotationMat=function(a,b){return b||(b=o.create()),b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},o.toMat3=function(a,b){return b||(b=n.create()),b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[4],b[4]=a[5],b[5]=a[6],b[6]=a[8],b[7]=a[9],b[8]=a[10],b},o.toInverseMat3=function(a,b){var c,d=a[0],e=a[1],f=a[2],g=a[4],h=a[5],i=a[6],j=a[8],k=a[9],l=a[10],m=l*h-i*k,o=-l*g+i*j,p=k*g-h*j,q=d*m+e*o+f*p;return q?(c=1/q,b||(b=n.create()),b[0]=m*c,b[1]=(-l*e+f*k)*c,b[2]=(i*e-f*h)*c,b[3]=o*c,b[4]=(l*d-f*j)*c,b[5]=(-i*d+f*g)*c,b[6]=p*c,b[7]=(-k*d+e*j)*c,b[8]=(h*d-e*g)*c,b):null},o.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7],l=a[8],m=a[9],n=a[10],o=a[11],p=a[12],q=a[13],r=a[14],s=a[15],t=b[0],u=b[1],v=b[2],w=b[3];return c[0]=t*d+u*h+v*l+w*p,c[1]=t*e+u*i+v*m+w*q,c[2]=t*f+u*j+v*n+w*r,c[3]=t*g+u*k+v*o+w*s,t=b[4],u=b[5],v=b[6],w=b[7],c[4]=t*d+u*h+v*l+w*p,c[5]=t*e+u*i+v*m+w*q,c[6]=t*f+u*j+v*n+w*r,c[7]=t*g+u*k+v*o+w*s,t=b[8],u=b[9],v=b[10],w=b[11],c[8]=t*d+u*h+v*l+w*p,c[9]=t*e+u*i+v*m+w*q,c[10]=t*f+u*j+v*n+w*r,c[11]=t*g+u*k+v*o+w*s,t=b[12],u=b[13],v=b[14],w=b[15],c[12]=t*d+u*h+v*l+w*p,c[13]=t*e+u*i+v*m+w*q,c[14]=t*f+u*j+v*n+w*r,c[15]=t*g+u*k+v*o+w*s,c},o.multiplyVec3=function(a,b,c){c||(c=b);var d=b[0],e=b[1],f=b[2];return c[0]=a[0]*d+a[4]*e+a[8]*f+a[12],c[1]=a[1]*d+a[5]*e+a[9]*f+a[13],c[2]=a[2]*d+a[6]*e+a[10]*f+a[14],c},o.multiplyVec4=function(a,b,c){c||(c=b);var d=b[0],e=b[1],f=b[2],g=b[3];return c[0]=a[0]*d+a[4]*e+a[8]*f+a[12]*g,c[1]=a[1]*d+a[5]*e+a[9]*f+a[13]*g,c[2]=a[2]*d+a[6]*e+a[10]*f+a[14]*g,c[3]=a[3]*d+a[7]*e+a[11]*f+a[15]*g,c},o.translate=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=b[0],q=b[1],r=b[2];return c&&a!==c?(d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7],l=a[8],m=a[9],n=a[10],o=a[11],c[0]=d,c[1]=e,c[2]=f,c[3]=g,c[4]=h,c[5]=i,c[6]=j,c[7]=k,c[8]=l,c[9]=m,c[10]=n,c[11]=o,c[12]=d*p+h*q+l*r+a[12],c[13]=e*p+i*q+m*r+a[13],c[14]=f*p+j*q+n*r+a[14],c[15]=g*p+k*q+o*r+a[15],c):(a[12]=a[0]*p+a[4]*q+a[8]*r+a[12],a[13]=a[1]*p+a[5]*q+a[9]*r+a[13],a[14]=a[2]*p+a[6]*q+a[10]*r+a[14],a[15]=a[3]*p+a[7]*q+a[11]*r+a[15],a)},o.scale=function(a,b,c){var d=b[0],e=b[1],f=b[2];return c&&a!==c?(c[0]=a[0]*d,c[1]=a[1]*d,c[2]=a[2]*d,c[3]=a[3]*d,c[4]=a[4]*e,c[5]=a[5]*e,c[6]=a[6]*e,c[7]=a[7]*e,c[8]=a[8]*f,c[9]=a[9]*f,c[10]=a[10]*f,c[11]=a[11]*f,c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c):(a[0]*=d,a[1]*=d,a[2]*=d,a[3]*=d,a[4]*=e,a[5]*=e,a[6]*=e,a[7]*=e,a[8]*=f,a[9]*=f,a[10]*=f,a[11]*=f,a)},o.rotate=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C=c[0],D=c[1],E=c[2],F=Math.sqrt(C*C+D*D+E*E);return F?(1!==F&&(F=1/F,C*=F,D*=F,E*=F),e=Math.sin(b),f=Math.cos(b),g=1-f,h=a[0],i=a[1],j=a[2],k=a[3],l=a[4],m=a[5],n=a[6],o=a[7],p=a[8],q=a[9],r=a[10],s=a[11],t=C*C*g+f,u=D*C*g+E*e,v=E*C*g-D*e,w=C*D*g-E*e,x=D*D*g+f,y=E*D*g+C*e,z=C*E*g+D*e,A=D*E*g-C*e,B=E*E*g+f,d?a!==d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a,d[0]=h*t+l*u+p*v,d[1]=i*t+m*u+q*v,d[2]=j*t+n*u+r*v,d[3]=k*t+o*u+s*v,d[4]=h*w+l*x+p*y,d[5]=i*w+m*x+q*y,d[6]=j*w+n*x+r*y,d[7]=k*w+o*x+s*y,d[8]=h*z+l*A+p*B,d[9]=i*z+m*A+q*B,d[10]=j*z+n*A+r*B,d[11]=k*z+o*A+s*B,d):null},o.rotateX=function(a,b,c){var d=Math.sin(b),e=Math.cos(b),f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11];return c?a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a,c[4]=f*e+j*d,c[5]=g*e+k*d,c[6]=h*e+l*d,c[7]=i*e+m*d,c[8]=f*-d+j*e,c[9]=g*-d+k*e,c[10]=h*-d+l*e,c[11]=i*-d+m*e,c},o.rotateY=function(a,b,c){var d=Math.sin(b),e=Math.cos(b),f=a[0],g=a[1],h=a[2],i=a[3],j=a[8],k=a[9],l=a[10],m=a[11];return c?a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a,c[0]=f*e+j*-d,c[1]=g*e+k*-d,c[2]=h*e+l*-d,c[3]=i*e+m*-d,c[8]=f*d+j*e,c[9]=g*d+k*e,c[10]=h*d+l*e,c[11]=i*d+m*e,c},o.rotateZ=function(a,b,c){var d=Math.sin(b),e=Math.cos(b),f=a[0],g=a[1],h=a[2],i=a[3],j=a[4],k=a[5],l=a[6],m=a[7];return c?a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a,c[0]=f*e+j*d,c[1]=g*e+k*d,c[2]=h*e+l*d,c[3]=i*e+m*d,c[4]=f*-d+j*e,c[5]=g*-d+k*e,c[6]=h*-d+l*e,c[7]=i*-d+m*e,c},o.frustum=function(a,b,c,d,e,f,g){g||(g=o.create());var h=b-a,i=d-c,j=f-e;return g[0]=2*e/h,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=2*e/i,g[6]=0,g[7]=0,g[8]=(b+a)/h,g[9]=(d+c)/i,g[10]=-(f+e)/j,g[11]=-1,g[12]=0,g[13]=0,g[14]=-(f*e*2)/j,g[15]=0,g},o.perspective=function(a,b,c,d,e){var f=c*Math.tan(a*Math.PI/360),g=f*b;return o.frustum(-g,g,-f,f,c,d,e)},o.ortho=function(a,b,c,d,e,f,g){g||(g=o.create());var h=b-a,i=d-c,j=f-e;return g[0]=2/h,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=2/i,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=-2/j,g[11]=0,g[12]=-(a+b)/h,g[13]=-(d+c)/i,g[14]=-(f+e)/j,g[15]=1,g},o.lookAt=function(a,b,c,d){d||(d=o.create());var e,f,g,h,i,j,k,l,m,n,p=a[0],q=a[1],r=a[2],s=c[0],t=c[1],u=c[2],v=b[0],w=b[1],x=b[2];return p===v&&q===w&&r===x?o.identity(d):(k=p-v,l=q-w,m=r-x,n=1/Math.sqrt(k*k+l*l+m*m),k*=n,l*=n,m*=n,e=t*m-u*l,f=u*k-s*m,g=s*l-t*k,n=Math.sqrt(e*e+f*f+g*g),n?(n=1/n,e*=n,f*=n,g*=n):(e=0,f=0,g=0),h=l*g-m*f,i=m*e-k*g,j=k*f-l*e,n=Math.sqrt(h*h+i*i+j*j),n?(n=1/n,h*=n,i*=n,j*=n):(h=0,i=0,j=0),d[0]=e,d[1]=h,d[2]=k,d[3]=0,d[4]=f,d[5]=i,d[6]=l,d[7]=0,d[8]=g,d[9]=j,d[10]=m,d[11]=0,d[12]=-(e*p+f*q+g*r),d[13]=-(h*p+i*q+j*r),d[14]=-(k*p+l*q+m*r),d[15]=1,d)},o.fromRotationTranslation=function(a,b,c){c||(c=o.create());var d=a[0],e=a[1],f=a[2],g=a[3],h=d+d,i=e+e,j=f+f,k=d*h,l=d*i,m=d*j,n=e*i,p=e*j,q=f*j,r=g*h,s=g*i,t=g*j;return c[0]=1-(n+q),c[1]=l+t,c[2]=m-s,c[3]=0,c[4]=l-t,c[5]=1-(k+q),c[6]=p+r,c[7]=0,c[8]=m+s,c[9]=p-r,c[10]=1-(k+n),c[11]=0,c[12]=b[0],c[13]=b[1],c[14]=b[2],c[15]=1,c},o.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"};var p={};p.create=function(a){var b=new f(4);return a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0,b},p.createFrom=function(a,b,c,d){var e=new f(4);return e[0]=a,e[1]=b,e[2]=c,e[3]=d,e},p.set=function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},p.equal=function(a,b){return a===b||Math.abs(a[0]-b[0])<d&&Math.abs(a[1]-b[1])<d&&Math.abs(a[2]-b[2])<d&&Math.abs(a[3]-b[3])<d},p.identity=function(a){return a||(a=p.create()),a[0]=0,a[1]=0,a[2]=0,a[3]=1,a};var q=p.identity();p.calculateW=function(a,b){var c=a[0],d=a[1],e=a[2];return b&&a!==b?(b[0]=c,b[1]=d,b[2]=e,b[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),b):(a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a)},p.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},p.inverse=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=c*c+d*d+e*e+f*f,h=g?1/g:0;return b&&a!==b?(b[0]=-a[0]*h,b[1]=-a[1]*h,b[2]=-a[2]*h,b[3]=a[3]*h,b):(a[0]*=-h,a[1]*=-h,a[2]*=-h,a[3]*=h,a)},p.conjugate=function(a,b){return b&&a!==b?(b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=a[3],b):(a[0]*=-1,a[1]*=-1,a[2]*=-1,a)},p.length=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return Math.sqrt(b*b+c*c+d*d+e*e)},p.normalize=function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=a[3],g=Math.sqrt(c*c+d*d+e*e+f*f);return 0===g?(b[0]=0,b[1]=0,b[2]=0,b[3]=0,b):(g=1/g,b[0]=c*g,b[1]=d*g,b[2]=e*g,b[3]=f*g,b)},p.add=function(a,b,c){return c&&a!==c?(c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c[3]=a[3]+b[3],c):(a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a[3]+=b[3],a)},p.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],g=a[3],h=b[0],i=b[1],j=b[2],k=b[3];return c[0]=d*k+g*h+e*j-f*i,c[1]=e*k+g*i+f*h-d*j,c[2]=f*k+g*j+d*i-e*h,c[3]=g*k-d*h-e*i-f*j,c},p.multiplyVec3=function(a,b,c){c||(c=b);var d=b[0],e=b[1],f=b[2],g=a[0],h=a[1],i=a[2],j=a[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return c[0]=k*j+n*-g+l*-i-m*-h,c[1]=l*j+n*-h+m*-g-k*-i,c[2]=m*j+n*-i+k*-h-l*-g,c},p.scale=function(a,b,c){return c&&a!==c?(c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,c[3]=a[3]*b,c):(a[0]*=b,a[1]*=b,a[2]*=b,a[3]*=b,a)},p.toMat3=function(a,b){b||(b=n.create());var c=a[0],d=a[1],e=a[2],f=a[3],g=c+c,h=d+d,i=e+e,j=c*g,k=c*h,l=c*i,m=d*h,o=d*i,p=e*i,q=f*g,r=f*h,s=f*i;return b[0]=1-(m+p),b[1]=k+s,b[2]=l-r,b[3]=k-s,b[4]=1-(j+p),b[5]=o+q,b[6]=l+r,b[7]=o-q,b[8]=1-(j+m),b},p.toMat4=function(a,b){b||(b=o.create());var c=a[0],d=a[1],e=a[2],f=a[3],g=c+c,h=d+d,i=e+e,j=c*g,k=c*h,l=c*i,m=d*h,n=d*i,p=e*i,q=f*g,r=f*h,s=f*i;return b[0]=1-(m+p),b[1]=k+s,b[2]=l-r,b[3]=0,b[4]=k-s,b[5]=1-(j+p),b[6]=n+q,b[7]=0,b[8]=l+r,b[9]=n-q,b[10]=1-(j+m),b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},p.slerp=function(a,b,c,d){d||(d=a);var e,f,g,h,i=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];return Math.abs(i)>=1?(d!==a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3]),d):(e=Math.acos(i),f=Math.sqrt(1-i*i),Math.abs(f)<.001?(d[0]=.5*a[0]+.5*b[0],d[1]=.5*a[1]+.5*b[1],d[2]=.5*a[2]+.5*b[2],d[3]=.5*a[3]+.5*b[3],d):(g=Math.sin((1-c)*e)/f,h=Math.sin(c*e)/f,d[0]=a[0]*g+b[0]*h,d[1]=a[1]*g+b[1]*h,d[2]=a[2]*g+b[2]*h,d[3]=a[3]*g+b[3]*h,d))},p.fromRotationMatrix=function(a,b){b||(b=p.create());var c,d=a[0]+a[4]+a[8];if(d>0)c=Math.sqrt(d+1),b[3]=.5*c,c=.5/c,b[0]=(a[7]-a[5])*c,b[1]=(a[2]-a[6])*c,b[2]=(a[3]-a[1])*c;else{var e=p.fromRotationMatrix.s_iNext=p.fromRotationMatrix.s_iNext||[1,2,0],f=0;a[4]>a[0]&&(f=1),a[8]>a[3*f+f]&&(f=2);var g=e[f],h=e[g];c=Math.sqrt(a[3*f+f]-a[3*g+g]-a[3*h+h]+1),b[f]=.5*c,c=.5/c,b[3]=(a[3*h+g]-a[3*g+h])*c,b[g]=(a[3*g+f]+a[3*f+g])*c,b[h]=(a[3*h+f]+a[3*f+h])*c}return b},n.toQuat4=p.fromRotationMatrix,function(){var a=n.create();p.fromAxes=function(b,c,d,e){return a[0]=c[0],a[3]=c[1],a[6]=c[2],a[1]=d[0],a[4]=d[1],a[7]=d[2],a[2]=b[0],a[5]=b[1],a[8]=b[2],p.fromRotationMatrix(a,e)}}(),p.identity=function(a){return a||(a=p.create()),a[0]=0,a[1]=0,a[2]=0,a[3]=1,a},p.fromAngleAxis=function(a,b,c){c||(c=p.create());var d=.5*a,e=Math.sin(d);return c[3]=Math.cos(d),c[0]=e*b[0],c[1]=e*b[1],c[2]=e*b[2],c},p.toAngleAxis=function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];if(c>0){b[3]=2*Math.acos(a[3]);var d=e.invsqrt(c);b[0]=a[0]*d,b[1]=a[1]*d,b[2]=a[2]*d}else b[3]=0,b[0]=1,b[1]=0,b[2]=0;return b},p.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};var r={};r.create=function(a){var b=new f(2);return a?(b[0]=a[0],b[1]=a[1]):(b[0]=0,b[1]=0),b},r.createFrom=function(a,b){var c=new f(2);return c[0]=a,c[1]=b,c},r.add=function(a,b,c){return c||(c=b),c[0]=a[0]+b[0],c[1]=a[1]+b[1],c},r.subtract=function(a,b,c){return c||(c=b),c[0]=a[0]-b[0],c[1]=a[1]-b[1],c},r.multiply=function(a,b,c){return c||(c=b),c[0]=a[0]*b[0],c[1]=a[1]*b[1],c},r.divide=function(a,b,c){return c||(c=b),c[0]=a[0]/b[0],c[1]=a[1]/b[1],c},r.scale=function(a,b,c){return c||(c=a),c[0]=a[0]*b,c[1]=a[1]*b,c},r.dist=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)},r.set=function(a,b){return b[0]=a[0],b[1]=a[1],b},r.equal=function(a,b){return a===b||Math.abs(a[0]-b[0])<d&&Math.abs(a[1]-b[1])<d},r.negate=function(a,b){return b||(b=a),b[0]=-a[0],b[1]=-a[1],b},r.normalize=function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1];return c>0?(c=Math.sqrt(c),b[0]=a[0]/c,b[1]=a[1]/c):b[0]=b[1]=0,b},r.cross=function(a,b,c){var d=a[0]*b[1]-a[1]*b[0];return c?(c[0]=c[1]=0,c[2]=d,c):d},r.length=function(a){var b=a[0],c=a[1];return Math.sqrt(b*b+c*c)},r.squaredLength=function(a){var b=a[0],c=a[1];return b*b+c*c},r.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]},r.direction=function(a,b,c){c||(c=a);var d=a[0]-b[0],e=a[1]-b[1],f=d*d+e*e;return f?(f=1/Math.sqrt(f),c[0]=d*f,c[1]=e*f,c):(c[0]=0,c[1]=0,c[2]=0,c)},r.lerp=function(a,b,c,d){return d||(d=a),d[0]=a[0]+c*(b[0]-a[0]),d[1]=a[1]+c*(b[1]-a[1]),d},r.str=function(a){return"["+a[0]+", "+a[1]+"]"};var s={};s.create=function(a){var b=new f(4);return a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0,b},s.createFrom=function(a,b,c,d){var e=new f(4);return e[0]=a,e[1]=b,e[2]=c,e[3]=d,e},s.set=function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},s.equal=function(a,b){return a===b||Math.abs(a[0]-b[0])<d&&Math.abs(a[1]-b[1])<d&&Math.abs(a[2]-b[2])<d&&Math.abs(a[3]-b[3])<d},s.identity=function(a){return a||(a=s.create()),a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},s.transpose=function(a,b){if(!b||a===b){var c=a[1];return a[1]=a[2],a[2]=c,a}return b[0]=a[0],b[1]=a[2],b[2]=a[1],b[3]=a[3],b},s.determinant=function(a){return a[0]*a[3]-a[2]*a[1]},s.inverse=function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=a[3],g=c*f-e*d;return g?(g=1/g,b[0]=f*g,b[1]=-d*g,b[2]=-e*g,b[3]=c*g,b):null},s.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],g=a[3];return c[0]=d*b[0]+e*b[2],c[1]=d*b[1]+e*b[3],c[2]=f*b[0]+g*b[2],c[3]=f*b[1]+g*b[3],c},s.rotate=function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],g=a[3],h=Math.sin(b),i=Math.cos(b);return c[0]=d*i+e*h,c[1]=d*-h+e*i,c[2]=f*i+g*h,c[3]=f*-h+g*i,c},s.multiplyVec2=function(a,b,c){c||(c=b);var d=b[0],e=b[1];return c[0]=d*a[0]+e*a[1],c[1]=d*a[2]+e*a[3],c},s.scale=function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],g=a[3],h=b[0],i=b[1];return c[0]=d*h,c[1]=e*i,c[2]=f*h,c[3]=g*i,c},s.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};var t={};return t.create=function(a){var b=new f(4);return a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):(b[0]=0,b[1]=0,b[2]=0,b[3]=0),b},t.createFrom=function(a,b,c,d){var e=new f(4);return e[0]=a,e[1]=b,e[2]=c,e[3]=d,e},t.add=function(a,b,c){return c||(c=b),c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c[3]=a[3]+b[3],c},t.subtract=function(a,b,c){return c||(c=b),c[0]=a[0]-b[0],c[1]=a[1]-b[1],c[2]=a[2]-b[2],c[3]=a[3]-b[3],c
},t.multiply=function(a,b,c){return c||(c=b),c[0]=a[0]*b[0],c[1]=a[1]*b[1],c[2]=a[2]*b[2],c[3]=a[3]*b[3],c},t.divide=function(a,b,c){return c||(c=b),c[0]=a[0]/b[0],c[1]=a[1]/b[1],c[2]=a[2]/b[2],c[3]=a[3]/b[3],c},t.scale=function(a,b,c){return c||(c=a),c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,c[3]=a[3]*b,c},t.set=function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},t.equal=function(a,b){return a===b||Math.abs(a[0]-b[0])<d&&Math.abs(a[1]-b[1])<d&&Math.abs(a[2]-b[2])<d&&Math.abs(a[3]-b[3])<d},t.negate=function(a,b){return b||(b=a),b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=-a[3],b},t.length=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return Math.sqrt(b*b+c*c+d*d+e*e)},t.squaredLength=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return b*b+c*c+d*d+e*e},t.lerp=function(a,b,c,d){return d||(d=a),d[0]=a[0]+c*(b[0]-a[0]),d[1]=a[1]+c*(b[1]-a[1]),d[2]=a[2]+c*(b[2]-a[2]),d[3]=a[3]+c*(b[3]-a[3]),d},t.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"},a&&(a.glMatrixArrayType=f,a.MatrixArray=f,a.setMatrixArrayType=b,a.determineMatrixArrayType=c,a.glMath=e,a.vec2=r,a.vec3=g,a.vec4=t,a.mat2=s,a.mat3=n,a.mat4=o,a.quat4=p),{glMatrixArrayType:f,MatrixArray:f,setMatrixArrayType:b,determineMatrixArrayType:c,glMath:e,vec2:r,vec3:g,vec4:t,mat2:s,mat3:n,mat4:o,quat4:p}}),define("com/duck/game/view/TriangleMeshShader",["require","exports","module","PIXI","libs/gl-matrix"],function(a,b,c){{var d=a("PIXI");a("libs/gl-matrix")}d.TriangleMeshShader=function(a,b,c,e){this._UID=d._UID++,this.gl=a,this.uniforms=e||{},this.uniforms.dimensions={type:"2f",value:{x:0,y:0}},this.uniforms.transform={type:"mat4",value:null},this.uniforms.tint={type:"4fv",value:[1,1,1,1]},this.fragmentSrc=b||["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform float alpha;","uniform vec4 tint;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * alpha * tint;","}"],this.vertexSrc=c||["attribute vec3 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform vec2 dimensions;","uniform mat4 transform;","varying vec2 vTextureCoord;","varying float vColor;","void main(void) {","   float focus = 700.0;","   vec3 modified = ( transform * vec4(aVertexPosition, 1.0) ).xyz;","   float scaleRatio = ( focus / (focus - modified.z) );","   vec2 real = vec2((modified.xy)) * scaleRatio;","   vec3 v = translationMatrix * vec3(real , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0 , 1.0);","   vTextureCoord = aTextureCoord;","   vColor = smoothstep(-3.0, 3.0, aVertexPosition.z);","}"],this.init()},d.TriangleMeshShader.prototype=Object.create(d.PixiShader.prototype),d.TriangleMeshShader.prototype.init=function(){var a=this.gl,b=d.compileProgram(a,this.vertexSrc,this.fragmentSrc);this.uSampler=a.getUniformLocation(b,"uSampler"),this.projectionVector=a.getUniformLocation(b,"projectionVector"),this.offsetVector=a.getUniformLocation(b,"offsetVector"),this.colorAttribute=a.getAttribLocation(b,"aColor"),this.aVertexPosition=a.getAttribLocation(b,"aVertexPosition"),this.aVertexNormalsPosition=a.getAttribLocation(b,"aVertexPosition"),this.aTextureCoord=a.getAttribLocation(b,"aTextureCoord"),this.attributes=[this.aVertexPosition,this.aTextureCoord],this.translationMatrix=a.getUniformLocation(b,"translationMatrix"),this.alpha=a.getUniformLocation(b,"alpha"),this.program=b;for(var c in this.uniforms)this.uniforms[c].uniformLocation=a.getUniformLocation(b,c);this.initUniforms()},c.exports=d.TriangleMeshShader}),define("com/duck/game/view/TriangleMesh",["require","exports","module","PIXI","./TriangleMeshShader","libs/gl-matrix"],function(e,f,g){function h(e,f){a=e[0],c=e[1],tx=e[2],b=e[3],d=e[4],ty=e[5],u=e[6],v=e[7],w=e[8];var g=f.x*u+f.y*v+w;if(!g)return{x:0,y:0};g=1/g;var h={x:0,y:0};return h.x=(f.x*a+f.y*c+tx)*g,h.y=(f.x*b+f.y*d+ty)*g,h}function i(a,b,c,d,e,f,g,h,i,k){var l=[1/a,0,0,0,1/b,0,0,0,1],n=j(c,d,e,f,g,h,i,k);return m.mat3.multiply(l,n)}function j(a,b,c,d,e,f,g,h){var i,j=a-c+e-g,k=b-d+f-h;if(j||k){var l=c-e,m=g-e,n=d-f,o=h-f,p=j*o-m*k,q=l*k-j*n,r=l*o-m*n;if(!r)return null;r=1/r;var s=p*r,t=q*r,u=c-a+s*c,v=g-a+t*g,w=d-b+s*d,x=h-b+t*h;return i=[u,v,a,w,x,b,s,t,1]}return i=[c-a,e-c,a,d-b,f-d,b,0,0,1]}var k=e("PIXI"),l=e("./TriangleMeshShader"),m=e("libs/gl-matrix");Mesh=function(a,b,c){k.DisplayObjectContainer.call(this),this.mat4=m.mat4.identity(),this.texture=a,this.meshWidth=b||10,this.meshHeight=c||10,this.uvs=new k.Float32Array([0,1,1,1,1,0,0,1]),this.verticies=new k.Float32Array([0,0,1e3,0,1e3,1e3,0,1e3]),this.colors=new k.Float32Array([1,1,1,1]),this.indices=new k.Uint16Array([0,1,2,3]);var d=this.meshWidth*this.meshHeight,e=[],f=[],g=[],h=[];a.width=1200,a.height=640;for(var i=a.width/(this.meshWidth-1),j=a.height/(this.meshHeight-1),l=0;d>l;l++){var n=l%this.meshWidth,o=l/this.meshWidth|0;e.push(n*i,o*j,0),g.push(n/(this.meshWidth-1),o/(this.meshHeight-1)),f.push(3*Math.random(),0,0,0)}for(var p=this.meshWidth-1,q=this.meshHeight-1,r=p*q,l=0;r>l;l++){var s=l%p,t=l/p|0,u=t*this.meshWidth+s,v=t*this.meshWidth+s+1,w=(t+1)*this.meshWidth+s,x=(t+1)*this.meshWidth+s+1;h.push(u,v,w),h.push(v,x,w)}this.verticies=new k.Float32Array(e),this.uvs=new k.Float32Array(g),this.colors=new k.Float32Array(f),this.indices=new k.Uint16Array(h),this.dirty=!0,this._shader=null,this.count=0},Mesh.prototype=Object.create(k.DisplayObjectContainer.prototype),Mesh.prototype.constructor=Mesh,Mesh.prototype.generateUvs=function(){var a=(this.meshWidth*this.meshHeight,this.uvs),b=this.texture;b.width=b.width||100,b.height=b.height||100;for(var c=(b.width/this.meshWidth,b.height/this.meshHeight,0),d=0;d<a.length;d+=2){var e=c%this.meshWidth,f=c/this.meshWidth|0;c++;var g=e/(this.meshWidth-1),h=f/(this.meshHeight-1);a[d]=(g*b.crop.width+b.crop.x)/b.baseTexture.width,a[d+1]=(h*b.crop.height+b.crop.y)/b.baseTexture.height}},Mesh.prototype._renderWebGL=function(a){!this.visible||this.alpha<=0||(a.spriteBatch.stop(),this._vertexBuffer||this._initWebGL(a),a.shaderManager.setShader(this._shader),this._renderMesh(a),a.spriteBatch.start())},Mesh.prototype.lock=function(){this.verticiesModded=this.verticies.slice()},Mesh.prototype.restore=function(){this.verticies=this.verticiesModded.slice()},Mesh.prototype.resize=function(){for(var a=this.meshWidth*this.meshHeight,b=this.texture.width/(this.meshWidth-1),c=this.texture.height/(this.meshHeight-1),d=0;a>d;d++){var e=d%this.meshWidth,f=d/this.meshWidth|0;this.verticies[3*d]=e*b-this.texture.width/2,this.verticies[3*d+1]=f*c-this.texture.height/2,this.verticies[3*d+2]=0}},Mesh.prototype._initWebGL=function(a){var b=a.gl;this._shader=new l(b),this._vertexBuffer=b.createBuffer(),this._indexBuffer=b.createBuffer(),this._uvBuffer=b.createBuffer(),this._colorBuffer=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,this._vertexBuffer),b.bufferData(b.ARRAY_BUFFER,this.verticies,b.DYNAMIC_DRAW),b.bindBuffer(b.ARRAY_BUFFER,this._uvBuffer),b.bufferData(b.ARRAY_BUFFER,this.uvs,b.STATIC_DRAW),b.bindBuffer(b.ARRAY_BUFFER,this._colorBuffer),b.bufferData(b.ARRAY_BUFFER,this.colors,b.STATIC_DRAW),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this._indexBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,this.indices,b.STATIC_DRAW)},Mesh.prototype._renderMesh=function(a){var b=a.gl,c=a.projection,d=a.offset,e=this._shader;b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA),b.uniformMatrix3fv(e.translationMatrix,!1,this.worldTransform.toArray(!0)),b.uniform2f(e.projectionVector,c.x,-c.y),b.uniform2f(e.offsetVector,-d.x,-d.y),b.uniform1f(e.alpha,this.worldAlpha),this._shader.uniforms.transform.value=this.mat4,m.mat4.identity(this.mat4),m.mat4.translate(this.mat4,[0,0,this.camera.z]),m.mat4.rotateX(this.mat4,-this.rotationX),m.mat4.translate(this.mat4,[-this.camera.x,-this.camera.y,0]),m.mat4.translate(this.mat4,[-80,80,0]),this._shader.syncUniforms();var f=12;this.dirty?(this.dirty=!1,b.bindBuffer(b.ARRAY_BUFFER,this._vertexBuffer),b.bufferData(b.ARRAY_BUFFER,this.verticies,b.STATIC_DRAW),b.vertexAttribPointer(e.aVertexPosition,3,b.FLOAT,!1,f,0),b.bindBuffer(b.ARRAY_BUFFER,this._uvBuffer),b.bufferData(b.ARRAY_BUFFER,this.uvs,b.STATIC_DRAW),b.vertexAttribPointer(e.aTextureCoord,2,b.FLOAT,!1,0,0),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,this.texture.baseTexture._glTextures[b.id]||k.createWebGLTexture(this.texture.baseTexture,b)),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this._indexBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,this.indices,b.STATIC_DRAW)):(b.bindBuffer(b.ARRAY_BUFFER,this._vertexBuffer),b.bufferSubData(b.ARRAY_BUFFER,0,this.verticies),b.vertexAttribPointer(e.aVertexPosition,3,b.FLOAT,!1,f,0),b.bindBuffer(b.ARRAY_BUFFER,this._uvBuffer),b.vertexAttribPointer(e.aTextureCoord,2,b.FLOAT,!1,0,0),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,this.texture.baseTexture._glTextures[b.id]||k.createWebGLTexture(this.texture.baseTexture,b)),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this._indexBuffer)),b.drawElements(b.TRIANGLES,this.indices.length,b.UNSIGNED_SHORT,0)},Mesh.prototype._renderCanvas=function(a){m.mat4.identity(this.mat4),m.mat4.rotateX(this.mat4,this.rotationX),m.mat4.translate(this.mat4,[-this.camera.x,-this.camera.y,this.camera.z]);var b=a.context,c=this.worldTransform;a.roundPixels?b.setTransform(c.a,c.b,c.c,c.d,0|c.tx,0|c.ty):b.setTransform(c.a,c.b,c.c,c.d,c.tx,c.ty);var d=this,e=d.verticies,f=d.uvs,g=this.indices.length/3;this.count++;for(var h=700,i=0;g>i;i++){var j=3*i,k=this.indices[j],l=this.indices[j+1],n=this.indices[j+2],o=e[3*k],p=e[3*l],q=e[3*n],r=e[3*k+1],s=e[3*l+1],t=e[3*n+1],u=m.mat4.multiplyVec3(this.mat4,[o,r,0]);o=u[0],r=u[1],z0=u[2];var v=h/(h+z0);o*=v,r*=v;var u=m.mat4.multiplyVec3(this.mat4,[p,s,0]);p=u[0],s=u[1],z1=u[2];var v=h/(h+z1);p*=v,s*=v;var u=m.mat4.multiplyVec3(this.mat4,[q,t,0]);q=u[0],t=u[1],z2=u[2];var v=h/(h+z2);q*=v,t*=v;var w=f[2*k]*d.texture.width,x=f[2*l]*d.texture.width,y=f[2*n]*d.texture.width,z=f[2*k+1]*d.texture.height,A=f[2*l+1]*d.texture.height,B=f[2*n+1]*d.texture.height;b.save(),b.beginPath(),b.moveTo(o,r),b.lineTo(p,s),b.lineTo(q,t),b.closePath(),b.clip();var C=w*A+z*y+x*B-A*y-z*x-w*B,D=o*A+z*q+p*B-A*q-z*p-o*B,E=w*p+o*y+x*q-p*y-o*x-w*q,F=w*A*q+z*p*y+o*x*B-o*A*y-z*x*q-w*p*B,G=r*A+z*t+s*B-A*t-z*s-r*B,H=w*s+r*y+x*t-s*y-r*x-w*t,I=w*A*t+z*s*y+r*x*B-r*A*y-z*x*t-w*s*B;b.transform(D/C,G/C,E/C,H/C,F/C,I/C),b.globalAlpha=1,b.drawImage(d.texture.baseTexture.source,0,0),b.restore()}},Mesh.prototype.getTexture=function(){!this.canvas},Mesh.prototype.onTextureUpdate=function(){this.updateFrame=!0},Mesh.prototype.projectPoint=function(a){var b=i(this.texture.width,this.texture.height,window.cup3d[0].view.x,window.cup3d[0].view.y,window.cup3d[1].view.x,window.cup3d[1].view.y,window.cup3d[2].view.x,window.cup3d[2].view.y,window.cup3d[3].view.x,window.cup3d[3].view.y),c=m.mat3.inverse(b),d=h(c,a);return d.x-=80,d.y+=80,d},g.exports=Mesh}),define("com/duck/game/view/FloorShader",["require","exports","module","PIXI"],function(a,b,c){var d=a("PIXI");d.FloorShader=function(a){this._UID=d._UID++,this.gl=a,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform sampler2D uSampler;","uniform sampler2D uSampler2;","uniform sampler2D uSampler3;","uniform sampler2D map;","uniform vec4 tint;","void main(void) {","   vec4 col1 = texture2D(uSampler, vTextureCoord);","   vec4 col2 = texture2D(uSampler2, vTextureCoord) * tint;","   vec4 col3 = texture2D(uSampler3, vTextureCoord) * tint;","   float map = texture2D(map, vTextureCoord).r;","   float step1 = smoothstep(0.2, 0.22, map);","   vec4 combined = mix(col1, col2, step1);","   float step2 = smoothstep(0.7, 0.72, map);","   combined = mix(combined, col3, step2);","   gl_FragColor = combined;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","varying vec2 vTextureCoord;","void main(void) {","   vec2 v = aVertexPosition;","   v -= offsetVector.xy;","   v.y *= -1.0;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = gl_Position.xy * 0.5 ;","   vTextureCoord.x += 0.5;","   vTextureCoord.y += 0.5;","}"],this.init()},d.FloorShader.prototype.init=function(){var a=this.gl,b=d.compileProgram(a,this.vertexSrc,this.fragmentSrc);a.useProgram(b),this.projectionVector=a.getUniformLocation(b,"projectionVector"),this.offsetVector=a.getUniformLocation(b,"offsetVector"),this.tintColor=a.getUniformLocation(b,"tint"),this.sampler=a.getUniformLocation(b,"uSampler"),this.sampler2=a.getUniformLocation(b,"uSampler2"),this.sampler3=a.getUniformLocation(b,"uSampler3"),this.tint=a.getUniformLocation(b,"tint"),this.map=a.getUniformLocation(b,"map"),this.aVertexPosition=a.getAttribLocation(b,"aVertexPosition"),this.attributes=[this.aVertexPosition],this.translationMatrix=a.getUniformLocation(b,"translationMatrix"),this.alpha=a.getUniformLocation(b,"alpha"),this.program=b},d.FloorShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},c.exports=d.FloorShader}),define("com/duck/game/view/FloorTexture",["require","exports","module","PIXI","./FloorShader"],function(a,b,c){{var d=a("PIXI");a("./FloorShader")}d.FloorTexture=function(a,b,c,e,f){d.RenderTexture.call(this,a,b,c,e,f),this.verts=new d.Float32Array(16);var g=0;this.verts[g++]=0,this.verts[g++]=0,this.verts[g++]=0,this.verts[g++]=0,this.verts[g++]=100,this.verts[g++]=0,this.verts[g++]=0,this.verts[g++]=0,this.verts[g++]=100,this.verts[g++]=100,this.verts[g++]=0,this.verts[g++]=0,this.verts[g++]=0,this.verts[g++]=100,this.verts[g++]=0,this.verts[g++]=0,this.indices=new d.Uint16Array(6),this.indices[0]=0,this.indices[1]=1,this.indices[2]=2,this.indices[3]=0,this.indices[4]=2,this.indices[5]=3,this.floorShader=null,this.layer1=new d.Texture.fromImage(ASSET_URL+"img/game/ground.jpg"),this.layer2=new d.Texture.fromImage(ASSET_URL+"img/game/ground2.jpg"),this.layer3=new d.Texture.fromImage(ASSET_URL+"img/game/ground3.jpg"),this.brush=new d.Sprite.fromImage(ASSET_URL+"img/game/blob2.png"),this.brush.alpha=.5,this.brush.anchor.set(.5),this.map=new d.RenderTexture(a,b),this.black=(new d.Graphics).beginFill(0).drawRect(0,0,this.width,this.height),this.map.render(this.black),this.sprite=new d.Sprite(this.layer1),this.tempMatrix=new d.Matrix,this.night=!1},d.FloorTexture.prototype=Object.create(d.RenderTexture.prototype),d.FloorTexture.prototype.reset=function(a){a&&(this.layer1=a,this.sprite.setTexture(this.layer1)),this.render(this.sprite),this.map.render(this.black)},d.FloorTexture.prototype.addDamage=function(a){this.tempMatrix.tx=a.x,this.tempMatrix.ty=a.y,this.map.render(this.brush,this.tempMatrix);var b=this.renderer.gl;this.floorShader||(this.floorShader=new d.FloorShader(b),this.vertexBuffer=b.createBuffer(),this.indexBuffer=b.createBuffer(),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.indexBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,this.indices,b.STATIC_DRAW),b.bindBuffer(b.ARRAY_BUFFER,this.vertexBuffer),b.bufferData(b.ARRAY_BUFFER,this.verts,b.DYNAMIC_DRAW)),b.colorMask(!0,!0,!0,!0),b.viewport(0,0,this.width*this.resolution,this.height*this.resolution),b.bindFramebuffer(b.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.dirty=!1,this.renderer.shaderManager.setShader(this.floorShader);this.renderer.updateTexture;this.layer1.baseTexture._dirty[b.id]&&this.renderer.updateTexture(this.layer1.baseTexture),this.layer2.baseTexture._dirty[b.id]&&this.renderer.updateTexture(this.layer2.baseTexture),this.layer3.baseTexture._dirty[b.id]&&this.renderer.updateTexture(this.layer3.baseTexture),this.map.baseTexture._dirty[b.id]&&this.renderer.updateTexture(this.map.baseTexture),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,this.layer1.baseTexture._glTextures[b.id]),b.uniform1i(this.floorShader.sampler,0),this.night?b.uniform4f(this.floorShader.tint,5/255*1.5,45/255*1.5,58/255*1.5,1):b.uniform4f(this.floorShader.tint,1,1,1,1),b.activeTexture(b.TEXTURE1),b.bindTexture(b.TEXTURE_2D,this.layer2.baseTexture._glTextures[b.id]),b.uniform1i(this.floorShader.sampler2,1),b.activeTexture(b.TEXTURE2),b.bindTexture(b.TEXTURE_2D,this.layer3.baseTexture._glTextures[b.id]),b.uniform1i(this.floorShader.sampler3,2),b.activeTexture(b.TEXTURE3),b.bindTexture(b.TEXTURE_2D,this.map.baseTexture._glTextures[b.id]),b.uniform1i(this.floorShader.map,3),b.bindBuffer(b.ARRAY_BUFFER,this.vertexBuffer),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var c=this.projection;b.uniform2f(this.floorShader.projectionVector,c.x,c.y),b.uniform2f(this.floorShader.offsetVector,-a.x+50,a.y+50-this.height);var e=16;b.vertexAttribPointer(this.floorShader.aVertexPosition,2,b.FLOAT,!1,e,0),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0),this.renderer.spriteBatch.dirty=!0},c.exports=d.FloorTexture}),define("com/duck/game/view/NightShader",["require","exports","module","PIXI"],function(a,b,c){var d=a("PIXI"),e=function(){d.AbstractFilter.call(this),this.passes=[this],this.uniforms={gray:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float gray;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), 1.0);","}"]};e.prototype=Object.create(d.AbstractFilter.prototype),e.prototype.constructor=e,Object.defineProperty(e.prototype,"gray",{get:function(){return this.uniforms.gray.value},set:function(a){this.uniforms.gray.value=a}}),c.exports=e}),define("com/fido/game/World",["require","exports","module","signals","com/duck/game/view/TriangleMesh","com/fido/game/GameObject","com/duck/game/view/FloorTexture","com/duck/game/view/NightShader"],function(a,b,c){function d(a,b){return a.depth+a.depthOffset-(b.depth+b.depthOffset)}var e=(a("signals"),a("com/duck/game/view/TriangleMesh")),f=a("com/fido/game/GameObject"),g=a("com/duck/game/view/FloorTexture"),h=a("com/duck/game/view/NightShader"),i=function(a){this.fake=a,this.elements=[],this.view=new PIXI.DisplayObjectContainer,this.currentShader=new h,this.camera={x:0,y:0,z:0,focus:700},this.camera.fakeZoom=1,this.rotation=0,this.viewDimensions={width:1040,height:640},this.count=0,this.depthCount=0,this.fake?(this.zoomContainer=new PIXI.DisplayObjectContainer,this.zoomContainer.scale.set(1),this.zoomContainer.pivot.set(520,320),this.zoomContainer.position.set(this.zoomContainer.pivot.x,this.zoomContainer.pivot.y),this.floor=new PIXI.Sprite.fromImage(ASSET_URL+"img/game/ground_canvas.jpg"),this.floor.depthOffset=-1e3,this.floor.projectPoint=function(a){return new PIXI.Point(a.x,a.y)}.bind(this),this.view.addChild(this.floor)):(this.floorTexture=new g(1200,640),this.floor=new e(this.floorTexture),this.floor.camera=this.camera,this.floor.viewDimensions=this.viewDimensions,this.floor.rotationX=0,this.floor.x=this.viewDimensions.width/2,this.floor.y=this.viewDimensions.height/2,this.floor.depthOffset=-1e3,this.view.addChild(this.floor)),this.sky=new f(new PIXI.Sprite.fromImage(ASSET_URL+"img/game/sky.jpg")),this.sky.position.y=85,this.sky.position.x=this.viewDimensions.width/2,this.sky.view.anchor.y=1,this.sky.view.anchor.x=.5,this.sky.view.scaleOffset=1.25,this.sky.view.depthOffset=-3e3,this.add(this.sky),this.leg=new PIXI.Sprite.fromFrame("goofy_leg.png"),this.sky.view.addChild(this.leg),this.leg.x=75,this.leg.y=-125,this.leg.scale.set(1),this.leg.anchor.set(.9,.1),this.leg.count=0,this.leftTree=new f(new PIXI.Sprite.fromImage(ASSET_URL+"img/game/foliage_right.png")),this.leftTree.position.y=775,this.leftTree.position.x=477,this.leftTree.view.pivot.y=150,this.leftTree.view.anchor.y=1,this.add(this.leftTree),this.rightTree=new f(new PIXI.Sprite.fromImage(ASSET_URL+"img/game/foliage_right.png")),this.rightTree.position.y=775,this.rightTree.position.x=564,this.rightTree.view.pivot.y=150,this.rightTree.view.anchor.y=1,this.add(this.rightTree),this.rightTree.view.scaleOffset=.66,this.leftTree.view.scaleOffset=.66,this.update=a?this.updateFake:this.updateReal};i.prototype.setScene=function(a){this.sky.view.setTexture(PIXI.Texture.fromImage(a.sky)),this.leg.alpha=a.leg,this.fake?this.floor.setTexture(PIXI.Texture.fromImage(a.canvas)):(this.floorTexture.night=a.night,this.floorTexture.reset(PIXI.Texture.fromImage(a.ground)))},i.prototype.updateReal=function(){this.floor.rotationX=this.rotation,this.leg.count++,this.leg.rotation=.2*Math.sin(.05*this.leg.count)+.2;var a=this.rotation,b=this.camera.focus,c=Math.sin(a),e=Math.cos(a),f=this.viewDimensions.width/2,g=this.viewDimensions.height/2;this.count+=.01;for(var h=this.elements.length-1;h>=0;h--){var i=this.elements[h],j=i.position.z,k=i.position.y-this.camera.y,l=e*k-c*j,m=c*k+e*j;m-=this.camera.z;var n=b/(b+m),o=(i.position.x-this.camera.x)*n,p=l*n;i.view.scale.x=i.view.scale.y=n*i.view.scaleOffset,i.view.position.x=o+f,i.view.position.y=p+g,i.view.depth=k,this.elements[h].update()}this.rightTree.view.scale.x*=-1,this.depthCount++,this.depthCount%5===0&&(this.view.children.sort(d),this.view.stage.interactionManager.dirty=!0)},i.prototype.updateFake=function(){this.floor.rotationX=this.rotation,this.leg.count++,this.leg.rotation=.2*Math.sin(.05*this.leg.count)+.2;var a=this.rotation,b=this.camera.focus;a=-.6;for(var c=Math.sin(a),e=Math.cos(a),f=this.viewDimensions.width/2,g=this.viewDimensions.height/2,h=350,i=this.elements.length-1;i>=0;i--){var j=this.elements[i],k=j.position.z,l=j.position.y-h,m=e*l-c*k,n=c*l+e*k,o=b/(b+n),p=(j.position.x-this.camera.x)*o,q=m*o;j.view.scale.x=j.view.scale.y=o*j.view.scaleOffset,j.view.position.x=p+f,j.view.position.y=q+g,j.view.depth=l,this.elements[i].update()}this.floor.y=g+80-h+35+54,this.floor.x=g+80+50-this.camera.x,this.floor.scale.y=.9,this.rightTree.view.scale.x*=-1,this.zoomContainer.scale.set(this.camera.fakeZoom),this.count++,this.count%5===0&&this.view.children.sort(d),this.count>100&&(this.count=0,this.view.stage.interactionManager.dirty=!0)},i.prototype.add=function(a){a.world||(a.world=this,this.elements.push(a),this.view.addChildAt(a.view,0))},i.prototype.remove=function(a){var b=this.elements.indexOf(a);-1!==b&&(a.world=null,this.elements.splice(b,1),this.view.removeChild(a.view))},c.exports=i}),define("com/duck/game/control/PointAndClickController",["require","exports","module","libs/gl-matrix"],function(a,b,c){var d=a("libs/gl-matrix"),e=function(a){this.game=a,this.view=this.game.view,this.view.interactive=!0,this.view.buttonMode=!0,this.grid=a.gridWorld,this.player=a.donald,this.m=d.mat4.identity(),this.view.mousemove=function(a){return}.bind(this)};e.prototype.disable=function(){this.view.interactive=!1},e.prototype.enable=function(){this.view.interactive=!0},e.prototype.onDown=function(a){var b=this.grid,c=a.getLocalPosition(this.view),d=this.game.world.viewDimensions.width/2,e=this.game.world.viewDimensions.height/2;c.x-=d,c.y-=e;var f=this.game.world.floor.projectPoint(c),g=b.getCell(f.x,f.y);g.data},c.exports=e}),define("com/duck/game/hud/DetailText",["require","exports","module","PIXI","com/fido/game/GameObjectPool","signals"],function(a,b,c){var d=a("PIXI"),e=(a("com/fido/game/GameObjectPool"),a("signals")),f=function(){d.Text.call(this,"YAY",{font:"50px "+window.HEADER_FONT,fill:"#eaff32",dropShadow:!0}),this.anchor.set(.5),this.count=0,this.multiplierColors=["#2ce2d4","#d7ff20","#ffc12c","#fd5200"],this.onFinish=new e};f.prototype=Object.create(d.Text.prototype),f.prototype.setup=function(a,b,c,d){this.x=a,this.y=b,this.speed=5,this.alpha=1,this.count=0,this.scale.x=this.scale.y=0;var e=1+.2*(d-1);e>1.5&&(e=1.5),TweenLite.to(this.scale,.5,{x:e,y:e,ease:Elastic.easeOut}),this.style.fill=this.multiplierColors[(d-1)%4],this.setText(c+(d>1?" x "+d:""))},f.prototype.updateTransform=function(){d.Text.prototype.updateTransform.call(this),this.speed*=.95,this.position.y-=this.speed,this.count++,this.count>20&&(this.alpha*=.95),this.alpha<.3&&this.onFinish.dispatch(this)},c.exports=f}),define("com/fido/utils/Math2",["require","exports","module"],function(a,b,c){var d={};d.random=function(a,b){return a=a||0,b=void 0===b?1:b,a+Math.random()*(b-a)},d.randomInt=function(a,b){return a+Math.random()*(b-a)|0},d.randomSeed=function(a,b,c){min=a,max=b,c=c||1,c=(9301*c+49297)%233280;var d=c/233280;return min+d*(max-min)},d.randomChance=function(a,b){return d.randomSeed(0,1,b)>a},c.exports=d}),define("com/duck/game/hud/WaterTank",["require","exports","module","PIXI","com/fido/game/GameObjectPool","signals","com/fido/physics/Spring","com/fido/utils/Math2","com/fido/system/Ticker"],function(a,b,c){var d=a("PIXI"),e=(a("com/fido/game/GameObjectPool"),a("signals"),a("com/fido/physics/Spring")),f=a("com/fido/utils/Math2"),g=a("com/fido/system/Ticker"),h=function(){d.DisplayObjectContainer.call(this),this.container=new d.DisplayObjectContainer,this.addChild(this.container),this.tank=new d.Sprite.fromFrame("water_meter_bottle.png"),this.outline=new d.Sprite.fromFrame("water_meter_outlines.png"),this.water=new d.Sprite.fromFrame("water_meter_fluid.png"),this.gubbles=new d.MovieClip.fromFrames(["gubbles_panic01.png","gubbles_panic02.png","gubbles_mid.png","gubbles_happy.png"]),this.gubbles.gotoAndStop(3),this.tank.anchor.set(.5),this.outline.anchor.set(.5),this.water.anchor.set(.5),this.onFillBound=this.onFill.bind(this),this.isEmpty=!1,this.fill=100,this.barrelMask=(new d.Graphics).beginFill(16711680).drawRect(0,-160,133,163),this.barrelMask.x=-61.5,this.barrelMask.y=78,this.water.mask=this.barrelMask,this.container.addChild(this.tank),this.container.addChild(this.water),this.container.addChild(this.outline),this.container.addChild(this.barrelMask),this.springFish=new e,this.springFish.tx=1,this.spring=new e,this.spring.tx=0,this.container.pivot.y=72.5,this.container.rotation=.3,this.count=0,this.pipe=new d.Sprite.fromFrame("water_meter_pipe.png"),this.addChildAt(this.pipe,0),this.pipe.pivot.x=90,this.gubbles.anchor.set(.5),this.container.addChild(this.gubbles),this.pipe.x=-5,this.pipe.y=-8,this.light=new d.Sprite.fromFrame("light_green.png"),this.ratio=0,this.container.addChild(this.light),this.light.anchor.set(.5,1),this.light.position.y=-67,this.lightFrames=[d.Texture.fromFrame("light_green.png"),d.Texture.fromFrame("light_amber.png"),d.Texture.fromFrame("light_red.png")],this.flash=new d.Sprite.fromFrame("light_red_flash.png"),this.flash.anchor.set(.5),this.flash.y=-27,this.light.addChild(this.flash),this.sparkly=!1,this.total=5,this.sparkles=[],this.sparkleLayer=new d.DisplayObjectContainer,this.sparkleDimension=new d.Rectangle(-50,-100,100,200);for(var a=0;a<this.total;a++){var b=d.Sprite.fromFrame("sparkle.png");b.anchor.set(.5),b.life=0,b.life=a/this.total*100,this.sparkleLayer.addChild(b)}this.container.addChild(this.sparkleLayer),this.sparkleUpdate=function(){for(var a=this.sparkleLayer.children,b=a.length-1;b>=0;b--){var c=a[b];c.life-=3*g.instance.deltaTime,c.rotation+=.1,c.scale.set(Math.sin(c.life/100*Math.PI)),c.life<0&&(c.life=100,c.x=f.random(this.sparkleDimension.x,this.sparkleDimension.x+this.sparkleDimension.width),c.y=f.random(this.sparkleDimension.y,this.sparkleDimension.y+this.sparkleDimension.height))}}.bind(this)};h.prototype=Object.create(d.DisplayObjectContainer.prototype),h.prototype.update=function(){if(this.spring.update(),this.springFish.update(),this.container.scale.x=1+this.spring.x,this.container.scale.y=1-this.spring.x,this.count+=.5,this.pipe.rotation=.8*-this.container.rotation,this.container.rotation=.02*Math.sin(.1*this.count),this.light.scale.x=this.gubbles.scale.x=1/this.container.scale.x,this.light.scale.y=this.gubbles.scale.y=1/this.container.scale.y,0===this.ratio){this.light;var a=.4*this.count%2;this.flash.visible=.1*this.count%2>1,this.gubbles.gotoAndStop(a>1?0:1)}this.sparkly?(this.sparkleLayer.visible=!0,this.sparkleUpdate()):this.sparkleLayer.visible=!1,this.gubbles.y=-163*this.barrelMask.scale.y+80,this.gubbles.y<0?this.gubbles.y=0:this.gubbles.y>45&&(this.gubbles.y=45),this.gubbles.scale.x=this.springFish.x,this.gubbles.scale.y=1/this.gubbles.scale.x},h.prototype.refill=function(a){this.gubbles.gotoAndStop(2),this.isEmpty=!1,this.ratio=1,this.light.setTexture(this.lightFrames[0]),this.flash.visible=!1,TweenLite.to(this.barrelMask.scale,.5,{y:a,ease:Back.easeIn,onComplete:this.onFillBound})},h.prototype.onFill=function(){this.springFish.dx=-.1,this.gubbles.gotoAndStop(3)},h.prototype.setRatio=function(a){this.ratio=a,a>1&&(a=1),this.flash.visible=!1,0===this.ratio?(this.light.setTexture(this.lightFrames[2]),this.gubbles.gotoAndStop(0),this.springFish.dx=-.1):(this.light.setTexture(this.lightFrames[0]),this.ratio<.51?(this.gubbles.gotoAndStop(2),this.springFish.dx=-.1):(this.springFish.dx=-.1,this.gubbles.gotoAndStop(3))),TweenLite.to(this.barrelMask.scale,.5,{y:a+.001,ease:Back.easeInOut}),this.spring.x=.3},c.exports=h}),define("com/duck/game/hud/RageBar",["require","exports","module","PIXI","com/fido/game/GameObjectPool","signals"],function(a,b,c){var d=a("PIXI"),e=(a("com/fido/game/GameObjectPool"),a("signals"),function(){d.DisplayObjectContainer.call(this),this.widthy=600,this.bg=(new d.Graphics).beginFill(0).drawRect(0,0,100,40),this.bar=(new d.Graphics).beginFill(16711680).drawRect(0,0,100,40),this.bg.scale.x=this.widthy/100,this.bar.scale.x=0,this.text=new d.Text("30!",{font:"bold 50px Arial",fill:"#FF0000"}),this.text.anchor.x=.5,this.addChild(this.text)});e.prototype=Object.create(d.DisplayObjectContainer.prototype),e.prototype.refill=function(){},e.prototype.update=function(a){this.text.setText(0|a)},c.exports=e}),define("com/duck/game/hud/LifeBar",["require","exports","module","PIXI","com/fido/game/GameObjectPool","signals"],function(a,b,c){var d=a("PIXI"),e=(a("com/fido/game/GameObjectPool"),a("signals"),function(){d.DisplayObjectContainer.call(this),this.bg=new d.Sprite.fromFrame("meltdown_00.png"),this.addChild(this.bg),this.bar=d.MovieClip.fromFrames(["meltdown_01.png","meltdown_02.png","meltdown_03.png"]),this.duck=d.MovieClip.fromFrames(["meltdown_donald_00.png","meltdown_donald_01.png","meltdown_donald_02.png","meltdown_donald_03.png"]),this.duck.anchor.set(.38,.9),this.bar.anchor.set(.5),this.bar.position.set(150,93),this.addChild(this.bar),this.addChild(this.duck),this.duck.position.set(66,107),this.bar.visible=!1,this.fire=d.MovieClip.fromFrames(["meltdown_flames00.png","meltdown_flames01.png","meltdown_flames02.png"]),this.fire.anchor.set(.5),this.fire.position.set(46,27),this.fire.play(),this.fire.animationSpeed=.2,this.fire.visible=!1,this.addChildAt(this.fire,0),this.stars=[];for(var a=0;3>a;a++){var b=new d.Sprite.fromFrame("life_star.png");this.stars[a]=b,b.anchor.set(.5),this.addChild(b),b.x=50*(2-a)+153,b.y=113}});e.prototype=Object.create(d.DisplayObjectContainer.prototype),e.prototype.refill=function(){},e.prototype.update=function(a){this.duck.gotoAndStop(a),0===a?this.bar.visible=!1:(this.bar.visible=!0,this.bar.gotoAndStop(a-1)),this.fire.visible=a>=3?!0:!1;for(var b=this.stars.length-1;b>=0;b--){var c=this.stars[b];b>=a?TweenLite.to(c.scale,.6,{x:1,y:1,ease:Back.easeOut}):TweenLite.to(c.scale,.6,{x:0,y:0,ease:Back.easeIn})}},c.exports=e}),define("com/fido/swfy/SwfyAnimation",["require","exports","module"],function(a,b,c){var d={mc0:{view:"r_shoulder.png",depth:0,startFrame:0,endFrame:106,position:[265.05,786.05,265.05,780.95,265,725.1,265,669.25,265,613.35,265,557.5,265.05,501.6,265.05,445.75,265.05,389.85,265.05,334,265.05,278.05,265,278.5,265,278.9,265,279.2,264.95,279.45,264.95,279.55,265.05,274.05,265.3,273.5,266.05,272,264.55,280.2,264.05,283.05,264.05,280.1,264.05,279.05,262.55,280.5,262.05,281.05,262.1,277.3,262.05,276,263.6,281.25,264.05,283.05,264.05,280.05,264.05,279.05,262.6,280.5,262.05,281.05,262.1,277.3,262.05,276,263.6,287.9,264.05,292.05,264.05,281.85,264.05,278.05,262.55,283.3,262.05,285.05,264.3,279.2,265.05,277.05,265.3,275.75,266.05,272,264.55,280.2,264.05,283.05,264.05,277.25,264.05,275.05,262.55,281.05,262.05,283.05,262.1,277.8,262.05,276,263.6,284.25,264.05,287.05,262.55,281.1,262.05,279.05,262.1,282.7,262.05,284.1,262.1,278,262.05,276,263.6,281.2,264.05,283.05,264.55,282.2,265.05,280.05,265.8,276.3,266.65,271.2,270,259.25,274.05,247.2,278.8,235,284.15,222.5,289.8,210,296.55,196.95,303.8,183.7,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05,311.65,170.05],scale:[1.388519287109375,1.3887939453125,1.38848876953125,1.3887939453125,1.3885040283203125,1.3887939453125,1.3885040283203125,1.3887939453125,1.3885040283203125,1.3887939453125,1.3885040283203125,1.3887939453125,1.3885040283203125,1.3887939453125,1.3885040283203125,1.3887939453125,1.3885345458984375,1.3887939453125,1.3885345458984375,1.3887939453125,1.388519287109375,1.3887939453125,1.3885040283203125,1.3887939453125,1.3885040283203125,1.3887939453125,1.3885040283203125,1.3887939453125,1.3885040283203125,1.3887939453125,1.3885040283203125,1.3887939453125,1.388519287109375,1.3887939453125,1.3885040283203125,1.401824951171875,1.388519287109375,1.440887451171875,1.3885040283203125,1.401824951171875,1.388519287109375,1.3887939453125,1.3885040283203125,1.3887939453125,1.388519287109375,1.3887939453125,1.3885040283203125,1.3887939453125,1.388519287109375,1.3887939453125,1.3885040283203125,1.408538818359375,1.388519287109375,1.415130615234375,1.3885040283203125,1.3954620361328125,1.388519287109375,1.3887939453125,1.3885040283203125,1.3887939453125,1.388519287109375,1.3887939453125,1.3885040283203125,1.3887939453125,1.388519287109375,1.3887939453125,1.3885040283203125,1.408538818359375,1.388519287109375,1.415130615234375,1.3885040283203125,1.3635711669921875,1.388519287109375,1.3456878662109375,1.3885040283203125,1.377166748046875,1.388519287109375,1.3887939453125,1.3885040283203125,1.3694610595703125,1.388519287109375,1.363037109375,1.3885040283203125,1.394500732421875,1.388519287109375,1.4061279296875,1.3885040283203125,1.4148101806640625,1.388519287109375,1.440887451171875,1.3885040283203125,1.401824951171875,1.388519287109375,1.3887939453125,1.3885040283203125,1.40765380859375,1.388519287109375,1.4145355224609375,1.3885040283203125,1.3952178955078125,1.388519287109375,1.3887939453125,1.3885040283203125,1.408538818359375,1.388519287109375,1.415130615234375,1.3885040283203125,1.3762054443359375,1.388519287109375,1.363037109375,1.3885040283203125,1.382232666015625,1.388519287109375,1.3887939453125,1.3885040283203125,1.3821563720703125,1.388519287109375,1.3798065185546875,1.3885040283203125,1.40631103515625,1.388519287109375,1.415130615234375,1.3885040283203125,1.39556884765625,1.388519287109375,1.3887939453125,1.381912505148182,1.3849184859994192,1.3621621205134467,1.3732708926104074,1.3293166512081216,1.353981658939866,1.2835065877127414,1.3270823456627925,1.178390429527376,1.2652877653404269,1.0734607693707439,1.2036553239153343,.9685612517965407,1.1420655654676857,.8637399733097029,1.0804967010965594,.7589102898909494,1.018948315262643,.6541046778381737,.9574103560643844,.5493498287629541,.8959402690616137,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665,.4451471181626111,.835423816682665],alpha:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],rotation:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-.0358428955078125,-.5184173583984375,-1.290191650390625,-2.5127716064453125,-5.0176544189453125,-7.535247802734375,-10.04937744140625,-12.567489624023438,-15.271026611328125,-17.787872314453125,-20.310379028320312,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125,-22.94561767578125]},mc1:{view:"body.png",depth:1,startFrame:0,endFrame:52,position:[308.6,677.55,308.6,672.45,308.6,616.6,308.6,560.75,308.6,504.85,308.6,449,308.6,393.1,308.6,337.25,308.6,281.35,308.6,225.5,308.6,169.55,306.3,171.8,305.55,172.55,307.85,166.6,308.6,164.55,307.85,166.55,305.55,172.55,307.85,170.3,308.6,169.55,307.85,171.55,305.55,177.55,307.85,171.6,308.6,169.55,307.85,170.3,305.55,172.55,307.85,166.6,308.6,164.55,307.85,166.55,305.55,172.55,307.85,170.3,308.6,169.55,307.85,170.3,305.55,172.55,307.85,170.3,308.6,169.55,307.1,170.3,302.55,172.55,307.05,165.8,308.6,163.5,307.4,165.75,303.55,172.55,307.25,167.4,308.6,165.5,307.4,167.2,303.55,172.55,307.25,167.4,308.6,165.5,307.4,167.2,303.55,172.55,307.25,167.4,308.6,165.5,308.6,165.5],scale:[1.38873291015625,1.38873291015625,1.38873291015625,1.38873291015625,1.38873291015625,1.38873291015625,1.38873291015625,1.38873291015625,1.38873291015625,1.38873291015625,1.38873291015625,1.38873291015625,1.38873291015625,1.38873291015625,1.38873291015625,1.38873291015625,1.38873291015625,1.38873291015625,1.38873291015625,1.38873291015625,1.38873291015625,1.38873291015625,1.44598388671875,1.37750244140625,1.465087890625,1.373779296875,1.4082183837890625,1.4035491943359375,1.38873291015625,1.4137420654296875,1.4078216552734375,1.4037322998046875,1.465087890625,1.373779296875,1.4082183837890625,1.3849334716796875,1.38873291015625,1.38873291015625,1.4078216552734375,1.3787078857421875,1.465087890625,1.34869384765625,1.4082183837890625,1.378509521484375,1.38873291015625,1.38873291015625,1.4078216552734375,1.384979248046875,1.465087890625,1.373779296875,1.4082183837890625,1.4035491943359375,1.38873291015625,1.4137420654296875,1.4078216552734375,1.4037322998046875,1.465087890625,1.373779296875,1.4082183837890625,1.3849334716796875,1.38873291015625,1.38873291015625,1.4078216552734375,1.384979248046875,1.465087890625,1.373779296875,1.4082183837890625,1.3849334716796875,1.38873291015625,1.38873291015625,1.42657470703125,1.384979248046875,1.5401611328125,1.373779296875,1.427337646484375,1.40740966796875,1.38873291015625,1.4189300537109375,1.4201812744140625,1.40765380859375,1.5145263671875,1.373779296875,1.4208221435546875,1.3999176025390625,1.38873291015625,1.4088592529296875,1.4201812744140625,1.40008544921875,1.5145263671875,1.373779296875,1.4208221435546875,1.3999176025390625,1.38873291015625,1.4088592529296875,1.4201812744140625,1.40008544921875,1.5145263671875,1.373779296875,1.4208221435546875,1.3999176025390625,1.38873291015625,1.4088592529296875,1.38873291015625,1.4088592529296875]},mc12:{view:"body_red.png",depth:2,startFrame:32,endFrame:106,position:[303.2,171.9,304.65,171.15,309.25,168.9,306.2,170.4,303.2,171.9,306.2,167.4,309.25,162.9,305.25,169.6,303.9,171.8,307.6,166.6,308.9,164.85,307.6,166.65,303.9,171.8,307.6,166.6,308.9,164.85,307.7,166.65,304,171.8,307.75,166.6,309.1,164.8,307.85,166.6,304.05,171.75,307.8,166.55,309.1,164.8,307.85,166.6,304.05,171.75,307.75,166.55,308.9,164.8,307.7,166.6,304,171.75,307.7,166.55,308.9,164.8,309.3,164.7,310.4,164.45,312.25,164.05,314.9,163.45,318.3,162.7,322.45,161.75,329.25,160.25,335.95,158.75,342.75,157.25,349.5,155.65,356.35,154.2,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7,363.15,152.7],scale:[1.53997802734375,1.37396240234375,1.5022125244140625,1.3777313232421875,1.38897705078125,1.38897705078125,1.4644775390625,1.3814697265625,1.53997802734375,1.37396240234375,1.4644622802734375,1.3964996337890625,1.38897705078125,1.4189910888671875,1.4835052490234375,1.3852386474609375,1.5149993896484375,1.37396240234375,1.4210968017578125,1.40008544921875,1.38897705078125,1.40899658203125,1.4204864501953125,1.4002532958984375,1.5149993896484375,1.37396240234375,1.4210968017578125,1.40008544921875,1.38897705078125,1.40899658203125,1.4204864501953125,1.4002532958984375,1.5149993896484375,1.37396240234375,1.4210968017578125,1.40008544921875,1.38897705078125,1.40899658203125,1.4204864501953125,1.4002532958984375,1.5149993896484375,1.37396240234375,1.4210968017578125,1.40008544921875,1.38897705078125,1.40899658203125,1.4204864501953125,1.4002532958984375,1.5149993896484375,1.37396240234375,1.4210968017578125,1.40008544921875,1.38897705078125,1.40899658203125,1.4204864501953125,1.4002532958984375,1.5149993896484375,1.37396240234375,1.4210968017578125,1.40008544921875,1.38897705078125,1.40899658203125,1.3828125,1.402740478515625,1.3642425537109375,1.3839263916015625,1.3333282470703125,1.3525543212890625,1.2899932861328125,1.3086395263671875,1.2343597412109375,1.2521820068359375,1.16632080078125,1.18316650390625,1.055023193359375,1.070220947265625,.9437103271484375,.957305908203125,.8323822021484375,.8443756103515625,.721038818359375,.7314453125,.6097259521484375,.6185150146484375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375,.4984130859375,.5055999755859375],alpha:[0,.08203125,.328125,.49609375,.66015625,.83203125,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},mc2:{view:"facebase.png",depth:2,startFrame:0,endFrame:52,position:[237.6,522.9,237.6,517.75,237.6,461.9,237.6,406,237.6,350.15,237.6,294.25,237.6,238.4,237.6,182.5,237.6,126.65,237.6,70.75,237.6,14.9,237.6,19.3,237.6,22.45,237.6,24.3,237.6,24.95,238.15,25.85,240.3,27.8,239.5,27.6,237.6,26,238.15,26,239.65,26,239.7,25.05,239.65,22,238.55,23.35,234.85,28.2,235.7,28.75,237.6,31,238.45,29.55,241.1,25.05,241.3,25.3,241.75,26,240.75,25.65,236.4,25.75,236.7,25.55,237.6,24.95,238.65,25.3,242.65,25.2,240.45,26.45,234.75,29.3,236.85,28.25,242.4,26,241.15,25.65,237.25,24.75,240.2,25.35,243.5,25.15,240.8,26.65,233.9,30.45,236.6,27.8,244.5,20.8,243.1,21.25,239.65,22,239.65,22],scale:[1.38873291015625,1.3885955810546875,1.38873291015625,1.3885955810546875,1.38873291015625,1.3885955810546875,1.38873291015625,1.3885955810546875,1.38873291015625,1.3885955810546875,1.38873291015625,1.3885955810546875,1.38873291015625,1.3885955810546875,1.38873291015625,1.3885955810546875,1.38873291015625,1.3885955810546875,1.38873291015625,1.3885955810546875,1.38873291015625,1.3885955810546875,1.38873291015625,1.3885955810546875,1.38873291015625,1.38861083984375,1.38873291015625,1.38861083984375,1.38873291015625,1.38861083984375,1.388703809057783,1.36949277565081,1.3887104192211952,1.312238154535843,1.3886363274582294,1.327896410978483,1.38873291015625,1.375274658203125,1.3830108642578125,1.375274658203125,1.365814208984375,1.375274658203125,1.365814208984375,1.3878936767578125,1.365814208984375,1.4257049560546875,1.3715218728236567,1.4164138123922672,1.3887350858380345,1.3886126685531837,1.3886641088535479,1.3694351056626561,1.38873291015625,1.3122406005859375,1.3791351318359375,1.3311004638671875,1.350341796875,1.3876800537109375,1.348480224609375,1.38458251953125,1.342864990234375,1.375274658203125,1.3485742332848767,1.3878661157294385,1.3658079905576685,1.4256795841216574,1.3714238948519213,1.4162807766355852,1.38873291015625,1.38861083984375,1.3886888245796944,1.3694771365532517,1.38872881596891,1.3122272780211222,1.3885479606364655,1.3278570502675613,1.3887104192211952,1.3752780996796141,1.3753281509592463,1.375175587628189,1.3355712890625,1.375274658203125,1.343123418107883,1.3878626267031244,1.3658216435964494,1.4256803386230903,1.3772132631186609,1.3622581241539207,1.3887093716835732,1.2989675255232307,1.3886048427195916,1.317906283562114,1.3887351685765785,1.3752686091880113,1.382970790437545,1.3752181753988113,1.3658182856882788,1.3752724560633534,1.3656778123631008,1.387736978331538,1.365814208984375,1.4257049560546875,1.365814208984375,1.4257049560546875],rotation:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2806396484375,1.484161376953125,1.028900146484375,0,0,0,0,0,-.2788848876953125,-1.4509735107421875,-1.023651123046875,0,0,0,0,0,-.2946319580078125,-1.7051849365234375,-1.256988525390625,0,.544647216796875,2.709075927734375,1.5400848388671875,-1.48504638671875,-1.028900146484375,0,-.2640228271484375,-1.22552490234375,.8112640380859375,3.2174072265625,1.794281005859375,-1.9776763916015625,-.7798004150390625,2.4717559814453125,1.777679443359375,0,0]},mc16:{view:"facebase_red.png",depth:4,startFrame:42,endFrame:106,position:[237.95,24.4,241,25.1,244,24.85,241.35,26.4,234.4,30.4,237.25,27.3,245.2,19.3,243.8,20.1,240.15,21.75,238.2,24.2,232.2,32,234.8,29.8,241.55,25.2,241.2,24.75,240.5,22.75,240.1,22.2,238.5,20.5,238,22.1,235.35,27.95,237.05,26.05,241.8,21.25,242.15,22.5,244.1,25.15,247.5,29.65,252.25,35.85,258.3,43.85,266.15,53.65,278.35,69.7,290.45,85.95,302.65,102,314.8,117.85,326.9,133.9,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8,339.05,149.8],scale:[1.365992106935285,1.4259721997174322,1.3774120398842322,1.36239004961512,1.3889300695517284,1.2989343488608716,1.3887225610768823,1.3178114370501668,1.3887100721657646,1.3749832036641103,1.3829716214397032,1.3753109650246038,1.3659846014067563,1.3764926238435031,1.3665514087851174,1.3887173335700205,1.368865966796875,1.425994873046875,1.3738093673698888,1.4166597661430727,1.3889309213790297,1.3889309213790297,1.3887216697220868,1.3695626474016778,1.3887037507119604,1.3119789307724101,1.378913117856329,1.3309316029842615,1.3499855544231616,1.3879828829584184,1.3597028233562904,1.3846827787910359,1.38897705078125,1.375,1.3831951837094905,1.387712161175283,1.3659602209381185,1.4259639022866266,1.371579472725133,1.416564090170821,1.3889782879548946,1.3889782879548946,1.3826461884095809,1.3820983111929679,1.3641131164073983,1.3619042875459386,1.3331383750364907,1.3282012715072056,1.289828343999073,1.2810511042153234,1.2341694226828885,1.2204385368654953,1.1661894399558679,1.1464132062667922,1.0547913399767523,1.0250824956916673,.9434531815064059,.9038113915252248,.8321562195221384,.7826198639537132,.7208745143339766,.6614569838773235,.6095928122289371,.5402769742555787,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357,.49833977655548234,.4191456884645357],alpha:[0,.125,.25,.3125,.5,.5625,.75,.8125,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],rotation:[-1.201934814453125,.8121337890625,3.1999664306640625,1.7881622314453125,-2.0021209716796875,-.7824249267578125,2.4996795654296875,1.78204345703125,0,-.7623138427734375,-3.20172119140625,-1.808258056640625,1.7008209228515625,1.0245208740234375,-.7037506103515625,-.5079345703125,0,-.544647216796875,-2.7038421630859375,-1.5261077880859375,1.699951171875,1.5488128662109375,1.545318603515625,1.5400848388671875,1.531341552734375,1.521728515625,1.533966064453125,1.503387451171875,1.309417724609375,1.306793212890625,1.3041839599609375,1.2998046875,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375,1.4317474365234375]},mc3:{view:"innermouth.png",depth:3,startFrame:0,endFrame:106,position:[418.2,690.5,418.2,685.4,418.2,629.45,418.2,573.6,418.2,517.7,418.2,461.85,418.2,405.95,418.2,350.1,418.2,294.2,418.2,238.35,418.2,182.5,418.2,186.9,418.2,190,418.2,191.9,418.2,192.5,416.95,192.5,413.2,192.5,415.7,192.5,418.2,192.5,417.2,192.5,414.2,192.5,416.25,192.5,418.2,192.5,417.2,192.5,414.2,192.5,416.25,192.5,418.2,192.5,417.2,192.5,414.2,192.5,416.25,192.5,418.2,192.5,417.2,192.5,414.2,192.5,416.25,192.5,418.2,192.5,417.2,192.5,414.2,192.5,416.25,192.5,418.2,192.5,417.2,192.5,414.2,192.5,416.25,192.5,418.2,192.5,416.95,192.5,413.2,192.5,415.7,192.5,418.2,192.5,417.2,192.5,414.2,192.5,416.25,192.5,418.2,192.5,417.2,192.5,414.2,192.5,416.25,192.5,418.2,192.5,417.2,192.5,414.2,192.5,416.25,192.5,418.2,192.5,417.2,192.5,414.2,192.5,416.25,192.5,418.2,192.5,418.1,192.5,417.75,192.7,417.2,193.05,416.4,193.5,415.45,194.05,414.2,194.8,412.2,195.95,410.25,197.1,408.25,198.15,406.3,199.3,404.35,200.4,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45,402.35,201.45],scale:[1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.3885955810546875,1.3879241943359375,1.382415771484375,1.3812103271484375,1.3638763427734375,1.3610076904296875,1.3329620361328125,1.327362060546875,1.2896728515625,1.2802276611328125,1.2340240478515625,1.21966552734375,1.166015625,1.1456298828125,1.0546875,1.02447509765625,.9434051513671875,.9033203125,.832122802734375,.782196044921875,.720855712890625,.661041259765625,.60955810546875,.5399017333984375,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125,.4982757568359375,.41876220703125],alpha:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},mc4:{view:"teeth.png",depth:4,startFrame:0,endFrame:106,position:[431.65,727.85,431.65,722.75,431.65,666.85,431.65,611,431.65,555.1,431.65,499.2,431.65,443.35,431.65,387.45,431.65,331.55,431.65,275.7,431.65,219.85,429.05,224.3,427.15,227.4,426.05,229.3,425.65,229.85,426.3,229.8,428.3,229.8,431.65,229.85,430.95,229.8,428.95,229.8,425.65,229.85,426.3,229.8,428.3,229.8,431.65,229.85,430.95,229.8,428.95,229.8,425.65,229.85,426.3,229.8,428.3,229.8,431.65,229.85,430.95,229.8,428.95,229.8,425.65,229.85,426.3,229.8,428.3,229.8,431.65,229.85,430.4,229.8,426.75,229.8,420.65,229.85,422.4,229.8,427.4,229.8,435.65,229.85,434,229.8,429.35,229.8,421.65,229.85,423.1,229.8,427.45,229.8,434.65,229.85,433.4,229.8,429.75,229.8,423.65,229.85,424.75,229.8,428.05,229.8,433.65,229.85,432.3,229.8,428.3,229.8,421.65,229.85,423,229.8,427,229.8,433.65,229.85,432.5,229.8,429.2,229.8,423.65,229.85,423.45,229.7,423.1,229.35,422.45,228.75,421.45,227.9,420.25,226.8,418.75,225.55,416.35,223.4,413.9,221.25,411.55,219.1,409.05,217,406.7,214.85,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7,404.3,212.7],scale:[1.3880462646484375,1.388458251953125,1.3880615234375,1.3884735107421875,1.3880615234375,1.3884735107421875,1.3880615234375,1.3884735107421875,1.3880615234375,1.3884735107421875,1.3880615234375,1.3884735107421875,1.3880462646484375,1.388458251953125,1.3880462646484375,1.388458251953125,1.3880462646484375,1.388458251953125,1.3880462646484375,1.388458251953125,1.3880462646484375,1.388458251953125,1.3880615234375,1.3884735107421875,1.3880615234375,1.3884735107421875,1.3880615234375,1.3884735107421875,1.3880462646484375,1.388458251953125,1.3880615234375,1.3884735107421875,1.3880615234375,1.3884735107421875,1.3880462646484375,1.388458251953125,1.3880615234375,1.3884735107421875,1.3880615234375,1.3884735107421875,1.3880462646484375,1.388458251953125,1.3880615234375,1.3884735107421875,1.3880615234375,1.3884735107421875,1.3880462646484375,1.388458251953125,1.3880615234375,1.3884735107421875,1.3880615234375,1.3884735107421875,1.3880462646484375,1.388458251953125,1.3880615234375,1.3884735107421875,1.3880615234375,1.3884735107421875,1.3880462646484375,1.388458251953125,1.3880615234375,1.3884735107421875,1.3880615234375,1.3884735107421875,1.3880462646484375,1.388458251953125,1.3880615234375,1.3884735107421875,1.3880615234375,1.3884735107421875,1.3880462646484375,1.388458251953125,1.3880615234375,1.3884735107421875,1.3880615234375,1.3884735107421875,1.3880462646484375,1.388458251953125,1.3880615234375,1.3884735107421875,1.3880615234375,1.3884735107421875,1.3880462646484375,1.388458251953125,1.3880615234375,1.3884735107421875,1.3880615234375,1.3884735107421875,1.3880462646484375,1.388458251953125,1.3880615234375,1.3884735107421875,1.3880615234375,1.3884735107421875,1.3880462646484375,1.388458251953125,1.3880615234375,1.3884735107421875,1.3880615234375,1.3884735107421875,1.3880462646484375,1.388458251953125,1.3880615234375,1.3884735107421875,1.3880615234375,1.3884735107421875,1.3880462646484375,1.388458251953125,1.3880615234375,1.3884735107421875,1.3880615234375,1.3884735107421875,1.3880462646484375,1.388458251953125,1.3880615234375,1.3884735107421875,1.3880615234375,1.3884735107421875,1.3880462646484375,1.388458251953125,1.3880615234375,1.3884735107421875,1.3880615234375,1.3884735107421875,1.3880462646484375,1.388458251953125,1.3818817138671875,1.381744384765625,1.3633270263671875,1.3615264892578125,1.3324432373046875,1.327880859375,1.2891845703125,1.2807464599609375,1.2335662841796875,1.22015380859375,1.1655731201171875,1.146087646484375,1.0543060302734375,1.024871826171875,.94305419921875,.9036865234375,.831817626953125,.782501220703125,.7205657958984375,.6613006591796875,.6093292236328125,.5400848388671875,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125,.4980926513671875,.4188995361328125],alpha:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},mc5:{view:"beak.png",depth:5,startFrame:0,endFrame:52,position:[189.6,667.1,189.6,662.05,189.6,606.15,189.6,550.3,189.6,494.4,189.6,438.5,189.6,382.65,189.6,326.75,189.6,270.85,189.6,215,189.6,159.1,189.6,163.45,189.6,166.55,189.6,168.45,189.6,169.05,190.65,168.3,193.6,166.05,188.55,169.55,183.6,173.1,189.1,169.7,194.6,166.05,191.55,169.55,188.55,173.1,191.6,169.7,194.6,166.05,192.55,167.55,190.6,169.05,192.6,167.55,194.6,166.05,189.1,169.55,183.6,173.1,189.1,170.2,194.6,167.05,189.1,168.05,183.6,169.05,190.1,167.05,196.65,165.05,192.1,168.05,187.5,171.05,192,168.1,196.65,165.05,192.1,168.05,187.5,171.05,192,168.1,196.65,165.05,192.1,168.05,187.5,171.05,192,168.1,196.65,165.05,192.1,168.05,187.5,171.05,187.5,171.05],scale:[1.38885498046875,1.3885498046875,1.38885498046875,1.3885345458984375,1.38885498046875,1.3885345458984375,1.38885498046875,1.3885345458984375,1.38885498046875,1.3885345458984375,1.38885498046875,1.3885345458984375,1.38885498046875,1.3885498046875,1.38885498046875,1.3885498046875,1.38885498046875,1.3885498046875,1.38885498046875,1.3885498046875,1.38885498046875,1.3885498046875,1.38885498046875,1.3885498046875,1.3888397216796875,1.3885650634765625,1.3888397216796875,1.3885650634765625,1.3888397216796875,1.388580322265625,1.37811279296875,1.4047698974609375,1.3459320068359375,1.4534149169921875,1.3759765625,1.3772735595703125,1.406005859375,1.3011322021484375,1.3759765625,1.3772735595703125,1.3459320068359375,1.4534149169921875,1.363311767578125,1.3772735595703125,1.380645751953125,1.3011322021484375,1.363311767578125,1.3772735595703125,1.3459320068359375,1.4534149169921875,1.358795166015625,1.4210205078125,1.371612548828125,1.388580322265625,1.3587799072265625,1.4210052490234375,1.3459320068359375,1.4534149169921875,1.3759765625,1.3772735595703125,1.406005859375,1.3011322021484375,1.3759765625,1.3772735595703125,1.3459320068359375,1.4534149169921875,1.3759765625,1.4210205078125,1.406005859375,1.388580322265625,1.3672027587890625,1.4318084716796875,1.32843017578125,1.4750213623046875,1.363311767578125,1.409912109375,1.398223876953125,1.344757080078125,1.36334228515625,1.409881591796875,1.32843017578125,1.4750213623046875,1.363311767578125,1.409912109375,1.398223876953125,1.344757080078125,1.36334228515625,1.409881591796875,1.32843017578125,1.4750213623046875,1.363311767578125,1.409912109375,1.398223876953125,1.344757080078125,1.36334228515625,1.409881591796875,1.32843017578125,1.4750213623046875,1.363311767578125,1.409912109375,1.398223876953125,1.344757080078125,1.398223876953125,1.344757080078125]},mc13:{view:"beak_red.png",depth:7,startFrame:36,endFrame:106,position:[195.05,164.1,194.05,164.85,191,167.1,193.05,165.6,195.05,164.1,193.1,165.7,191,167.1,193.35,164.9,194.1,164.1,189.15,167.65,184.1,171.2,189.55,167.65,195.1,164.1,192.1,167.65,189,171.2,192.05,167.65,195.1,164.25,193.1,165.7,191,167.15,193.05,165.75,195.05,164.25,189.55,167.8,183.95,171.4,189.45,168.35,194.95,165.3,189.45,166.25,183.95,167.3,184.9,167.5,187.65,168.05,192.35,169,198.85,170.25,207.2,171.9,217.5,173.95,234.3,177.3,251.1,180.65,267.9,183.85,284.75,187.2,301.5,190.5,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85,318.3,193.85],scale:[1.3459930419921875,1.4529876708984375,1.352508544921875,1.436981201171875,1.3719940185546875,1.38897705078125,1.3589935302734375,1.4210052490234375,1.3459930419921875,1.4529876708984375,1.3635101318359375,1.4209747314453125,1.381011962890625,1.38897705078125,1.35491943359375,1.4366607666015625,1.3459930419921875,1.4529876708984375,1.3759918212890625,1.376983642578125,1.4059906005859375,1.300994873046875,1.3759918212890625,1.37701416015625,1.3459930419921875,1.4529876708984375,1.3635101318359375,1.376983642578125,1.381011962890625,1.300994873046875,1.363494873046875,1.37701416015625,1.3459930419921875,1.4529876708984375,1.3589935302734375,1.4209747314453125,1.3719940185546875,1.38897705078125,1.3589935302734375,1.4210052490234375,1.3459930419921875,1.4529876708984375,1.3759918212890625,1.376983642578125,1.4059906005859375,1.300994873046875,1.3759918212890625,1.37701416015625,1.3459930419921875,1.4529876708984375,1.3759918212890625,1.4209747314453125,1.4059906005859375,1.38897705078125,1.39971923828125,1.382232666015625,1.380950927734375,1.3620452880859375,1.3496246337890625,1.328369140625,1.305816650390625,1.2812042236328125,1.2494659423828125,1.2205963134765625,1.18060302734375,1.146484375,1.06793212890625,1.0252685546875,.9552459716796875,.9040374755859375,.8425445556640625,.7827911376953125,.7298736572265625,.6615753173828125,.6171875,.540313720703125,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625,.5045013427734375,.4190826416015625],alpha:[0,.08203125,.328125,.49609375,.66015625,.83203125,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},mc6:{view:"l_shoulder.png",depth:6,startFrame:0,endFrame:106,position:[387.6,784.05,387.6,778.95,387.6,723.05,387.6,667.2,387.6,611.3,387.6,555.45,387.6,499.55,387.6,443.7,387.6,387.8,387.6,331.95,387.6,276.05,387.6,274.2,387.6,272.7,387.6,271.55,387.6,270.7,387.6,270.2,387.6,270.05,388.15,272.05,389.6,278.05,389.1,274.55,388.6,271.05,387.55,274,386.65,277,387.15,273.5,387.6,270.05,387.9,271.85,388.6,277,388.55,274.05,388.6,271.05,388.05,275.05,387.6,279.05,387.6,274.5,387.6,270.05,388.65,270.85,391.6,273.05,390.1,272,388.6,271.05,387.55,275.5,386.65,280,387.15,276.5,387.6,273.05,388.7,275.5,389.6,278.05,389.1,274.55,388.6,271.05,387.55,274,386.65,277,387.15,273.5,387.6,270.05,387.9,271.85,388.6,277,388.55,274.05,388.6,271.05,388.05,275.05,387.6,279.05,387.6,274.5,387.6,270.05,388.65,270.85,391.6,273.05,390.1,272,388.6,271.05,387.55,275.5,386.65,280,386.85,279.15,388.4,276.3,390.75,271.55,393.9,265.1,400.75,250.7,407.75,236.7,413.8,223.35,420,210.4,425.1,197.9,430.3,185.9,434.95,174.3,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156,443.2,156],scale:[1.3883514404296875,1.3886566162109375,1.3883514404296875,1.3886566162109375,1.3883514404296875,1.3886566162109375,1.3883514404296875,1.3886566162109375,1.3883514404296875,1.3886566162109375,1.3883514404296875,1.3886566162109375,1.3883514404296875,1.3886566162109375,1.3883514404296875,1.3886566162109375,1.3883514404296875,1.3886566162109375,1.3883514404296875,1.3886566162109375,1.3883514404296875,1.3886566162109375,1.3883514404296875,1.3886566162109375,1.3883514404296875,1.3886566162109375,1.3883514404296875,1.3886566162109375,1.3883514404296875,1.3886566162109375,1.3883514404296875,1.3886566162109375,1.3883514404296875,1.3886566162109375,1.4021148681640625,1.378143310546875,1.4434814453125,1.34661865234375,1.4159088134765625,1.367645263671875,1.3883514404296875,1.3886566162109375,1.40106201171875,1.3845672607421875,1.41375732421875,1.3804779052734375,1.4010772705078125,1.3845672607421875,1.3883514404296875,1.3886566162109375,1.4087982177734375,1.3803558349609375,1.470123291015625,1.3553924560546875,1.4292449951171875,1.3720245361328125,1.3883514404296875,1.3886566162109375,1.3883514404296875,1.3761138916015625,1.3883514404296875,1.3635711669921875,1.3883514404296875,1.3761138916015625,1.3883514404296875,1.3886566162109375,1.3883514404296875,1.3886566162109375,1.3883514404296875,1.3886566162109375,1.3883514404296875,1.3886566162109375,1.3883514404296875,1.3886566162109375,1.401611328125,1.3720245361328125,1.4149017333984375,1.3553924560546875,1.4016265869140625,1.3720245361328125,1.3883514404296875,1.3886566162109375,1.4159088134765625,1.3676605224609375,1.4434814453125,1.34661865234375,1.4159088134765625,1.367645263671875,1.3883514404296875,1.3886566162109375,1.40106201171875,1.3845672607421875,1.41375732421875,1.3804779052734375,1.4010772705078125,1.3845672607421875,1.3883514404296875,1.3886566162109375,1.4087982177734375,1.3803558349609375,1.470123291015625,1.3553924560546875,1.4292449951171875,1.3720245361328125,1.3883514404296875,1.3886566162109375,1.3883514404296875,1.3761138916015625,1.3883514404296875,1.3635711669921875,1.3883514404296875,1.3761138916015625,1.3883514404296875,1.3886566162109375,1.3883514404296875,1.3886566162109375,1.3883514404296875,1.3886566162109375,1.3883514404296875,1.3886566162109375,1.3883514404296875,1.3886566162109375,1.401611328125,1.3720245361328125,1.4149017333984375,1.3553924560546875,1.4085390868882501,1.352646124988641,1.3895061347847026,1.3444299267678466,1.3578709909969828,1.3308106137949076,1.3137175682780506,1.3118702870288446,1.2126584423013973,1.2684220596357232,1.1118006374244405,1.2251839021091813,1.010956179499325,1.1819707682183946,.9101415350802998,1.1387398489502327,.8093317854443511,1.0955110083372048,.708543438220145,1.0523351530944864,.6078261836397544,1.0091783362420723,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117,.5077123839008214,.9671014745439117],alpha:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],rotation:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.03497314453125,.514923095703125,1.2578582763671875,2.2736358642578125,4.5436248779296875,7.01824951171875,9.306015014648438,11.783935546875,14.07080078125,16.546890258789062,19.0274658203125,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438,21.421005249023438]},mc7:{view:"bowtie.png",depth:7,startFrame:0,endFrame:106,position:[291.6,809.8,291.65,804.7,291.65,748.8,291.65,692.95,291.65,637.05,291.65,581.2,291.6,525.35,291.6,469.5,291.6,413.6,291.6,357.75,291.6,301.8,287.95,304.85,286.6,305.9,283.2,310.6,279.85,315.95,285.55,308.7,291.6,301.8,294.15,301.05,296.85,300.05,291.6,305.3,286.6,310.8,283.35,313.1,279.85,315.95,285.55,308.7,291.6,301.8,294.05,303.5,296.5,305.05,291.65,305.4,286.6,305.9,283.2,311.45,280,317.55,285.65,309.6,291.6,301.8,294.15,301.05,296.85,300.05,291.65,302.85,286.6,305.9,283.25,312.05,280.15,318.9,285.7,310.15,291.6,301.8,294.15,301.05,296.85,300.05,296.65,300.25,296.85,300.05,291.6,305.3,286.6,310.8,283.35,313.1,279.85,315.95,285.55,308.7,291.6,301.8,294.05,303.5,296.5,305.05,291.65,305.4,286.6,305.9,283.2,311.45,280,317.55,285.65,309.6,291.6,301.8,294.15,301.05,296.85,300.05,291.65,302.85,286.6,305.9,287.05,305.2,288.5,303,290.9,299.5,294.25,294.45,298.5,288.05,303.75,280.2,312.35,267.4,320.9,254.6,329.45,241.75,338.05,228.95,346.5,216.1,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3,355.1,203.3],scale:[1.3885345458984375,1.3888397216796875,1.3885345458984375,1.38885498046875,1.3885345458984375,1.38885498046875,1.3885345458984375,1.38885498046875,1.3885345458984375,1.38885498046875,1.3885345458984375,1.38885498046875,1.3885345458984375,1.3888397216796875,1.3885345458984375,1.3888397216796875,1.3885345458984375,1.3888397216796875,1.3885345458984375,1.3888397216796875,1.3885345458984375,1.3888397216796875,1.45733642578125,1.32879638671875,1.480255126953125,1.30877685546875,1.479970365305426,1.3001999996389342,1.4802521778246793,1.2920752655942842,1.4341305564435083,1.3402037743313489,1.3885345458984375,1.3888397216796875,1.3883818660247587,1.3530514057440004,1.3885354600940945,1.317512185341496,1.4342178372803231,1.2653654526477855,1.480255126953125,1.2134857177734375,1.479970365305426,1.2525412879400917,1.4802521778246793,1.2920752655942842,1.4341305564435083,1.3402037743313489,1.3885345458984375,1.3888397216796875,1.3883818660247587,1.3046198252012604,1.3885354600940945,1.2206615501953413,1.4342178372803231,1.264555623264486,1.480255126953125,1.30877685546875,1.479970365305426,1.284445820725083,1.4802521778246793,1.2605798799297652,1.4341153189517277,1.32446483286702,1.3885345458984375,1.3888397216796875,1.3883818660247587,1.3530514057440004,1.3885354600940945,1.317512185341496,1.4342183774659216,1.3129724948128385,1.480255126953125,1.30877685546875,1.479970365305426,1.2712435561133604,1.4802521778246793,1.2341481170806015,1.4341297506206216,1.3112641801355167,1.3885345458984375,1.3888397216796875,1.3883818660247587,1.3530514057440004,1.3885354600940945,1.317512185341496,1.3881674527267416,1.3172062974915804,1.3885354600940945,1.317512185341496,1.4342178372803231,1.2653654526477855,1.480255126953125,1.2134857177734375,1.479970365305426,1.2525412879400917,1.4802521778246793,1.2920752655942842,1.4341305564435083,1.3402037743313489,1.3885345458984375,1.3888397216796875,1.3883818660247587,1.3046198252012604,1.3885354600940945,1.2206615501953413,1.4342178372803231,1.264555623264486,1.480255126953125,1.30877685546875,1.479970365305426,1.284445820725083,1.4802521778246793,1.2605798799297652,1.4341153189517277,1.32446483286702,1.3885345458984375,1.3888397216796875,1.3883818660247587,1.3530514057440004,1.3885354600940945,1.317512185341496,1.4342183774659216,1.3129724948128385,1.480255126953125,1.30877685546875,1.4736328125,1.302947998046875,1.4538726806640625,1.2854461669921875,1.4209136962890625,1.2563323974609375,1.3747711181640625,1.21551513671875,1.3154449462890625,1.1630706787109375,1.242950439453125,1.0989837646484375,1.1243133544921875,.9940948486328125,1.0056915283203125,.8892059326171875,.887054443359375,.7843170166015625,.7684173583984375,.679412841796875,.6497802734375,.5745086669921875,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625,.531158447265625,.469635009765625],alpha:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],rotation:[0,0,0,0,0,0,0,0,0,0,0,0,0,-3.0282440185546875,-6.214263916015625,-3.027374267578125,0,2.0283203125,4.222900390625,2.0283203125,0,-3.0282440185546875,-6.214263916015625,-3.027374267578125,0,2.0283203125,4.222900390625,2.0283203125,0,-3.0282440185546875,-6.214263916015625,-3.027374267578125,0,2.0283203125,4.222900390625,2.0291900634765625,0,-3.0282440185546875,-6.214263916015625,-3.0265045166015625,0,2.0283203125,4.222900390625,4.056793212890625,4.222900390625,2.0283203125,0,-3.0282440185546875,-6.214263916015625,-3.027374267578125,0,2.0283203125,4.222900390625,2.0283203125,0,-3.0282440185546875,-6.214263916015625,-3.027374267578125,0,2.0283203125,4.222900390625,2.0291900634765625,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},mc8:{view:"r_brow.png",depth:8,startFrame:0,endFrame:52,position:[238.65,529.4,238.65,524.3,238.65,468.4,238.65,412.55,238.65,356.65,238.65,300.8,238.65,244.9,238.65,189.05,238.65,133.15,238.65,77.3,238.65,21.4,239.9,24.45,240.85,26.65,241.35,27.95,241.6,28.35,241.3,28.8,240.25,30.1,238.6,32.35,238.65,32.15,238.95,31.45,239.6,30.4,239.7,30.2,240,29.6,240.6,28.3,240.25,28.95,239.3,31,237.6,34.35,237.8,34.95,238.5,36.7,239.6,39.45,239.4,38.95,238.7,37.2,237.6,34.35,237.8,34.05,238.5,33.05,239.6,31.35,239.2,32.25,237.8,34.9,235.6,39.35,236.45,38.35,239.15,35.35,243.6,30.4,242.8,30.65,240.4,31.3,236.55,32.45,237.1,32.1,238.8,31.1,241.6,29.3,241,30.2,239.35,32.9,236.6,37.35,236.6,37.35],scale:[1.388671875,1.3885345458984375,1.388671875,1.3885345458984375,1.388671875,1.3885345458984375,1.388671875,1.3885345458984375,1.388671875,1.3885345458984375,1.388671875,1.3885345458984375,1.388671875,1.3885345458984375,1.388671875,1.3885345458984375,1.388671875,1.3885345458984375,1.388671875,1.3885345458984375,1.388671875,1.3885345458984375,1.388671875,1.3885345458984375,1.388671875,1.3885498046875,1.388671875,1.3885498046875,1.388671875,1.3885498046875,1.394622802734375,1.3885345458984375,1.41253662109375,1.3885345458984375,1.4423675537109375,1.3885498046875,1.430419921875,1.3922576904296875,1.3946075439453125,1.4034271240234375,1.3349609375,1.4220428466796875,1.340911865234375,1.425933837890625,1.3587493896484375,1.43756103515625,1.388519287109375,1.4569091796875,1.388519287109375,1.449310302734375,1.3885650634765625,1.426544189453125,1.388671875,1.3885498046875,1.388671875,1.380767822265625,1.388671875,1.3574676513671875,1.388671875,1.31866455078125,1.388671875,1.3264312744140625,1.388671875,1.3497314453125,1.388671875,1.3885498046875,1.388671875,1.3885345458984375,1.388671875,1.3885345458984375,1.388671875,1.3885498046875,1.394622802734375,1.3885345458984375,1.41253662109375,1.3885345458984375,1.4423675537109375,1.3885498046875,1.4363861083984375,1.3885345458984375,1.418487548828125,1.3885345458984375,1.388671875,1.3885345458984375,1.3826904296875,1.3922576904296875,1.3647918701171875,1.4034271240234375,1.3349609375,1.4220428466796875,1.340911865234375,1.425933837890625,1.3587493896484375,1.43756103515625,1.388519287109375,1.4569091796875,1.388519287109375,1.449310302734375,1.3885650634765625,1.426544189453125,1.388671875,1.3885498046875,1.388671875,1.3885498046875]},mc14:{view:"r_brow_red.png",depth:11,startFrame:41,endFrame:106,position:[244.3,29.95,243.5,30.15,241.15,30.8,237.15,31.9,237.7,31.6,239.4,30.6,242.25,29.05,241.7,29.9,240.05,32.6,237.3,37.05,237.75,37,239.05,36.7,241.25,36.15,240.9,36.15,239.95,36.15,238.3,36.05,238.65,35.25,239.6,32.95,241.25,29.05,240.7,29.95,239.05,32.6,236.35,37,237.05,37.75,239.2,40.25,242.7,44.3,247.6,50,253.95,57.3,261.55,66.35,274.15,81.05,286.7,95.75,299.35,110.5,311.85,125.15,324.45,139.9,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55,337.1,154.55],scale:[1.38897705078125,1.38897705078125,1.3829803466796875,1.39263916015625,1.364990234375,1.4036712646484375,1.334991455078125,1.4219970703125,1.340972900390625,1.4258880615234375,1.3589935302734375,1.43756103515625,1.38897705078125,1.457000732421875,1.38897705078125,1.4494476318359375,1.38897705078125,1.4267578125,1.38897705078125,1.38897705078125,1.38897705078125,1.381195068359375,1.38897705078125,1.3578643798828125,1.38897705078125,1.3189697265625,1.38897705078125,1.3267364501953125,1.38897705078125,1.3500823974609375,1.38897705078125,1.38897705078125,1.38897705078125,1.38897705078125,1.38897705078125,1.38897705078125,1.38897705078125,1.38897705078125,1.394866943359375,1.38897705078125,1.4125213623046875,1.38897705078125,1.44195556640625,1.38897705078125,1.435516357421875,1.382232666015625,1.416259765625,1.3620452880859375,1.3841552734375,1.328369140625,1.339202880859375,1.2812042236328125,1.2814178466796875,1.2205963134765625,1.2108001708984375,1.146484375,1.09521484375,1.0252685546875,.9796600341796875,.9040374755859375,.86407470703125,.7827911376953125,.74853515625,.6615753173828125,.6329498291015625,.540313720703125,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625,.5174102783203125,.4190826416015625],alpha:[0,.02734375,.109375,.25,.28515625,.38671875,.55859375,.609375,.75390625,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},mc9:{view:"l_brow.png",depth:9,startFrame:0,endFrame:52,position:[334,526,334,520.95,334,465.05,334,409.2,334,353.3,334,297.4,334,241.55,334,185.65,334,129.75,334,73.9,334,18,333.05,23.65,332.35,27.75,331.95,30.2,331.95,30.95,332.25,29.9,333.25,26.55,334.95,21.05,334.65,21.15,333.65,21.45,331.95,22,332.2,22.65,332.85,24.65,333.95,28.05,333.75,27.5,333.1,25.85,331.95,23,332.3,22.8,333.25,22.15,334.95,21.05,334.65,21.15,333.65,21.45,331.95,22,332.2,23.8,332.85,29.1,333.95,38.05,333.75,35.85,333.1,29.2,331.95,18,332.3,19,333.25,22,334.95,27.1,334.65,26.95,333.6,26.6,331.85,25.95,332.15,26.3,332.95,27.3,334.45,29.05,333.9,26,333.4,22.95,332.95,20,332.95,20],scale:[1.38873291015625,1.388702392578125,1.38873291015625,1.388702392578125,1.38873291015625,1.388702392578125,1.38873291015625,1.388702392578125,1.38873291015625,1.388702392578125,1.38873291015625,1.388702392578125,1.38873291015625,1.388702392578125,1.38873291015625,1.388702392578125,1.38873291015625,1.388702392578125,1.38873291015625,1.388702392578125,1.38873291015625,1.388702392578125,1.38873291015625,1.3465576171875,1.38873291015625,1.31646728515625,1.38873291015625,1.2984161376953125,1.38873291015625,1.292388916015625,1.3822021484375,1.308380126953125,1.3626861572265625,1.3563995361328125,1.3301239013671875,1.4364013671875,1.3366546630859375,1.43109130859375,1.3561859130859375,1.4152069091796875,1.38873291015625,1.388702392578125,1.38873291015625,1.388641357421875,1.38873291015625,1.388427734375,1.38873291015625,1.38812255859375,1.38873291015625,1.38818359375,1.38873291015625,1.3883819580078125,1.38873291015625,1.388702392578125,1.3822021484375,1.3939971923828125,1.3626861572265625,1.4098968505859375,1.3301239013671875,1.4364013671875,1.3366546630859375,1.43109130859375,1.3561859130859375,1.4152069091796875,1.38873291015625,1.388702392578125,1.38873291015625,1.3778533935546875,1.38873291015625,1.3453826904296875,1.38873291015625,1.291259765625,1.38873291015625,1.3128204345703125,1.38873291015625,1.3774871826171875,1.38873291015625,1.4852294921875,1.3822021484375,1.4689788818359375,1.3626861572265625,1.4202728271484375,1.33013916015625,1.339080810546875,1.336669921875,1.3375244140625,1.3563079833984375,1.3328704833984375,1.38897705078125,1.3251190185546875,1.387939453125,1.3321075439453125,1.3848724365234375,1.353057861328125,1.37969970703125,1.3879852294921875,1.3766021728515625,1.3883209228515625,1.3734893798828125,1.388641357421875,1.370391845703125,1.38897705078125,1.370391845703125,1.38897705078125]},mc15:{view:"l_brow_red.png",depth:13,startFrame:41,endFrame:106,position:[334.95,27.05,334.6,26.9,333.55,26.55,331.85,25.95,332.15,26.3,333,27.3,334.35,29.05,333.8,26,333.35,22.95,332.75,20,332.95,21.3,333.7,25.4,334.9,32.2,334.55,30.4,333.5,25.05,331.75,16.15,332.15,19,333.3,27.65,335.15,42.05,335.05,39.9,334.75,33.55,334.35,23,334.6,23.9,335.4,26.55,336.7,30.95,338.6,37.15,340.95,45.1,343.85,54.85,348.6,70.8,353.3,86.7,358.05,102.6,362.85,118.5,367.55,134.35,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3,372.3,150.3],scale:[1.329986572265625,1.3389739990234375,1.3365631103515625,1.3374176025390625,1.356201171875,1.332763671875,1.38897705078125,1.3249969482421875,1.3879852294921875,1.3319854736328125,1.3849639892578125,1.352996826171875,1.3799896240234375,1.3879852294921875,1.3766632080078125,1.3883209228515625,1.373321533203125,1.388641357421875,1.3699951171875,1.38897705078125,1.365570068359375,1.3834228515625,1.35223388671875,1.36676025390625,1.329986572265625,1.3389739990234375,1.3365631103515625,1.3427581787109375,1.356201171875,1.3540802001953125,1.38897705078125,1.3729705810546875,1.386199951171875,1.362091064453125,1.37786865234375,1.3294219970703125,1.3639984130859375,1.274993896484375,1.361236572265625,1.28765869140625,1.3528900146484375,1.325653076171875,1.3389739990234375,1.38897705078125,1.3330078125,1.382232666015625,1.31512451171875,1.3620452880859375,1.2853240966796875,1.328369140625,1.2436065673828125,1.2812042236328125,1.1899566650390625,1.2205963134765625,1.124359130859375,1.146484375,1.01702880859375,1.0252685546875,.90972900390625,.9040374755859375,.80242919921875,.7827911376953125,.695098876953125,.6615753173828125,.5877838134765625,.540313720703125,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625,.4804840087890625,.4190826416015625],alpha:[0,.02734375,.109375,.25,.28515625,.38671875,.55859375,.70703125,.8515625,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},mc10:{view:"tassle.png",depth:10,startFrame:0,endFrame:106,position:[131.05,570.95,131.05,565.85,131.05,509.9,131.05,454.05,131.05,398.15,131.05,342.3,131.05,286.4,131.05,230.55,131.05,174.65,131.05,118.8,131.05,62.95,131.1,65.8,131.15,67.7,131.15,69.05,131.15,69.35,131.3,70.05,131.8,72,132.7,74.8,134.35,78.65,132.8,74.55,131.85,71.85,131.4,69.85,131.15,69.35,131.3,70.05,131.8,72,132.7,74.8,134.35,78.65,132.8,74.55,131.85,71.85,131.4,69.85,131.15,69.35,131.3,70.05,131.8,72,132.7,74.8,134.35,78.65,132.75,71.95,132.1,66.9,131.9,63.95,131.95,62.85,131.95,64.25,132.05,67.95,132.8,73.55,134.8,81.6,132.75,73.45,132.05,67.85,131.9,64.1,131.95,62.85,131.95,64.25,132.05,67.95,132.8,73.55,134.8,81.6,132.75,73.45,132.05,67.85,131.9,64.1,131.95,62.85,131.95,64.25,132.05,67.95,132.8,73.55,134.8,81.6,132.75,73.45,132.05,67.85,131.9,64.1,131.95,62.85,133.7,63.9,138.7,67.1,147.4,72.1,159.9,79,176.4,87.55,197.5,97.3,223.15,107.95,261.8,121.15,301.3,131.8,340.5,139.75,379.15,145.5,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2,416.55,149.2],scale:[1.38873291015625,1.38848876953125,1.38873291015625,1.38848876953125,1.38873291015625,1.3885040283203125,1.38873291015625,1.3885040283203125,1.38873291015625,1.3885040283203125,1.38873291015625,1.3885040283203125,1.38873291015625,1.3885040283203125,1.38873291015625,1.3885040283203125,1.38873291015625,1.3885040283203125,1.38873291015625,1.3885040283203125,1.38873291015625,1.38848876953125,1.3885888109702018,1.352931728240344,1.3885308941402295,1.3275314197577048,1.3884893467076207,1.3122965644023517,1.3887481695321051,1.307444596135898,1.3838301176712489,1.3122722722291293,1.369956055751961,1.3276052005621033,1.3465492907749004,1.3528695426620703,1.3140518234287817,1.3884622161404174,1.3465650155565603,1.3528395131426834,1.3699552075921373,1.3276049179429767,1.3838268939805145,1.3123027471992716,1.3887481695321051,1.307444596135898,1.3838301176712489,1.3122722722291293,1.369956055751961,1.3276052005621033,1.3465492907749004,1.3528695426620703,1.3140518234287817,1.3884622161404174,1.3465650155565603,1.3528395131426834,1.3699552075921373,1.3276049179429767,1.3838268939805145,1.3123027471992716,1.3887481695321051,1.307444596135898,1.3838301176712489,1.3122722722291293,1.369956055751961,1.3276052005621033,1.3465492907749004,1.3528695426620703,1.3140518234287817,1.3884622161404174,1.3466344806595203,1.3220641178607861,1.36960079721856,1.2743211626488395,1.3833441097187495,1.245720546241134,1.3887501616918068,1.2369072347460377,1.3833469760350376,1.2471230698495943,1.3696311812118431,1.2799309114839674,1.3466817003114746,1.334550793318141,1.3140430945440291,1.4105788454434107,1.3466974021086755,1.3345358318396308,1.3696530876302944,1.2799432785821518,1.3833747088952684,1.2471381381274758,1.3887501616918068,1.2369072347460377,1.3833469760350376,1.2471230698495943,1.3696311812118431,1.2799309114839674,1.3466817003114746,1.334550793318141,1.3140430945440291,1.4105788454434107,1.3466974021086755,1.3345358318396308,1.3696530876302944,1.2799432785821518,1.3833747088952684,1.2471381381274758,1.3887501616918068,1.2369072347460377,1.3833469760350376,1.2471230698495943,1.3696311812118431,1.2799309114839674,1.3466817003114746,1.334550793318141,1.3140430945440291,1.4105788454434107,1.3466974021086755,1.3345358318396308,1.3696530876302944,1.2799432785821518,1.3833747088952684,1.2471381381274758,1.3887501616918068,1.2369072347460377,1.3828840972999439,1.2310613886249697,1.3677070081095153,1.215713039131561,1.3423566865092296,1.1901557285779525,1.306815103052805,1.1542971073673227,1.2602914682094395,1.1074702780647785,1.2035670293815774,1.050290862329163,1.1379702362761612,.9840015902798342,1.0399041086046548,.8851898279843329,.942333724789154,.7868450334117703,.846747877555034,.6901007807021777,.7512846024753296,.5934625970363834,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328,.6558693247537959,.4969627176330328],alpha:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],rotation:[0,0,0,0,0,0,0,0,0,0,0,1.5322265625,2.7622833251953125,3.3123931884765625,3.7321929931640625,3.0291290283203125,1.06298828125,-1.7785491943359375,-6.213409423828125,-1.777679443359375,1.06036376953125,3.0265045166015625,3.7321929931640625,3.0291290283203125,1.06298828125,-1.7785491943359375,-6.213409423828125,-1.777679443359375,1.06036376953125,3.0265045166015625,3.7321929931640625,3.0291290283203125,1.06298828125,-1.7785491943359375,-6.213409423828125,1.02191162109375,6.2652435302734375,9.3009033203125,10.479385375976562,9.064056396484375,5.3168182373046875,-.55426025390625,-9.43963623046875,-.5560150146484375,5.3124847412109375,9.063201904296875,10.479385375976562,9.064056396484375,5.3168182373046875,-.55426025390625,-9.43963623046875,-.5560150146484375,5.3124847412109375,9.063201904296875,10.479385375976562,9.064056396484375,5.3168182373046875,-.55426025390625,-9.43963623046875,-.5560150146484375,5.3124847412109375,9.063201904296875,10.479385375976562,9.767715454101562,7.5593109130859375,4.256805419921875,-.5140533447265625,-6.75543212890625,-14.285293579101562,-23.3189697265625,-36.374298095703125,-49.62420654296875,-62.710113525390625,-75.97280883789062,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938,-89.12142944335938]},mc11:{view:"hat.png",depth:11,startFrame:0,endFrame:106,position:[159.05,433.5,159.1,428.4,159.1,372.55,159.1,316.7,159.1,260.8,159.1,204.95,159.05,149,159.05,93.15,159.05,37.25,159.05,-18.6,159.05,-74.5,159.1,-67.05,159.1,-61.7,159.1,-58.55,159.05,-57.55,161.85,-59.8,163.5,-61.15,164.05,-61.55,157.45,-59.3,153.5,-57.95,152.1,-57.55,158.75,-62.05,162.7,-64.7,164.05,-65.55,157.45,-59.95,153.5,-56.6,152.1,-55.55,158.8,-60.5,162.8,-63.5,164.1,-64.55,160.7,-62.3,158.65,-61,158.05,-60.55,161.4,-62.25,163.4,-63.3,164.05,-63.55,153.55,-58.55,147.2,-55.65,145.05,-54.55,157.9,-61.75,165.6,-66.05,168.05,-67.5,155.25,-59.25,147.55,-54.25,145.05,-52.55,157.9,-60.85,165.6,-65.85,168.05,-67.5,155.25,-59.25,147.55,-54.25,145.05,-52.55,157.9,-60.85,165.6,-65.85,168.05,-67.5,155.25,-59.25,147.55,-54.25,145.05,-52.55,157.9,-60.85,165.6,-65.85,168.05,-67.5,155.25,-59.25,147.55,-54.25,145.05,-52.55,146.3,-51.6,151.15,-50.75,158.85,-48.5,169.65,-45.3,183.7,-40.55,200.25,-33.5,219.6,-24.1,241.45,-11.75,269.35,7.9,295.55,30.35,319.8,55.4,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6,341.9,82.6],scale:[1.388824462890625,1.38861083984375,1.388824462890625,1.3885955810546875,1.388824462890625,1.3885955810546875,1.388824462890625,1.3885955810546875,1.388824462890625,1.3885955810546875,1.388824462890625,1.3885955810546875,1.388824462890625,1.38861083984375,1.388824462890625,1.38861083984375,1.388824462890625,1.38861083984375,1.388824462890625,1.38861083984375,1.388824462890625,1.38861083984375,1.388824462890625,1.34686279296875,1.388824462890625,1.3170623779296875,1.388824462890625,1.2991790771484375,1.388824462890625,1.293212890625,1.361785888671875,1.328765869140625,1.345550537109375,1.350128173828125,1.34014892578125,1.3572235107421875,1.393951416015625,1.321685791015625,1.426239013671875,1.3003387451171875,1.4369964599609375,1.293212890625,1.3831939697265625,1.328765869140625,1.35089111328125,1.350128173828125,1.34014892578125,1.3572235107421875,1.393951416015625,1.321685791015625,1.426239013671875,1.3003387451171875,1.4369964599609375,1.293212890625,1.38299560546875,1.3226776123046875,1.3505859375,1.34033203125,1.33978271484375,1.346221923828125,1.367034912109375,1.3167724609375,1.38336181640625,1.299102783203125,1.388824462890625,1.293212890625,1.361785888671875,1.328765869140625,1.345550537109375,1.350128173828125,1.34014892578125,1.3572235107421875,1.42108154296875,1.2922210693359375,1.4696502685546875,1.253204345703125,1.48583984375,1.240203857421875,1.3893890380859375,1.340545654296875,1.3315277099609375,1.4007568359375,1.312255859375,1.4208221435546875,1.4086761474609375,1.320465087890625,1.4665374755859375,1.26025390625,1.48583984375,1.240203857421875,1.3893890380859375,1.340545654296875,1.3315277099609375,1.4007568359375,1.312255859375,1.4208221435546875,1.4086761474609375,1.320465087890625,1.4665374755859375,1.26025390625,1.48583984375,1.240203857421875,1.3893890380859375,1.340545654296875,1.3315277099609375,1.4007568359375,1.312255859375,1.4208221435546875,1.4086761474609375,1.320465087890625,1.4665374755859375,1.26025390625,1.48583984375,1.240203857421875,1.3893890380859375,1.340545654296875,1.3315277099609375,1.4007568359375,1.312255859375,1.4208221435546875,1.4086761474609375,1.320465087890625,1.4665374755859375,1.26025390625,1.48583984375,1.240203857421875,1.4790808519754308,1.2351690014223788,1.458812621247916,1.2200669502017802,1.4250727089133608,1.1949027628623454,1.3777987131003595,1.159697468533,1.3170448910627857,1.114407174967857,1.2427996652378404,1.059070885315138,1.1550716512522505,.9936937020104328,1.0546845917308412,.9189936441983931,.9195628109584204,.8182310914821413,.7847017923031103,.7177005841138352,.6507635135912682,.6179606728698067,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774,.5176352676301021,.5190379146103774],alpha:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],rotation:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.05419921875,.7745513916015625,1.7899169921875,3.285369873046875,5.2630767822265625,7.534393310546875,10.286529541015625,13.549758911132812,17.792617797851562,22.052383422851562,26.329559326171875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875,30.72430419921875]},mc17:{view:"feet.png",depth:0,startFrame:62,endFrame:108,position:[202.05,560.1,202.85,558.4,205.35,553.1,209.5,544.25,215.35,531.9,222.8,516.1,231.95,496.7,242.7,473.75,255.1,447.25,269.3,417.35,285.05,383.8,303.3,348.35,321.6,308.7,328.8,297.05,333.15,290,334.55,287.7,334.55,287.7,334.55,287.7,334.55,287.7,334.55,287.7,334.55,287.7,334.55,287.7,334.55,287.7,334.55,287.7,334.55,287.7,334.55,287.7,334.55,287.7,334.55,287.7,334.55,287.7,334.55,287.7,334.55,287.7,334.55,287.7,334.55,287.7,334.55,287.7,334.55,287.7,334.1,288.4,332.95,290.45,331,293.75,328.3,298.4,324.8,304.35,320.6,311.65,326.1,274.35,329.45,252.1,330.6,244.65,382.75,99.8,462.6,40.15],scale:[3.454132080078125,3.451995849609375,3.439483642578125,3.437408447265625,3.3956756591796875,3.3936309814453125,3.3226318359375,3.3206329345703125,3.2203826904296875,3.21844482421875,3.08892822265625,3.0870819091796875,2.92828369140625,2.9264678955078125,2.7383880615234375,2.7367401123046875,2.519287109375,2.5177764892578125,2.27099609375,2.2696380615234375,1.993499755859375,1.99224853515625,1.6721649169921875,1.6711273193359375,1.350830078125,1.350006103515625,1.2309722900390625,1.5117950439453125,1.1590423583984375,1.60888671875,1.13507080078125,1.6412353515625,1.13507080078125,1.6412353515625,1.13507080078125,1.6412353515625,1.13507080078125,1.6412353515625,1.13507080078125,1.6412353515625,1.13507080078125,1.6412353515625,1.13507080078125,1.6412353515625,1.13507080078125,1.6412353515625,1.13507080078125,1.6412353515625,1.13507080078125,1.6412353515625,1.13507080078125,1.6412353515625,1.13507080078125,1.6412353515625,1.13507080078125,1.6412353515625,1.13507080078125,1.6412353515625,1.13507080078125,1.6412353515625,1.13507080078125,1.6412353515625,1.13507080078125,1.6412353515625,1.13507080078125,1.6412353515625,1.13507080078125,1.6412353515625,1.13507080078125,1.6412353515625,1.1418609619140625,1.628509521484375,1.16143798828125,1.591827392578125,1.193817138671875,1.5311126708984375,1.239013671875,1.446441650390625,1.2969818115234375,1.3377838134765625,1.367767333984375,1.20513916015625,1.27532958984375,1.821624755859375,1.2198333740234375,2.191558837890625,1.2013397216796875,2.31488037109375,1.213685145963951,2.1372634745372387,1.2184571475413937,2.0791094799639063],alpha:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],rotation:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-83.46969604492188,-111.18955993652344]},mc20:{view:"tassle_small.png",depth:3,startFrame:62,endFrame:106,position:[234.7,46.55,236.05,47.1,239.8,48.6,246.1,51.15,254.8,54.5,266.1,58.95,279.9,64.35,296.1,70.7,319.8,80.1,343.6,89.4,367.5,98.65,391.2,107.95,391.7,51.3,392.15,-5.15,392.6,-61.75,392.95,-118.25,392,-110.45,391,-102.75,389.95,-95,388.95,-87.3,388.5,-90.2,388,-93.15,387.6,-96.1,388.05,-92.8,388.45,-89.4,388.75,-86,388.35,-89.4,387.95,-92.7,387.6,-96.1,388.05,-92.8,388.45,-89.4,388.75,-86,388.35,-89.4,387.95,-92.7,387.6,-96.1,388.05,-92.8,388.45,-89.4,388.75,-86,388.35,-89.4,387.95,-92.7,387.6,-96.1,373.4,-100.1,359,-104.1,344.65,-108.05],scale:[3.8708819161832,4.03408598084007,3.852376115668453,4.014417493465935,3.799248763928405,3.957789895155114,3.710689995473836,3.863494848459058,3.5867473175109326,3.731555742720277,3.4275594871144386,3.562043086260916,3.2334309637224705,3.3553545173150736,3.0089151151516926,3.1160755734764014,2.672930661767327,2.7582001866118473,2.338527341224985,2.402028840687082,2.0089529193301985,2.050868941033052,1.6804833037895828,1.7009400016459477,1.667557201114047,1.6712863562811549,1.6557448391769727,1.6427196678843818,1.6439784723914255,1.6142482297177896,1.6346566684223376,1.5884547959365103,1.6508890439094293,1.628769514707851,1.6672701014557,1.669920163544118,1.682933546617179,1.7097776986468884,1.7026359197364729,1.7538551561277287,1.6463756059403591,1.7358108818546072,1.592964988293516,1.720351058944036,1.5420146999986701,1.7078738653530587,1.5930223038117335,1.7203273035997844,1.6463675543779956,1.7356789071018517,1.7026398330941146,1.7538484606854707,1.6463911662524482,1.7356232623365715,1.5930628394496948,1.7203506738367833,1.5420146999986701,1.7078738653530587,1.5930223038117335,1.7203273035997844,1.6463675543779956,1.7356789071018517,1.7026398330941146,1.7538484606854707,1.6463911662524482,1.7356232623365715,1.5930628394496948,1.7203506738367833,1.5420146999986701,1.7078738653530587,1.5930223038117335,1.7203273035997844,1.6463675543779956,1.7356789071018517,1.7026398330941146,1.7538484606854707,1.6463911662524482,1.7356232623365715,1.5930628394496948,1.7203506738367833,1.5420146999986701,1.7078738653530587,1.5928934527595917,1.720357533348042,1.6466146573971856,1.7361436282960492,1.7026262977681585,1.7538244960763214],alpha:[0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],rotation:[87.09469604492188,86.49508666992188,84.72738647460938,81.71855163574219,77.46748352050781,71.970703125,65.41716003417969,57.43412780761719,45.89610290527344,34.34019470214844,22.8016357421875,11.31396484375,16.037033081054688,20.800918579101562,25.568283081054688,30.400192260742188,7.7636871337890625,-14.781723022460938,-37.36567687988281,-60.053924560546875,-49.39262390136719,-38.6278076171875,-28.0557861328125,-35.85166931152344,-43.64825439453125,-51.56585693359375,-43.645965576171875,-35.849945068359375,-28.0557861328125,-35.85166931152344,-43.64825439453125,-51.56585693359375,-43.645965576171875,-35.849945068359375,-28.0557861328125,-35.85166931152344,-43.64825439453125,-51.56585693359375,-43.645965576171875,-35.849945068359375,-28.0557861328125,-43.12086486816406,-58.18927001953125,-73.28776550292969]},mc21:{view:"hat_small.png",depth:4,startFrame:62,endFrame:106,position:[115.15,-22.9,117,-22.9,121.5,-21.3,129.05,-18.4,139.55,-14.05,153.05,-8.6,169.75,-1.55,189.2,7.95,211.4,19.75,240.9,37.15,269.85,56.15,297.95,76.85,300.4,16.7,303,-43.05,305.35,-103,307.95,-162.9,304.4,-151.55,300.95,-140.05,297.65,-128.85,294.05,-116.7,292.5,-114.15,291.2,-111.6,290.2,-108.75,292.3,-115.85,295.4,-122.7,299.25,-129.05,295.4,-122.8,292.3,-115.9,290.2,-108.75,292.3,-115.85,295.4,-122.7,299.25,-129.05,295.4,-122.8,292.3,-115.9,290.2,-108.75,292.3,-115.85,295.4,-122.7,299.25,-129.05,295.4,-122.8,292.3,-115.9,290.2,-108.75,292.3,-115.85,295.4,-122.7,299.25,-129.05],scale:[3.867545626926585,4.034120024266678,3.845396999888626,4.010485850397074,3.7930328161651214,3.9546762161263933,3.705800290542444,3.8615400153566326,3.583423340129448,3.731047695264239,3.42614217150167,3.563422581387162,3.2340187485416654,3.3585363040092693,3.0069149726848483,3.1163558768603625,2.7467038201774896,2.839007181805743,2.396179320337984,2.465397299231047,2.0465489478285273,2.0926485959504046,1.69844715560697,1.721472095436401,1.6975437111123441,1.6813661330385972,1.6964656385723957,1.6410068218087699,1.6953418510506748,1.600683155869077,1.6949461423539347,1.5611952534619211,1.695778767033441,1.6192181483675254,1.6974286312803315,1.67816401278722,1.6986731352756679,1.7367377678289564,1.7001402051442627,1.7955084685101697,1.6989968298823763,1.718891188189636,1.6982537676935734,1.6429605229540671,1.6986340131894662,1.5682516111474212,1.6984611165696613,1.6431538252509903,1.699463828338268,1.7194740350587248,1.7001339787962444,1.7955091266700927,1.6994786724847832,1.719473295527445,1.698489620950722,1.643179488718951,1.6986340131894662,1.5682516111474212,1.6984611165696613,1.6431538252509903,1.699463828338268,1.7194740350587248,1.7001339787962444,1.7955091266700927,1.6994786724847832,1.719473295527445,1.698489620950722,1.643179488718951,1.6986340131894662,1.5682516111474212,1.6984611165696613,1.6431538252509903,1.699463828338268,1.7194740350587248,1.7001339787962444,1.7955091266700927,1.6994786724847832,1.719473295527445,1.698489620950722,1.643179488718951,1.6986340131894662,1.5682516111474212,1.6984611165696613,1.6431538252509903,1.699463828338268,1.7194740350587248,1.7001339787962444,1.7955091266700927],alpha:[0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],rotation:[-23.394134521484375,-23.086334228515625,-22.586578369140625,-21.81768798828125,-20.773406982421875,-19.2747802734375,-17.315780639648438,-15.276718139648438,-12.822097778320312,-9.534896850585938,-6.263519287109375,-3.04742431640625,-.2701416015625,2.2876129150390625,5.030670166015625,7.839202880859375,4.539276123046875,1.3015594482421875,-1.559295654296875,-4.93695068359375,-7.2670135498046875,-9.547653198242188,-12.035873413085938,-6.7752685546875,-1.536590576171875,3.5510711669921875,-1.5374603271484375,-6.7743988037109375,-12.035873413085938,-6.7752685546875,-1.536590576171875,3.5510711669921875,-1.5374603271484375,-6.7743988037109375,-12.035873413085938,-6.7752685546875,-1.536590576171875,3.5510711669921875,-1.5374603271484375,-6.7743988037109375,-12.035873413085938,-6.7752685546875,-1.536590576171875,3.5510711669921875]},mc22:{view:"r_arm.png",depth:1,startFrame:65,endFrame:108,position:[288.5,267.2,285.2,255.7,283.55,244.35,282.95,233.15,284.6,221.9,287.9,210.65,292.7,199.2,299.15,187.25,307.05,174.8,316.7,161.45,316.65,155.9,316.65,152.55,316.7,151.45,322.65,147.6,324.75,146.3,320.65,148.85,316.7,151.45,322.65,147.6,324.75,146.3,320.65,148.85,316.7,151.45,322.65,147.6,324.75,146.3,320.65,148.85,316.7,151.45,322.65,147.6,324.75,146.3,320.65,148.85,316.7,151.45,322.65,147.6,324.75,146.3,320.65,148.85,319.65,150.15,317.3,153.85,313.05,160.2,307.4,168.95,300,180.4,291.3,194.4,309.65,128.45,320.75,88.9,324.65,75.65,273.85,98.8,297.65,113.55],scale:[5.990323544050962,2.74168742611286,5.501782030052763,2.582772840257695,5.015846788459154,2.424804106624701,4.538137088642919,2.270834317367983,4.060471853418236,2.1168309722361265,3.5826360833813995,1.9627679559941722,3.1046563169160546,1.8087909063337662,2.626614745586049,1.6547011655635158,2.1483328016194236,1.5005311212683659,1.6698914244173244,1.3463441190000354,1.6698608454907122,1.3463440046032213,1.6698608454907122,1.3463440046032213,1.6698914244173244,1.3463441190000354,1.6695360803288803,1.3461014189511382,1.6698923389990548,1.3463427591213346,1.66964999015639,1.346162278915614,1.6698914244173244,1.3463441190000354,1.6695360803288803,1.3461014189511382,1.6698923389990548,1.3463427591213346,1.66964999015639,1.346162278915614,1.6698914244173244,1.3463441190000354,1.6695360803288803,1.3461014189511382,1.6698923389990548,1.3463427591213346,1.66964999015639,1.346162278915614,1.6698914244173244,1.3463441190000354,1.6695360803288803,1.3461014189511382,1.6698923389990548,1.3463427591213346,1.66964999015639,1.346162278915614,1.6698914244173244,1.3463441190000354,1.6695360803288803,1.3461014189511382,1.6698923389990548,1.3463427591213346,1.66964999015639,1.346162278915614,1.684736543276592,1.3388147396023549,1.7303850138755745,1.3171553016758253,1.8066469324491559,1.281096863699386,1.9132996547962717,1.2305827284808837,2.0505240457325087,1.165689140427461,2.218200716394919,1.0863039788536137,1.8197479312020197,1.4075012346812228,1.5806884839273492,1.6002349941541787,1.5010377156197825,1.6644898269450192,1.563617612074473,1.6988904274757621,1.5852832188155397,1.711186123459885],alpha:[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],rotation:[36.329498291015625,32.314300537109375,28.297637939453125,24.088577270507812,20.069320678710938,16.05157470703125,12.034194946289062,8.020156860351562,4.0072021484375,-.017486572265625,-.004364013671875,-.004364013671875,-.017486572265625,3.5057830810546875,4.700836181640625,2.2745208740234375,-.017486572265625,3.5057830810546875,4.700836181640625,2.2745208740234375,-.017486572265625,3.5057830810546875,4.700836181640625,2.2745208740234375,-.017486572265625,3.5057830810546875,4.700836181640625,2.2745208740234375,-.017486572265625,3.5057830810546875,4.700836181640625,2.2745208740234375,2.0536346435546875,2.0064849853515625,1.5514373779296875,1.2534942626953125,.5481414794921875,-.009613037109375,-.004364013671875,-.0052490234375,-.0236053466796875,-83.47746276855469,-111.21235656738281]},mc23:{view:"body_small.png",depth:2,startFrame:65,endFrame:108,position:[286.55,288,289.95,281.75,293.65,275.35,297.7,268.65,302.35,261.75,307,254.8,312.1,247.55,323.75,232.85,335.4,218.2,347.05,203.55,345.95,200,345.25,197.85,345.05,197.15,345.1,197.15,345.1,197.15,345.05,197.15,346.1,195.35,347.05,193.55,345.5,196.25,345.05,197.15,346.1,195.35,347.05,193.55,345.5,196.25,345.05,197.15,346.1,195.35,347.05,193.55,345.5,196.25,345.05,197.15,346.1,195.35,347.05,193.55,345.5,196.25,345.05,197.15,344.6,198.1,343.3,200.9,341.05,205.7,337.95,212.35,333.85,220.8,328.95,231.25,340.65,176.15,347.75,143.1,350.1,132.1,317.7,86.05,342.1,67.5],scale:[3.321412882541009,3.3221874346297784,3.145397150912661,3.1462397889150053,2.9698006412313656,2.970568713171744,2.7951523423308178,2.7958728743812546,2.6203555422752514,2.621013710932536,2.4455755236272627,2.4462171740067364,2.2708740234375,2.27154541015625,1.9641571044921875,1.9647674560546875,1.657470703125,1.657989501953125,1.35076904296875,1.35113525390625,1.3849639892578125,1.3025360107421875,1.4054718017578125,1.2733917236328125,1.41229248046875,1.263671875,1.41229248046875,1.2636871337890625,1.41229248046875,1.2636871337890625,1.41229248046875,1.263671875,1.3815460205078125,1.3074188232421875,1.35076904296875,1.35113525390625,1.39691162109375,1.2855377197265625,1.41229248046875,1.263671875,1.3815460205078125,1.3074188232421875,1.35076904296875,1.35113525390625,1.39691162109375,1.2855377197265625,1.41229248046875,1.263671875,1.3815460205078125,1.3074188232421875,1.35076904296875,1.35113525390625,1.39691162109375,1.2855377197265625,1.41229248046875,1.263671875,1.3815460205078125,1.3074188232421875,1.35076904296875,1.35113525390625,1.39691162109375,1.2855377197265625,1.41229248046875,1.263671875,1.4251861572265625,1.25689697265625,1.4638214111328125,1.2365570068359375,1.5282135009765625,1.2026824951171875,1.618377685546875,1.15521240234375,1.734283447265625,1.094207763671875,1.8759765625,1.019622802734375,1.539031982421875,1.3210906982421875,1.33685302734375,1.501983642578125,1.26947021484375,1.562286376953125,1.322422085947536,1.5945576779402162,1.3407063488722557,1.606083167122356],alpha:[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],rotation:[5.5490264892578125,4.5331878662109375,3.5327911376953125,2.554656982421875,1.766326904296875,.790283203125,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-83.46969604492188,-111.18955993652344]},mc18:{view:"face_small.png",depth:1,startFrame:62,endFrame:108,position:[201.55,-47.45,202.05,-45.65,204.45,-41.85,207.25,-34.45,212.55,-25,218.4,-12.2,226.6,2.5,239.9,47.1,254.15,66.9,269.1,86.05,284.5,104.8,300.55,123.15,317.1,141,316.05,135.4,315.35,132,315.15,130.95,313.6,130.25,312,129.75,315.6,127.4,319.8,125.2,317.3,125.65,315.15,125.9,315.15,127.95,315.15,129.95,315.15,126.95,315.15,123.9,317.35,125.25,319.6,126.4,318.6,124.15,317.7,121.75,314.7,128.5,312.15,135.45,315.75,127.85,320,120.15,316.25,127.05,315.45,128.45,313.1,132.65,309.25,139.65,304,149.3,297.35,161.8,289.2,177.05,308.1,105.9,319.5,63.3,323.2,49.05,259.95,114.45,272.7,124.85],scale:[3.8708128122886247,4.790662123417456,3.851314781417031,4.764282882202857,3.7987464716123207,4.692584777940402,3.7111607187357816,4.573074647140616,3.588546988287672,4.405658180031052,3.4309889344079663,4.19058945335034,3.2396172891005866,3.9291658151488305,2.923823501913573,3.498353383066528,2.6087120309758474,3.068136070839716,2.2943354993796876,2.638791700160061,1.9799752309426526,2.209516228725673,1.6655695266688364,1.7801654755996494,1.351104736328125,1.350738525390625,1.3752899169921875,1.35150146484375,1.389801025390625,1.3519287109375,1.3946533203125,1.352081298828125,1.383275367178177,1.381778769186707,1.3722918118684269,1.4119164073178991,1.3834230000034602,1.3819886601706919,1.3946489083618898,1.3520827557394817,1.39439379600021,1.3817767171840662,1.3946533203125,1.4119110107421875,1.3946533203125,1.3820037841796875,1.3946533203125,1.352081298828125,1.3946533203125,1.3820037841796875,1.3946533203125,1.4119110107421875,1.3944521024693715,1.3818052191571883,1.3946450479875636,1.3520655071549077,1.3943464140986699,1.3816670270742408,1.3946576350038926,1.4119075253139126,1.3946307181732618,1.3819502153927485,1.3946588335825587,1.3520753507114143,1.3946135254405712,1.3819330340567544,1.3946534981091008,1.4118985557713832,1.3945609434823958,1.3818931800254795,1.407198960687437,1.3737128319465404,1.4453682492432833,1.3494812206543516,1.5090008821530074,1.309105640078968,1.5980218130128885,1.2525462221972747,1.712591890238476,1.1798091662465926,1.8525848388671875,1.0909423828125,1.51983642578125,1.4135284423828125,1.3201751708984375,1.6071014404296875,1.2536468505859375,1.6716156005859375,1.3058932345957535,1.7061221967664446,1.3240018741030914,1.7184628101749655],alpha:[0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],rotation:[8.50048828125,8.300277709960938,8.254913330078125,7.80230712890625,7.5060272216796875,6.8054351806640625,6.28338623046875,5.063629150390625,4.0150299072265625,3.0108184814453125,2.0073699951171875,1.004425048828125,0,0,0,0,-2.52935791015625,-5.23187255859375,.0262298583984375,5.446807861328125,2.5572662353515625,0,0,0,0,0,2.5258636474609375,5.202392578125,4.0202484130859375,2.952392578125,-.502685546875,-3.9793548583984375,.5621337890625,5.47540283203125,1.312042236328125,1.256988525390625,1.0420074462890625,.810394287109375,.557769775390625,.2884979248046875,0,0,0,0,-83.47142028808594,-111.1903076171875]},mc24:{view:"l_arm.png",depth:3,startFrame:65,endFrame:108,position:[290.35,348,305,321.05,319,295.35,332.6,270.65,345.75,247.05,358.35,224.7,370.35,203.2,381.75,182.75,392.35,163.3,401.9,144.7,401.9,139.15,401.9,135.8,401.9,134.7,396.7,138.4,391.55,142.35,396.6,138.45,401.9,134.7,396.7,138.4,391.55,142.35,396.6,138.45,401.9,134.7,396.7,138.4,391.55,142.35,396.6,138.45,401.9,134.7,396.7,138.4,391.55,142.35,396.6,138.45,401.9,134.7,396.7,138.4,391.55,142.35,396.6,138.45,397.05,139.5,397.75,143.1,398.65,149.15,400.45,157.35,402.35,167.9,404.45,180.9,402.6,110.9,401.55,68.9,401.2,54.95,251,42.55,248.6,45.85],scale:[3.6055301479441253,2.73448122312079,3.351053396332871,2.5777412367798203,3.097777603468914,2.4219577326218107,2.84836771176605,2.2690829395010415,2.5988982163021253,2.1161627208364058,2.349427450072381,1.9632695997027587,2.0998943229757705,1.8103251278341719,1.850251680007496,1.6572867958854487,1.600610122620135,1.5042296973659046,1.3509368896484375,1.3511962890625,1.3509521484375,1.3511962890625,1.3509521484375,1.3511962890625,1.3509368896484375,1.3511962890625,1.3507145700066905,1.3082823924725444,1.3509330058773146,1.2658393688066816,1.3507009438813942,1.3082823924725444,1.3509368896484375,1.3511962890625,1.3507145700066905,1.3082823924725444,1.3509330058773146,1.2658393688066816,1.3507009438813942,1.3082823924725444,1.3509368896484375,1.3511962890625,1.3507145700066905,1.3082823924725444,1.3509330058773146,1.2658393688066816,1.3507009438813942,1.3082823924725444,1.3509368896484375,1.3511962890625,1.3507145700066905,1.3082823924725444,1.3509330058773146,1.2658393688066816,1.3507009438813942,1.3082823924725444,1.3509368896484375,1.3511962890625,1.3507145700066905,1.3082823924725444,1.3509330058773146,1.2658393688066816,1.3507009438813942,1.3082823924725444,1.3628178503333959,1.3020447583246288,1.399806649889448,1.2838624171582078,1.461445096293276,1.2536119893055417,1.5478043365494292,1.211287402256874,1.6587897629642614,1.1567888382691893,1.79449462890625,1.090240478515625,1.4722137451171875,1.4126129150390625,1.278839111328125,1.606048583984375,1.21435546875,1.670501708984375,1.2649817450953362,1.7049713297954656,1.2824947385607133,1.717332222971176],alpha:[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],rotation:[-24.55609130859375,-21.795822143554688,-19.039962768554688,-16.290283203125,-13.543136596679688,-10.796905517578125,-8.048446655273438,-5.3046875,-2.5598907470703125,0,0,0,0,-3.025634765625,-6.2064971923828125,-3.027374267578125,0,-3.025634765625,-6.2064971923828125,-3.027374267578125,0,-3.025634765625,-6.2064971923828125,-3.027374267578125,0,-3.025634765625,-6.2064971923828125,-3.027374267578125,0,-3.025634765625,-6.2064971923828125,-3.027374267578125,-2.7997894287109375,-2.5494232177734375,-2.2561798095703125,-1.545318603515625,-.7955322265625,0,0,0,0,-83.46969604492188,-111.18955993652344]},mc19:{view:"bowtie_bit.png",depth:2,startFrame:62,endFrame:108,position:[375.9,288.45,375.95,287.8,376.25,285.9,376.7,282.75,378.1,273.2,379.55,263.75,381,254.3,382.35,244.85,383.85,235.35,385.3,225.85,386.7,216.45,388.1,206.95,389.6,197.5,389.55,194.15,389.5,192.15,389.55,191.5,389.55,191.45,389.55,191.45,389.55,191.5,389.55,189.5,389.6,187.5,389.55,190.5,389.55,191.5,389.55,189.5,389.6,187.5,389.55,190.5,389.55,191.5,389.55,189.5,389.6,187.5,389.55,190.5,389.55,191.5,389.55,189.5,389.6,187.5,389.55,190.5,389.55,191.5,389.5,192.1,389.45,193.9,389.35,197,389.1,201.2,388.95,206.65,388.65,213.35,389.45,164.35,389.85,134.95,390.1,125.15,325.75,54.1,320.15,30.75],scale:[3.451995849609375,3.45513916015625,3.437408447265625,3.440582275390625,3.3936309814453125,3.3967742919921875,3.32061767578125,3.323699951171875,3.1016845703125,3.10455322265625,2.8827056884765625,2.8854522705078125,2.66375732421875,2.6662750244140625,2.4447784423828125,2.44708251953125,2.225830078125,2.227935791015625,2.0068511962890625,2.0087432861328125,1.78790283203125,1.78961181640625,1.5689697265625,1.5704193115234375,1.350006103515625,1.351226806640625,1.384185791015625,1.3026275634765625,1.4046630859375,1.2734832763671875,1.4114990234375,1.263763427734375,1.4114990234375,1.263763427734375,1.4114990234375,1.263763427734375,1.4114990234375,1.263763427734375,1.3807373046875,1.3074951171875,1.350006103515625,1.351226806640625,1.3961334228515625,1.285614013671875,1.4114990234375,1.263763427734375,1.3807373046875,1.3074951171875,1.350006103515625,1.351226806640625,1.3961334228515625,1.285614013671875,1.4114990234375,1.263763427734375,1.3807373046875,1.3074951171875,1.350006103515625,1.351226806640625,1.3961334228515625,1.285614013671875,1.4114990234375,1.263763427734375,1.3807373046875,1.3074951171875,1.350006103515625,1.351226806640625,1.3961334228515625,1.285614013671875,1.4114990234375,1.263763427734375,1.4189300537109375,1.2613677978515625,1.441192626953125,1.254180908203125,1.47833251953125,1.2421875,1.530303955078125,1.2253875732421875,1.59710693359375,1.20379638671875,1.678802490234375,1.1774139404296875,1.45098876953125,1.3913116455078125,1.3143310546875,1.5196533203125,1.2687835693359375,1.56243896484375,1.3216857393121146,1.5946958513946898,1.339986593692375,1.606219045667441],alpha:[1,.890625,.5546875,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],rotation:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-83.46969604492188,-111.18955993652344]},mc25:{view:"shaft.png",depth:8,startFrame:74,endFrame:106,position:[339.15,122.65,331.95,66.05,327.55,32.05,326.1,20.6,328.3,18.95,329.65,17.95,330.1,17.6,328.1,19.05,326.1,20.6,328.1,19.1,330.1,17.6,328.1,16.55,326.1,15.6,328.1,16.6,330.1,17.6,328.1,18.05,326.1,18.6,328.1,17.65,330.1,16.6,328.1,16.6,326.1,16.6,328.1,16.6,330.1,16.6,330.1,16.45,330.1,16.05,330.1,15.45,330.1,14.6,330.85,12.35,331.1,11.6,325.9,8.6,310.4,7.7,316.1,18.6],scale:[1.003570556640625,.482879638671875,1.1967620849609375,.965118408203125,1.31268310546875,1.254486083984375,1.351318359375,1.3509368896484375,1.292266845703125,1.3509521484375,1.2568359375,1.3509521484375,1.245025634765625,1.3509368896484375,1.298065185546875,1.3509521484375,1.3511199951171875,1.3509368896484375,1.2980804443359375,1.3509521484375,1.245025634765625,1.3509368896484375,1.298065185546875,1.3509521484375,1.3511199951171875,1.3509368896484375,1.2980804443359375,1.3509521484375,1.245025634765625,1.3509368896484375,1.298065185546875,1.3509521484375,1.3511199951171875,1.3509368896484375,1.2980804443359375,1.3509521484375,1.245025634765625,1.3509368896484375,1.298065185546875,1.3509521484375,1.3511199951171875,1.3509368896484375,1.2980804443359375,1.3509521484375,1.245025634765625,1.3509368896484375,1.245025634765625,1.3686370849609375,1.245025634765625,1.4216766357421875,1.245025634765625,1.510101318359375,1.245025634765625,1.63385009765625,1.224761962890625,1.7884521484375,1.2178192138671875,1.84136962890625,1.3561859130859375,1.25616455078125,1.77130126953125,.8582000732421875,1.6190185546875,.605621337890625]},mc26:{view:"cloud.png",depth:9,startFrame:74,endFrame:106,position:[319.6,96.3,300.15,-2.65,289.45,-62.95,286.35,-83.5,280.9,-70.8,278.55,-63.7,277.55,-60.95,277.3,-63.3,276.95,-65.25,276.3,-66.8,274.85,-58.65,272.8,-49.65,274.8,-59.55,276.3,-68.8,274.3,-61.15,271.8,-52.65,274.25,-60.05,276.3,-66.8,274.35,-61.15,271.8,-54.65,274.3,-62.05,276.3,-68.8,274.8,-62.15,272.8,-54.65,274.3,-63.05,275.3,-70.8,273.75,-63.15,271.8,-54.65,274.3,-62.05,275.25,-61.5,278.1,-59.55,282.8,-56.1],scale:[.8363494873046875,.8363037109375,1.1796907322646695,1.2215940258089255,1.3856594614286124,1.452713949891261,1.4546785574063492,1.5301582583533593,1.3975420125432552,1.4312212708455023,1.3631159074483679,1.3715575306151433,1.3515594157145154,1.3514679496002286,1.3513809707354676,1.390047560992545,1.3513663400576246,1.4288214914052515,1.3515594157145154,1.4677587636593574,1.3948416918663225,1.3604057319882386,1.438494842112741,1.2533225970398274,1.3948569382456377,1.3603746238678902,1.3515594157145154,1.4677587636593574,1.3948416918663225,1.3604057319882386,1.438494842112741,1.2533225970398274,1.3948569382456377,1.3603746238678902,1.3515594157145154,1.4677587636593574,1.3948416918663225,1.3604057319882386,1.438494842112741,1.2533225970398274,1.3948569382456377,1.3603746238678902,1.3515594157145154,1.4677587636593574,1.3948416918663225,1.3604057319882386,1.438494842112741,1.2533225970398274,1.3948569382456377,1.3603746238678902,1.3515594157145154,1.4677587636593574,1.3948416918663225,1.3604057319882386,1.438494842112741,1.2533225970398274,1.3948569382456377,1.3603593774894194,1.385654703602038,1.3483176159996824,1.3585028701646396,1.3126301276074,1.3134378434611198,1.2533225970398274],rotation:[0,2.752685546875,4.2915802001953125,4.9655914306640625,.7719268798828125,-1.5374603271484375,-2.4935760498046875,-2.312042236328125,-2.3137969970703125,-2.4935760498046875,-2.312042236328125,-2.4935760498046875,-2.312042236328125,-2.4935760498046875,-2.312042236328125,-2.4935760498046875,-2.312042236328125,-2.4935760498046875,-2.312042236328125,-2.4935760498046875,-2.312042236328125,-2.4935760498046875,-2.312042236328125,-2.4935760498046875,-2.312042236328125,-2.4935760498046875,-2.312042236328125,-2.4935760498046875,-2.312042236328125,-2.271026611328125,-2.2867279052734375,-2.492706298828125]},mc27:{view:"donald_jump.png",depth:0,startFrame:107,endFrame:109,position:[184.55,-121,184.5,-247.7],scale:[1.388885498046875,1.388824462890625,1.388885498046875,1.388824462890625]}};
c.exports=d}),define("com/fido/swfy/Swfy",["require","exports","module","PIXI","./SwfyAnimation","signals"],function(a,b,c){var d=a("PIXI"),e=a("./SwfyAnimation"),f=a("signals");Swfy=function(){d.DisplayObjectContainer.call(this),this.sprites=[];for(var a in e){var b=e[a],c=d.Sprite.fromFrame(b.view);this.addChild(c),b.sprite=c,c.visible=!1}this.currentFrame=0,this.onComplete=new f,this.finished=!0},Swfy.constructor=Swfy,Swfy.prototype=Object.create(d.DisplayObjectContainer.prototype),Swfy.prototype.reset=function(){this.currentFrame=0,this.finished=!1},Swfy.prototype.updateTransform=function(){if(!this.finished){this.currentFrame+=.5,this.currentFrame>=110&&(this.onComplete.dispatch(),this.finished=!0);var a=this.currentFrame;a=Math.round(a);for(var b in e){var c=e[b];if(a>=c.startFrame&&a<c.endFrame){c.sprite.visible=!0;{var f=a-c.startFrame,g=Math.floor(f),h=Math.round(f),i=f-g,j=c.position[2*g],k=(c.position[2*h],c.position[2*g+1]);c.position[2*h+1]}c.sprite.position.x=j,c.sprite.position.y=k;var l=1,m=1;if(c.scale){var n=c.scale[2*g],o=c.scale[2*h];l=n+(o-n)*i;var p=c.scale[2*g+1],q=c.scale[2*h+1];m=p+(q-p)*i}c.sprite.scale.x=l,c.sprite.scale.y=m;var r=1;if(c.alpha){var s=c.alpha[g],t=c.alpha[h];r=s+(t-s)*i}if(c.sprite.alpha=r,c.rotation){var u=c.rotation[g],v=c.rotation[h];interRotation=u+(v-u)*i,c.sprite.rotation=interRotation*(Math.PI/180)}}else c.sprite.visible=!1}d.DisplayObjectContainer.prototype.updateTransform.call(this)}},c.exports=Swfy}),define("com/duck/game/AngryCutScene",["require","exports","module","PIXI","signals","com/fido/swfy/Swfy"],function(a,b,c){var d=a("PIXI"),e=a("signals"),f=a("com/fido/swfy/Swfy"),g=function(){d.DisplayObjectContainer.call(this),this.black=(new d.Graphics).beginFill(0).drawRect(0,0,100,100),this.onComplete=new e,this.container=new d.DisplayObjectContainer,this.addChild(this.container),this.bg=new d.Sprite.fromImage(ASSET_URL+"img/game/angerblast.jpg"),this.container.addChild(this.bg),this.swfy=new f,this.swfy.scale.set(.8),this.swfy.x=220,this.swfy.y=110,this.swfy.onComplete.add(this.onAnimationFinished,this),this.addChild(this.swfy)};g.prototype=Object.create(d.DisplayObjectContainer.prototype),g.prototype.onAnimationFinished=function(){this.onComplete.dispatch()},g.prototype.updateTransform=function(){d.DisplayObjectContainer.prototype.updateTransform.call(this)},g.prototype.run=function(){this.swfy.reset()},g.prototype.resize=function(a,b){var c=b/450;this.scale.x=this.scale.y=c,this.position.x=a/2-800*c/2,this.black.scale.x=a/100,this.black.scale.y=b/100},c.exports=g}),define("com/duck/game/hud/Hud",["require","exports","module","PIXI","signals","./DetailText","com/fido/game/GameObjectPool","com/fido/ui/buttons/Button","com/fido/utils/Utils","./WaterTank","./RageBar","./LifeBar","com/duck/game/AngryCutScene","com/fido/loader/Cache","com/fido/physics/Spring"],function(a,b,c){var d=a("PIXI"),e=(a("signals"),a("./DetailText")),f=a("com/fido/game/GameObjectPool"),g=(a("com/fido/ui/buttons/Button"),a("com/fido/utils/Utils")),h=a("./WaterTank"),i=a("./RageBar"),j=a("./LifeBar"),k=a("com/duck/game/AngryCutScene"),l=a("com/fido/loader/Cache"),m=a("com/fido/physics/Spring"),n=function(a){this.game=a,d.DisplayObjectContainer.call(this);var b={fill:"black",font:"46px "+window.MAIN_FONT,dropShadow:!1};this.lives=new j,this.lives.position.y=420,this.lives.position.x=-122,this.lines=d.Sprite.fromFrame("asplodeLines.png"),this.addChild(this.lines),this.lines.width=1136,this.lines.height=640,this.lines.anchor.set(.5),this.lines.x=568,this.lines.y=270,this.rageing=!0,this.linesRage=0,this.rageTarget=0,this.addChild(this.lives),this.scorePanel=d.Sprite.fromFrame("score_panel.png"),this.scoreLabel=new d.Text(l.getJson("translation").strings.STR_GAME_SCORE,{fill:"black",font:"bold 28px "+window.HEADER_FONT}),this.scorePanel.pivot.x=170,this.scorePanel.pivot.y=110,this.scoreLabel.alpha=.6,this.scoreLabel.position.set(23,10),this.scorePanel.addChild(this.scoreLabel),this.addChild(this.scorePanel),this.score=new d.Text("0000",b),this.score.anchor.x=1,this.score.position.y=38,this.score.position.x=230,this.scorePanel.addChild(this.score),this.detailPool=new f(e),this.waterTank=new h,this.addChild(this.waterTank),this.rageBar=new i,this.rageBar.visible=!1,this.addChild(this.rageBar),this.rageBar.x=20,this.currentText=l.getJson("translation").strings.STR_GAME_REFILL,this.refill=new d.Text(l.getJson("translation").strings.STR_GAME_REFILL,{align:"center",font:"bold 200px "+window.HEADER_FONT,fill:"#f3f3eb",dropShadow:!0,dropShadowDistance:20,dropShadowColor:"rgba(0, 0, 0, 0.5",stroke:"#c9050b",strokeThickness:20}),this.refill.anchor.set(.5),this.addChild(this.refill),this.refill.alpha=0,this.count=0,this.angryCutScene=new k,this.angryCutScene.onComplete.add(this.onAngryComplete,this),this.scoresSpring=new m,this.scoresSpring.tx=0};n.prototype=Object.create(d.DisplayObjectContainer.prototype),n.prototype.showAngryScene=function(){this.addChild(this.angryCutScene),this.angryCutScene.run(),this.game.pause(),this.game.view.visible=!1},n.prototype.onAngryComplete=function(){this.game.view.visible=!0,this.removeChild(this.angryCutScene),this.game.resume(),this.game.goNuts(!0)},n.prototype.onPausePressed=function(){this.game.reset()},n.prototype.showMessage=function(a){this.currentText!==a&&(this.refill.setText(a),this.currentText=a),TweenLite.killTweensOf(this.refill.position),this.refill.visible=!0,this.refill.alpha=1,this.refill.position.y=this.h/2,this.refill.rotation=.1*(Math.random()-.5);var b=960/(this.refill.width/this.refill.scale.x);b>1&&(b=1),this.refill.scale.set(.8*b),TweenLite.to(this.refill.scale,.3,{x:1*b,y:1*b,ease:Elastic.easeOut}),TweenLite.to(this.refill,.9,{rotation:-.2,ease:Back.easeOut,delay:.8}),TweenLite.to(this.refill.position,.4,{y:this.h/2+600,delay:.6,ease:Back.easeIn,onComplete:function(){this.refill.visible=!1}.bind(this)})},n.prototype.showRefill=function(){this.showMessage(l.getJson("translation").strings.STR_GAME_REFILL)},n.prototype.reset=function(){this.rageBar.visible=!1,this.lives.visible=!0,this.updateLives(),this.score.setText(g.formatScore(this.game.score))},n.prototype.updateLives=function(){this.lives.update(3-this.game.lives)},n.prototype.updateScore=function(a,b,c){var d=this.detailPool.getObject();this.score.setText(g.formatScore(this.game.score)),this.scoresSpring.dx=.1,c||(d.setup(b.position.x+40,b.position.y-80,a,b.multiplyer),this.addChild(d),d.visible=!0,d.onFinish.addOnce(this.onDetailFinish,this))},n.prototype.onDetailFinish=function(a){a.visible=!1,this.detailPool.returnObject(a)},n.prototype.update=function(){if(this.waterTank.update(),this.scoresSpring.update(),this.scorePanel.scale.x=1+this.scoresSpring.x,this.scorePanel.scale.y=1-this.scoresSpring.x,this.rageing)if(this.linesRage+=.1*(this.rageTarget-this.linesRage),this.linesRage<.01)this.lines.visible=!1;else{this.lines.visible=!0;var a=1.42,b=800/450;if(this.count++,this.lines.alpha=this.linesRage,this.count%10){var c=.4*Math.random();a+=c,b+=c,a*=2-this.linesRage,b*=2-this.linesRage,a*=1.1,b*=1.1,this.lines.scale.x=1.2*a,this.lines.scale.y=1.2*b}}},n.prototype.goNuts=function(){this.lives.visible=!1,this.rageBar.visible=!0},n.prototype.showGameover=function(){},n.prototype.onGameoverComplete=function(){this.game.onGameover.dispatch()},n.prototype.resize=function(a,b){this.w=a,this.h=b,this.lives.position.x=30,this.lives.position.y=b-185+20,this.waterTank.position.x=80,this.waterTank.position.y=190,this.rageBar.position.x=a/2,this.rageBar.position.y=b-30-40-100,this.refill.x=a/2,this.scorePanel.y=b-122+5+this.scorePanel.pivot.y,this.scorePanel.position.x=a/2-110+this.scorePanel.pivot.x,this.angryCutScene.resize(a,b)},c.exports=n}),define("com/duck/game/Bench",["require","exports","module","com/fido/game/GameObject"],function(a,b,c){var d=a("com/fido/game/GameObject"),e=function(a,b){var c=new PIXI.DisplayObjectContainer;d.call(this,c),this.view.position.x=this.position.x=a,this.view.position.y=this.position.y=b,this.state=e.states.EMPTY,this.hasClient=!1};e.prototype=Object.create(d.prototype),e.prototype.setClient=function(a){this.client=a,this.state=e.states.BUSY},e.prototype.removeClient=function(){this.client=null,this.state=e.states.EMPTY,this.hasClient=!1},e.prototype.cleanUp=function(){this.item=null,this.state=e.states.EMPTY,this.hasClient=!1},e.prototype.reset=function(){this.item=null,this.client=null,this.hasClient=!1,this.state=e.states.EMPTY},e.prototype.update=function(){},e.constructor=e,e.states={EMPTY:0,BUSY:1,DIRTY:2},c.exports={bench:e,states:e.states}}),define("com/duck/game/clients/ClientView",["require","exports","module","PIXI","com/fido/game/GameObject","com/fido/system/Ticker","../Bench","signals"],function(a,b,c){var d=a("PIXI"),e=(a("com/fido/game/GameObject"),a("com/fido/system/Ticker")),f=(a("../Bench").bench,a("signals"),function(a){this.client=a,d.DisplayObjectContainer.call(this),this.body=new d.Sprite.fromFrame("bunnywalk_front01.png"),this.addChild(this.body),this.body.anchor.x=.5,this.body.anchor.y=1,this.head=new d.Sprite.fromFrame("bunnyhead_normal.png"),this.head.pivot.set(51,109),this.addChild(this.head),this.menu=new d.MovieClip([d.Texture.fromFrame("cloud_angry.png"),d.Texture.fromFrame("cloud_angry.png"),d.Texture.fromFrame("cloud_angry.png")]),this.menu.anchor.x=this.menu.anchor.y=.5,this.menu.position.y=-30,this.reading=!1,this.speed=.25,this.speedSitting=.1,this.currentFrame=0,this.payMe=new d.Sprite.fromFrame("guest_payment.png"),this.payMe.anchor.set(.5),this.payMe.y=-50,this.addChild(this.payMe),this.swing=0,this._upCache=!1});f.prototype=Object.create(d.DisplayObjectContainer.prototype),f.prototype.setModel=function(a){this.walkingAnimations=[a.walkFrontFrames,a.walkBackFrames],this.walkingAnimationsHeads=[a.walkFrontFramesHead,a.walkFrontFramesHead],this.frontHeads=a.frontHeads,this.backHeads=a.backHeads,this.sittingFrames=[a.frontHeads.angryHead,a.frontHeads.normalHead,a.frontHeads.happyHead],this.eatingFrames=a.drinkHead,this.thirstyFrames=a.thirstHead,this.sittingFrame=a.sittingFrame,this.sittingFrameHead=a.sittingFrameHead,this.rotation=0},f.prototype.readMenu=function(){this.reading||(this.reading=!0,this.addChild(this.menu))},f.prototype.putDownMenu=function(){this.reading&&(this.reading=!1,this.removeChild(this.menu))},f.prototype.update=function(){var a=this.client.patienceCounter/this.client.patience;a>.99&&(a=.99);var b=3*a|0,c=this.walkingAnimationsHeads[0],d=this.client.facingUp?this.backHeads:this.frontHeads,f=1;if(0===this.client.state||6===this.client.state){this.currentFrame+=e.instance.deltaTime*this.speed;var g=this.walkingAnimations[this.client.facingUp?1:0],c=this.walkingAnimationsHeads[this.client.facingUp?1:0];this.client.facingLeft&&this.scale.x>0&&(this.scale.x*=-1);var h=(0|this.currentFrame)%g.length,i=g[h];this.client.nutsMode?this.head.setTexture(d.worriedHead[0]):0===this.client.state?this.head.setTexture(d.thirstHead[0]):6===this.client.state&&this.head.setTexture(d.happyHead[0]),f=0,this._upCache!=this.client.facingUp&&(this._upCache=this.client.facingUp,this.addChildAt(this._upCache?this.head:this.body,0))}else{if(this.currentFrame+=e.instance.deltaTime*this.speedSitting,this.scale.x*=this.client.bench.flip,this._upCache&&(this._upCache=!1,this.addChildAt(this.body,0)),4===this.client.state){f=0;var g=this.eatingFrames}else if(3===this.client.state)var g=2===b?this.frontHeads.thirstHead:this.sittingFrames[b];else var g=this.sittingFrames[b];var j=(0|this.currentFrame)%g.length;this.head.setTexture(g[j]);var i=this.sittingFrame,c=this.sittingFrameHead,h=0}this.head.position.x=-i.width/2+c[3*h],this.head.position.y=-i.height+c[3*h+1],this.client.hypno?(this.head.setTexture(d.hypnoHead[0]),this.head.rotation=c[3*h+2]*Math.PI/180+.05*Math.sin(.1*this.swing)*2*4):this.head.rotation=c[3*h+2]*Math.PI/180+.05*Math.sin(.05*this.swing)*f,this.body.setTexture(i),this.swing++,0==b&&(this.pivot.x=3*Math.sin(.5*this.client.patienceCounter))},c.exports=f}),define("com/duck/game/clients/Cup",["require","exports","module","PIXI","com/fido/physics/SimpleBouncer"],function(a,b,c){var d=a("PIXI"),e=a("com/fido/physics/SimpleBouncer"),f=function(){d.DisplayObjectContainer.call(this),this.smallFillFrames=[d.Texture.fromFrame("cup_small_empty.png"),d.Texture.fromFrame("cup_small_onethird.png"),d.Texture.fromFrame("cup_small_twothirds.png"),d.Texture.fromFrame("cup_small_full.png")],this.mediumFillFrames=[d.Texture.fromFrame("cup_medium_empty.png"),d.Texture.fromFrame("cup_medium_onethird.png"),d.Texture.fromFrame("cup_medium_twothirds.png"),d.Texture.fromFrame("cup_medium_full.png")],this.largeFillFrames=[d.Texture.fromFrame("cup_medium_empty.png"),d.Texture.fromFrame("cup_medium_onethird.png"),d.Texture.fromFrame("cup_medium_twothirds.png"),d.Texture.fromFrame("cup_medium_full.png")],this.cup=new d.Sprite.fromFrame("cup_medium_full.png"),this.cup.anchor.set(.5),this.addChild(this.cup),this.cupFrames=this.smallFillFrames,this.isEmpty=!1,this.fill=100,this.bouncer=new e,this.bouncer.bounce=.8,this.bounceCount=0};f.prototype=Object.create(d.DisplayObjectContainer.prototype),f.prototype.show=function(){this.visible=!0,this.cup.scale.set(0),this.drink(0),this.bounceCount=120,this.bouncer.reset(),TweenLite.to(this.cup.scale,.3,{x:1,y:1,ease:Back.easeOut})},f.prototype.hide=function(){TweenLite.to(this.cup.scale,.3,{x:0,y:0,ease:Back.easeIn})},f.prototype.update=function(){this.bouncer.update(),this.bounceCount--,this.bounceCount<0&&(this.bounceCount=120,this.bouncer.dx=-7),this.cup.y=this.bouncer.x},f.prototype.refill=function(){this.isEmpty=!1,this.fills=100,this.cup.setTexture(this.fillFrames[3])},f.prototype.setCup=function(a){this.cupFrames=1===a?this.smallFillFrames:2===a?this.mediumFillFrames:this.largeFillFrames},f.prototype.drink=function(a){this.cup.setTexture(this.cupFrames[Math.ceil(3*(a-.001))])},c.exports=f}),define("com/duck/game/DuckObject",["require","exports","module","com/fido/game/GameObject","com/fido/system/Ticker","signals"],function(a,b,c){var d=a("com/fido/game/GameObject"),e=a("com/fido/system/Ticker"),f=a("signals"),g=function(a,b){d.call(this,a),this.game=b,this.debrisManager=null,this.speed.x=4,this.speed.y=4,this.radius=20,this.direction=4;var c=200;this.bounds=new PIXI.Rectangle(-c,0,1040+c,800+c),this._direction=new PIXI.Point(0,1),this._acceleration=.1,this._maxSpeed=4,this._velocity=new PIXI.Point(0,0),this._velocity.z=0,this._target=new PIXI.Point(500,0),this._life=100,this.nutsMode=!0,this.onDead=new f};g.prototype=Object.create(d.prototype),g.prototype.followPath=function(a){this.path=a,this.pathIndex=0},g.prototype.moveTo=function(a,b){this.targetObject=null;var c=this.game.gridWorld,d=c.getCell(a,b),e=c.getCell(this.position.x,this.position.y),f=c.astar.search(c,e,d);f.length>0&&this.followPath(f)},g.prototype.stop=function(){this.direction=4,this.path=null},g.prototype.gotoAndInteractWithObject=function(a,b){this.targetObject=a;var c=this.game.gridWorld,d=a.cell;d=b?a.enterCell:a.interactCell;var e=c.getCell(this.position.x,this.position.y);if(e.view.visible=!1,e===d)this.interactWithObject(a);else{for(var f=c.astar.search(c,e,d),g=0;g<f.length;g++);f.length>0&&this.followPath(f)}},g.prototype.interactWithObject=function(){},g.prototype.updateNutsMovement=function(){},g.prototype.hit=function(){},g.prototype.updateMovement=function(){{var a=this.path[this.pathIndex],b=a.centerX-this.position.x,c=a.centerY-this.position.y;Math.sqrt()}100>b*b+c*c?(this.pathIndex++,this.pathIndex===this.path.length&&(this.direction=4,this.path=null,this.position.x=a.centerX,this.position.y=a.centerY,this.targetObject&&this.interactWithObject(this.targetObject))):b>0?(this.position.x+=Math.min(this.speed.x*e.instance.deltaTime,Math.abs(b)),this.direction=3):0>b?(this.position.x-=Math.min(this.speed.x*e.instance.deltaTime,Math.abs(b)),this.direction=2):c>0?(this.position.y+=Math.min(this.speed.y*e.instance.deltaTime,Math.abs(c)),this.direction=1):0>c&&(this.position.y-=Math.min(this.speed.y*e.instance.deltaTime,Math.abs(c)),this.direction=0)},c.exports=g}),define("com/fido/physics/PendulumConstraint",["require","exports","module"],function(a,b,c){var d=function(){this.time=0,this.speed=.25,this.swing=.5*Math.PI,this.mass=1,this.position};d.prototype.reset=function(){this.time=100*Math.random(),this.position=0},d.prototype.update=function(){this.time+=this.speed,this.position=Math.cos(this.time)*Math.pow(this.mass,this.time)*this.swing},c.exports=d}),define("com/duck/game/clients/Client",["require","exports","module","com/fido/game/GameObject","./ClientView","./Cup","../Bench","signals","com/fido/system/Ticker","../DuckObject","com/fido/sound/SoundManager","com/fido/physics/PendulumConstraint"],function(a,b,c){var d=a("com/fido/game/GameObject"),e=a("./ClientView"),f=a("./Cup"),g=a("../Bench").bench,h=a("signals"),i=a("com/fido/system/Ticker"),j=a("../DuckObject"),k=(a("com/fido/sound/SoundManager"),a("com/fido/physics/PendulumConstraint")),l=function(a){var b=new e(this);j.call(this,b),this.isIn=!1,this.facingUp=!1,this.facingLeft=!1,this.game=a,this.speed.x=2,this.speed.y=2,this.multiplyer=2,this.hitCount=0,this.state=l.states.WALKING_TO_TABLE,this.eatSpeed=1,this.patience=1,this.decisionSpeed=1,this.eatCounter=0,this.patienceCounter=0,this.patienceView=new PIXI.DisplayObjectContainer,this.patienceViewBg=new PIXI.Sprite.fromFrame("patienceBar_BG.png"),this.patienceViewBg.position.x=-20,this.patienceViewBg.position.y=28,this.patienceViewBar=new PIXI.Sprite.fromFrame("patienceBar_Fill.png"),this.patienceViewBar.position.x=-20,this.patienceViewBar.position.y=26,this.patienceOverlay=new PIXI.Sprite.fromFrame("patienceBar_Frame.png"),this.patienceOverlay.position.x=-24,this.patienceOverlay.position.y=27,this.patienceView.addChild(this.patienceViewBg),this.patienceView.addChild(this.patienceViewBar),this.patienceView.addChild(this.patienceOverlay),this.view.addChild(this.patienceView),this.order=null,this.bench=null,this.onLeave=new h,this.onCheesedOff=new h,this.onScore=new h,this.onInteract=new h,this.onSit=new h,this.onDeaded=new h,this.angrySound="angryBloke",this.cup=new f,this.view.addChildAt(this.cup,2),this.cup.y=-65,this.cup.x-=20,this.cup.visible=!1,this.view.payMe.visible=!1,this.width=120,this.height=120,this.pendulum=new k,this.pendulum.swing=.3,this.hypno=!1,this.isDead=!1,this.id=999};l.prototype=Object.create(j.prototype),l.debrisFrames=["random_01.png","random_02.png","random_03.png","random_04.png","random_05.png","random_06.png","random_07.png"],l.prototype.reset=function(a){this.model=a,this.id=a.id,this.view.alpha=1,this.view.setModel(a),this.patienceView.alpha=0,this.patienceView.y=-a.sitPosition,this.startPoint=null,this.decisionSpeed=50+30*Math.random(),this.eatSpeed=500+100*Math.random(),this.patience=a.patience+100*Math.random(),this.patience*=.7,this.eatSpeed*=.65+.2*(a.defaultCupSize-1),this.recieveOrderBonus=1e3,this.eatingBonus=1e3,this.checkBonus=1e3,this.speed.x=4,this.speed.y=4,this.eatCounter=0,this.patienceCounter=0,this.decisionCounter=0,this.multiplyer=1,this.state=l.states.WALKING_TO_TABLE,this.food=null,this.order=null,this.bench=null,this.view.putDownMenu(),this.patienceCounter=this.patience,this.view.payMe.visible=!1,this.cup.setCup(a.defaultCupSize),this._direction.set(0,1),this._acceleration=a._acceleration||.27,this._maxSpeed=a.maxSpeed||8,this._velocity.set(0,1),this._target.set(500,0),this.nutsMode=!0,this.isDead=!1,this._life=100,this.cup.x=-20,this.cup.y=-65,this.cup.visible=!1,this.hypno=!1,this.height=a.walkFrontFrames[0].height,this.width=.5*a.walkFrontFrames[0].width},l.prototype.followPath=function(a){this.path=a,this.pathIndex=0},l.prototype.update=function(){if(l.isActive){if(this.nutsMode){if(!this.isDead){this._velocity.x+=this._direction.x*this._acceleration,this._velocity.y+=this._direction.y*this._acceleration;var a=Math.sqrt(this._velocity.x*this._velocity.x+this._velocity.y*this._velocity.y);a>this._maxSpeed&&(this._velocity.x=this._velocity.x/a*this._maxSpeed,this._velocity.y=this._velocity.y/a*this._maxSpeed),this._velocity.x*=.95,this._velocity.y*=.95}this.position.x+=this._velocity.x*i.instance.deltaTime/i.instance.speed,this.position.y+=this._velocity.y*i.instance.deltaTime/i.instance.speed,this.position.x<this.bounds.x||this.position.x>this.bounds.x+this.bounds.width||this.position.y<this.bounds.y||this.position.y>this.bounds.y+this.bounds.height?this.isIn&&this.onLeave.dispatch(this):this.isIn=!0,this.facingLeft=this._velocity.x<0}else this.state===l.states.BROWSIG_MENU?(this.decisionCounter+=i.instance.deltaTime,this.decisionCounter>this.decisionSpeed&&(this.state=l.states.WAITING_TO_GIVE_ORDER,this.view.putDownMenu(),this.order.view.visible=!0,this.onInteract.dispatch())):this.state===l.states.WALKING_TO_TABLE||this.state===l.states.LEAVING?this.path&&this.updateMovement():this.state===l.states.EATING?(this.eatCounter-=i.instance.deltaTime,this.cup.drink(this.eatCounter/this.eatSpeed),this.patienceCounter+=.5*i.instance.deltaTime,this.patienceCounter>this.patience&&(this.patienceCounter=this.patience),this.eatCounter<0&&this.finishEating()):this.state===l.states.WAITING_FOR_ORDER?(this.cup.update(),this.patienceCounter-=i.instance.deltaTime*this.multiplyer,this.patienceCounter<0&&this.cheesedOff()):this.state===l.states.WAITING_FOR_BILL&&(this.pendulum.update(),this.view.payMe.rotation=this.pendulum.position,this.view.payMe.pivot.y=80,this.patienceCounter-=i.instance.deltaTime*this.multiplyer,this.patienceCounter<0&&this.cheesedOff()),this.patienceViewBar.scale.x=this.patienceCounter/this.patience;this.view.update(),d.prototype.update.call(this)}},l.prototype.interactWithObject=function(a){a instanceof g?this.sitDown(a):this.onLeave.dispatch(this)},l.prototype.goNuts=function(){this.nutsMode=!0,this.cup.visible=!1,this.state=l.states.LEAVING,this.view.payMe.visible=!1,TweenLite.to(this.patienceView,.3,{alpha:0}),this.bench&&this.bench.removeClient(),Math.random()>.5?this._direction.set(1,0):this._direction.set(-1,0)},l.prototype.sitDown=function(a){this.bench=a,this.cup.show(),this.facingUp=!1,a.setClient(this),this.patienceView.alpha=0,TweenLite.to(this.patienceView,.3,{alpha:1}),this.patienceCounter=this.patience,this.patienceCounter>this.patience&&(this.patienceCounter=this.patience),this.patienceView.scale.x=this.bench.flip,this.patienceView.position.x=-1===this.bench.flip?20:-20,TweenLite.to(this.position,.3,{y:a.position.y+this.model.sitPosition}),this.state=l.states.WAITING_FOR_ORDER,this.onSit.dispatch(this),this.onInteract.dispatch(this)},l.prototype.startEating=function(){this.eatCounter=this.eatSpeed,this.cup.cup.y=0,this.patienceCounter>this.patience&&(this.patienceCounter=this.patience),TweenLite.to(this.cup.position,.3,{x:this.model.cupPosition.x,y:this.model.cupPosition.y,ease:Back.easeOut}),this.view.scale.x=1,this.state=l.states.EATING},l.prototype.finishEating=function(){this.state=l.states.WAITING_FOR_BILL,this.view.payMe.visible=!0,this.cup.hide(),this.onInteract.dispatch()},l.prototype.cheesedOff=function(){this.onCheesedOff.dispatch(this),this.patienceCounter=0,this.state===l.states.WAITING_FOR_ORDER||this.state===l.states.WAITING_FOR_BILL},l.prototype.billAndLeave=function(){this.patienceCounter+=this.checkBonus,this.patienceCounter>this.patience&&(this.patienceCounter=this.patience),this.leave()},l.prototype.leave=function(){this.bench?TweenLite.to(this.position,.3,{y:this.bench.position.y+100,onComplete:function(){this.gotoAndInteractWithObject(this.game.exitPoint)}.bind(this)}):this.gotoAndInteractWithObject(this.game.exitPoint),this.view.payMe.visible=!1,TweenLite.to(this.patienceView,.3,{alpha:0}),this.cup.visible=!1,this.state=l.states.LEAVING,this.bench&&this.bench.removeClient()},l.prototype.hit=function(a){var b=a.x-a.x2,c=a.y-a.y2,d=Math.sqrt(b*b+c*c);b/=d,c/=d,this.view.rotation=.1*Math.random(),this._velocity.x+=-2*b*2,this._velocity.y+=-2*c*2,this.isDead||(this._life-=20,this._life<0&&(this.isDead=!0,this.onDeaded.dispatch(this))),this.hitCount%5===0,this.hitCount>10&&(this.hitCount=0,this.game.debrisManager.addDebris(l.debrisFrames[7*Math.random()|0],this.position.x,this.position.y)),this.hitCount++},l.prototype.updateMovement=function(){{var a=this.path[this.pathIndex],b=a.centerX-this.position.x,c=a.centerY-this.position.y;Math.sqrt()}100>b*b+c*c?(this.pathIndex++,this.pathIndex===this.path.length&&(this.direction=4,this.path=null,this.position.x=a.centerX,this.position.y=a.centerY,this.targetObject&&this.interactWithObject(this.targetObject))):b>0?(this.position.x+=Math.min(this.speed.x*i.instance.deltaTime,Math.abs(b)),this.facingLeft=!1,this.direction=3):0>b?(this.position.x-=Math.min(this.speed.x*i.instance.deltaTime,Math.abs(b)),this.facingLeft=!0,this.direction=2):c>0?(this.position.y+=Math.min(this.speed.y*i.instance.deltaTime,Math.abs(c)),this.facingUp=!1,this.direction=1):0>c&&(this.position.y-=Math.min(this.speed.y*i.instance.deltaTime,Math.abs(c)),this.facingUp=!0,this.direction=0)},l.constructor=l,l.isActive=!0,l.states={WALKING_TO_TABLE:0,BROWSIG_MENU:1,WAITING_TO_GIVE_ORDER:2,WAITING_FOR_ORDER:3,EATING:4,WAITING_FOR_BILL:5,LEAVING:6},c.exports={client:l,states:l.states}}),define("com/duck/game/WaterPump",["require","exports","module","com/fido/game/GameObject","./DuckObject","./DuckObject"],function(a,b,c){var d=(a("com/fido/game/GameObject"),a("./DuckObject")),d=a("./DuckObject"),e=function(a,b){var c=new PIXI.Sprite.fromFrame("refill.png");c.anchor.set(.5,1),d.call(this,c),this.view.hitArea=new PIXI.Rectangle(-150,-300,300,300),this.view.depthOffset=-100,this.view.position.x=this.position.x=a,this.view.position.y=this.position.y=b,this.highLightArrow=new PIXI.Sprite.fromFrame("pointer.png"),this.highLightArrow.anchor.set(.5),this.view.addChild(this.highLightArrow),this.tick=0,this.lowlight()};e.prototype.setMode=function(a){this.view.setTexture(a?PIXI.Texture.fromFrame("refill_night.png"):PIXI.Texture.fromFrame("refill.png"))},e.prototype.highlight=function(){this.high=!0,this.highLightArrow.visible=!0},e.prototype.lowlight=function(){this.high=!1,this.highLightArrow.visible=!1},e.prototype.update=function(){this.high&&(this.tick++,this.highLightArrow.position.y=-180+25*Math.sin(.2*this.tick),this.highLightArrow.scale.x=.9+.1*Math.sin(.3*this.tick),this.highLightArrow.scale.y=.9+.1*Math.cos(.3*this.tick),this.highLightArrow.scale.x*=.75,this.highLightArrow.scale.y*=.75)},c.exports=e}),define("com/duck/game/donald/DonaldView",["require","exports","module","PIXI","com/fido/utils/Utils","com/fido/system/Ticker","libs/gl-matrix"],function(a,b,c){var d=a("PIXI"),e=(a("com/fido/utils/Utils"),a("com/fido/system/Ticker")),f=(a("libs/gl-matrix"),function(a){this.player=a,d.DisplayObjectContainer.call(this),this.duck=d.Sprite.fromFrame("dogwalk_front00.png"),this.duck.anchor.x=.5,this.duck.anchor.y=.75,this.addChild(this.duck),this.currentFrame=0,this.speed=1,this.speedIdle=.5,this.copies=[],this.copyIndex=0,this.motionBlur=!0,this.rageViewBg=new d.Sprite.fromFrame("patienceBar_BG.png"),this.rageViewBg.position.x=-20,this.rageViewBg.position.y=28,this.rageViewBar=new d.Sprite.fromFrame("patienceBar_Fill.png"),this.rageViewBar.position.x=-20,this.rageViewBar.position.y=32,this.rageFrame=new d.Sprite.fromFrame("patienceBar_Frame.png"),this.rageFrame.position.x=-24,this.rageFrame.position.y=27,this.rageView=new d.DisplayObjectContainer,this.rageView.addChild(this.rageViewBg),this.rageView.addChild(this.rageViewBar),this.rageView.addChild(this.rageFrame),this.addChild(this.rageView),this.rageView.y=-180;for(var b=0;5>b;b++)this.copies.push(new d.Point(300*Math.random(),300*Math.random()))});f.prototype=Object.create(d.DisplayObjectContainer.prototype),f.prototype.setModel=function(a){this.walkingAnimations=[a.walkUpFrames,a.walkDownFrames,a.walkLeftFrames,a.walkRightFrames,a.standing],this.electroAnimation=a.electrocuteFrames,this.angryFrames=a.angryFrames},f.prototype.setRage=function(a,b){this.rageViewBar.scale.x=a/b},f.prototype.update=function(){this.currentFrame+=e.instance.deltaTime*(4==this.player.direction?this.speedIdle:this.speed)*.5;var a=this.walkingAnimations[this.player.direction];this.player.electrocuting?a=this.electroAnimation:this.player.isNuts?(a=this.angryFrames,this.scale.x<0&&(this.scale.x*=-1)):this.scale.x*=2===this.player.direction?-1:1;var b=a[(0|this.currentFrame)%a.length];this.duck.setTexture(b)},f.directions={UP:0,DOWN:1,LEFT:2,RIGHT:3,NONE:4},c.exports=f}),define("com/duck/game/donald/DonaldModel",["require","exports","module","com/fido/utils/Utils"],function(a,b,c){var d=a("com/fido/utils/Utils"),e=function(){this.walkLeftFrames=d.getTexturesFromFramesWithPrefix("donald_right%%.png",20),this.walkRightFrames=d.getTexturesFromFramesWithPrefix("donald_right%%.png",20),this.walkUpFrames=d.getTexturesFromFramesWithPrefix("donald_back%%.png",20),this.walkDownFrames=d.getTexturesFromFramesWithPrefix("donald_front%%.png",20),this.standing=d.getTexturesFromFramesWithPrefix("donaldidle_front%%.png",10),this.electrocuteFrames=d.getTexturesFromFrames(["donald_electrocuted.png","donald_aftershock.png"]),this.angryFrames=d.getTexturesFromFramesWithPrefix("donaldshoot%%.png",10),this.speed=1.3};c.exports=e}),define("com/duck/game/donald/Barrel",["require","exports","module","PIXI"],function(a,b,c){var d=a("PIXI"),e=function(){d.DisplayObjectContainer.call(this),this.fillFrames=[d.Texture.fromFrame("donald_back00.png"),d.Texture.fromFrame("donald_back00.png"),d.Texture.fromFrame("donald_back00.png"),d.Texture.fromFrame("donald_back00.png")],this.tank=new d.Sprite.fromFrame("donald_back00.png"),this.tank.anchor.set(.5),this.isEmpty=!1,this.fills=4,this.totalFills=4};e.prototype=Object.create(d.DisplayObjectContainer.prototype),e.prototype.refill=function(a){this.isEmpty=!1,this.fills=a,this.totalFills=a;var b=this.fills/3*3|0;b>2&&(b=2),this.tank.setTexture(this.fillFrames[b])},e.prototype.update=function(){},e.prototype.fire=function(){if(0!==this.fills){this.fills--;var a=this.fills/3*3|0;a>2&&(a=2),this.tank.setTexture(this.fillFrames[a]),this.isEmpty=0===this.fills}},c.exports=e}),define("com/duck/game/donald/WaterSprayCanvas",["require","exports","module","PIXI","com/fido/game/GameObjectPool","com/fido/game/GameObject","./Collision","com/fido/physics/Line"],function(a,b,c){var d=a("PIXI"),e=(a("com/fido/game/GameObjectPool"),a("com/fido/game/GameObject"),a("./Collision"),a("com/fido/physics/Line"),function(){d.DisplayObjectContainer.call(this),this.start=new d.Point(0,0),this.end=new d.Point(0,300),this.targetEnd=new d.Point(0,300),this.control=new d.Point(0,0),this.mid=new d.Point(0,0),this.direction=new d.Point(0,0),this.spray=d.MovieClip.fromFrames(["watersquirt_01.png","watersquirt_02.png","watersquirt_03.png"]),this.spray.play(),this.spray.animationSpeed=.5,this.spray.anchor.x=.5,this.spray.alpha=.8,this.addChild(this.spray)});e.prototype=Object.create(d.DisplayObjectContainer.prototype),e.prototype.reset=function(){this.tick=0},e.prototype.updateTransform=function(){this.spray.x=this.start.x,this.spray.y=this.start.y;var a=this.targetEnd.x-this.start.x,b=this.targetEnd.y-this.start.y,c=Math.sqrt(a*a+b*b);a/=c,b/=c,this.spray.scale.x=1+.2*Math.random(),this.spray.height=c,this.spray.rotation=-Math.atan2(a,b),d.DisplayObjectContainer.prototype.updateTransform.call(this)},c.exports=e}),define("com/duck/game/donald/WaterGun",["require","exports","module","PIXI","com/fido/game/GameObjectPool","com/fido/game/GameObject","./Collision","com/fido/physics/Line","com/duck/game/donald/WaterSpray","com/duck/game/donald/WaterSprayCanvas","com/fido/sound/SoundManager","com/fido/system/Ticker"],function(a,b,c){var d=a("PIXI"),e=(a("com/fido/game/GameObjectPool"),a("com/fido/game/GameObject")),f=a("./Collision"),g=a("com/fido/physics/Line"),h=a("com/duck/game/donald/WaterSpray"),i=a("com/duck/game/donald/WaterSprayCanvas"),j=a("com/fido/sound/SoundManager"),k=a("com/fido/system/Ticker"),l=function(a){this.game=a,this.target3D=new d.Point,this.target2D=new d.Point,this.easeTarget=new d.Point,this.spawnRate=3,this.spawnCount=0,this.tick=0,this.floorHitCount=0,this.currentTarget=null,this.bounds=new d.Rectangle(0,0,1040,600),this.line={x0:0,y0:0,x1:100,y1:100},this.gunView=window.WEBGL?new h:new i,this.gunView.depthOffset=.85,this.game.world.view.addChild(this.gunView),this.splashView=d.MovieClip.fromFrames(["splash_01.png","splash_02.png"]),this.splashView.anchor.set(.5,.31),this.splashView.animationSpeed=.3,this.splashView.play(),this.splashView.pivot.x=2,this.splashView.pivot.y=-2,this.splashView.depthOffset=.87,this.game.world.view.addChild(this.splashView),this.floorFrames=[d.Texture.fromFrame("splash_floor.png")],this.hitFrames=[d.Texture.fromFrame("splash_full.png")],this.splashEnd=new d.MovieClip(this.floorFrames),this.splashEnd.play(),this.splashEnd.anchor.set(.5),this.splashEnd.animationSpeed=.3,this.splashEnd.depthOffset=.87,this.endMap=new e(d.MovieClip.fromFrames(["cup_small_full.png"])),this.endMap.view.anchor.set(.5,1),this.endMap.view.animationSpeed=.3,this.endMap.view.play(),this.game.world.view.addChild(this.splashEnd),this.isFiring=!1,this.power=0,this.testRect=new d.Rectangle,this.line3D=new g,this.line2D=new g,this.canFire=!1,this.count=0
};l.prototype.refill=function(){},l.debrisFrames=["stone.png","stone.png","stone.png","stone.png"],l.prototype.reset=function(){this.isFiring=!1,this.gunView.reset()},l.prototype.update=function(){this.endMap.position.x=this.target3D.x,this.endMap.position.y=this.target3D.y,this.isFiring&&this.canFire?(this.splashEnd.visible=this.splashView.visible=this.gunView.visible=!0,this.game.rain.mode=0,this.power+=.2,this.power>1&&(this.power=1),this.game.hud.rageTarget=1):(this.game.rain.mode=1,this.splashEnd.visible=this.splashView.visible=this.gunView.visible=!1,this.power-=.2,this.power<0&&(this.power=0),this.game.hud.rageTarget=0),this.count+=k.instance.deltaTime,this.splashEnd.scale.x=1+.1*Math.sin(.6*this.count),this.splashEnd.scale.y=1+.1*Math.cos(.6*this.count),this.splashEnd.rotation=.2*Math.sin(.4*this.count),j.sfx.setVolume("waterLoop",this.power),this.line3D.x=this.game.donald.position.x,this.line3D.y=this.game.donald.position.y,this.line3D.x2=this.target3D.x,this.line3D.y2=this.target3D.y;var a=this.game.movableObjects,b=[];if(this.isFiring){this.line2D.x=this.game.donald.view.position.x,this.line2D.y=this.game.donald.view.position.y,this.line2D.x2=this.target2D.x,this.line2D.y2=this.target2D.y;for(var c=0;c<a.length;c++){var d=a[c],e=d.view.width;0>e&&(e*=-1);var g=d.view.height;this.testRect.x=d.view.position.x-e/2,this.testRect.y=d.view.position.y-g,this.testRect.width=e,this.testRect.height=g;var h=f.lineAABB(this.line2D,this.testRect);h&&(d.impact=h,b.push(d))}if(b.length){for(var i=b[0],l=Number.MAX_VALUE,c=0;c<b.length;c++){var d=b[c],m=d.impact.x-this.line2D.x,n=d.impact.y-this.line2D.y,o=m*m+n*n;l>o&&(l=o,i=d)}i.hit(this.line3D),this.line2D.x2=i.impact.x,this.line2D.y2=i.impact.y,this.splashEnd.textures=this.hitFrames}else this.splashEnd.textures=this.floorFrames,this.floorHitCount++,this.floorHitCount>5&&(this.floorHitCount=0);this.target3D.x+=80,this.target3D.y-=70,this.game.world.floorTexture&&this.game.world.floorTexture.addDamage(this.target3D),this.target3D.y+=70,this.target3D.x-=80,this.splashEnd.position.x=this.line2D.x2,this.splashEnd.position.y=this.line2D.y2;{var m=this.line2D.x2-this.line2D.x,n=this.line2D.y2-this.line2D.y;Math.sqrt(m*m+n*n)}this.gunView.start.x=this.game.donald.view.position.x-40,this.gunView.start.y=this.game.donald.view.position.y-25,this.splashView.position.x=this.game.donald.view.position.x-40,this.splashView.position.y=this.game.donald.view.position.y-25,this.gunView.targetEnd.x=this.splashEnd.position.x,this.gunView.targetEnd.y=this.splashEnd.position.y,this.splashView.rotation=Math.atan2(n,m)-Math.PI/2-.19,this.splashView.scale.x=.8+.1*Math.cos(.6*this.count),this.splashView.scale.y=.8+.1*Math.sin(.6*this.count);var a=this.game.clientManager.activeClients}},c.exports=l}),define("com/duck/game/powerups/Pickup",["require","exports","module","signals","com/fido/game/GameObject","com/fido/system/Ticker","com/fido/physics/SimpleBouncer"],function(a,b,c){var d=a("signals"),e=a("com/fido/game/GameObject"),f=(a("com/fido/system/Ticker"),a("com/fido/physics/SimpleBouncer")),g=function(){var a=new PIXI.DisplayObjectContainer;e.call(this,a),this.timer=0,this.onDead=new d,this.onPickedup=new d,this.timelord=null,this.height=300,this.shadow=new PIXI.Sprite.fromFrame("shadow.png"),this.shadow.anchor.set(.5),this.shadow.y=20,a.addChild(this.shadow),this.sunburst=new PIXI.Sprite.fromFrame("sunburst.png"),this.sunburst.anchor.set(.5),this.sunburst.blendMode=PIXI.blendModes.ADD,a.addChild(this.sunburst),this.bouncer=new f,this.bouncer.bounce=.6};g.prototype.setType=function(a){this.powerup&&this.view.removeChild(this.powerup.icon),this.powerup=a,this.view.addChild(this.powerup.icon),this.powerup.icon.position.y=-1e5,this.view.position.x=this.position.x,this.view.position.y=this.position.y},g.prototype.reset=function(){this.bouncer.x=-300,this.update(),this.sunburst.scale.set(0),TweenLite.to(this.sunburst.scale,1.5,{x:1,y:1,delay:.5,ease:Elastic.easeOut})},g.prototype.update=function(){if(this.timer++,this.powerup){this.powerup.icon.position.y=this.bouncer.x,this.sunburst.position.y=this.powerup.icon.position.y,this.bouncer.update();var a=Math.abs(this.bouncer.dx)/10*.3;a>.3&&(a=.3),this.powerup.icon.scale.x+=.3*(1-a-this.powerup.icon.scale.x),this.powerup.icon.scale.y+=.3*(1+a-this.powerup.icon.scale.y),this.timer%100===0&&(this.bouncer.dx=-10)}var b=-this.bouncer.x;100>b?(this.shadow.alpha=1-b/100,this.shadow.scale.set(1-b/100)):this.shadow.scale.set(0),this.timer>=1e4&&this.onDead.dispatch(this),this.sunburst.rotation+=.05},g.prototype.activate=function(){this.onPickedup.dispatch(this)},c.exports=g}),define("com/duck/game/donald/Donald",["require","exports","module","com/fido/game/GameObject","./../clients/Client","signals","./../Bench","./../WaterPump","./../DuckObject","./DonaldView","./DonaldModel","com/fido/sound/SoundManager","./Barrel","./WaterGun","com/duck/game/powerups/Pickup"],function(a,b,c){var d=(a("com/fido/game/GameObject"),a("./../clients/Client")),e=a("signals"),f=a("./../Bench").bench,g=a("./../WaterPump"),h=a("./../DuckObject"),i=a("./DonaldView"),j=a("./DonaldModel"),k=a("com/fido/sound/SoundManager"),l=a("./Barrel"),m=a("./WaterGun"),n=a("com/duck/game/powerups/Pickup"),o=function(a){var b=new i(this);h.call(this,b,a),this.game=a,this.speed.x=7,this.speed.y=7,this.baseSpeed=new PIXI.Point(7),this.onInteract=new e,this.model=new j,this.combo=1,this.multiplyer=1,this.lastAction=9999,this.lastCount=0,this.barrel=new l,this.barrel.y=-70,this.view.addChildAt(this.barrel,0),this.waterGun=new m(a),this.electrocuting=!1,this.electroCount=0,this.isNuts=!1,this.view.rageView.visible=!1};o.prototype=Object.create(h.prototype),o.prototype.jump=function(){},o.prototype.goNuts=function(){this.isNuts=!0,this.waterGun.reset(),this.view.rageView.visible=!0},o.prototype.endNuts=function(){this.isNuts=!1,this.waterGun.isFiring=!1,this.view.rageView.visible=!1},o.prototype.gotoAndInteractWithObject=function(a){k.sfx.play("interact"),h.prototype.gotoAndInteractWithObject.call(this,a)},o.prototype.electrocute=function(){k.sfx.play("shock"),this.electrocuting=!0,this.electroCount=100,this.lastAction=9999},o.prototype.reset=function(a,b){this.isNuts=!1,this.electrocuting=!1,this.view.rageView.visible=!1,this.barrel.refill(4),this.game.hud.waterTank.setRatio(this.barrel.fills/4),this.waterGun.reset(),this.view.setModel(this.model),this.baseSpeed.set(7*this.model.speed),this.view.x=this.position.x=a,this.view.y=this.position.y=b,this.speed.set(this.baseSpeed.x),this.lastAction=9999,this.multiplyer=1,this.maxItems=2,this.direction=4,this.maxWaterLevel=1,this.waterLevel=3,this.superWater=!1},o.prototype.interactWithObject=function(a){if(a instanceof f){var b=a.client;b&&(b.state===d.states.WAITING_TO_GIVE_ORDER||(b.state===d.states.WAITING_FOR_ORDER?this.barrel.isEmpty?(k.sfx.play("refillMiss"),this.game.hud.showRefill()):(k.sfx.play("feed"),k.sfx.playGroup("dDrink"),Math.random()>.2&&k.sfx.playGroup("slurp"),this._currentClient=b,this.barrel.fire(),this.game.hud.waterTank.setRatio(this.barrel.fills/4),this.giveClientsOrder(this._currentClient),this.barrel.isEmpty&&(this.game.waterPump.highlight(),this.superWater=!1)):b.state===d.states.WAITING_FOR_BILL&&this.getClientsBill(b)))}else a instanceof g?this.game.showFill():a instanceof n&&a.activate();this.onInteract.dispatch(a)},o.prototype.fillComplete=function(a){this.superWater=!1,4===a?this.barrel.isEmpty&&(this.multiplyer+=1):this.lastAction=9999,this.barrel.refill(a),this.game.waterPump.lowlight(),this.game.hud.waterTank.refill(a/4)},o.prototype.giveClientsOrder=function(a){this.checkCombo(1,100),a.startEating()},o.prototype.getClientsBill=function(a){k.sfx.playGroup("bills"),k.sfx.playGroup("dGetPay"),a.billAndLeave(),this.checkCombo(0,100),this.game.particleManager.addParticle(a.view.x,a.view.y-50,0)},o.prototype.update=function(){this.electrocuting?(this.view.pivot.x=40*(Math.random()-.5),this.view.rotation=.1*(Math.random()-.5),this.electroCount<=0):this.path&&this.updateMovement(),this.game.hud.waterTank.sparkly=this.superWater,this.view.update()},o.prototype.checkCombo=function(a,b){this.lastAction===a?this.multiplyer+=1:this.multiplyer=this.superWater?2:1,this.lastAction=a,this.game.rage+=1,this.game.addToScore(b*this.multiplyer|0,this)},o.constructor=o,c.exports=o}),define("com/duck/game/clients/ClientModel",["require","exports","module","com/fido/utils/Utils"],function(a,b,c){var d=a("com/fido/utils/Utils"),e=function(){this.angrySound="angryBird",this.walkLeftFrames=d.getTexturesFromImages([ASSET_URL+"img/BusinessMan_Front.png"]),this.walkRightFrames=d.getTexturesFromImages([ASSET_URL+"img/BusinessMan_Front.png"]),this.walkUpFrames=d.getTexturesFromImages([ASSET_URL+"img/BusinessMan_Front.png"]),this.walkDownFrames=d.getTexturesFromImages([ASSET_URL+"img/BusinessMan_Front.png"]),this.angryFrames=d.getTexturesFromImages([ASSET_URL+"img/BusinessMan_Sat_Angry.png"]),this.normalFrames=d.getTexturesFromImages([ASSET_URL+"img/BusinessMan_Sat.png"]),this.happyFrames=d.getTexturesFromImages([ASSET_URL+"img/BusinessMan_Sat_Happy.png"]),this.superHappyFrames=d.getTexturesFromImages([ASSET_URL+"img/BusinessMan_Sat_SuperHappy.png"]),this.eatingFrames=d.getTexturesFromImages([ASSET_URL+"img/BusinessMan_Sat.png"]),this.thirstyOverlay=d.getTexturesFromFrames(["GuestChar_03_thirsty.png"]),this.patience=2300,this.sitPosition=100};c.exports=e}),define("com/duck/game/clients/AngryCloud",["require","exports","module","com/fido/game/GameObject","./ClientView","./Cup","../Bench","signals","com/fido/system/Ticker","../DuckObject","com/fido/sound/SoundManager","com/fido/physics/PendulumConstraint","com/fido/utils/Utils"],function(a,b,c){var d=(a("com/fido/game/GameObject"),a("./ClientView"),a("./Cup"),a("../Bench").bench,a("signals")),e=(a("com/fido/system/Ticker"),a("../DuckObject")),f=a("com/fido/sound/SoundManager"),g=(a("com/fido/physics/PendulumConstraint"),a("com/fido/utils/Utils")),h=function(a){var b=g.getTexturesFromFrames(["cloud_angry.png","cloud_strike.png"]),c=new PIXI.MovieClip(b);c.loop=!0,c.animationSpeed=.1,c.depthOffset=150,c.anchor.set(.5,0),e.call(this,c),this.onComlpete=new d,this.game=a,this.angryCamera={x:0,y:0,z:200,viewy:100,rotation:-.5,fakeZoom:1.2}};h.prototype=Object.create(e.prototype),h.prototype.attack=function(a,b){b=this.game.donald,b.stop(),this.game.lock(!0),this.position.x=a.position.x,this.position.y=a.position.y,this.view.pivot.y=260,this.game.setCamera(this.angryCamera),this.view.scaleOffset=0,f.sfx.play("cloud"),TweenLite.to(this.view,.5,{scaleOffset:1,ease:Back.easeOut,onComplete:function(){TweenLite.to(this.position,1.2,{x:b.position.x,y:b.position.y,delay:.5,ease:Back.easeInOut,onComplete:function(){f.sfx.play("zap"),this.view.play(),b.electrocute(),this.game.takeLife(),TweenLite.delayedCall(2,function(){this.view.gotoAndStop(0),b.electrocuting=!1,this.game.lock(!1),this.game.setCamera(this.game.cameraPositionDefault),this.game.clientManager.releaseAll(),0===this.game.lives&&this.game.hud.showAngryScene(),TweenLite.to(this.view.pivot,.3,{y:600,ease:Back.easeIn,onComplete:function(){this.game.world.remove(this)}.bind(this)})}.bind(this))}.bind(this)})}.bind(this)})},h.prototype.update=function(){var a=520,b=280;this.angryCamera.x=a+.5*(this.position.x-a),this.angryCamera.y=b+.5*(this.position.y-b)},c.exports=h}),define("com/duck/game/clients/NutsSpawner",["require","exports","module","com/fido/game/GameObjectPool","./Client","./ClientModel","com/fido/system/Ticker","signals","./AngryCloud","com/fido/utils/Math2"],function(a,b,c){var d=(a("com/fido/game/GameObjectPool"),a("./Client").client,a("./ClientModel"),a("com/fido/system/Ticker"),a("signals"),a("./AngryCloud"),a("com/fido/utils/Math2")),e=function(a){this.game=a,this.count=0,this.countFlip=0,this.startHeight=0,this.leftStart=0,this.rightStart=2,this.leftId=4*Math.random()|0,this.rightId=4*Math.random()|0,this.sparyThickness=40,this.fireLeft=!1,this.fireRight=!1,this.delay=0,this.updateFunc=null,this.setSprayMode()};e.constructor=e,e.prototype.reset=function(){this.nextMode(),this.delay=3e4},e.prototype.update=function(){this.delay>30&&this.updateFunc(),this.delay++},e.prototype.setLineMode=function(){this.count=0,this.countFlip=0,this.startHeight=0,this.leftStart=d.randomInt(0,3),this.rightStart=d.randomInt(0,3),this.leftId=4*Math.random()|0,this.rightId=4*Math.random()|0,this.updateFunc=this.updateLineMode},e.prototype.updateLineMode=function(){this.count++,this.count>30&&(this.count=0,this.countFlip++,this.fireLeft&&this.sendIn(this.leftId,-1,this.leftStart+4),this.fireRight&&this.sendIn(this.rightId,15,this.rightStart+4),this.countFlip>5&&this.nextMode())},e.prototype.setSprayMode=function(){this.count=0,this.countFlip=0,this.startHeight=0,this.leftStart=d.randomInt(0,3),this.rightStart=d.randomInt(0,3),this.sparyThickness=d.randomInt(20,50),this.leftId=4*Math.random()|0,this.rightId=4*Math.random()|0,this.updateFunc=this.updateSprayMode},e.prototype.updateSprayMode=function(){this.count++,this.count>this.sparyThickness&&(this.count=0,this.countFlip++,this.fireLeft&&this.sendIn(this.leftId,-1,d.randomInt(0,3)+4),this.fireRight&&this.sendIn(this.rightId,15,d.randomInt(0,3)+4),this.countFlip>5&&this.nextMode())},e.prototype.nextMode=function(){var a=Math.random();a>.6?(this.fireRight=!0,this.fireLeft=!0):a>.3?(this.fireRight=!0,this.fireLeft=!1):(this.fireRight=!1,this.fireLeft=!0),d.randomChance?this.setSprayMode():this.setLineMode()},e.prototype.sendIn=function(a,b,c){var d=this.game.clientManager;this.count=0;var e=d.pool.getObject();this.currentIdTick++,this.currentIdTick>=5&&(this.currentIdTick=0,this.currentId++),this.currentId=0,e.reset(d.models[a%d.models.length].instance),e.hypno=this.hypno,e.multiplyer=1,e.onLeave.addOnce(d.onClientLeave,d),e.onScore.add(d.onClientScore,d),e.onDeaded.add(d.onClientDead,d),d.activeClients.push(e),e.game=this.game,e.nutsMode=!0,e.isIn=!1;d.startingPoints[0];return e._target.x=this.game.donald.position.x,e._target.y=this.game.donald.position.y,b>5?e._direction.set(-1,0):e._direction.set(1,0),e.view.x=e.position.x=80*b,e.view.y=e.position.y=80*c,this.game.setGoNutsModeToObject(e),this.game.world.add(e),d.onSpawnClient.dispatch(e),e},c.exports=e}),define("com/duck/game/clients/ClientManager",["require","exports","module","com/fido/game/GameObjectPool","./Client","./ClientModel","com/fido/system/Ticker","signals","./AngryCloud","./NutsSpawner"],function(a,b,c){var d=a("com/fido/game/GameObjectPool"),e=a("./Client").client,f=(a("./ClientModel"),a("com/fido/system/Ticker")),g=a("signals"),h=a("./AngryCloud"),i=a("./NutsSpawner"),j=function(a){this.game=a,this.count=100,this.pool=new d(e),this.nutsSpawner=new i(a),this.combo=1,this.combo=1,this.lastId=99999,this.startingPoints=[new PIXI.Point(11,0)],this.activeClients=[],this.spawnRate=640,this.maxClients=2,this.multiplyer=1,this.multiplyierIncrease=1.01,this.models=[],this.onSpawnClient=new g,this.isNuts=!1,this.angryCloud=new h(a),this.locked=!1,this.tick=0,this.tickCount=0,this.flowChart=[1,1,.5,.75,1,1,.75,1,1.5],this.realMaxClients=this.maxClients,this.currentId=0,this.currentIdTick=0};j.constructor=j,j.prototype.update=function(){this.paused||(this.count+=f.instance.deltaTime,this.tickCount+=f.instance.deltaTime/f.instance.speed,this.tickCount>1200&&(this.tickCount=0,this.maxClients>4?(this.tick++,this.realMaxClients=this.maxClients*this.flowChart[this.tick%this.flowChart.length]):this.realMaxClients=this.maxClients),this.isNuts?this.nutsSpawner.update():this.count>this.spawnRate&&this.activeClients.length<this.realMaxClients&&this.sendInClient())},j.prototype.lock=function(a){this.locked!==a&&(this.locked=a,e.isActive=this.locked?!1:!0)},j.prototype.reset=function(a){this.multiplyer=1,this.nutsSpawner.reset(),this.models=a.clients,this.multiplyierIncrease=a.multiplyierIncrease,this.maxClients=a.maxClientStart,this.realMaxClients=this.maxClients,this.spawnRate=a.clientSpawnRate;for(var b=this.activeClients.length-1;b>=0;b--){var c=this.activeClients[b];c.onLeave.removeAll(),c.onCheesedOff.removeAll(),c.onScore.removeAll(),this.game.world.remove(c),this.pool.returnObject(c)}this.isNuts=!1,this.paused=!1,this.activeClients=[],this.tick=0,this.tickCount=0,this.hypno=!1,this.type=0},j.prototype.sendInClient=function(a){this.multiplyer*=this.multiplyierIncrease,this.count=0;var b=this.pool.getObject();b.reset(this.models[Math.random()*this.models.length|0].instance),b.isIn=!0,b.hypno=this.hypno,b.multiplyer=this.multiplyer,b.onLeave.addOnce(this.onClientLeave,this),b.onCheesedOff.addOnce(this.onClientCheesedOff,this),b.onScore.add(this.onClientScore,this),b.onDeaded.add(this.onClientDead,this),this.activeClients.push(b),b.game=this.game,b.nutsMode=this.isNuts;var c=this.startingPoints[0];Math.random()>.5?(c.x=0,c.y=4+3*Math.random()|0):(c.x=12,c.y=4+3*Math.random()|0),b.startPoint=c,b.view.x=b.position.x=80*c.x,b.view.y=b.position.y=80*c.y;var d=this.game.benchs,e=Math.random()*d.length|0;e=a||e;for(var f,g=d.length-1;g>=0&&(f=d[(g+e)%d.length],f.hasClient);g--)f=null;return f?(f.hasClient=!0,b.bench=f,b.gotoAndInteractWithObject(f,!0),this.game.world.add(b),this.onSpawnClient.dispatch(b),b):void 0},j.prototype.sendInClientNuts=function(){this.multiplyer*=this.multiplyierIncrease,this.count=0;var a=this.pool.getObject();this.currentIdTick++,this.currentIdTick>=5&&(this.currentIdTick=0,this.currentId++),a.reset(this.models[this.currentId%this.models.length].instance),a.hypno=this.hypno,a.multiplyer=this.multiplyer,a.onLeave.addOnce(this.onClientLeave,this),a.onScore.add(this.onClientScore,this),a.onDeaded.add(this.onClientDead,this),this.activeClients.push(a),a.game=this.game,a.nutsMode=this.isNuts;var b=this.startingPoints[0];return a._target.x=this.game.donald.position.x,a._target.y=this.game.donald.position.y,Math.random()>.5?(b.x=0,b.y=4+3*Math.random()|0,a._direction.set(1,0)):(b.x=12,b.y=4+3*Math.random()|0,a._direction.set(-1,0)),a.view.x=a.position.x=80*b.x,a.view.y=a.position.y=80*b.y,this.game.setGoNutsModeToObject(a),this.game.world.add(a),this.onSpawnClient.dispatch(a),a},j.prototype.goNuts=function(){this.nutsSpawner.reset(),this.isNuts=!0;for(var a=0;a<this.activeClients.length;a++)this.activeClients[a].goNuts()},j.prototype.releaseAll=function(){for(var a=0;a<this.activeClients.length;a++){var b=this.activeClients[a];b&&b.leave()}},j.prototype.endNuts=function(){this.isNuts=!1},j.prototype.pause=function(){this.paused=!0},j.prototype.resume=function(){this.paused=!1,this.count=1e8},j.prototype.removeClient=function(a){var b=this.activeClients.indexOf(a);-1!=b&&(this.activeClients.splice(b,1),this.game.world.remove(a),a.onScore.remove(this.onClientScore,this),a.onDeaded.remove(this.onClientDead,this),this.pool.returnObject(a))},j.prototype.onClientLeave=function(a){this.maxClients+=.5,this.removeClient(a);var b=this.game.movableObjects.indexOf(a);-1!==b&&this.game.movableObjects.splice(b,1)},j.prototype.onClientDead=function(a){this.lastId===a.id?this.combo++:(this.combo=1,this.lastId=a.id),a.multiplyer=this.combo,this.game.score+=100*this.combo,this.game.hud.updateScore(100,a)},j.prototype.onClientScore=function(a){this.game.score+=a.patienceCounter/10|0,this.game.hud.updateScore()},j.prototype.onClientCheesedOff=function(a){this.game.world.add(this.angryCloud),this.angryCloud.attack(a)},c.exports=j}),define("com/duck/game/ExitPoint",["require","exports","module","com/fido/game/GameObject","./DuckObject"],function(a,b,c){var d=(a("com/fido/game/GameObject"),a("./DuckObject")),e=function(a,b){var c=(new PIXI.Graphics).beginFill(0).drawRect(-24,-34,48,48).endFill();d.call(this,c),this.view.position.x=this.position.x=a,this.view.position.y=this.position.y=b};c.exports=e}),define("com/fido/effects/Sparkle",["require","exports","module","PIXI","com/fido/system/Ticker","com/fido/utils/Math2"],function(a,b,c){var d=a("PIXI"),e=a("com/fido/system/Ticker"),f=a("com/fido/utils/Math2"),g=function(a,b,c){d.DisplayObjectContainer.call(this),this.total=c||5,this.sparkles=[],this.sparkleDimension=b||new d.Rectangle(-50,-100,100,200);for(var e=0;e<this.total;e++){var f=d.Sprite.fromFrame(a||"sparkle.png");f.anchor.set(.5),f.life=0,f.life=e/this.total*100,this.addChild(f)}};g.prototype=Object.create(d.DisplayObjectContainer.prototype),g.prototype.updateTransform=function(){if(this.visible){for(var a=this.children,b=a.length-1;b>=0;b--){var c=a[b];c.life-=3*e.instance.deltaTime,c.rotation+=.1*e.instance.deltaTime,c.scale.set(Math.sin(c.life/100*Math.PI)),c.life<0&&(c.life=100,c.x=f.random(this.sparkleDimension.x,this.sparkleDimension.x+this.sparkleDimension.width),c.y=f.random(this.sparkleDimension.y,this.sparkleDimension.y+this.sparkleDimension.height))}d.DisplayObjectContainer.prototype.updateTransform.call(this)}},c.exports=g}),define("com/duck/game/fillgame/FillGame",["require","exports","module","PIXI","com/fido/system/Ticker","com/fido/Flash","signals","com/fido/loader/Cache","com/fido/effects/Sparkle","com/fido/sound/SoundManager","com/duck/app/Tracker"],function(a,b,c){var d=a("PIXI"),e=a("com/fido/system/Ticker"),f=a("com/fido/Flash"),g=a("signals"),h=a("com/fido/loader/Cache"),i=a("com/fido/effects/Sparkle"),j=a("com/fido/sound/SoundManager"),k=a("com/duck/app/Tracker"),l=function(){d.DisplayObjectContainer.call(this),this.gauge=new d.Sprite.fromFrame("refill_gauge.png"),this.needle_curve=new d.Sprite.fromFrame("refill_arrow.png"),this.format={align:"center",font:"bold 200px "+window.HEADER_FONT,fill:"#f3f3eb",dropShadow:!0,dropShadowDistance:20,dropShadowColor:"rgba(0, 0, 0, 0.5",stroke:"#c9050b",strokeThickness:20},this.gauge.addChild(this.needle_curve),this.gauge.anchor.set(.5),this.needle_curve.anchor.set(.5,1);var a=220;this.offset=1,this.needle_curve.pivot.y=a,this.needle_curve.position.y=a+22;var b=(new d.Graphics).beginFill(16711680).drawCircle(0,0,10);b.y=a,this.overlay=(new d.Graphics).beginFill(0,.1).drawRect(0,0,100,100),this.overlay.alpha=0,this.container=new d.DisplayObjectContainer,this.container.pivot.y=-40,this.addChild(this.container),this.bar=(new d.Graphics).beginFill(16711680).drawRect(0,0,200,40),this.hotSpot=(new d.Graphics).beginFill(16776960,.5).drawRect(0,0,40,40),this.perfectSpot=(new d.Graphics).beginFill(16777215,.8).drawRect(0,0,6,40),this.hotSpot.x=80,this.perfectSpot.x=80,this.needle=(new d.Graphics).beginFill(16777215).drawRect(0,0,2,40),this.active=!1,this.counter=0,this.hitArea=new d.Rectangle(0,0,200,200),this.interactive=!0,this.buttonMode=!0,this.stopped=!1,this.mousedown=this.touchstart=this.onPress.bind(this),this.onComplete=new g,this.visible=!1,this.w=0,this.h=0,this.tick=0,this.flash=new f,this.addChild(this.flash),this.perfect=new d.Text("PERFECT!",this.format),this.perfect.anchor.set(.5),this.perfect.visible=!1,this.addChild(this.perfect);var c=h.getJson("translation");this.help=new d.Text(c.strings.STR_TUTORIAL_REFILL_TANK,{font:"bold 26px "+window.HEADER_FONT,fill:"#000000"}),this.help.anchor.set(.5),this.resize(1e3,800),this.onHiddenBound=this.onHidden.bind(this),this.highLightArrowTop=new d.Sprite.fromFrame("icon_play.png"),this.highLightArrowTop.anchor.set(.5),this.highLightArrowTop.rotation=Math.PI/2,this.highLightArrowBottom=new d.Sprite.fromFrame("icon_play.png"),this.highLightArrowBottom.anchor.set(.5),this.highLightArrowBottom.rotation=-Math.PI/2,this.highLightArrowTop.scale.set(.1),this.highLightArrowBottom.scale.set(.1),this.container.addChild(this.highLightArrowBottom),this.container.addChild(this.highLightArrowTop),this.container.addChild(this.gauge),this.highLightArrowBottom.x=this.highLightArrowTop.x=83,this.sparkles=new i(null,new d.Rectangle(-400,-100,800,200)),this.perfect.addChild(this.sparkles)};l.prototype=Object.create(d.DisplayObjectContainer.prototype),l.prototype.onPress=function(){var a=3,b=h.getJson("translation");this.sparkles.visible=!1,this.ratio<.69?(this.format.stroke="#6d7075",this.perfect.setText(b.strings.STR_REFILL_FAIL),j.sfx.play("refillMiss"),a=0):this.ratio<.85?(a=4,this.sparkles.visible=!0,this.format.stroke="#ffb701",this.perfect.setText(b.strings.STR_REFILL_PERFECT),j.sfx.play("refillPerfect"),k.trackAction("guage_1","game",window.level)):this.ratio<1.085?(this.format.stroke="#95afc0",this.perfect.setText(b.strings.STR_REFILL_GREAT),a=3,j.sfx.play("refillOk"),k.trackAction("guage_2","game",window.level)):(this.format.stroke="#995f00",this.perfect.setText(b.strings.STR_REFILL_OK),j.sfx.play("refillMeh"),a=2,k.trackAction("guage_3","game",window.level)),this.perfect.visible=!0,this.perfect.alpha=0,TweenLite.to(this.perfect,.2,{alpha:1,ease:Sine.easeOut}),TweenLite.to(this.perfect,.4,{rotation:.2*(Math.random()-.5),ease:Bounce.easeOut,overwrite:!1});var c=960/(this.perfect.width/this.perfect.scale.x);c>1&&(c=1),this.perfect.scale.set(.4*c,1.4*c),TweenLite.to(this.perfect.scale,.6,{x:1*c,y:1*c,ease:Elastic.easeOut}),this.flash.flash(.1),0!==a?(e.instance.speed=this.cacheSpeed,this.removeChild(this.help),this.stopped=!0,this.onComplete.dispatch(a)):TweenLite.to(this.perfect,.2,{alpha:0,ease:Sine.easeOut,overwrite:!1,delay:.4})},l.prototype.complete=function(){},l.prototype.show=function(){this.visible&&(TweenLite.killTweensOf(this.perfect),TweenLite.killTweensOf(this.perfect.position)),this.active||(this.active=!0,this.cacheSpeed=e.instance.speed,e.instance.speed>1.5&&(e.instance.speed=1.5),j.sfx.play("swingBar"),this.alpha=1,this.perfect.visible=!1,this.stopped=!1,this.visible=!0,this.container.y=-100,this.overlay.alpha=0,this.perfect.y=this.h/2-140,TweenLite.to(this.overlay,.3,{alpha:1,ease:Sine.easeIn}),TweenLite.to(this.container.position,.6,{y:this.h/2-140,ease:Elastic.easeOut}),this.counter=0,e.instance.add(this.update,this),this.interactive=!0)},l.prototype.hide=function(){this.active&&(this.active=!1,e.instance.remove(this.update,this),TweenLite.to(this.container.position,.3,{y:this.h+80,ease:Back.easeIn}),TweenLite.to(this.perfect.position,.7,{y:this.perfect.position.y+50,ease:Sine.easeIn}),TweenLite.to(this.perfect,.2,{alpha:0,ease:Sine.easeOut,delay:.6,onComplete:this.onHiddenBound}),this.interactive=!1)},l.prototype.onHidden=function(){this.visible=!1},l.prototype.update=function(){if(!this.stopped){this.counter+=e.instance.deltaTime,this.counter>100&&(this.counter=0);var a=(this.counter+20)/100,b=a*a*a,c=b;this.needle.x=200*c,this.needle.visible=this.needle.x<200,this.ratio=c,this.tick++,this.highLightArrowBottom.position.y=45+-2*Math.sin(.2*this.tick),this.highLightArrowTop.position.y=-5+2*Math.sin(.2*this.tick),this.highLightArrowTop.scale.x=this.highLightArrowBottom.scale.x=.9+.1*Math.sin(.3*this.tick),this.highLightArrowTop.scale.y=this.highLightArrowBottom.scale.y=.9+.1*Math.cos(.3*this.tick),this.highLightArrowBottom.scale.x*=.1,this.highLightArrowBottom.scale.y*=.1,this.highLightArrowTop.scale.x*=.1,this.highLightArrowTop.scale.y*=.1,this.needle_curve.rotation=1.14*c-this.offset}},l.prototype.resize=function(a,b){this.w=a,this.h=b,this.perfect.x=a/2,this.perfect.y=b/2-140,this.flash.resize(a,b),this.overlay.scale.x=a/100,this.overlay.scale.y=b/100,this.hitArea.width=a,this.hitArea.height=b,this.container.x=a/2,this.container.y=b/2-140,this.help.x=a/2,this.help.y=b/2+120},c.exports=l}),define("com/duck/game/BenchProxy",["require","exports","module","com/duck/game/DuckObject","com/fido/physics/SimpleBouncer","com/fido/loader/Cache"],function(a,b,c){var d=a("com/duck/game/DuckObject"),e=a("com/fido/physics/SimpleBouncer"),f=a("com/fido/loader/Cache"),g=function(a,b,c){var f=new PIXI.DisplayObjectContainer;this.benchSprite=PIXI.Sprite.fromFrame("waitingarea_persp.png"),f.addChild(this.benchSprite),this.benchSprite.scale.x=c,this.benchSprite.anchor.x=.5,this.benchSprite.anchor.y=1,this.multiplyer=1;var g=this.benchSprite.texture.frame;this.hitArea=new PIXI.Rectangle(-g.width/2,-g.height,g.width,g.height),f.depthOffset=-100,d.call(this,f),this.speed=0,this.width=162,this.height=126,this.hitCount=0,this.frames=[PIXI.Texture.fromFrame("WaitingArea_d2.png"),PIXI.Texture.fromFrame("WaitingArea_d1.png"),PIXI.Texture.fromFrame("WaitingArea_persp.png")],this.bounce=new e,this.bounce.bounce=.6,this.bounce.gravity=2};g.prototype=Object.create(d.prototype),g.debrisFrames=["WaitingArea_chunk1.png","WaitingArea_chunk2.png","WaitingArea_chunk3.png","WaitingArea_chunk4.png"],g.prototype.update=function(){this._velocity.x*=.5,this._velocity.y*=.5;var a=Math.sqrt(this._velocity.x*this._velocity.x+this._velocity.y*this._velocity.y);a>this._maxSpeed&&(this._velocity.x=this._velocity.x/a*this._maxSpeed,this._velocity.y=this._velocity.y/a*this._maxSpeed),this.position.x+=this._velocity.x,this.position.y+=this._velocity.y,this.position.x<this.bounds.x||this.position.x>this.bounds.x+this.bounds.width||this.position.y<this.bounds.y||this.position.y>this.bounds.y+this.bounds.height;var b=this.bounce.update();b&&(this.benchSprite.rotation=0),this.benchSprite.pivot.y=-this.bounce.x},g.prototype.stomp=function(){this.bounce.dx=-(25+10*Math.random()),this.benchSprite.rotation=2*(Math.random()-.5)*.1},g.prototype.reset=function(){this.hitCount=0,this._life<0?(this.bounce.x=-800,this.benchSprite.rotation=2*(Math.random()-.5)*.1,this.benchSprite.pivot.x=0,this.benchSprite.pivot.y=1e3,this.benchSprite.setTexture(this.frames[2])):(this.benchSprite.rotation=0,this.benchSprite.pivot.x=0,this.benchSprite.pivot.y=0),TweenLite.to(this.position,.3,{ease:Sine.easeInOut,x:this.home.x,y:this.home.y}),this._life=100},g.prototype.hit=function(a){var b=a.x-a.x2,c=a.y-a.y2,d=Math.sqrt(b*b+c*c);if(b/=d,c/=d,this.benchSprite.rotation=.1*Math.random(),this.benchSprite.pivot.x=15*(Math.random()-.5),this._velocity.x+=-1*b,this._velocity.y+=-1*c,this._life-=1.5,this._life<30?this.benchSprite.setTexture(this.frames[0]):this._life<70&&this.benchSprite.setTexture(this.frames[1]),this.hitCount>10&&(this.hitCount=0,this.debrisManager.game.addToScore(10,this),this.debrisManager.addDebris(g.debrisFrames[4*Math.random()|0],this.position.x,this.position.y)),this.hitCount++,this._life<0){for(var e=window.WEBGL?10:5,h=0;e>h;h++)this.debrisManager.addDebris(g.debrisFrames[4*Math.random()|0],this.position.x,this.position.y);var i=f.getJson("translation");this.debrisManager.game.hud.showMessage(i.strings.STR_BENCH_BONUS),this.debrisManager.game.addToScore(1e3,this),this.onDead.dispatch(this)}},c.exports=g}),define("com/duck/game/ParticleManager",["require","exports","module","com/fido/game/GameObject","./DuckObject"],function(a,b,c){var d=(a("com/fido/game/GameObject"),a("./DuckObject"),function(a){this.game=a});d.prototype.addParticle=function(a,b){var c=PIXI.Sprite.fromFrame("splash_full.png");c.x=a,c.y=b,game.view.addChild(c)},d.prototype.update=function(){},c.exports=d}),define("com/duck/game/DebrisManager",["require","exports","module","com/fido/game/GameObject","./DuckObject","com/fido/game/GameObjectPool","signals"],function(a,b,c){var d=(a("com/fido/game/GameObject"),a("./DuckObject")),e=(a("com/fido/game/GameObjectPool"),a("signals")),f=function(a){this.game=a,this.debris=[],this.count=0};f.prototype.addDebris=function(a,b,c){var d=new Debris;d.view.setTexture(PIXI.Texture.fromFrame(a)),d.position.x=b,d.position.y=c,d.onDead.addOnce(this.onDebrisLeave,this),this.game.movableObjects.push(d),this.game.world.add(d),this.debris.push(d)},f.prototype.onDebrisLeave=function(a){var b=this.game.movableObjects.indexOf(a);this.game.movableObjects.splice(b,1),this.game.world.remove(a)},f.prototype.reset=function(){for(var a=this.game.movableObjects.splice(0),b=0;b<a.length;b++){var c=a[b];this.onDebrisLeave(c)}},f.prototype.update=function(){this.count++,this.count>100&&(this.count=0)},Debris=function(){var a=PIXI.Sprite.fromFrame("WaitingArea_chunk2.png");a.anchor.set(.5,1),d.call(this,a),this.onLeave=new e,this._direction=new PIXI.Point(0,1),this._velocity.z=12,this._velocity.x=10*(Math.random()-.5),this._velocity.y=10*(Math.random()-.5),this.rotSpeed=.1*(Math.random()-.5)},Debris.prototype=Object.create(d.prototype),Debris.prototype.hit=function(a){var b=a.x-a.x2,c=a.y-a.y2,d=Math.sqrt(b*b+c*c);
b/=d,c/=d,this.view.rotation+=.1,this.view.pivot.x=15*(Math.random()-.5),this._velocity.x+=2*b,this._velocity.y+=2*c,this._life--,this._life<0},Debris.prototype.update=function(){this.position.x-=this._velocity.x,this.position.y-=this._velocity.y,this.position.z-=this._velocity.z,this._velocity.z-=.5,this._velocity.x*=.99,this._velocity.y*=.99,this.position.z>0&&(this._velocity.z*=-.5,this.position.z=0),(this.position.x<this.bounds.x||this.position.x>this.bounds.x+this.bounds.width||this.position.y<this.bounds.y||this.position.y>this.bounds.y+this.bounds.height)&&this.onDead.dispatch(this)},c.exports=f}),define("com/duck/game/powerups/Powerup",["require","exports","module","signals","com/fido/system/Ticker","com/fido/utils/Utils"],function(a,b,c){var d=a("signals"),e=a("com/fido/system/Ticker"),f=(a("com/fido/utils/Utils"),function(a){this.name="A Powerup",this.copy="POWER UP COPY",this.instant=!1,this.timer=0,this.duration=1e3,this.onFinish=new d,this.icon=a});f.prototype.activate=function(a){this.game=a,this.timer=this.duration},f.prototype.update=function(){this.timer-=e.instance.deltaTime,this.timer<0&&(this.deactivate(),this.onFinish.dispatch(this))},f.prototype.deactivate=function(){},c.exports=f}),define("com/duck/game/powerups/SpeedBoost",["require","exports","module","./Powerup","signals","com/fido/utils/Utils"],function(a,b,c){var d=a("./Powerup"),e=(a("signals"),a("com/fido/utils/Utils"),function(){var a=PIXI.Sprite.fromFrame("powerup_06.png");a.anchor.set(.5),d.call(this,a),this.instant=!1,this.duration=1e3,this.id="spe",this.name="Speed boost",this.copy="Feel the need for speed!\n\nPut this helmet on and for a short while move at twice your normal speed."});e.prototype=Object.create(d.prototype),e.prototype.activate=function(a){d.prototype.activate.call(this,a),a.donald.view.motionBlur=!0,a.donald.speed.set(2*a.donald.baseSpeed.x)},e.prototype.update=function(){d.prototype.update.call(this)},e.prototype.deactivate=function(){this.game.donald.view.motionBlur=!1,this.game.donald.speed.set(this.game.donald.baseSpeed.x)},c.exports=e}),define("com/duck/game/powerups/CrowdClearer",["require","exports","module","./Powerup","signals","com/fido/game/GameObject","com/fido/physics/SimpleBouncer","com/fido/loader/Cache","com/fido/system/Ticker","com/fido/sound/SoundManager"],function(a,b,c){var d=a("./Powerup"),e=(a("signals"),a("com/fido/game/GameObject")),f=a("com/fido/physics/SimpleBouncer"),g=a("com/fido/loader/Cache"),h=a("com/fido/system/Ticker"),i=a("com/fido/sound/SoundManager"),j=function(){var a=PIXI.Sprite.fromFrame("powerup_05.png");a.anchor.set(.5),d.call(this,a),this.duration=300,this.id="shark",this.title=g.getJson("translation").strings.STR_SHARK,this.name=this.title,this.copy=g.getJson("translation").strings.STR_SHARK_DESCRIPTION;var b=PIXI.Sprite.fromImage("img/game/shark.png");b.anchor.set(.5,1),b.scaleOffset=1.5,this.bouncer=new f,this.bouncer.gravity=.4,this.bouncer.bounce=.3,this.speedx=0;var c=25.95;points=[];for(var h=0;20>h;h++){points.push(new PIXI.Point(h*c-259.5,20*Math.sin(h)))}this.points=points,this.webGL=window.WEBGL,this.webGL?(this.trueShark=new PIXI.Rope(PIXI.Texture.fromImage(ASSET_URL+"img/game/shark.png"),points),this.update=this.updateWebGL,this.trueShark.scaleOffset=2):(this.trueShark=new PIXI.Sprite(PIXI.Texture.fromImage(ASSET_URL+"img/game/shark.png")),this.trueShark.scaleOffset=2),this.count=0,this.count2=0,this.shark=new e(this.trueShark)};j.prototype=Object.create(d.prototype),j.prototype.activate=function(a){d.prototype.activate.call(this,a),this.shark.position.y=400,this.shark.position.x=-300,this.bouncer.x=-100,a.world.add(this.shark),this.first=!0,a.addToScore(200,a.donald),a.hud.rageing=!0,a.clientManager.goNuts(),a.clientManager.nutsSpawner.delay=-1e4},j.prototype.updateWebGL=function(){var a=this.points;this.count2+=.2;for(var b=25.95,c=0;20>c;c++){var d=a[c],e=c/(b-1);d.y=30*Math.sin(e*Math.PI*2+this.count2)}if(this.bouncer.update(),this.shark.position.x+=5*h.instance.deltaTime,this.shark.view.pivot.y=140+Math.sin(this.count2)-30,this.first&&0===this.bouncer.x){this.first=!1;for(var f=this.game.clientManager.activeClients,c=0;c<f.length;c++){f[c]}}this.game.hud.rageTarget=1,this.count--,this.count<=0&&(i.sfx.play("sharkSlap"),this.game.stomp(),this.count=30),this.shark.position.x>1500&&(this.deactivate(),this.onFinish.dispatch(this))},j.prototype.update=function(){if(this.bouncer.update(),this.shark.position.x+=10*h.instance.deltaTime,this.shark.view.pivot.y=-this.bouncer.x+200,this.first&&0===this.bouncer.x){this.game.stomp(),this.first=!1;for(var a=this.game.clientManager.activeClients,b=0;b<a.length;b++){var c=a[b];c&&c.leave()}}this.count--,this.game.hud.rageTarget=1,this.count<=0&&(this.count=70,this.bouncer.dx=100),this.shark.position.x>1500&&(this.deactivate(),this.onFinish.dispatch(this))},j.prototype.deactivate=function(){this.game.hud.rageing=!1,this.game.hud.lines.visible=!1,this.game.clientManager.endNuts(),this.game.world.remove(this.shark)},c.exports=j}),define("com/duck/game/powerups/WaterCanon",["require","exports","module","./Powerup","signals","com/fido/utils/Utils","com/fido/loader/Cache","com/fido/sound/SoundManager"],function(a,b,c){var d=a("./Powerup"),e=(a("signals"),a("com/fido/utils/Utils"),a("com/fido/loader/Cache")),f=a("com/fido/sound/SoundManager"),g=function(){var a=PIXI.Sprite.fromFrame("powerup_04.png");a.anchor.set(.5),d.call(this,a),this.instant=!1,this.duration=1e3,this.id="hose",this.title=e.getJson("translation").strings.STR_SPLASH_ATTACK,this.name=this.title,this.copy=e.getJson("translation").strings.STR_SPLASH_ATTACK_DESCRIPTION};g.prototype=Object.create(d.prototype),g.prototype.activate=function(a){d.prototype.activate.call(this,a),this.game.lock(!0),TweenLite.to(a.donald.view.duck.scale,.3,{x:1.2,y:.8,ease:Sine.easeIn,onComplete:function(){TweenLite.to(a.donald.view.duck.scale,.5,{x:.6,y:1.4,ease:Elastic.easeOut}),TweenLite.to(a.donald.view.pivot,.5,{y:800,ease:Sine.easeOut,onComplete:function(){this.game.donald.view.duck.scale.set(1),this.game.lock(!1),this.game.goNuts()}.bind(this)})}.bind(this)})},g.prototype.update=function(){d.prototype.update.call(this),this.game.donald.view.setRage(this.timer,this.duration)},g.prototype.deactivate=function(){f.sfx.play("powerupHoseEnding"),this.game.endNuts(),this.game.flash.flash(.2,1),this.game.hud.showMessage(e.getJson("translation").strings.STR_SPLASH_BACK)},c.exports=g}),define("com/duck/game/powerups/MegaTip",["require","exports","module","./Powerup","signals","com/fido/loader/Cache","com/fido/system/Ticker","com/fido/sound/SoundManager"],function(a,b,c){var d=a("./Powerup"),e=(a("signals"),a("com/fido/loader/Cache")),f=a("com/fido/system/Ticker"),g=a("com/fido/sound/SoundManager"),h=function(){var a=PIXI.Sprite.fromFrame("powerup_01.png");a.anchor.set(.5),d.call(this,a),this.instant=!1,this.duration=50,this.id="tip",this.title=e.getJson("translation").strings.STR_MEGA_TIP,this.name=this.title,this.copy=e.getJson("translation").strings.STR_MEGA_TIP_DESCRIPTION,this.scoreCount=0,this.totalBonus=0};h.prototype=Object.create(d.prototype),h.prototype.activate=function(a){d.prototype.activate.call(this,a),a.particleManager.addParticle(0,0,1),this.scoreCount=0,this.totalBonus=0,g.sfx.play("powerupCashBonus")},h.prototype.update=function(){this.scoreCount+=f.instance.deltaTime,this.scoreCount>10&&(this.totalBonus++,this.scoreCount=0,this.game.addToScore(50,this.game.donald,!0),15===this.totalBonus&&(this.deactivate(),this.onFinish.dispatch(this)))},h.prototype.deactivate=function(){},c.exports=h}),define("com/duck/game/powerups/HypnoFilter",["require","exports","module","PIXI"],function(a,b,c){var d=a("PIXI");BGFilter=function(){d.AbstractFilter.call(this),this.passes=[this],this.uniforms={wave:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float wave;","void main(void) {","   vec2 texPos = vTextureCoord;","   texPos.x += sin((texPos.y*20.0) + wave * 3.0) * 0.01;","   gl_FragColor = texture2D(uSampler, texPos);","}"]},BGFilter.prototype=Object.create(d.AbstractFilter.prototype),BGFilter.prototype.constructor=BGFilter,Object.defineProperty(BGFilter.prototype,"gray",{get:function(){return this.uniforms.gray.value},set:function(a){this.uniforms.gray.value=a}}),c.exports=BGFilter}),define("com/duck/game/powerups/SplashTheCash",["require","exports","module","./Powerup","signals","com/fido/game/GameObject","com/fido/physics/SimpleBouncer","com/fido/loader/Cache","com/fido/system/Ticker","./HypnoFilter","com/fido/sound/SoundManager"],function(a,b,c){var d=a("./Powerup"),e=(a("signals"),a("com/fido/game/GameObject"),a("com/fido/physics/SimpleBouncer"),a("com/fido/loader/Cache")),f=a("com/fido/system/Ticker"),g=a("./HypnoFilter"),h=a("com/fido/sound/SoundManager"),i=function(){var a=PIXI.Sprite.fromFrame("powerup_02.png");a.anchor.set(.5),d.call(this,a),this.duration=480,this.id="hypno",this.title=e.getJson("translation").strings.STR_HYPNO_TIME,this.name=this.title,this.copy=e.getJson("translation").strings.STR_HYPNO_DESCRIPTION,this.disk=new PIXI.Sprite.fromFrame("fx_hypnodisc.png"),this.disk.anchor.set(.5),this.disk.x=568,this.disk.y=320,this.count=0,this.filter=new g};i.prototype=Object.create(d.prototype),i.prototype.activate=function(a){d.prototype.activate.call(this,a),h.sfx.play("powerupHypnoStart");var b=this.game.clientManager.activeClients;a.clientManager.hypno=!0;for(var c=0;c<b.length;c++){var e=b[c];e&&(e.patienceCounter=e.patience,e.hypno=!0)}this.game.view.addChild(this.disk),this.game.world.view.filters=[this.filter],this.disk.alpha=0,TweenLite.to(this.disk,.3,{alpha:1,ease:Sine.easeIn})},i.prototype.update=function(){this.filter.uniforms.wave.value=this.count;for(var a=this.game.clientManager.activeClients,b=0;b<a.length;b++){var c=a[b];c&&(c.patienceCounter+=f.instance.deltaTime)}this.disk.rotation+=.1*f.instance.deltaTime,this.count+=.02*f.instance.deltaTime,this.disk.scale.x=2.1,this.disk.scale.y=2.1,d.prototype.update.call(this)},i.prototype.deactivate=function(){this.game.world.remove(this.shark);var a=this.game.clientManager.activeClients;this.game.clientManager.hypno=!1;for(var b=0;b<a.length;b++){var c=a[b];c&&0!==c.state&&6!==c.state&&(c.patienceCounter+=f.instance.deltaTime,c.finishEating())}TweenLite.to(this.disk,.3,{alpha:0,ease:Sine.easeIn,onComplete:function(){this.game.view.removeChild(this.disk)}.bind(this)}),this.game.world.view.filters=null},c.exports=i}),define("com/duck/game/powerups/SuperFilter",["require","exports","module","PIXI"],function(a,b,c){var d=a("PIXI");BGFilter=function(){d.AbstractFilter.call(this),this.passes=[this],this.uniforms={wave:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float wave;","void main(void) {","   vec2 texPos = vTextureCoord;","   gl_FragColor = texture2D(uSampler, texPos);","   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), -1.0);","}"]},BGFilter.prototype=Object.create(d.AbstractFilter.prototype),BGFilter.prototype.constructor=BGFilter,Object.defineProperty(BGFilter.prototype,"gray",{get:function(){return this.uniforms.gray.value},set:function(a){this.uniforms.gray.value=a}}),c.exports=BGFilter}),define("com/duck/game/powerups/InstaFill",["require","exports","module","./Powerup","signals","com/fido/loader/Cache","./SuperFilter","com/fido/effects/Sparkle"],function(a,b,c){var d=a("./Powerup"),e=(a("signals"),a("com/fido/loader/Cache")),f=a("./SuperFilter"),g=a("com/fido/effects/Sparkle"),h=function(){var a=PIXI.Sprite.fromFrame("powerup_03.png");a.anchor.set(.5),d.call(this,a),this.instant=!0,this.duration=300,this.id="tank",this.title=e.getJson("translation").strings.STR_INSTANT_FILL,this.name=this.title,this.copy=e.getJson("translation").strings.STR_INSTANT_FILL_DESCRIPTION,this.filter=new f,this.water=new PIXI.Sprite.fromFrame("fx_tankfill.png"),this.water.x=-50,this.ratio=1,this.water.width=1136,this.water.height=700,this.sway=0,this.sparkles=new g(null,new PIXI.Rectangle(0,-0,1136,700),30)};h.prototype=Object.create(d.prototype),h.prototype.activate=function(a){d.prototype.activate.call(this,a),a.addToScore(200,this.game.donald),a.donald.fillComplete(4),a.donald.superWater=!0,a.donald.multiplyer*=2,a.view.addChild(this.water),a.view.addChild(this.sparkles),this.water.position.y=700,this.ratio-0,this.sway=0,this.sparkles.alpha=1,TweenLite.to(this,4,{ratio:2*Math.PI,ease:Sine.easeOut,onUpdate:function(){this.water.position.y=700+700*Math.cos(this.ratio)-40,this.sparkles.visible=this.ratio>Math.PI,this.sway++}.bind(this),onComplete:function(){TweenLite.to(this.sparkles,.5,{alpha:0,onComplete:function(){a.view.removeChild(this.water),a.view.removeChild(this.sparkles)}.bind(this)})}.bind(this)})},h.prototype.update=function(){},h.prototype.deactivate=function(){},c.exports=h}),define("com/duck/game/powerups/PowerupManager",["require","exports","module","com/fido/game/GameObjectPool","./Pickup","./SpeedBoost","./CrowdClearer","./WaterCanon","./MegaTip","./SplashTheCash","./InstaFill","com/fido/system/Ticker","signals","com/fido/sound/SoundManager","com/fido/system/LocalStorage","com/duck/app/Tracker"],function(a,b,c){var d=a("com/fido/game/GameObjectPool"),e=a("./Pickup"),f=(a("./SpeedBoost"),a("./CrowdClearer")),g=a("./WaterCanon"),h=a("./MegaTip"),i=a("./SplashTheCash"),j=a("./InstaFill"),k=a("com/fido/system/Ticker"),l=a("signals"),m=a("com/fido/sound/SoundManager"),n=a("com/fido/system/LocalStorage"),o=function(a){this.game=a,this.count=100,this.pool=new d(e),this.startingPoints=[new PIXI.Point(9,0)],this.exitPoint=new PIXI.Point(9,0),this.activePowerups=[],this.pickups=[],this.maxPowerups=1,this.powerups=[g,f,i,h,j,g,h,j,i,f],this.paused=!1,this.onPowerupActivated=new l,this.firstRun=!0,this.firstRunCount=0,this.localStorage=new n("com.disney.game"),this.powerupStates=this.localStorage.getObject("tutorialState__"),this.powerupStates||(this.powerupStates={})};o.constructor=o,o.prototype.pause=function(){this.paused=!0},o.prototype.resume=function(){this.paused=!1},o.prototype.update=function(){if(!this.paused){var a=k.instance.deltaTime/k.instance.speed,b=k.instance.speed;b>2&&(b=2),this.count+=a*b,this.count>2e3&&this.pickups.length<this.maxPowerups&&0==this.activePowerups.length&&this.addPickup();for(var c=0;c<this.activePowerups.length;c++)this.activePowerups[c].update()}},o.prototype.addPickup=function(){this.count=0;for(var a,b=d.getObject(e);!a;){var c=4*Math.random()|0,f=2*Math.random()|0;c+=3,f+=2,a=this.game.gridWorld.getCell(80*c,80*f),a.data&&(a=null)}b.timer=0,b.position.x=80*c+40,b.position.y=80*f+40,b.onPickedup.addOnce(this.onPickupActivate,this),b.onDead.addOnce(this.onPickupDead,this),b.cell=b.interactCell=a,a.data=b;var g=Math.random()*this.powerups.length|0;this.firstRun&&(this.firstRunCount<this.powerups.length?(g=this.firstRunCount,this.firstRunCount++):this.firstRun=!1),b.setType(d.getObject(this.powerups[g])),b.reset(),b.view.interactive=!0,b.view.buttonMode=!0,b.view.mousedown=b.view.touchstart=this.onPowerupPressed.bind(this),this.pickups.push(b),this.game.world.add(b)},o.prototype.onPowerupPressed=function(a){this.game.donald.gotoAndInteractWithObject(a.target.go)},o.prototype.onPickupDead=function(a){var b=this.pickups.indexOf(a);-1!=b&&(this.pickups.splice(b,1),this.game.world.remove(a),a.cell.data=null,d.returnObject(a))},o.prototype.onPickupActivate=function(b){if(b=b||this.cachePickup,a("com/duck/app/Tracker").trackAction("power_up","game",window.level,b.powerup.id),this.powerupStates[b.powerup.id]){this.count=0,this.onPickupDead(b),m.sfx.play("powerupGet"),m.sfx.playGroup("dLaughx");var c=b.powerup;c.instant||(c.onFinish.addOnce(this.onPowerupFinished,this),this.activePowerups.push(c)),this.onPowerupActivated.dispatch(c),c.activate(this.game),this.game.hud.showMessage(c.title||"Pickup!")}else this.powerupStates[b.powerup.id]=1,this.localStorage.storeObject("tutorialState__",this.powerupStates),this.cachePickup=b,app.overlayManager.onHide.addOnce(this.onPickupActivate,this),app.overlayManager.popupScreen.setData(b.powerup),app.overlayManager.show("popup")},o.prototype.onPowerupFinished=function(a){var b=this.activePowerups.indexOf(a);-1!=b&&(this.activePowerups.splice(b,1),d.returnObject(a))},o.prototype.deactivatePowerups=function(){for(var a=0;a<this.activePowerups.length;a++)this.activePowerups[a].deactivate();this.activePowerups=[]},o.prototype.reset=function(){for(var a=0;a<this.pickups.length;a++){var b=this.pickups[a];this.game.world.remove(b),d.returnObject(b)}this.deactivatePowerups(),this.pickups=[],this.count=600,this.paused=!1},c.exports=o}),define("com/duck/game/FocusCircle",["require","exports","module"],function(a,b,c){FocusCircle=function(a){this.view=a,this.circle=(new PIXI.Graphics).beginFill(1044480).drawCircle(0,0,100)},FocusCircle.constructor=FocusCircle,FocusCircle.prototype.focus=function(a){a?(this.view.addChild(this.circle),this.view.mask=this.circle,this.circle.position.x=a.x,this.circle.position.y=a.y,this.circle.scale.set(this.targetScale),TweenLite.to(this.circle.scale,.5,{x:1.7,y:1.7,ease:Sine.easeOut})):TweenLite.to(this.circle.scale,.5,{x:this.targetScale,y:this.targetScale,ease:Sine.easeIn,onComplete:this.onFadeOut.bind(this)})},FocusCircle.prototype.update=function(){},FocusCircle.prototype.reset=function(){this.view.removeChild(this.circle),this.view.mask=null},FocusCircle.prototype.onFadeOut=function(){this.view.removeChild(this.circle),this.view.mask=null},FocusCircle.prototype.resize=function(a,b){this.w=a,this.h=b,this.targetScale=a/100*1.1},c.exports=FocusCircle}),define("com/duck/game/TutorialManager",["require","exports","module","com/fido/ui/buttons/Button","com/fido/system/LocalStorage","com/fido/loader/Cache","com/duck/app/Tracker"],function(a,b,c){var d=a("com/fido/ui/buttons/Button"),e=(a("com/fido/system/LocalStorage"),a("com/fido/loader/Cache")),f=function(a){this.game=a,this.player=a.donald,this.view=new PIXI.DisplayObjectContainer,this.showCombo=!1,this.tutorialBox=new PIXI.DisplayObjectContainer,this.bg=(new PIXI.Graphics).beginFill(16777215).drawRect(0,0,100,71*.7),this.bg.position.x=10,this.bg.position.y=11*.7,this.tutorialBox.addChild(this.bg);var b=e.getJson("translation");this.label=new PIXI.Text(b.strings.STR_TUTORIAL_WELCOME,{font:"26px "+window.MAIN_FONT,fill:"black"}),this.label.x=18,this.label.y=24,this.tutorialBox.addChild(this.label);var c=this.label.width+30;this.bg.scale.x=(c-14)/100,this.tutorialBox.x=520-c/2,this.tutorialBox.y=340,this.view.addChild(this.tutorialBox),this.currentStep=0};f.prototype.runTutorial=function(){this.active=!0,this.showCombo=!0,this.currentStep=-1,this.game.clientManager.pause(),this.game.powerupManager.pause();var a=new PIXI.DisplayObjectContainer;a.hand=PIXI.Sprite.fromFrame("pointer.png"),a.hand.anchor.set(.5),a.addChild(a.hand),a.hitArea=new PIXI.Rectangle(-80,-20,160,160),a.count=0,a.updateTransform=function(){PIXI.Sprite.prototype.updateTransform.call(this),this.count++,this.hand.position.y=-80+25*Math.sin(.2*this.count),this.hand.scale.x=.9+.1*Math.sin(.3*this.count),this.hand.scale.y=.9+.1*Math.cos(.3*this.count),this.children[1].alpha=.75+.25*Math.sin(.1*this.count)};var b=new PIXI.Sprite.fromFrame("pointer_ring.png");b.anchor.set(.5),b.position.x=-10,b.position.y=75,a.addChild(b),this.button=new d(a),this.button.onPress.add(this.onButtonPressed,this),this.view.addChild(this.button.view),this.game.view.addChild(this.view),this.button.view.interactive=!1,this.button.view.visible=!1,setTimeout(this.startGame.bind(this),6e3)},f.prototype.startGame=function(){var a=this.game.clientManager.sendInClient(3);a.multiplyer=0,a.onInteract.add(this.onClientGetsToTable,this);var b=a.bench,c=this.game.waterPump;c.view.interactive=!1;var d=null;this.waitPoint=new PIXI.Point,this.tartgectCircle=new PIXI.Point;var f=e.getJson("translation");this.steps=[{target:b,pos:140,label:f.strings.STR_TUTORIAL_TAP_TO_FILL,trackId:"fill cup"},{target:d,pos:140,label:f.strings.STR_TUTORIAL_WAIT_FOR_CUSTOMER},{target:b,pos:140,label:f.strings.STR_TUTORIAL_TAP_TO_COLLECT,trackId:"collect money"},{target:this.waitPoint,pos:140,label:null},{target:c,pos:340,label:f.strings.STR_TUTORIAL_TAP_TO_REFILL,trackId:"refill tank"}],this.client=a},f.prototype.reset=function(){this.active&&(this.showCombo=!1,this.button.view.visible=!1,this.game.view.removeChild(this.view),this.client.onInteract.removeAll(),this.player.onInteract.removeAll(),this.active=!1,this.setLabel("Tutorial: First, wait for a guest to take a seat."),this.view.visible=!0,this.view.alpha=1)},f.prototype.popUpCombo=function(){this.showCombo=!1,app.overlayManager.scenarioIntro.setData({name:"Combo Meals :)",copy:"You just scored a combo!\n\nWhenever you repeat the same action (take orders, serve meals etc.) in a row, you get a higher and higher multiplier!",previewThumb:"comboThumb.jpg"}),app.overlayManager.show("scenario"),this.player.direction=4},f.prototype.onClientGetsToTable=function(){this.nextStep()},f.prototype.onPlayerInteract=function(){this.nextStep()},f.prototype.setLabel=function(a,b){this.label.setText(a),this.label.updateText();var c=this.label.width+30;this.bg.scale.x=(c-14)/100,this.tutorialBox.x=520-c/2,this.tutorialBox.y=b,this.tutorialBox.alpha=0,TweenLite.to(this.tutorialBox,.3,{alpha:1,ease:Sine.easeOut})},f.prototype.onPowerupPicked=function(a){this.powerupStates[a.id]=1,this.localStorage.storeObject("tutorialState",this.powerupStates),app.overlayManager.show("powerup"),this.player.direction=4},f.prototype.onContinue=function(){this.powerupPanel.interactive=!1,TweenLite.to(this.view,1,{alpha:0}),this.game.controller.enable(),this.game.resume()},f.prototype.onStage1Complete=function(){this.game.clientManager.maxClients=1,this.game.clientManager.resume(),this.game.powerupManager.resume(),this.game.setInteractive(!0),TweenLite.to(this.view,1,{alpha:0,delay:0,onComplete:this.onFinished.bind(this)})},f.prototype.onFinished=function(){this.player.direction=4},f.prototype.onButtonPressed=function(){this.button.view.interactive=!1,this.button.view.visible=!1;var a=this.steps[this.currentStep];this.player.gotoAndInteractWithObject(a.target),this.game.focusCircle.focus()},f.prototype.nextStep=function(){var b=this.steps[this.currentStep];if(b&&b.trackId&&a("com/duck/app/Tracker").trackAction("tutorial","game",1,b.trackId),this.currentStep++,this.player.targetObject=null,this.player.direction=4,this.currentStep===this.steps.length)this.button.view.visible=!1,this.client.onInteract.removeAll(),this.player.onInteract.removeAll(),this.onStage1Complete();else{var c=this.steps[this.currentStep];c.label&&this.setLabel(c.label,c.pos),null==c.target?(this.game.setInteractive(!0),this.player.onInteract.remove(this.onPlayerInteract,this)):c.target===this.waitPoint?(setTimeout(this.nextStep.bind(this),3e3),this.game.setInteractive(!1)):(this.button.view.interactive=!0,this.button.view.visible=!0,c.target===this.client.bench?(this.button.view.position.x=c.target.position.x+30,this.button.view.position.y=c.target.position.y-150,this.tartgectCircle.x=c.target.position.x+30,this.tartgectCircle.y=c.target.position.y-160):c.target===this.dishWasher?(this.button.view.scale.x=2,this.button.view.position.x=c.target.position.x+30,this.button.view.position.y=c.target.position.y+80-40):(c.target.view.interactive=!0,this.button.view.position.x=c.target.position.x-5,this.button.view.position.y=c.target.position.y-10-40,this.tartgectCircle.x=c.target.position.x-20+10,this.tartgectCircle.y=c.target.position.y-60),this.game.focusCircle.focus(this.tartgectCircle),this.player.onInteract.add(this.onPlayerInteract,this),this.game.setInteractive(!1))}this.game.view.addChild(this.view)},c.exports=f}),define("com/duck/game/particles/ParticleManager",["require","exports","module","com/fido/game/GameObjectPool"],function(a,b,c){var d=a("com/fido/game/GameObjectPool"),e=function(a){this.game=a,this.pools=[],this.activeParticles=[]};e.prototype.registerParticle=function(a,b){a.prototype._particleId=b,this.pools[b]=new d(a)},e.prototype.addParticle=function(a,b,c){var d=this.pools[c].getObject();d.activate(a,b),this.game.world.view.addChild(d),this.activeParticles.push(d)},e.prototype.update=function(){for(var a=0;a<this.activeParticles.length;a++){var b=this.activeParticles[a];b.update(),b.isDead&&(this.activeParticles.splice(a,1),a--,this.game.world.view.removeChild(b),this.pools[b._particleId].returnObject(b))}},c.exports=e}),define("com/duck/game/particles/GlitterPuff",["require","exports","module","PIXI","com/fido/utils/Math2"],function(a,b,c){var d=a("PIXI"),e=a("com/fido/utils/Math2"),f=function(){d.DisplayObjectContainer.call(this),this.disc=d.Sprite.fromFrame("guest_payment.png"),this.disc.anchor.set(.5),this.depthOffset=9999999,f.tints||(f.tints=[16734107,16757335,10639359,16776535,14614359,5757695]),this.particles=[],this.total=20;for(var a=0;a<this.total;a++){var b=d.Sprite.fromFrame("guest_payment.png");b.speed=new d.Point,b.pos=new d.Point,this.addChild(b),b.anchor.set(.5),this.particles.push(b)}this.ratio=0};f.prototype=Object.create(d.DisplayObjectContainer.prototype),f.prototype.activate=function(a,b){this.position.x=a,this.position.y=b,this.isDead=!1,this.life=2,this.ratio=0;for(var c=0;c<this.total;c++){var f=this.particles[c];f.pos=new d.Point;var g=2*Math.PI/this.total*c,h=5+10*Math.random();f.speed.x=Math.sin(g)*h,f.speed.y=Math.cos(g)*h-5,f.visible=!0,f.position.x=e.random(-50,50),f.position.y=0,f.rotation=Math.random()*Math.PI*2,f.alpha=1,f.offset=100*Math.random(),f.rotationSpeed=.1}this.disc.scale.set(1),this.disc.alpha=1,this.disc.scale.x=this.disc.scale.y=.2,TweenLite.to(this.disc.scale,.7,{x:1.3*1.5,y:1.3*1.5,ease:Sine.easeOut}),TweenLite.to(this.disc,.1665,{alpha:0,ease:Sine.easeOut,delay:.33333})},f.prototype.update=function(){this.life-=.03,this.life<0&&(this.isDead=!0);for(var a=0;a<this.total;a++){var b=this.particles[a];b.speed.y+=1,b.position.x+=b.speed.x,b.position.y+=b.speed.y,b.scale.y=Math.sin(b.rotation+b.offset),b.scale.x=1,b.rotation+=b.rotationSpeed,b.speed.x*=.95,this.life<.5&&(b.alpha*=.8)}this.disc.rotation+=.1},c.exports=f}),define("com/duck/game/particles/MoneyRain",["require","exports","module","PIXI","com/fido/utils/Math2"],function(a,b,c){var d=a("PIXI"),e=a("com/fido/utils/Math2"),f=function(){d.DisplayObjectContainer.call(this),this.disc=d.Sprite.fromFrame("guest_payment.png"),this.disc.anchor.set(.5),this.depthOffset=9999999,this.particles=[],this.total=window.WEBGL?200:50;for(var a=0;a<this.total;a++){var b=d.Sprite.fromFrame("guest_payment.png");b.speed=new d.Point,b.pos=new d.Point,this.addChild(b),b.anchor.set(.5),this.particles.push(b)}this.ratio=0};f.prototype=Object.create(d.DisplayObjectContainer.prototype),f.prototype.activate=function(a,b){this.position.x=a,this.position.y=b,this.isDead=!1,this.life=2,this.ratio=0;for(var c=0;c<this.total;c++){var f=this.particles[c];f.pos=new d.Point;var g=(2*Math.PI/this.total*c,5+10*Math.random());f.speed.x=e.random(-5,5),f.speed.y=-Math.random()*g,f.visible=!0,f.position.x=e.random(0,1136),f.position.y=e.random(-100,-700),f.rotation=Math.random()*Math.PI*2,f.alpha=1,f.offset=100*Math.random(),f.rotationSpeed=.1}this.disc.scale.set(1),this.disc.alpha=1,this.disc.scale.x=this.disc.scale.y=.2,TweenLite.to(this.disc.scale,.7,{x:1.3*1.5,y:1.3*1.5,ease:Sine.easeOut}),TweenLite.to(this.disc,.1665,{alpha:0,ease:Sine.easeOut,delay:.33333})},f.prototype.update=function(){this.life-=.01,this.life<0&&(this.isDead=!0);for(var a=0;a<this.total;a++){var b=this.particles[a];b.speed.y+=.3,b.position.x+=b.speed.x,b.position.y+=b.speed.y,b.scale.y=Math.sin(b.rotation+b.offset),b.scale.x=1,b.rotation+=b.rotationSpeed,b.speed.x*=.95,this.life<.5,b.visible=b.position.y<700}this.disc.rotation+=.1},c.exports=f}),define("com/duck/game/view/Rain",["require","exports","module","PIXI","com/fido/game/GameObjectPool"],function(a,b,c){var d=a("PIXI"),e=a("com/fido/game/GameObjectPool");Rain=function(){d.DisplayObjectContainer.call(this),this.pool=new e(ParticalRain),this.particals=[],this.mode=0,this.count=0,this.max=window.WEBGL?30:10,this.resize(1136,700)},Rain.constructor=Rain,Rain.prototype=Object.create(d.DisplayObjectContainer.prototype),Rain.prototype.update=function(){if(this.count+=1,0==this.mode&&this.count>2&&this.particals.length<this.max){this.count=0;var a=this.pool.getObject();this.particals.push(a),this.addChild(a),a.alpha=.5,a.anchor.x=.5,a.scale.x=a.scale.y=1,a.life=120,a.position.x=Math.random()*this.w,a.position.y=Math.random()*this.h}if(0!==this.particals.length)for(var b=0;b<this.particals.length;b++){var a=this.particals[b];if(a.life-=2,a.life<50&&(a.alpha=a.life/50*.5),a.life<100){var c=1-a.life/100;a.scale.y=1+2*c,a.scale.x=1/a.scale.y,a.life<=0&&(this.pool.returnObject(a),this.removeChild(a),this.particals.splice(b,1),b--)}}},Rain.prototype.resize=function(a,b){this.w=a,this.h=b;for(var c=0;c<this.particals.length;c++){var d=this.particals[c];d.position.x=d.home.x=110640*Math.random()}},ParticalRain=function(){d.Sprite.call(this,d.Texture.fromFrame(ParticalRain.frames[ParticalRain.globalCount%4])),ParticalRain.globalCount++,this.anchor.x=.5},ParticalRain.globalCount=0,ParticalRain.frames=["droplet_01.png","droplet_02.png","droplet_03.png","droplet_04.png",,"droplet_05.png"],ParticalRain.prototype=Object.create(d.Sprite.prototype),c.exports=Rain}),define("com/duck/game/DuckGame",["require","exports","module","PIXI","signals","com/fido/game/World","com/fido/system/Ticker","com/fido/game/gridworld/GridWorld","com/fido/game/GameObject","com/fido/sound/SoundManager","./control/PointAndClickController","./hud/Hud","./donald/Donald","./Bench","./clients/ClientManager","./ExitPoint","./WaterPump","./fillgame/FillGame","./BenchProxy","./ParticleManager","./DebrisManager","./powerups/PowerupManager","com/fido/Flash","./FocusCircle","./TutorialManager","com/fido/physics/Spring","com/fido/loader/Cache","com/duck/game/particles/ParticleManager","com/duck/game/particles/GlitterPuff","com/duck/game/particles/MoneyRain","com/duck/game/view/Rain","com/duck/app/Tracker","com/duck/app/Tracker"],function(a,b,c){var d=a("PIXI"),e=a("signals"),f=a("com/fido/game/World"),g=a("com/fido/system/Ticker"),h=a("com/fido/game/gridworld/GridWorld"),i=a("com/fido/game/GameObject"),j=a("com/fido/sound/SoundManager"),k=a("./control/PointAndClickController"),l=a("./hud/Hud"),m=a("./donald/Donald"),n=a("./Bench").bench,o=a("./clients/ClientManager"),p=a("./ExitPoint"),q=a("./WaterPump"),r=a("./fillgame/FillGame"),s=a("./BenchProxy"),t=a("./ParticleManager"),u=a("./DebrisManager"),v=a("./powerups/PowerupManager"),w=a("com/fido/Flash"),x=a("./FocusCircle"),y=a("./TutorialManager"),z=a("com/fido/physics/Spring"),A=a("com/fido/loader/Cache"),t=a("com/duck/game/particles/ParticleManager"),B=a("com/duck/game/particles/GlitterPuff"),C=a("com/duck/game/particles/MoneyRain"),D=a("com/duck/game/view/Rain");d.DisplayObject.prototype.depth=0,d.DisplayObject.prototype.scaleOffset=1,d.DisplayObject.prototype.depthOffset=0,d.DisplayObject.prototype.sign=1;var E=function(){this.onGameover=new e,this.world=new f(!window.WEBGL),this.isNuts=!1,this.firstRun=!0,this.w=100,this.h=100,this.hud=new l(this),this.isGameover=!1,this.paused=!0,this.score=0,this.rage=0,this.scoreMultiplyer=1,this.bounceSpring=new z,this.view=new d.DisplayObjectContainer,window.WEBGL?this.view.addChild(this.world.view):(this.world.zoomContainer.addChild(this.world.view),this.view.addChild(this.world.zoomContainer)),this.gridWorld=new h,this.gridWorld.view.alpha=.5,this.gridWorld.build(),this.donald=new m(this),this.world.add(this.donald),this.controller=new k(this),this.movableObjects=[],this.benchs=[],this.clientManager=new o(this),this.powerupManager=new v(this),this.setExitPoint(0,5),this.setWaterPump(6,1),this.fillGame=new r,this.fillGame.onComplete.add(this.onFillComplete,this),this.hud.addChild(this.fillGame),window.cups=[],window.cup3d=[],window.temp=new d.Sprite.fromFrame("cup_small_full.png"),window.temp.anchor.set(.5,1);
for(var a=0;4>a;a++){var b=new i(new d.Sprite.fromFrame("cup_small_full.png"));b.view.anchor.set(.5,1),b.depthOffset=1e3,b.position.x=-80,b.position.y=80,b.view.visible=!1,window.cup3d.push(b),this.world.add(b)}window.cup3d[0].position.set(-80,80),window.cup3d[1].position.set(1120,80),window.cup3d[2].position.set(1120,720),window.cup3d[3].position.set(-80,720),this.world.floor.hitArea=new d.Rectangle(-1e3,-1e3,2e3,2e3),this.world.floor.mousedown=this.world.floor.touchstart=this.onFloorPressed.bind(this),this.world.floor.mouseup=this.world.floor.touchend=this.onFloorReleased.bind(this),this.world.floor.mousemove=this.world.floor.touchmove=this.onMove.bind(this),this.particleManager=new t(this),this.debrisManager=new u(this),this.flash=new w(1156,700),this.flash.y=-50,this.flash.x=-50,this.view.addChild(this.flash);var c=this.world.viewDimensions.width/2,g=this.world.viewDimensions.height/2;this.cameraPositionPump={x:c,y:g,z:350,viewy:300,rotation:-1,fakeZoom:1.8},this.cameraPositionDefault={x:0,y:0,z:0,viewy:60,rotation:-.6,fakeZoom:1},this.cameraPositionBottomLeft={x:c-320,y:384,z:200,viewy:-60,rotation:-.6,fakeZoom:1.3},this.cameraPositionBottomRight={x:c+320,y:384,z:200,viewy:-60,rotation:-.6,fakeZoom:1.3},this.cameraPositionTopLeft={x:c-280,y:64,z:200,viewy:40,rotation:-.8,fakeZoom:1.3},this.cameraPositionTopRight={x:c+280,y:64,z:200,viewy:40,rotation:-.8,fakeZoom:1.3},window.WEBGL||(this.cameraPositionPump.viewy=240),this.cameraTarget=this.cameraPositionTopRight,this.interactiveLayer=new d.DisplayObjectContainer,this.interactiveLayer.mousedown=this.interactiveLayer.touchstart=function(){},this.interactiveLayer.interactive=!0,this.interactiveLayer.buttonMode=!0,this.interactiveLayer.hitArea=new d.Rectangle(-1e3,-1e3,2e3,2e3),this.locked=!1,this._interactive=!0,this.focusCircle=new x(this.world.view),this.focusCircle.resize(800,450),this.tutorial=new y(this),this.particleManager=new t(this),this.particleManager.registerParticle(B,0),this.particleManager.registerParticle(C,1),this.overlayGraphic=(new d.Graphics).beginFill(4135817,.8).drawRect(-100,0,1200,1e3),this.overlayGraphic.blendMode=d.blendModes.MULTIPLY,this.rain=new D,this.view.addChild(this.rain)};E.constructor=E,E.prototype.lock=function(a){this.locked!==a&&(this.locked=a,this.locked?(this.fillGame.hide(),this.clientManager.lock(!0),this.setInteractive(!1)):(this.clientManager.lock(!1),this.setInteractive(!0)))},E.prototype.setInteractive=function(a){this._interactive!==a&&(this._interactive=a,this._interactive?this.view.removeChild(this.interactiveLayer):this.view.addChild(this.interactiveLayer))},E.prototype.stomp=function(){this.bounceSpring.dx=70;for(var a=0;a<this.benchs.length;a++){var b=this.benchs[a];b.benchView&&b.benchView.stomp()}},E.prototype.onMove=function(a){if(this.isNuts){{var b=(this.gridWorld,a.getLocalPosition(this.world.view));this.world.viewDimensions.width/2,this.world.viewDimensions.height/2}this.donald.waterGun.target2D.x=b.x,this.donald.waterGun.target2D.y=b.y;var c=this.world.floor.projectPoint(b);this.donald.waterGun.target3D=c}},E.prototype.onFloorPressed=function(a){var b=this.gridWorld,c=new d.Point;a.getLocalPosition(this.view,c);var e=(this.world.viewDimensions.width/2,this.world.viewDimensions.height/2,this.world.floor.projectPoint(c));if(this.isNuts)this.donald.waterGun.isFiring=!0;else{{b.getCell(e.x,e.y)}this.donald.moveTo(e.x,e.y)}},E.prototype.interactive=function(){},E.prototype.onFloorReleased=function(){this.donald.waterGun.isFiring=!1},E.prototype.reset=function(a){this.donald.reset(this.world.viewDimensions.width/2,this.world.viewDimensions.height/2),this.fillGame.hide(),this.isGameover=!1,a=a||this.config,this.config=a,this.clientManager.reset(a),this.powerupManager.reset(a),this.debrisManager.reset(a),this.movableObjects=[],this.world.floorTexture&&this.world.floorTexture.reset(),this.baseSpeed=1,this.gameTime=0,this.increasePerThirtySeconds=a.increasePerThirtySeconds,g.instance.speed=a.baseSpeed,this.rage=0,this.score=0,this.lives=3,this.hud.reset(),this.debrisManager.reset(),this.clearBenchs(),this.addBench(2,6,!0),this.addBench(3,6),this.addBench(9,6,!0),this.addBench(10,6),this.addBench(2,2,!0),this.addBench(3,2),this.addBench(9,2,!0),this.addBench(10,2),this.isNuts=!1,this.lastTime=!1,this.waterPump.view.interactive=!0,this.clientManager.paused=!1,this.setCamera(this.cameraPositionDefault),this.world.setScene(a.scene),this.world.floor.interactive=!0,this.firstRun=a.showTutorial,this.tutorial.reset(),this.focusCircle.reset(),this.firstRun&&(this.firstRun=!1,this.tutorial.runTutorial()),setTimeout(function(){}.bind(this),1e3),this.cameraTarget.x=520,this.cameraTarget.y=320,this.world.rotation=this.cameraTarget.rotation,this.world.view.y=this.cameraTarget.viewy,this.world.camera.x=this.cameraTarget.x,window.WEBGL?(this.world.camera.y=this.cameraTarget.y,this.world.camera.z=this.cameraTarget.z):this.world.camera.fakeZoom=this.cameraTarget.fakeZoom,this.view.removeChild(this.overlayGraphic),"18:00"==a.time,this.waterPump.setMode(this.config.night),this.setInteractive(!0)},E.prototype.freeze=function(){},E.prototype.goNuts=function(b){this.lastTime=b,j.sfx.play("waterLoop"),j.sfx.setVolume("waterLoop",0),this.isNuts=!0,this.rage=2160,this.countPos=5,b&&(this.powerupManager.reset(),this.powerupManager.paused=!0,a("com/duck/app/Tracker").trackAction("phase_2_start","game",window.level)),this.waterPump.view.interactive=!1,this.clientManager.goNuts(),this.donald.goNuts(),this.donald.position.x=this.waterPump.position.x,this.donald.position.y=this.waterPump.position.y,this.donald.waterGun.canFire=!1,this.donald.view.pivot.y=800,TweenLite.to(this.donald.view.pivot,.8,{y:0,ease:Expo.easeIn,onComplete:function(){this.hud.showMessage(b?A.getJson("translation").strings.STR_GAME_FINAL_GO:A.getJson("translation").strings.STR_GAME_HOSE_EM),this.donald.waterGun.canFire=!0,this.stomp(),j.sfx.play("dScreech")}.bind(this)});for(var c=0;c<this.benchs.length;c++){var d=this.benchs[c];d.benchView&&this.setGoNutsModeToObject(d.benchView)}},E.prototype.setGoNutsModeToObject=function(a){a.view.interactive=!1,a.onDead.add(this.onObjectDie,this),this.movableObjects.push(a)},E.prototype.onObjectDie=function(a){var b=this.movableObjects.indexOf(a);-1!==b&&(this.movableObjects.splice(b,1),this.world.remove(a))},E.prototype.addBench=function(a,b,c){var e=this.gridWorld.getCell(80*a,80*b);e.id=1;var f=new n(e.centerX,e.centerY);e.data=f;var g=c?e.left:e.right;g.data=f;var h=e.down;if(h.data=f,f.flip=a>5?1:-1,f.cell=e,f.interactCell=5>b?h:g,f.enterCell=h,this.benchs.push(f),this.world.add(f),c){var i=new s(0,0,f.flip);i.debrisManager=this.debrisManager,i.home=new d.Point(80*(a+1),80*(b+1)),i.view.x=i.position.x=i.home.x,i.view.y=i.position.y=i.home.y,this.world.add(i),f.benchView=i,i.view.data=f,i.view.interactive=!0,i.view.mousedown=i.view.touchstart=this.benchPressed.bind(this)}},E.prototype.clearBenchs=function(){for(var a=0;a<this.benchs.length;a++){var b=this.benchs[a];b.benchView&&(b.benchView.view.interactive=!0,b.benchView.onDead.removeAll(),this.world.remove(b.benchView)),b.cell.id=0,b.cell.data=null,b.cell.left.data=null,b.cell.right.data=null,b.cell.down.data=null,b.interactCell=null,b.enterCell=null,this.world.remove(b)}this.benchs=[]},E.prototype.benchPressed=function(a){var b=a.target,c=a.getLocalPosition(b);this.donald.gotoAndInteractWithObject(c.x<0?b.data:b.data.cell.right.data)},E.prototype.addToScore=function(a,b,c){var d=a*this.scoreMultiplyer|0;this.score+=d,this.hud.rageBar.update(this.rage),this.hud.updateScore(d,b,c)},E.prototype.start=function(a){this.reset(a),this.resume()},E.prototype.pause=function(){this.paused||(this.paused=!0,this.view.interactive=!1,g.instance.remove(this.update,this))},E.prototype.resume=function(){this.paused&&(this.paused=!1,this.view.interactive=!0,g.instance.add(this.update,this,1))},E.prototype.update=function(){this.donald.waterGun.update(),this.gameTime+=g.instance.deltaTime,this.bounceSpring.update(),this.view.pivot.y=this.bounceSpring.x,this.gameTime>2160&&(this.gameTime%=2160,g.instance.speed+=this.increasePerThirtySeconds,this.scoreMultiplyer+=.01),this.clientManager.update(),this.powerupManager.update(),this.particleManager.update(),this.debrisManager.update(),this.world.update(),this.hud.update();var a=520,b=280;if(this.focusCircle.update(),this.isNuts){if(this.donald.waterGun.isFiring){var c=a+.25*(this.donald.waterGun.target2D.x-a)*.75,d=b+.25*(this.donald.waterGun.target2D.y-b);d+=100,this.world.rotation=-.6,this.world.camera.x+=.02*(c-this.world.camera.x),this.world.camera.y+=.02*(d-this.world.camera.y),this.world.camera.x+=8*(Math.random()-.5),this.world.camera.y+=13*(Math.random()-.5),this.world.camera.z+=.1*(100-this.world.camera.z)}else{var c=a+.25*(this.donald.waterGun.target2D.x-a)*.75*.6,d=b+.25*(this.donald.waterGun.target2D.y-b);d+=100,this.world.rotation=-.6,this.world.camera.x+=.02*(c-this.world.camera.x),this.world.camera.y+=.02*(d-this.world.camera.y),this.world.camera.z+=.1*(0-this.world.camera.z)}if(this.hud.rageBar.update(this.rage),this.lastTime){this.rage-=g.instance.deltaTime/g.instance.speed;var e=this.rage/60|0;e<this.countPos&&(j.sfx.play("54321"),this.countPos=e,this.hud.showMessage(this.countPos+1+"")),this.donald.view.setRage(this.rage,2160),this.rage<=0&&(this.donald.waterGun.isFiring=!1,this.donald.waterGun.gunView.visible=!1,this.endNuts(),this.gameover())}}else{var c=a+.25*(this.donald.position.x-a)*.75*.5,d=b+.25*(this.donald.position.y-b)*.5;d+=100,this.cameraPositionDefault.x=c,this.cameraPositionDefault.y=d,this.world.rotation+=.1*(this.cameraTarget.rotation-this.world.rotation),this.world.view.y+=.1*(this.cameraTarget.viewy-this.world.view.y),this.world.camera.x+=.1*(this.cameraTarget.x-this.world.camera.x),window.WEBGL?(this.world.camera.y+=.1*(this.cameraTarget.y-this.world.camera.y),this.world.camera.z+=.1*(this.cameraTarget.z-this.world.camera.z)):this.world.camera.fakeZoom+=.1*(this.cameraTarget.fakeZoom-this.world.camera.fakeZoom)}this.rain.update()},E.prototype.endNuts=function(){this.isNuts=!1,j.sfx.stop("waterLoop"),0===this.lives&&this.hud.goNuts(),this.waterPump.view.interactive=!0,this.clientManager.endNuts(),this.donald.endNuts(),this.countPos=5,this.powerupManager.resume();for(var a=0;a<this.benchs.length;a++){var b=this.benchs[a];if(b.benchView){b.benchView.view.interactive=!0;var c=this.movableObjects.indexOf(b.benchView);-1!==c?this.movableObjects.splice(c,1):this.world.add(b.benchView),b.benchView.reset()}}this.debrisManager.reset()},E.prototype.setCamera=function(a){this.cameraTarget=a},E.prototype.showFill=function(){this.fillGame.show(),this.setCamera(this.cameraPositionPump)},E.prototype.onFillComplete=function(a){this.fillGame.hide(),this.donald.fillComplete(a),this.setCamera(this.cameraPositionDefault)},E.prototype.takeLife=function(){this.lives--,this.hud.updateLives(),g.instance.speed-=this.increasePerThirtySeconds},E.prototype.gameover=function(){this.isGameover||(j.sfx.play("gameover"),a("com/duck/app/Tracker").trackAction("phase_2_start","game",window.level),this.isGameover=!0,this.pause(),this.onGameover.dispatch())},E.prototype.setExitPoint=function(a,b){var c=this.gridWorld.getCell(80*a,80*b);this.exitPoint=new p(c.centerX,c.centerY),this.exitPoint.cell=c,this.exitPoint.interactCell=c},E.prototype.setWaterPump=function(a,b){var c=this.gridWorld.getCell(80*a,80*b);this.waterPump=new q(c.centerX,c.centerY+15),this.waterPump.cell=c,this.waterPump.interactCell=c,c.data=this.waterPump,this.world.add(this.waterPump),this.waterPump.view.interactive=!0,this.waterPump.view.mousedown=this.waterPump.view.touchstart=this.onWaterPressed.bind(this)},E.prototype.onWaterPressed=function(){this.donald.gotoAndInteractWithObject(this.waterPump)},c.exports=E}),define("com/duck/app/system/GameSaveManager",["require","exports","module","com/fido/system/LocalStorage","signals"],function(a,b,c){var d=a("com/fido/system/LocalStorage"),e=a("signals"),f=function(){this.onLoaded=new e,this.localStorage=new d("com.oneeyedrhino.filmclub"),this.save=null};f.prototype.loadGame=function(){this.loadGameFromLocalStorage()},f.prototype.loadGameFromLocalStorage=function(){var a=this.localStorage.getObject("save");a||(a=new g,this.localStorage.storeObject("save",a)),this.save=a,this.onLoaded.dispatch()},f.prototype.isPB=function(a,b){var c=this.save.levelBestScores[a];return b>c},f.prototype.getPB=function(a){var b=this.save.levelBestScores[a];return b},f.prototype.unlockLevel=function(a,b){return this.save.levelBestScores[a-1]>=b?0===this.save.levelStates[a]?(this.save.levelStates[a]=1,this.saveToStorage(),!0):!0:!1},f.prototype.saveScore=function(a,b){var c=this.save.levelBestScores[a];if(this.save.totalScore=this.save.totalScore||0,this.save.totalScore+=b,b>c){for(var d=0;d<this.save.levelBestScores.length;d++){var e=this.save.levelBestScores[d];b>e&&window.Highscores&&window.UserDetails.isUserSignedIn()&&Highscores.setUserScore(function(a){},function(a){},["allatbreak_overall"],[b])}this.save.levelBestScores[a]=b}window.Highscores&&window.UserDetails.isUserSignedIn()&&Highscores.setUserScore(function(a){},function(a){},["allatbreak_total"],[this.save.totalScore]),this.saveToStorage()},f.prototype.saveToStorage=function(){window.Data&&this.localStorage.storeObject("save",this.save)};var g=function(){this.levelStates=[1,0,0,0,0,0,0],this.levelBestScores=[0,0,0,0,0,0,0],this.tutorials=[0,0,0,0,0,0,0],this.totalScore=0};f.instance=new f,c.exports=f}),define("com/fido/app/transitions/CartoonTransition",["require","exports","module"],function(a,b,c){CartoonTransition=function(){this.circle=(new PIXI.Graphics).beginFill(1044480).drawCircle(0,0,100)},CartoonTransition.constructor=CartoonTransition,CartoonTransition.prototype.begin=function(a,b,c){this.screenManager=a,this.currentScreen=b,this.nextScreen=c,a.container.addChild(this.circle),a.container.mask=this.circle,this.circle.scale.set(this.targetScale),this.currentScreen?(this.currentScreen.onHide&&this.currentScreen.onHide(),TweenLite.to(this.circle.scale,1,{x:.001,y:.001,ease:Sine.easeOut,onComplete:this.onFadeout.bind(this)})):this.onFadeout()},CartoonTransition.prototype.onFadeout=function(){this.currentScreen&&(this.currentScreen.onHidden&&this.currentScreen.onHidden(),this.screenManager.container.removeChild(this.currentScreen)),this.nextScreen.onShow&&this.nextScreen.onShow(),this.nextScreen.resize&&this.nextScreen.resize(this.screenManager.w,this.screenManager.h),this.screenManager.container.addChild(this.nextScreen),TweenLite.to(this.circle.scale,1.2,{delay:.2,x:this.targetScale,y:this.targetScale,ease:Cubic.easeIn,onComplete:this.onFadein.bind(this)})},CartoonTransition.prototype.onFadein=function(){this.nextScreen.onShown&&this.nextScreen.onShown(),this.screenManager.container.removeChild(this.circle),this.screenManager.container.mask=null,this.screenManager.onTransitionComplete()},CartoonTransition.prototype.onResize=function(a,b){this.w=a,this.h=b,this.targetScale=a/100*1.2,this.circle.x=a/2,this.circle.y=b/2},c.exports=CartoonTransition}),define("com/duck/app/screens/GameScreen",["require","exports","module","PIXI","../../game/DuckGame","../buttons/AabButton","../system/GameSaveManager","com/fido/app/transitions/CartoonTransition","../../game/Levels","com/duck/app/Tracker"],function(a,b,c){var d=a("PIXI"),e=a("../../game/DuckGame"),f=(a("../buttons/AabButton"),a("../system/GameSaveManager"),a("com/fido/app/transitions/CartoonTransition")),g=(a("../../game/Levels"),a("com/duck/app/Tracker")),h=function(a){this.app=a,this.requiredAssets=["game"],d.DisplayObjectContainer.call(this)};h.prototype=Object.create(d.DisplayObjectContainer.prototype),h.prototype.init=function(){this.game=new e,this.game.onGameover.add(this.onGameover,this),this.addChild(this.game.view),this.addChild(this.game.hud),this.gameDetail={score:0,pb:0,isPB:0,nextUnlock:100,nextLevelUnlocked:!1},this.transition=new f,this.introShown=[]},h.prototype.onShow=function(){this.game.start(this.app.nextLevel),this.app.overlayManager.onShow.add(this.onOverlayShow,this),this.app.overlayManager.onHide.add(this.onOverlayHide,this),this.app.topMenu.gameMode(),g.trackAction("start")},h.prototype.onShown=function(){this.app.bg.visible=!1,this.app.overlayManager.popupScreen.setData(this.app.nextLevel),this.app.overlayManager.show("popup")},h.prototype.onGameover=function(){this.app.overlayManager.show("gameover",!0)},h.prototype.onHide=function(){this.app.bg.visible=!0,this.app.overlayManager.onShow.remove(this.onOverlayShow,this),this.app.overlayManager.onHide.remove(this.onOverlayHide,this)},h.prototype.onHidden=function(){this.game.pause(),this.app.topMenu.normalMode()},h.prototype.onOverlayShow=function(){this.game.pause()},h.prototype.onOverlayHide=function(){this.game.isGameover?(this.game.reset(),this.game.resume()):this.game.resume()},h.prototype.resize=function(a,b){this.game.view.x=a/2-568+50,this.game.view.y=b-640,this.game.world.view.filterArea=new d.Rectangle(0,0,a,b),this.game.fillGame.resize(a,b),this.game.hud.resize(a,b),this.game.w=a,this.game.h=b},c.exports=h}),define("com/duck/app/TopMenu",["require","exports","module","PIXI","com/fido/sound/SoundManager","com/duck/app/buttons/ClickButton","com/duck/app/buttons/WaterButton"],function(a,b,c){var d=a("PIXI"),e=a("com/fido/sound/SoundManager"),f=(a("com/duck/app/buttons/ClickButton"),a("com/duck/app/buttons/WaterButton")),g=function(a){this.app=a,d.DisplayObjectContainer.call(this),this.muteButton=f.smallButton("icon_sound.png"),this.addChild(this.muteButton.view),this.muteButton.onPress.add(this.onButtonPressed,this),this.settingsButton=f.smallButton("icon_mute.png"),this.settingsButton.onPress.add(this.onButtonPressed,this),this.pauseButton=f.smallButton("icon_pause.png"),this.addChild(this.pauseButton.view),this.pauseButton.onPress.add(this.onButtonPressed,this),this.pauseButton.view.visible=!1,e.sfx.onMuteToggle.add(this.onMuteToggle,this),e.music.onMuteToggle.add(this.onMuteToggle,this),this.isMobile=a.isMobile,this.isMobile||(this.settingsButton.view.scale.set(.75),this.pauseButton.view.scale.set(.75),this.muteButton.view.scale.set(.75))};g.prototype=Object.create(d.DisplayObjectContainer.prototype),g.prototype.gameMode=function(){this.isMobile?(this.pauseButton.view.visible=!0,this.muteButton.view.visible=!1):(this.pauseButton.view.visible=!0,this.settingsButton.view.visible=!1)},g.prototype.normalMode=function(){this.isMobile?(this.pauseButton.view.visible=!1,this.muteButton.view.visible=!0):(this.pauseButton.view.visible=!1,this.settingsButton.view.visible=!0)},g.prototype.onButtonPressed=function(a){a===this.muteButton?e.sfx.isMuted&&e.music.isMuted?(e.music.unmute(),e.sfx.unmute()):(e.music.mute(),e.sfx.mute()):a===this.settingsButton?this.app.overlayManager.show("settings"):a===this.pauseButton&&this.app.overlayManager.show("pause")},g.prototype.onMuteToggle=function(){this.muteButton.icon.setTexture(e.sfx.isMuted&&e.music.isMuted?d.Texture.fromFrame("icon_mute.png"):d.Texture.fromFrame("icon_sound.png"))},g.prototype.onShown=function(){this.game.start()},g.prototype.resize=function(a){if(this.isMobile){var b=130,c=0;this.muteButton.view.position.set(a-b-c+44,75),this.pauseButton.view.position.set(a-b-c+44,75)}else{var b=90,c=-25;this.muteButton.view.position.set(a-b-c,57.5),this.settingsButton.view.position.set(a-2*b-c,57.5),this.pauseButton.view.position.set(a-2*b-c,57.5)}},c.exports=g}),define("com/duck/app/TestScreen",["require","exports","module","PIXI","com/duck/app/buttons/AabButton","com/duck/app/buttons/AabLabelButton","com/duck/app/buttons/AabIconButton","com/fido/ui/buttons/Button","com/fido/system/Device","com/fido/game/gridworld/GridWorldTest","libs/gl-matrix","com/duck/game/AngryCutScene"],function(e,f,g){function h(a,b,c,d,e,f,g,h,j,k){var m=[1/a,0,0,0,1/b,0,0,0,1],n=i(c,d,e,f,g,h,j,k);return l.mat3.multiply(m,n)}function i(a,b,c,d,e,f,g,h){var i,j=a-c+e-g,k=b-d+f-h;if(j||k){var l=c-e,m=g-e,n=d-f,o=h-f,p=j*o-m*k,q=l*k-j*n,r=l*o-m*n;if(!r)return null;r=1/r;var s=p*r,t=q*r,u=c-a+s*c,v=g-a+t*g,w=d-b+s*d,x=h-b+t*h;return i=[u,v,a,w,x,b,s,t,1]}return i=[c-a,e-c,a,d-b,f-d,b,0,0,1]}function j(e,f){a=e[0],c=e[1],tx=e[2],b=e[3],d=e[4],ty=e[5],u=e[6],v=e[7],w=e[8];var g=f.x*u+f.y*v+w;if(!g)return{x:0,y:0};g=1/g;var h={x:0,y:0};return h.x=(f.x*a+f.y*c+tx)*g,h.y=(f.x*b+f.y*d+ty)*g,h}var k=e("PIXI"),l=(e("com/duck/app/buttons/AabButton"),e("com/duck/app/buttons/AabLabelButton"),e("com/duck/app/buttons/AabIconButton"),e("com/fido/ui/buttons/Button"),e("com/fido/system/Device"),e("com/fido/game/gridworld/GridWorldTest"),e("libs/gl-matrix")),m=e("com/duck/game/AngryCutScene"),n=function(a){this.app=a,k.DisplayObjectContainer.call(this),this.points=[],this.addPoint(150,0),this.addPoint(400,0),this.addPoint(600,350),this.addPoint(200,300),this.matrix=h(300,300,this.points[0].x,this.points[0].y,this.points[1].x,this.points[1].y,this.points[2].x,this.points[2].y,this.points[3].x,this.points[3].y),this.inverse=l.mat3.inverse(this.matrix),this.movePoints=[];for(var b=0;10>b;b++)this.addMovePoint(150,150);this.interactive=!0,this.hitArea=new k.Rectangle(0,0,1e5,1e5),this.mousemove=function(a){var b=this.movePoints[0];b.x=a.global.x,b.y=a.global.y;var c=this.movePoints[1],d=j(this.inverse,a.global);c.scale.set(2),c.alpha=.5,c.x=d.x,c.y=d.y}.bind(this),this.angry=new m,this.addChild(this.angry),this.angry.run()};n.prototype=Object.create(k.DisplayObjectContainer.prototype),n.prototype.resize=function(a,b){this.angry.resize(a,b)},n.prototype.addPoint=function(a,b){var c=(new k.Graphics).beginFill(16711680).drawCircle(0,0,20);this.addChild(c),c.x=a,c.y=b,this.points.push(c)},n.prototype.addMovePoint=function(a,b){var c=(new k.Graphics).beginFill(16763904).drawCircle(0,0,20);this.addChild(c),c.x=a,c.y=b;var d=j(this.matrix,c);c.x=d.x,c.y=d.y,this.movePoints.push(c)},n.prototype.updateTransform=function(){k.DisplayObjectContainer.prototype.updateTransform.call(this)},g.exports=n}),define("com/fido/game/system/GameSave",["require","exports","module","signals","com/fido/utils/FrameWait"],function(a,b,c){var d=a("signals"),e=a("com/fido/utils/FrameWait"),f=function(a,b){if(a=a||{id:"gb_game_save2",totalLevels:9,levelTargetScores:[10,20,30,40,50,60,70,80,90]},a.totalLevels||(a.totalLevels=a.levelTargetScores.length),!a.startingLockStates){a.startingLockStates=[];for(var c=0;c<this.config.totalLevels;c++)a.startingLockStates.push(f.LOCK_STATE.LOCKED);a.levelLockedStates[0]=f.LOCK_STATE.UNLOCKED}this.config=a,this.invalid=!1,this.saveProxy=b,this.onLoaded=new d};f.prototype.load=function(){this.saveProxy.onDataRecieved.addOnce(this.onDataRecieved,this),this.saveProxy.getData(this.config.id)},f.prototype.reset=function(){},f.prototype.setScore=function(a,b){var c=this.data.levelBestScores[a];if(b>c){this.data.levelBestScores[a]=b;var d=this.config.levelTargetScores[a];return b>d&&this.setLockState(a,f.LOCK_STATE.UNLOCKABLE),this.invalidate(),!0}return!1},f.prototype.setLockState=function(a,b){this.data.levelLockedStates[a]=b,this.invalidate()},f.prototype.getLockState=function(a){return this.data.levelLockedStates[a]},f.prototype.getBestScore=function(a){return this.data.levelBestScores[a]},f.prototype.getTargetScore=function(a){return this.config.levelTargetScores[a]},f.prototype.getLevelData=function(a){return{targetScore:this.config.levelTargetScores[a],bestScore:this.data.levelBestScores[a],locked:this.data.levelLockedStates[a]}},f.prototype.checkAndUnlockNextLevel=function(a){var b=this.config.levelTargetScores[a],c=this.data.levelBestScores[a-1];return c>b&&a<=this.config.totalLevels-1?(this.setLockState(a,f.LOCK_STATE.UNLOCKABLE),this.invalidate(),!0):!1},f.prototype.onDataRecieved=function(a){this.data=a||this.createSaveData(),this.onLoaded.dispatch()},f.prototype.createSaveData=function(){var a={};a.levelBestScores=[];for(var b=0;b<this.config.totalLevels;b++)a.levelBestScores.push(0);return a.levelLockedStates=this.config.startingLockStates.slice(),a},f.prototype.invalidate=function(){this.invalid||(this.invalid=!0,e.wait(function(){this.saveProxy&&(this.saveProxy.setData(this.config.id,this.data),this.invalid=!1)}.bind(this),1))},f.LOCK_STATE={LOCKED:0,UNLOCKABLE:1,UNLOCKED:2},c.exports=f});var Aes={};Aes.cipher=function(a,b){for(var c=4,d=b.length/c-1,e=[[],[],[],[]],f=0;4*c>f;f++)e[f%4][Math.floor(f/4)]=a[f];e=Aes.addRoundKey(e,b,0,c);for(var g=1;d>g;g++)e=Aes.subBytes(e,c),e=Aes.shiftRows(e,c),e=Aes.mixColumns(e,c),e=Aes.addRoundKey(e,b,g,c);e=Aes.subBytes(e,c),e=Aes.shiftRows(e,c),e=Aes.addRoundKey(e,b,d,c);for(var h=new Array(4*c),f=0;4*c>f;f++)h[f]=e[f%4][Math.floor(f/4)];return h},Aes.keyExpansion=function(a){for(var b=4,c=a.length/4,d=c+6,e=new Array(b*(d+1)),f=new Array(4),g=0;c>g;g++){var h=[a[4*g],a[4*g+1],a[4*g+2],a[4*g+3]];e[g]=h}for(var g=c;b*(d+1)>g;g++){e[g]=new Array(4);for(var i=0;4>i;i++)f[i]=e[g-1][i];if(g%c==0){f=Aes.subWord(Aes.rotWord(f));for(var i=0;4>i;i++)f[i]^=Aes.rCon[g/c][i]}else c>6&&g%c==4&&(f=Aes.subWord(f));for(var i=0;4>i;i++)e[g][i]=e[g-c][i]^f[i]}return e},Aes.subBytes=function(a,b){for(var c=0;4>c;c++)for(var d=0;b>d;d++)a[c][d]=Aes.sBox[a[c][d]];return a},Aes.shiftRows=function(a,b){for(var c=new Array(4),d=1;4>d;d++){for(var e=0;4>e;e++)c[e]=a[d][(e+d)%b];for(var e=0;4>e;e++)a[d][e]=c[e]}return a},Aes.mixColumns=function(a){for(var b=0;4>b;b++){for(var c=new Array(4),d=new Array(4),e=0;4>e;e++)c[e]=a[e][b],d[e]=128&a[e][b]?a[e][b]<<1^283:a[e][b]<<1;a[0][b]=d[0]^c[1]^d[1]^c[2]^c[3],a[1][b]=c[0]^d[1]^c[2]^d[2]^c[3],a[2][b]=c[0]^c[1]^d[2]^c[3]^d[3],a[3][b]=c[0]^d[0]^c[1]^c[2]^d[3]}return a},Aes.addRoundKey=function(a,b,c,d){for(var e=0;4>e;e++)for(var f=0;d>f;f++)a[e][f]^=b[4*c+f][e];return a},Aes.subWord=function(a){for(var b=0;4>b;b++)a[b]=Aes.sBox[a[b]];return a},Aes.rotWord=function(a){for(var b=a[0],c=0;3>c;c++)a[c]=a[c+1];return a[3]=b,a},Aes.sBox=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],Aes.rCon=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],Aes.Ctr={},Aes.Ctr.encrypt=function(a,b,c){var d=16;if(128!=c&&192!=c&&256!=c)return"";a=Utf8.encode(a),b=Utf8.encode(b);for(var e=c/8,f=new Array(e),g=0;e>g;g++)f[g]=isNaN(b.charCodeAt(g))?0:b.charCodeAt(g);var h=Aes.cipher(f,Aes.keyExpansion(f));h=h.concat(h.slice(0,e-16));for(var i=new Array(d),j=(new Date).getTime(),k=j%1e3,l=Math.floor(j/1e3),m=Math.floor(65535*Math.random()),g=0;2>g;g++)i[g]=k>>>8*g&255;for(var g=0;2>g;g++)i[g+2]=m>>>8*g&255;for(var g=0;4>g;g++)i[g+4]=l>>>8*g&255;for(var n="",g=0;8>g;g++)n+=String.fromCharCode(i[g]);for(var o=Aes.keyExpansion(h),p=Math.ceil(a.length/d),q=new Array(p),r=0;p>r;r++){for(var s=0;4>s;s++)i[15-s]=r>>>8*s&255;for(var s=0;4>s;s++)i[15-s-4]=r/4294967296>>>8*s;for(var t=Aes.cipher(i,o),u=p-1>r?d:(a.length-1)%d+1,v=new Array(u),g=0;u>g;g++)v[g]=t[g]^a.charCodeAt(r*d+g),v[g]=String.fromCharCode(v[g]);q[r]=v.join("")}var w=n+q.join("");return w=Base64.encode(w)},Aes.Ctr.decrypt=function(a,b,c){var d=16;if(128!=c&&192!=c&&256!=c)return"";a=Base64.decode(a),b=Utf8.encode(b);for(var e=c/8,f=new Array(e),g=0;e>g;g++)f[g]=isNaN(b.charCodeAt(g))?0:b.charCodeAt(g);var h=Aes.cipher(f,Aes.keyExpansion(f));h=h.concat(h.slice(0,e-16));var i=new Array(8);ctrTxt=a.slice(0,8);for(var g=0;8>g;g++)i[g]=ctrTxt.charCodeAt(g);for(var j=Aes.keyExpansion(h),k=Math.ceil((a.length-8)/d),l=new Array(k),m=0;k>m;m++)l[m]=a.slice(8+m*d,8+m*d+d);a=l;for(var n=new Array(a.length),m=0;k>m;m++){for(var o=0;4>o;o++)i[15-o]=m>>>8*o&255;for(var o=0;4>o;o++)i[15-o-4]=(m+1)/4294967296-1>>>8*o&255;for(var p=Aes.cipher(i,j),q=new Array(a[m].length),g=0;g<a[m].length;g++)q[g]=p[g]^a[m].charCodeAt(g),q[g]=String.fromCharCode(q[g]);n[m]=q.join("")}var r=n.join("");return r=Utf8.decode(r)};var Base64={};Base64.code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Base64.encode=function(a,b){b="undefined"==typeof b?!1:b;var c,d,e,f,g,h,i,j,k,l,m,n=[],o="",p=Base64.code;if(l=b?a.encodeUTF8():a,k=l.length%3,k>0)for(;k++<3;)o+="=",l+="\x00";for(k=0;k<l.length;k+=3)c=l.charCodeAt(k),d=l.charCodeAt(k+1),e=l.charCodeAt(k+2),f=c<<16|d<<8|e,g=f>>18&63,h=f>>12&63,i=f>>6&63,j=63&f,n[k/3]=p.charAt(g)+p.charAt(h)+p.charAt(i)+p.charAt(j);return m=n.join(""),m=m.slice(0,m.length-o.length)+o},Base64.decode=function(a,b){b="undefined"==typeof b?!1:b;var c,d,e,f,g,h,i,j,k,l,m=[],n=Base64.code;l=b?a.decodeUTF8():a;for(var o=0;o<l.length;o+=4)f=n.indexOf(l.charAt(o)),g=n.indexOf(l.charAt(o+1)),h=n.indexOf(l.charAt(o+2)),i=n.indexOf(l.charAt(o+3)),j=f<<18|g<<12|h<<6|i,c=j>>>16&255,d=j>>>8&255,e=255&j,m[o/4]=String.fromCharCode(c,d,e),64==i&&(m[o/4]=String.fromCharCode(c,d)),64==h&&(m[o/4]=String.fromCharCode(c));return k=m.join(""),b?k.decodeUTF8():k};var Utf8={};Utf8.encode=function(a){var b=a.replace(/[\u0080-\u07ff]/g,function(a){var b=a.charCodeAt(0);return String.fromCharCode(192|b>>6,128|63&b)});return b=b.replace(/[\u0800-\uffff]/g,function(a){var b=a.charCodeAt(0);return String.fromCharCode(224|b>>12,128|b>>6&63,128|63&b)})},Utf8.decode=function(a){var b=a.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(a){var b=(15&a.charCodeAt(0))<<12|(63&a.charCodeAt(1))<<6|63&a.charCodeAt(2);return String.fromCharCode(b)});return b=b.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(a){var b=(31&a.charCodeAt(0))<<6|63&a.charCodeAt(1);return String.fromCharCode(b)})},define("libs/AES",function(){}),function(a){"function"==typeof define?define("libs/qwest",a):"undefined"!=typeof module?module.exports=a:this.qwest=a}(function(){var win=window,limit=null,requests=0,request_stack=[],getXHR=function(){return win.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},version2=""===getXHR().responseType,qwest=function(method,url,data,options,before){data=data||null,options=options||{};var typeSupported=!1,xhr=getXHR(),async=void 0===options.async?!0:!!options.async,cache=options.cache,type=options.type?options.type.toLowerCase():"json",user=options.user||"",password=options.password||"",headers={"X-Requested-With":"XMLHttpRequest"},accepts={xml:"application/xml, text/xml",html:"text/html",json:"application/json, text/javascript",js:"application/javascript, text/javascript"},toUpper=function(a,b,c){return b+c.toUpperCase()},vars="",i,j,parseError="parseError",serialized,success_stack=[],error_stack=[],complete_stack=[],response,success,error,func,promises={success:function(a){return async?success_stack.push(a):success&&a.apply(xhr,[response]),promises},error:function(a){return async?error_stack.push(a):error&&a.apply(xhr,[response]),promises},complete:function(a){return async?complete_stack.push(a):a.apply(xhr),promises}},promises_limit={success:function(a){return request_stack[request_stack.length-1].success.push(a),promises_limit},error:function(a){return request_stack[request_stack.length-1].error.push(a),promises_limit},complete:function(a){return request_stack[request_stack.length-1].complete.push(a),promises_limit}},handleResponse=function(){var i,req,p;if(--requests,request_stack.length){for(req=request_stack.shift(),p=qwest(req.method,req.url,req.data,req.options,req.before),i=0;func=req.success[i];++i)p.success(func);
for(i=0;func=req.error[i];++i)p.error(func);for(i=0;func=req.complete[i];++i)p.complete(func)}try{if(!/^2/.test(xhr.status))throw xhr.status+" ("+xhr.statusText+")";var responseText="responseText",responseXML="responseXML";if(typeSupported&&void 0!==xhr.response)response=xhr.response;else switch(type){case"json":try{response=win.JSON?win.JSON.parse(xhr[responseText]):eval("("+xhr[responseText]+")")}catch(e){throw"Error while parsing JSON body"}break;case"js":response=eval(xhr[responseText]);break;case"xml":if(!xhr[responseXML]||xhr[responseXML][parseError]&&xhr[responseXML][parseError].errorCode&&xhr[responseXML][parseError].reason)throw"Error while parsing XML body";response=xhr[responseXML];break;default:response=xhr[responseText]}if(success=!0,async)for(i=0;func=success_stack[i];++i)func.apply(xhr,[response])}catch(e){if(error=!0,response="Request to '"+url+"' aborted: "+e,async)for(i=0;func=error_stack[i];++i)func.apply(xhr,[response])}if(async)for(i=0;func=complete_stack[i];++i)func.apply(xhr)};if(limit&&requests==limit)return request_stack.push({method:method,url:url,data:data,options:options,before:before,success:[],error:[],complete:[]}),promises_limit;if(++requests,win.ArrayBuffer&&(data instanceof ArrayBuffer||data instanceof Blob||data instanceof Document||data instanceof FormData))"GET"==method&&(data=null);else{var values=[],enc=encodeURIComponent;for(i in data)void 0!==data[i]&&values.push(enc(i)+(data[i].pop?"[]":"")+"="+enc(data[i]));data=values.join("&"),serialized=!0}if("GET"==method&&(vars+=data),null==cache&&(cache="POST"==method),cache||(vars&&(vars+="&"),vars+="__t="+Date.now()),vars&&(url+=(/\?/.test(url)?"&":"?")+vars),xhr.open(method,url,async,user,password),type&&version2)try{xhr.responseType=type,typeSupported=xhr.responseType==type}catch(e){}version2?xhr.onload=handleResponse:xhr.onreadystatechange=function(){4==xhr.readyState&&handleResponse()};for(i in headers)j=i.replace(/(^|-)([^-])/g,toUpper),headers[j]=headers[i],delete headers[i],xhr.setRequestHeader(j,headers[j]);return!headers["Content-Type"]&&serialized&&"POST"==method&&xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),headers.Accept||xhr.setRequestHeader("Accept",accepts[type]),before&&before.apply(xhr),xhr.send("POST"==method?data:null),promises};return{get:function(a,b,c,d){return qwest("GET",a,b,c,d)},post:function(a,b,c,d){return qwest("POST",a,b,c,d)},xhr2:version2,limit:function(a){limit=a}}}()),define("libs/GBAPI",["require","exports","module","./AES","./qwest"],function(a,b,c){var d=(a("./AES"),a("./qwest")),e=function(){this.targetFile="xxxx",this.sharedKey=null,this.lastEncryption=!1,this.defaultPerPage=20,this.defaultPageNumber=1};e.prototype.setTargetFile=function(a){this.targetFile=a},e.prototype.setSharedKey=function(a){this.sharedKey=a},e.prototype.sendScore=function(a,b){if(this._keyIsValid()){var c=" .|:=-=:|. ",d=Aes.Ctr.encrypt(a.name,this.sharedKey,256),e=Aes.Ctr.encrypt(a.score,this.sharedKey,256),f=Aes.Ctr.encrypt(d+c+e,this.sharedKey,256),a={val:f};this.lastEncryption=a,this._makeCall("add",a,b)}},e.prototype.getScores=function(a,b){a.perPage=a.perPage||this.defaultPerPage,a.pageNumber=a.pageNumber||this.defaultPageNumber,this._makeCall("get",a,b)},e.prototype._makeCall=function(a,b,c){d.post(this.targetFile,{f:a,params:JSON.stringify(b)},{type:"json"}).success(function(a){"function"==typeof c&&c(a)}).error(function(a){})},e.prototype._keyIsValid=function(){return null===this.sharedKey||""===this.sharedKey||"undefined"==typeof this.sharedKey?!1:!0},e.instance=new e,c.exports=e}),define("com/fido/game/system/GameServerProxy",["require","exports","module","signals","com/fido/system/LocalStorage","libs/GBAPI"],function(a,b,c){var d=a("signals"),e=a("com/fido/system/LocalStorage"),f=a("libs/GBAPI"),g=function(){this.modules={},this.onReady=new d,this.onSignin=new d,this.onScoresRecieved=new d,this.onUserScoreRecieved=new d,this.onDataRecieved=new d,f.instance.setSharedKey("1234")};g.prototype.init=function(a,b){this.local=a,this.localStorage=new e("disney_duck_goodboy"),f.instance.setTargetFile(b),this.onReady.dispatch()},g.prototype.setTargetFile=function(a){f.instance.setTargetFile(a)},g.prototype.loadLowestScore=function(){f.instance.getScores({perPage:1,pageNumber:50},function(a){window.lowestScore=-1,a.results.length>50&&(window.lowestScore=a.results[0].score_int)})},g.prototype.showSignInOverlay=function(){},g.prototype.isUserSignedIn=function(){return this.local?!1:void 0},g.prototype.getScores=function(){f.instance.getScores({perPage:50,pageNumber:0},this.onRawScoresRecieved.bind(this)),this.local},g.prototype.getUserScore=function(a){if(this.local)this.generateDummyUserScore(a);else if(!this.isUserSignedIn()){var b={username:"",score:"",rank:""};this.onUserScoreRecieved.dispatch(b)}},g.prototype.submitScore=function(){this.local||!this.isUserSignedIn()},g.prototype.setData=function(a,b){(this.local||!this.isUserSignedIn())&&this.localStorage.storeObject(a,b)},g.prototype.getData=function(a){if(this.local||!this.isUserSignedIn()){var b=this.localStorage.getObject(a);this.onDataRecieved.dispatch(b)}},g.prototype.onRawScoresRecieved=function(a){for(var b=a.results,c=[],d=0;d<b.length;d++){var e={username:b[d].name_str,score:b[d].score_int,rank:d};c.push(e)}this.onScoresRecieved.dispatch(c)},g.prototype.onRawUserScoreRecieved=function(a,b){var c=b[a],d=c[0],e={username:d.displayName,score:d.highscore,rank:d.rank};this.onUserScoreRecieved.dispatch(e)},g.prototype.onDataLoaded=function(a){this.onDataRecieved.dispatch(a)},g.prototype.onDataLoadFailed=function(){this.onDataRecieved.dispatch(null)},g.prototype.generateDummyScores=function(){for(var a=[],b=["Mat","Tom","John","Matt","James"],c=0;50>c;c++){var d={username:b[c%b.length],score:100*(50-c),rank:c};a.push(d)}this.onScoresRecieved.dispatch(a)},g.prototype.generateDummyUserScore=function(){var a=["Mat","Tom","John","Matt","James"],b={username:a[Math.random()*a.length|0],score:"12345",rank:"2"};this.onUserScoreRecieved.dispatch(b)},c.exports=new g}),define("com/duck/app/Background",["require","exports","module","PIXI"],function(a,b,c){var d=a("PIXI"),e=function(){d.DisplayObjectContainer.call(this),this.bg=new d.Sprite.fromImage(ASSET_URL+"img/game/menu_bg.jpg"),this.addChild(this.bg),this.vignette=new d.Sprite.fromImage(ASSET_URL+"img/game/menu_vignette.png"),this.addChild(this.vignette),this.vignette.anchor.set(.5),this.vignette.blendMode=d.blendModes.MULTIPLY,this.vignette.scale.set(1.1),this.count=0,this.resize(1136,670)};e.prototype=Object.create(d.DisplayObjectContainer.prototype),e.prototype.show=function(){this.bg.alpha=0,TweenLite.to(this.bg,2,{alpha:1,ease:Sine.easeInOut})},e.prototype.updateTransform=function(){this.ease=.8+.2*Math.random(),this.count+=.01,this.vignette.pivot.x=75*Math.sin(this.count),this.vignette.pivot.y=50*Math.cos(.6*this.count),this.vignette.alpha+=.05*(this.ease-this.vignette.alpha),d.DisplayObjectContainer.prototype.updateTransform.call(this)},e.prototype._renderWebGL=function(a){d.DisplayObjectContainer.prototype._renderWebGL.call(this,a)},e.prototype.resize=function(a,b){this.w=a,this.h=b,this.vignette.x=a/2,this.vignette.y=b/2,this.vignette.scale.set(1.75),this.bg.height=b},c.exports=e}),define("com/duck/app/overlay/screens/PauseScreen",["require","exports","module","PIXI","../../buttons/AabButton","com/fido/sound/SoundManager","../../buttons/WaterButton","com/fido/loader/Cache","com/duck/app/Tracker","com/duck/app/Tracker","com/duck/app/Tracker"],function(a,b,c){var d=a("PIXI"),e=(a("../../buttons/AabButton"),a("com/fido/sound/SoundManager")),f=a("../../buttons/WaterButton"),g=a("com/fido/loader/Cache");PauseScreen=function(a){d.DisplayObjectContainer.call(this),this.app=a,this.hasClose=!1,this.alpha=0,this.bg=new d.Sprite.fromImage(ASSET_URL+"img/game/box_overlay.png"),this.bg.anchor.set(.5),this.addChild(this.bg);var b={font:"66px "+window.HEADER_FONT,fill:"black",align:"center"},c=g.getJson("translation");this.title=new d.Text(c.strings.STR_GAME_PAUSED,b),this.addChild(this.title),this.title.anchor.set(.5),this.title.y=-182,this.playButton=f.bigButton("icon_play.png",!0),window.flipLanguage&&(this.playButton.icon.scale.x*=-1),this.restartButton=f.smallButton("icon_replay.png",!0),this.homeButton=f.smallButton("icon_home.png",!0),this.muteButton=f.smallButton("icon_sound.png",!0),this.helpButton=f.smallButton("icon_help.png",!0),this.addChild(this.playButton.view),this.addChild(this.restartButton.view),this.addChild(this.homeButton.view),this.addChild(this.muteButton.view),this.addChild(this.helpButton.view),this.homeButton.view.x=-110,this.homeButton.view.y=30,this.restartButton.view.x=-110,this.restartButton.view.y=-80,this.playButton.view.x=70,this.playButton.view.y=-30,this.muteButton.view.x=-70,this.muteButton.view.y=155,this.helpButton.view.x=70,this.helpButton.view.y=155,this.playButton.onPress.add(this.onPress,this),this.restartButton.onPress.add(this.onPress,this),this.homeButton.onPress.add(this.onPress,this),this.muteButton.onPress.add(this.onPress,this),this.helpButton.onPress.add(this.onPress,this)},PauseScreen.prototype=Object.create(d.DisplayObjectContainer.prototype),PauseScreen.prototype.onPress=function(b){b===this.restartButton?(a("com/duck/app/Tracker").trackAction("game_start","pause",window.level,"restart"),this.app.gameScreen.game.reset(),this.app.overlayManager.hide()):b===this.homeButton?(a("com/duck/app/Tracker").trackAction("exit","pause",window.level),this.app.screenManager.gotoScreenByID("title"),this.app.overlayManager.hide()):b===this.sfxButton?e.sfx.isMuted?e.sfx.unmute():e.sfx.mute():b===this.muteButton?e.sfx.isMuted&&e.music.isMuted?(e.music.unmute(),e.sfx.unmute()):(e.music.mute(),e.sfx.mute()):b===this.playButton?this.app.overlayManager.hide():b===this.helpButton&&(a("com/duck/app/Tracker").trackAction("help","pause",window.level),this.app.overlayManager.gotoScreenByID("tutorial"))},PauseScreen.prototype.onSfxMuteToggle=function(){this.sfxButton.setIcon(e.sfx.isMuted?"button_icon_sfxOff.png":"button_icon_sfxOn.png")},PauseScreen.prototype.onMusicMuteToggle=function(){this.musicButton.setIcon(e.music.isMuted?"button_icon_musicOff.png":"button_icon_musicOn.png")},PauseScreen.prototype.resize=function(a,b){this.w=a,this.h=b,this.x=a/2,this.y=b/2},c.exports=PauseScreen}),define("com/duck/app/buttons/DuckButton",["require","exports","module","com/fido/ui/buttons/Button"],function(a,b,c){var d=a("com/fido/ui/buttons/Button"),e=function(a){var b=new PIXI.Sprite.fromFrame("button_bg.png");b.anchor.set(.5);var c=PIXI.Sprite.fromFrame(a);c.anchor.set(.5),b.addChild(c),d.call(this,b)};e.prototype=Object.create(d.prototype),c.exports=e}),define("com/duck/app/overlay/screens/LoadingScreen",["require","exports","module","PIXI","../../buttons/AabButton","com/fido/sound/SoundManager","../../buttons/DuckButton"],function(a,b,c){{var d=a("PIXI"),e=(a("../../buttons/AabButton"),a("com/fido/sound/SoundManager"));a("../../buttons/DuckButton")}PauseScreen=function(a){d.DisplayObjectContainer.call(this),this.app=a,this.hasClose=!1,this.alpha=0,this.bg=new d.Sprite.fromImage(ASSET_URL+"img/game/box_overlay.png"),this.bg.anchor.set(.5);var b={font:"46px "+window.HEADER_FONT,fill:"white",align:"center"};this.chill=new d.Text("LOADING...",b),this.addChild(this.chill),this.chill.anchor.set(.5),this.chill.y=-65},PauseScreen.prototype=Object.create(d.DisplayObjectContainer.prototype),PauseScreen.prototype.onPress=function(a){a===this.playButton&&this.app.overlayManager.hide()},PauseScreen.prototype.onSfxMuteToggle=function(){this.sfxButton.setIcon(e.sfx.isMuted?"button_icon_sfxOff.png":"button_icon_sfxOn.png")},PauseScreen.prototype.onMusicMuteToggle=function(){this.musicButton.setIcon(e.music.isMuted?"button_icon_musicOff.png":"button_icon_musicOn.png")},PauseScreen.prototype.resize=function(a,b){this.w=a,this.h=b,this.x=a/2,this.y=b/2},c.exports=PauseScreen}),define("com/duck/app/overlay/screens/Leaderboard",["require","exports","module","PIXI","com/fido/utils/Utils"],function(a,b,c){var d=a("PIXI"),e=a("com/fido/utils/Utils");Leaderboard=function(a){d.DisplayObjectContainer.call(this),this.list=[],this.realHeight=0,this.viewHeight=a.frameHeight||240,this.viewWidth=a.frameWidth||800,this.scoreViewHeight=a.lineHeight||40,this.padding="object"==typeof a.padding?a.padding:{top:0,right:0,bottom:0,left:0},this.maskGraphic=(new d.Graphics).beginFill(16711680).drawRect(0,0,this.viewWidth,this.viewHeight-6),this.addChild(this.maskGraphic),this.mask=this.maskGraphic;var b=Math.floor(this.viewHeight/this.scoreViewHeight);b+=2,this.realHeight=b*this.scoreViewHeight;for(var c=0;b>c;c++){var e=new ScoreView(c);this.addChild(e),e.position.y=c*this.scoreViewHeight,this.list.push(e)}},Leaderboard.constructor=Leaderboard,Leaderboard.prototype=Object.create(d.DisplayObjectContainer.prototype),Object.defineProperty(Leaderboard.prototype,"scrollPosition",{get:function(){return this._scrollPosition},set:function(a){this._scrollPosition=a,this.updateScrollPosition()}}),Leaderboard.prototype.setData=function(a){this.data=a;for(var b=0;b<this.list.length;b++){var c=this.list[b];c.id=999999999999}this.alpha=0,TweenLite.to(this,.3,{alpha:1}),this.scrollHeight=a.length*this.scoreViewHeight+this.padding.top+this.padding.bottom,this.updateScrollPosition()},Leaderboard.prototype.updateScrollPosition=function(){if(this.data)for(var a=0;a<this.list.length;a++){var b=this.list[a];b.position.y=a*this.scoreViewHeight+this._scrollPosition+this.padding.top,b.position.y+=this.scoreViewHeight;var c=Math.floor(b.position.y/this.realHeight);c*=this.list.length,c-=a,c*=-1,b.id!=c&&(b.id=c,b.visible=b.id>=0&&b.id<this.data.length,b.visible&&(b.labelNumber.setText(b.id+1),b.setScore(this.data[c]))),b.position.y%=this.realHeight,b.position.y<0&&(b.position.y+=this.realHeight),b.position.y-=this.scoreViewHeight}},ScoreView=function(a){d.DisplayObjectContainer.call(this);var b=a+1+".";this.labelNumber=new d.Text(b,{font:"50px "+window.MAIN_FONT,fill:"#000000",align:"left",dropShadowColor:"#666"}),this.labelName=new d.Text("0",{font:"50px "+window.MAIN_FONT,fill:"#000000",align:"left",dropShadowColor:"#666"}),this.labelScore=new d.Text("0",{font:"50px "+window.MAIN_FONT,fill:"#000000",align:"left",dropShadowColor:"#666"}),this.labelNumber.position.x=40,this.labelName.position.x=150,this.labelScore.anchor.x=1,this.labelScore.position.x=780,this.addChild(this.labelNumber),this.addChild(this.labelName),this.addChild(this.labelScore)},ScoreView.constructor=ScoreView,ScoreView.prototype=Object.create(d.DisplayObjectContainer.prototype),ScoreView.colors=["#e3b43e","#93b2c7","#985b0b","#58575c"],ScoreView.prototype.setScore=function(a){var b=ScoreView.colors[ScoreView.colors.length-1];a.rank<ScoreView.colors.length-1&&(b=ScoreView.colors[a.rank]),this.labelNumber.style.fill=this.labelName.style.fill=this.labelScore.style.fill=b,this.labelName.setText(a.username),this.labelScore.setText(e.formatScore(a.score).toUpperCase())},Leaderboard.ScoreView=ScoreView,c.exports=Leaderboard}),define("com/fido/physics/DoubleSpring",["require","exports","module"],function(a,b,c){var d=function(){this.x=0,this.ax=0,this.dx=0,this.tx=0,this.y=0,this.ay=0,this.dy=0,this.ty=0,this.max=160,this.damp=.8,this.springiness=.3};d.constructor=d,d.prototype.update=function(){this.ax=(this.tx-this.x)*this.springiness,this.dx+=this.ax,this.dx*=this.damp,this.dx<-this.max?this.dx=-this.max:this.dx>this.max&&(this.dx=this.max),this.x+=this.dx,this.ay=(this.ty-this.y)*this.springiness,this.dy+=this.ay,this.dy*=this.damp,this.dy<-this.max?this.dy=-this.max:this.dy>this.max&&(this.dy=this.max),this.y+=this.dy},d.prototype.reset=function(){this.x=0,this.ax=0,this.dx=0,this.tx=0,this.y=0,this.ay=0,this.dy=0,this.ty=0},c.exports=d}),define("com/fido/ui/PixiScrollbar",["require","exports","module","../physics/Spring","com/fido/system/Ticker","./PixiTrackpad"],function(a,b,c){{var d=(a("../physics/Spring"),a("com/fido/system/Ticker"));a("./PixiTrackpad")}PixiScrollBar=function(a){this.topMargin=15,this.bottomMargin=15,this.yTouchOffset=0,this.dragging=!1,this.trackpad=a.trackpad,this.targetPosition={x:0,y:0},this.container=a.target,this.guideLine=new PIXI.Sprite.fromFrame("scrollTrack.png"),this.guideLine.anchor.set(1,0),this.guideLine.position.x=630,this.guideLine.position.y=1,this.guideLine.height=229,this.guideLine.hitArea=new PIXI.Rectangle(-10,0,40,300),this.guideLine.interactive=!0,this.guideLine.buttonMode=!0,this.guideButton=new PIXI.Sprite.fromFrame("scroller.png"),this.guideButton.anchor.set(1,.5),this.guideButton.position.x=642,this.guideButton.position.y=this.topMargin+.5*this.guideButton.height,this.guideButton.buttonMode=!0,this.container.addChild(this.guideLine),this.container.addChild(this.guideButton),this.guideLine.touchstart=this.guideLine.mousedown=this.onDown.bind(this),this.guideLine.touchend=this.guideLine.touchendoutside=this.guideLine.mouseup=this.guideLine.mouseupoutside=this.onUp.bind(this),this.guideLine.mousemove=this.guideLine.touchmove=this.onMove.bind(this),d.instance.add(this.update,this)},PixiScrollBar.prototype.onDown=function(a){this.dragging=!0,this.yTouchOffset=a.getLocalPosition(this.guideButton).y,this.onMove(a)},PixiScrollBar.prototype.onUp=function(){this.dragging=!1,this.yTouchOffset=0},PixiScrollBar.prototype.onMove=function(a){this.panelHeight=this.container.viewHeight,this.scrollHeight=this.container.scrollHeight-this.panelHeight,this.scrollBarPercentage=0,this.scrollableDistance=this.panelHeight-this.topMargin-this.bottomMargin-this.guideButton.height,this.scrollBarRatio=this.scrollHeight/this.scrollableDistance,this.dragging===!0&&(this.targetPosition=a.getLocalPosition(this.container),this.targetPosition.y<this.topMargin+.5*this.guideButton.height&&(this.targetPosition.y=this.topMargin+.5*this.guideButton.height),this.targetPosition.y>this.scrollableDistance+this.topMargin+.5*this.guideButton.height&&(this.targetPosition.y=this.scrollableDistance+this.topMargin+.5*this.guideButton.height))},PixiScrollBar.prototype.update=function(){if(this.dragging){var a=-((this.guideButton.position.y-this.topMargin-.5*this.guideButton.height)*this.scrollBarRatio);this.trackpad.easeToPosition(0,a),this.guideButton.position.y=this.targetPosition.y}else this.guideButton.position.y=-1*this.trackpad.valueY/this.scrollBarRatio+this.topMargin+.5*this.guideButton.height},c.exports=PixiScrollBar}),define("com/fido/ui/PixiTrackpad",["require","exports","module","../physics/DoubleSpring","./PixiScrollbar","com/fido/system/Device","signals"],function(a,b,c){var d=a("../physics/DoubleSpring"),e=a("./PixiScrollbar"),f=a("com/fido/system/Device"),g=a("signals");PixiTrackpad=function(a){this.spring=new d,this.onScrollUpdate=new g,this.target=a.target,this.value=0,this.easingValue=0,this.dragOffset=0,this.dragging,this.speed=0,this.size=1024,this.maxSlots=1,this.capMovement=!0,this.prevPosition=0,this.valueY=0,this.easingValueY=0,this.dragOffsetY=0,this.speedY=0,this.prevPositionY=0,this.didMove=!1,this.didMoveY=!1,this.target.interactive=!0,this.scrollMin=-1/0,this.scrollMax=0,this.scrollMinY=-1/0,this.scrollMaxY=0,this.snapTo=!1,"undefined"!=typeof a.scrollbar&&f.mobile===!1&&f.iPad===!1&&(this.scrollBar=new e({target:a.scrollTarget,trackpad:this})),this.target.touchstart=this.target.mousedown=this.onDown.bind(this)},PixiTrackpad.constructor=PixiTrackpad,PixiTrackpad.prototype.unlock=function(){this.locked=!1,this.speed=0,this.easingValue=this.value,this.easingValueY=this.valueY,this.speedY=0,this.speedX=0,window.onmousewheel=this.onMouseWheel.bind(this)},PixiTrackpad.prototype.lock=function(){this.locked=!0,window.onmousewheel=null},PixiTrackpad.prototype.update=function(){if(this.value+=.3*(this.easingValue-this.value),this.valueY+=.3*(this.easingValueY-this.valueY),!this.locked)if(this.dragging){var a=this.easingValue-this.prevPosition;a*=.7,this.speed+=.5*(a-this.speed),this.prevPosition=this.easingValue;var b=this.easingValueY-this.prevPositionY;b*=.7,this.speedY+=.5*(b-this.speedY),this.prevPositionY=this.easingValueY}else this.snapTo?(this.spring.update(),this.easingValue=this.spring.x,this.easingValueY=this.spring.y,this.capMovement&&(this.easingValue>this.scrollMax?this.easingValue+=.3*(this.scrollMax-this.easingValue):this.easingValue<this.scrollMin&&(this.easingValue+=.3*(this.scrollMin-this.easingValue)),this.easingValueY>this.scrollMaxY?this.easingValueY+=.3*(this.scrollMaxY-this.easingValueY):this.easingValueY<this.scrollMinY&&(this.easingValueY+=.3*(this.scrollMinY-this.easingValueY)))):(this.speed*=.95,this.easingValue+=this.speed,this.speedY*=.95,this.easingValueY+=this.speedY,this.capMovement&&(this.easingValue>this.scrollMax?this.easingValue+=.3*(this.scrollMax-this.easingValue):this.easingValue<this.scrollMin&&(this.easingValue+=.3*(this.scrollMin-this.easingValue)),this.easingValueY>this.scrollMaxY?this.easingValueY+=.3*(this.scrollMaxY-this.easingValueY):this.easingValueY<this.scrollMinY&&(this.easingValueY+=.3*(this.scrollMinY-this.easingValueY))))},PixiTrackpad.prototype.stop=function(){this.speed=0,this.speedY=0,this.value=this.prevPosition=this.easingValue,this.valueY=this.prevPositionY=this.easingValueY},PixiTrackpad.prototype.setPosition=function(a,b){this.value=this.easingValue=a,this.valueY=this.easingValueY=b},PixiTrackpad.prototype.easeToPosition=function(a,b){this.easingValue=a,this.easingValueY=b},PixiTrackpad.prototype.onDown=function(a){this.locked||(this.didMove=!1,this.didMoveY=!1,this.checkX=a.global.x,this.checkY=a.global.y,this.dragging=!0,this.dragOffset=a.global.x-this.value,this.dragOffsetY=a.global.y-this.valueY,this.target.touchend=this.target.touchendoutside=this.target.mouseup=this.target.mouseupoutside=this.onUp.bind(this),this.target.touchmove=this.target.mousemove=this.onMove.bind(this))},PixiTrackpad.prototype.onMouseWheel=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1,this.locked||(this.speed=.15*a.wheelDeltaX,this.speedY=.15*a.wheelDeltaY)},PixiTrackpad.prototype.onUp=function(){if(!this.locked){if(this.dragging=!1,this.snapTo){if(this.didMove){if(this.spring.dx=this.speed,this.speed<0)var a=Math.floor(this.easingValue/this.size);else var a=Math.ceil(this.easingValue/this.size);if(this.capMovement&&(a>0?a=0:a<-this.maxSlots&&(a=-this.maxSlots)),this.spring.tx=a*this.size,this.spring.dy=this.speedY,this.speedY<0)var a=Math.floor(this.easingValueY/this.size);else var a=Math.ceil(this.easingValueY/this.size);this.capMovement&&(a>0?a=0:a<-this.maxSlots&&(a=-this.maxSlots)),this.spring.ty=a*this.size}this.spring.x=this.easingValue,this.spring.y=this.easingValueY}this.cap(),this.target.mouseup=null,this.target.mousemove=null}},PixiTrackpad.prototype.cap=function(){this.capMovement&&(this.snapTo&&(this.spring.tx>this.scrollMax?this.spring.tx=this.scrollMax:this.spring.tx<this.scrollMin&&(this.spring.tx=this.scrollMin)),this.snapTo&&(this.spring.ty>this.scrollMaxY?this.spring.ty=this.scrollMaxY:this.spring.ty<this.scrollMinY&&(this.spring.ty=this.scrollMinY)))},PixiTrackpad.prototype.setSlot=function(a){this.spring.tx=a*-this.size,this.cap()},PixiTrackpad.prototype.nextSlot=function(){this.spring.tx-=this.size,this.spring.tx<-(this.maxSlots*this.size)&&(this.spring.tx=-(this.maxSlots*this.size)),this.cap()},PixiTrackpad.prototype.nextSlotY=function(){this.spring.ty-=this.size,this.spring.ty<-(this.maxSlots*this.size)&&(this.spring.ty=-(this.maxSlots*this.size)),this.cap()},PixiTrackpad.prototype.previousSlot=function(){this.spring.tx+=this.size,this.cap()},PixiTrackpad.prototype.previousSlotY=function(){this.spring.ty+=this.size,this.cap()},PixiTrackpad.prototype.setSize=function(a){this.size=a,this.scrollbar&&this.scrollBar.setSize(a)},PixiTrackpad.prototype.setSlots=function(a){this.maxSlots=a-1},PixiTrackpad.prototype.onMove=function(a){if(!this.locked){var b=Math.abs(this.checkX-a.global.x);b>10&&(this.didMove=!0);var b=Math.abs(this.checkY-a.global.y);b>10&&(this.didMove=!0),this.easingValue=a.global.x-this.dragOffset,this.easingValueY=a.global.y-this.dragOffsetY,this.capMovement&&(this.easingValue>this.scrollMax?this.easingValue=this.scrollMax+.3*(this.easingValue-this.scrollMax):this.easingValue<this.scrollMin&&(this.easingValue=this.scrollMin+.3*(this.easingValue-this.scrollMin)),this.easingValueY>this.scrollMaxY?this.easingValueY=this.scrollMaxY+.3*(this.easingValueY-this.scrollMaxY):this.easingValueY<this.scrollMinY&&(this.easingValueY=this.scrollMinY+.3*(this.easingValueY-this.scrollMinY)))}},c.exports=PixiTrackpad}),define("com/duck/app/overlay/screens/OptionsTab",["require","exports","module","PIXI","../../buttons/DuckButton","com/fido/sound/SoundManager","com/fido/utils/Utils","../../buttons/WaterButton","com/fido/game/system/GameSave","com/fido/loader/Cache","com/duck/app/Tracker","com/duck/app/Tracker","com/duck/app/Tracker"],function(a,b,c){var d=a("PIXI"),e=(a("../../buttons/DuckButton"),a("com/fido/sound/SoundManager"),a("com/fido/utils/Utils")),f=a("../../buttons/WaterButton"),g=(a("com/fido/game/system/GameSave"),a("com/fido/loader/Cache")),h=function(a){d.DisplayObjectContainer.call(this),this.app=a,this.restartButton=f.smallButton("icon_right.png",!0),this.homeButton=f.smallButton("icon_home.png",!0),this.submitButton=f.smallButton("icon_submit.png",!0),this.addChild(this.restartButton.view),this.addChild(this.homeButton.view),this.homeButton.view.scale.set(.8),this.restartButton.view.scale.set(.8),this.homeButton.view.x=230,this.homeButton.view.y=200,this.restartButton.view.x=340,this.restartButton.view.y=200,this.submitButton.view.x=230,this.submitButton.view.y=155,this.restartButton.onPress.add(this.onPress,this),this.homeButton.onPress.add(this.onPress,this),this.scoreText=new d.Text("-",{fill:"#000000",font:"38px "+window.MAIN_FONT}),this.scoreText.alpha=.6,this.scoreText.x=-355,this.scoreText.y=180,this.addChild(this.scoreText)};h.prototype=Object.create(d.DisplayObjectContainer.prototype),h.prototype.onShow=function(){var a=window.__isPB,b=window.__unlocked;a&&b?(this.gotoNextLevel=!0,this.restartButton.icon.setTexture(d.Texture.fromFrame("icon_play_small.png"))):b?(this.gotoNextLevel=!1,this.restartButton.icon.setTexture(d.Texture.fromFrame("icon_replay.png"))):(this.gotoNextLevel=!1,this.restartButton.icon.setTexture(d.Texture.fromFrame("icon_replay.png"))),this.scoreText.setText(" "+g.getJson("translation").strings.STR_YOUR_SCORE+" "+e.formatScore(this.app.gameScreen.game.score))},h.prototype.onPress=function(b){b===this.restartButton?this.gotoNextLevel?(this.app.screenManager.gotoScreenByID("level"),this.app.overlayManager.hide()):(this.app.gameScreen.game.reset(),this.app.overlayManager.hide(),a("com/duck/app/Tracker").trackAction("game_start","results",window.level,"replay")):b===this.homeButton?(a("com/duck/app/Tracker").trackAction("exit","results",window.level),this.app.screenManager.gotoScreenByID("title"),this.app.overlayManager.hide()):b===this.submitButton&&(a("com/duck/app/Tracker").trackAction("leaderboard","results",window.level),this.app.overlayManager.gotoScreenByID("submit"))},c.exports=h}),define("com/duck/app/overlay/screens/LeaderboardScreen",["require","exports","module","PIXI","./Leaderboard","com/fido/ui/PixiTrackpad","com/fido/utils/Utils","com/fido/game/system/GameServerProxy","../../buttons/WaterButton","com/fido/loader/Cache","./OptionsTab"],function(a,b,c){var d=a("PIXI"),e=a("./Leaderboard"),f=a("com/fido/ui/PixiTrackpad"),g=a("com/fido/utils/Utils"),h=a("com/fido/game/system/GameServerProxy"),i=a("../../buttons/WaterButton"),j=a("com/fido/loader/Cache"),k=a("./OptionsTab"),l=function(a){this.app=a,this.gameName="";var b=j.getJson("translation");d.DisplayObjectContainer.call(this);var c=new d.Sprite.fromImage(ASSET_URL+"img/game/box_leaderboard.png");c.anchor.set(.5,.5),c.position.y+=20,this.addChild(c);var g={font:"66px "+window.HEADER_FONT,fill:"black",align:"center"};this.title=new d.Text(b.strings.STR_GAME_LEADERBOARD,g),this.addChild(this.title),this.title.anchor.set(.5),this.title.y=-182;var h={frameWidth:c.width,frameHeight:c.height-174-35-4,lineHeight:50,padding:{top:0,right:0,bottom:0,left:0}};this.leaderboard=new e(h),this.leaderboard.alpha=0,this.addChild(this.leaderboard),this.hitArea=new d.Rectangle(-(.5*c.width),-(.5*c.height),c.width,c.height),this.leaderboard.position.x=-(.5*c.width)+30,this.leaderboard.position.y=-(.5*c.height)+82+20+3,this.myScoreView=new MyScoreView,this.myScoreView.position.x=this.leaderboard.position.x,this.myScoreView.position.y=154;var l={target:this,scrollTarget:this.leaderboard};this.trackpad=new f(l),this.trackpad.scrollMin=0,this.trackpad.scrollMax=610,this.trackpad.capMovement=!0,this.showingTotalScore,this.optionsTab=new k(a),this.addChild(this.optionsTab),this.homeButton=i.smallButton("icon_home.png",!0),this.homeButton.view.scale.set(.8),this.homeButton.view.x=340,this.homeButton.view.y=200,this.addChild(this.homeButton.view),this.homeButton.onPress.add(this.onHomePressed,this)};l.prototype=Object.create(d.DisplayObjectContainer.prototype),l.prototype.setName=function(a){this.gameName=a,this.title.setText("Leaderboard : "+this.gameName,this.titleFormat)},l.prototype.onHomePressed=function(){this.app.overlayManager.hide()},l.prototype.onTotalScorePressed=function(){0===this.buttonTotalScore.state&&(this.buttonTotalScore.toggleOn(),this.buttonTotalScore.state=1,this.loadTotalScores(),this.buttonSinglePlay.toggleOff(),this.buttonSinglePlay.state=0,this.trackpad.easeToPosition(0,0))},l.prototype.onSinglePlayPressed=function(){0===this.buttonSinglePlay.state&&(this.buttonSinglePlay.toggleOn(),this.buttonSinglePlay.state=1,this.loadSinglePlayScores(),this.buttonTotalScore.toggleOff(),this.buttonTotalScore.state=0,this.trackpad.easeToPosition(0,0))},l.prototype.loadTotalScores=function(){this.loadScores("allatbreak_total")},l.prototype.loadSinglePlayScores=function(){this.loadScores("allatbreak_overall")},l.prototype.updateTransform=function(){this.trackpad.update(),this.leaderboard.scrollPosition=this.trackpad.valueY,d.DisplayObjectContainer.prototype.updateTransform.call(this)},l.prototype.loadScores=function(a){h.onScoresRecieved.addOnce(this.onScoresLoaded,this),h.getScores(a)},l.prototype.onHide=function(){this.leaderboard.alpha=0},l.prototype.onHidden=function(){this.app.overlayManager.closeButton.view.pivot.x=0},l.prototype.onShow=function(){window.titleMode?(this.homeButton.view.visible=!0,this.optionsTab.visible=!1):(this.homeButton.view.visible=!1,this.optionsTab.visible=!0,this.optionsTab.onShow()),this.app.overlayManager.closeButton.view.pivot.x=-100,this.loadScores(0),this.myScoreView.onShow()},l.prototype.onScoresLoaded=function(a){this.leaderboard.setData(a),this.trackpad.scrollMinY=-(this.leaderboard.scrollHeight-this.leaderboard.viewHeight),this.myScoreView.onShow(),this.leaderboard.alpha=1},l.prototype.onUserDataRecieved=function(a){a||(a={username:"",score:"",rank:""}),this.myScoreView.setScore(a)},l.prototype.resize=function(a,b){this.w=a,this.h=b,this.x=a/2,this.y=b/2},MyScoreView=function(){d.DisplayObjectContainer.call(this),this.labelNumber=new d.Text("99",{font:"50px "+window.MAIN_FONT,fill:"#000000",align:"left",dropShadowColor:"#666"}),this.labelName=new d.Text("MAT",{font:"50px "+window.MAIN_FONT,fill:"#000000",align:"left",dropShadowColor:"#666"}),this.labelScore=new d.Text("0",{font:"50px "+window.MAIN_FONT,fill:"#000000",align:"left",dropShadowColor:"#666"}),this.labelNumber.position.x=40,this.labelName.position.x=150,this.labelScore.anchor.x=1,this.labelScore.position.x=780,this.addChild(this.labelNumber),this.addChild(this.labelName),this.addChild(this.labelScore)},MyScoreView.constructor=ScoreView,MyScoreView.prototype=Object.create(d.DisplayObjectContainer.prototype),MyScoreView.prototype.setScore=function(a){""===a.username&&(a.username="YourNameHere",a.score=999999),""===a.username&&(this.labelName.setText(a.username),this.labelScore.setText(g.formatScore(a.score).toUpperCase()),this.labelNumber.setText(a.rank+1))},MyScoreView.prototype.onShow=function(){this.labelNumber.alpha=0,this.labelName.alpha=0,this.labelScore.alpha=0,TweenLite.to(this.labelNumber,1,{alpha:1,delay:.25}),TweenLite.to(this.labelName,1,{alpha:1,delay:.5}),TweenLite.to(this.labelScore,1,{alpha:1,delay:.75})
},c.exports=l}),define("com/fido/app/transitions/NoTransition",["require","exports","module"],function(a,b,c){var d=function(){};d.constructor=d,d.prototype.begin=function(a,b,c){this.screenManager=a,this.currentScreen=b,this.nextScreen=c,this.currentScreen?(this.currentScreen.onHide&&this.currentScreen.onHide(),this.onFadeout()):this.onFadeout()},d.prototype.onFadeout=function(){this.currentScreen&&(this.currentScreen.onHidden&&this.currentScreen.onHidden(),this.screenManager.container.removeChild(this.currentScreen),this.currentScreen.alpha=1),this.nextScreen.alpha=1,this.nextScreen.onShow&&this.nextScreen.onShow(),this.nextScreen.resize&&this.nextScreen.resize(this.screenManager.w,this.screenManager.h),this.screenManager.container.addChild(this.nextScreen),this.onFadein()},d.prototype.onFadein=function(){this.nextScreen.onShown&&this.nextScreen.onShown(),this.screenManager.onTransitionComplete()},d.prototype.resize=function(a,b){this.w=a,this.h=b},c.exports=d}),define("com/duck/app/overlay/screens/GameoverScreen",["require","exports","module","PIXI","../../buttons/DuckButton","com/fido/sound/SoundManager","../../buttons/AabLabelButton","com/fido/utils/Utils","../../buttons/WaterButton","com/fido/game/system/GameSave","com/fido/loader/Cache","com/fido/app/transitions/NoTransition","com/fido/Flash","com/duck/app/Tracker","com/duck/app/Tracker","com/duck/app/Tracker"],function(a,b,c){var d=a("PIXI"),e=(a("../../buttons/DuckButton"),a("com/fido/sound/SoundManager"),a("../../buttons/AabLabelButton"),a("com/fido/utils/Utils")),f=a("../../buttons/WaterButton"),g=(a("com/fido/game/system/GameSave"),a("com/fido/loader/Cache")),h=a("com/fido/app/transitions/NoTransition"),i=a("com/fido/Flash"),j=function(a){d.DisplayObjectContainer.call(this),this.app=a,this.flash=new i(1136,680),this.flash.x=-568,this.flash.y=-340,this.transition=new h,this.hasClose=!1,this.bg=new d.Sprite.fromImage(ASSET_URL+"img/game/angerblast.jpg"),this.bg.anchor.set(.5),this.bg.scale.set(1.7),this.addChild(this.bg),this.flairContainer=new d.DisplayObjectContainer,this.addChild(this.flairContainer),this.flairContainer.scale.x=2.05,this.flairContainer.scale.y=1.14,this.flair1=new d.Sprite.fromFrame("results_burst.png"),this.flair2=new d.Sprite.fromFrame("results_lines.png"),this.flair1.height=800,this.flair2.height=800,this.flair1.scale.set(1.7),this.flair1.anchor.set(.5),this.flair2.anchor.set(.5),this.flairContainer.addChild(this.flair1),this.flairContainer.addChild(this.flair2),this.alpha=0,this.bg=new d.Sprite.fromImage(ASSET_URL+"img/game/box_overlay.png"),this.bg.anchor.set(.5),this.addChild(this.bg);var b={font:"66px "+window.HEADER_FONT,fill:"black",align:"center"},c=g.getJson("translation");this.title=new d.Text(c.strings.STR_GAME_RESULTS,b),this.addChild(this.title),this.title.anchor.set(.5),this.title.y=-182,this.restartButton=f.smallButton("icon_replay.png",!0),this.homeButton=f.smallButton("icon_home.png",!0),this.submitButton=f.smallButton("icon_submit.png",!0),this.addChild(this.restartButton.view),window.showLeaderboards||this.addChild(this.homeButton.view),this.homeButton.view.x=-70,this.homeButton.view.y=155,this.restartButton.view.x=70,this.restartButton.view.y=155,this.submitButton.view.x=230,this.submitButton.view.y=-70,this.restartButton.onPress.add(this.onPress,this),this.homeButton.onPress.add(this.onPress,this),this.submitButton.onPress.add(this.onPress,this),this.detail=new d.Text("DET",b),this.detail.anchor.set(.5),this.detail.y=0,this.donald=new d.Sprite.fromFrame("results_donald.png"),this.donald.anchor.set(.5,1),this.donald.position.set(230,211),this.medal=new d.Sprite.fromFrame("medal_gold.png"),this.medal.anchor.set(.5,.5),this.medal.position.set(-220,-28),this.addChild(this.medal),this.addChild(this.donald),this.scoreTitle=new d.Text(c.strings.STR_GAME_SCORE,{fill:"#000000",font:"34px "+window.HEADER_FONT}),this.scoreText=new d.Text("100,000",{fill:"#000000",font:"58px "+window.MAIN_FONT}),this.targetTitle=new d.Text(c.strings.STR_CAN_YOU_MAKE,{fill:"#000000",font:"34px "+window.HEADER_FONT}),this.targetText=new d.Text("100,000",{fill:"#000000",font:"56px "+window.MAIN_FONT}),this.scoreTitle.alpha=.6,this.targetTitle.alpha=.6,this.addChild(this.scoreText),this.addChild(this.scoreTitle),this.addChild(this.targetTitle),this.addChild(this.targetText),this.scoreTitle.position.set(-138,-115),this.scoreText.position.set(-100,-80),this.targetTitle.position.set(-138,-20),this.targetText.position.set(-100,15),this.addChild(this.flash)};j.prototype=Object.create(d.DisplayObjectContainer.prototype),j.prototype.onShow=function(){var a=this.app.gameSave.setScore(this.app.nextLevel.id,this.app.gameScreen.game.score),b=this.app.gameSave.checkAndUnlockNextLevel(this.app.nextLevel.id+1);window.__isPB=a,window.__unlocked=b;var c=g.getJson("translation");if(this.scoreText.setText(e.formatScore(this.app.gameScreen.game.score)),a&&b)this.targetTitle.y=10,this.targetTitle.setText(c.strings.STR_LEVEL_UNLOCKED),this.targetText.setText(c.strings.STR_WELL_DONE),this.targetText.visible=!1,this.gotoNextLevel=!0,this.restartButton.icon.setTexture(d.Texture.fromFrame("icon_play_small.png"));else if(b){this.targetTitle.y=-20,this.targetTitle.setText(c.strings.STR_CAN_YOU_MAKE),this.targetText.visible=!0;var f=1e4*Math.ceil(this.app.gameScreen.game.score/1e4)+5e3;this.targetText.setText(e.formatScore(f)),this.gotoNextLevel=!1,this.restartButton.icon.setTexture(d.Texture.fromFrame("icon_replay.png"))}else{this.targetText.visible=!0,this.targetTitle.y=-20,this.targetTitle.setText(c.strings.STR_NEXT_LEVEL_AT);var f=this.app.gameSave.getTargetScore(this.app.nextLevel.id+1);f||(f=1e4*Math.ceil(this.app.gameScreen.game.score/1e4)+5e3),this.targetText.setText(e.formatScore(f)),this.gotoNextLevel=!1,this.restartButton.icon.setTexture(d.Texture.fromFrame("icon_replay.png"))}window.showLeaderboards&&this.restartButton.icon.setTexture(d.Texture.fromFrame("icon_right.png")),this.flash.flash(.8,1)},j.prototype.updateTransform=function(){this.flair1.rotation+=.01,this.flair2.rotation-=.01,d.DisplayObjectContainer.prototype.updateTransform.call(this)},j.prototype.onPress=function(b){if(b===this.restartButton){if(window.showLeaderboards)return window.titleMode=!1,void this.app.overlayManager.gotoScreenByID(this.app.gameScreen.game.score>window.lowestScore?"submit":"scores");this.gotoNextLevel?(this.app.screenManager.gotoScreenByID("level"),this.app.overlayManager.hide()):(this.app.gameScreen.game.reset(),this.app.overlayManager.hide(),a("com/duck/app/Tracker").trackAction("game_start","results",window.level,"replay"))}else b===this.homeButton?(a("com/duck/app/Tracker").trackAction("exit","results",window.level),this.app.screenManager.gotoScreenByID("title"),this.app.overlayManager.hide()):b===this.submitButton&&(a("com/duck/app/Tracker").trackAction("leaderboard","results",window.level),this.app.overlayManager.gotoScreenByID("submit"))},j.prototype.resize=function(a,b){this.w=a,this.h=b,this.x=a/2,this.y=b/2},c.exports=j}),define("com/duck/app/overlay/screens/SettingsScreen",["require","exports","module","PIXI","com/fido/sound/SoundManager","../../buttons/AabButton","../../buttons/AabIconButton","../../buttons/AabLabelButton"],function(a,b,c){{var d=a("PIXI"),e=a("com/fido/sound/SoundManager"),f=(a("../../buttons/AabButton"),a("../../buttons/AabIconButton"));a("../../buttons/AabLabelButton")}SettingsScreen=function(a){this.app=a,d.DisplayObjectContainer.call(this),this.alpha=0;var b=this;this.bg=new d.Sprite.fromImage(ASSET_URL+"box_overlay.png"),this.bg.anchor.set(.5),b.addChild(this.bg),this.sfxButton=new f("button_icon_pause.png"),this.sfxButton.onPress.add(this.onPress,this),this.sfxButton.view.x=-230,this.sfxButton.view.y=-17,b.addChild(this.sfxButton.view),this.musicButton=new f("button_icon_pause.png"),this.musicButton.onPress.add(this.onPress,this),this.musicButton.view.x=-230,this.musicButton.view.y=87,b.addChild(this.musicButton.view),e.sfx.onMuteToggle.add(this.onSfxMuteToggle,this),e.music.onMuteToggle.add(this.onMusicMuteToggle,this),this.title=new d.Sprite.fromFrame("button_icon_pause.png"),this.title.anchor.set(.5),this.title.x=0,this.title.y=-160,b.addChild(this.title),this.audioTitle=new d.Sprite.fromFrame("settingsCopy_FX.png"),b.addChild(this.audioTitle),this.audioTitle.anchor.set(.5),this.audioTitle.x=-126,this.audioTitle.y=-20,this.musicTitle=new d.Sprite.fromFrame("settingsCopy_music.png"),b.addChild(this.musicTitle),this.musicTitle.anchor.set(.5),this.musicTitle.x=-126,this.musicTitle.y=85,this.audioTitle=new d.Sprite.fromFrame("panel_title_audio.png"),b.addChild(this.audioTitle),this.audioTitle.anchor.set(.5),this.audioTitle.x=-226,this.audioTitle.y=-88,this.gameTitle=new d.Sprite.fromFrame("panel_title_game.png"),b.addChild(this.gameTitle),this.gameTitle.anchor.set(.5),this.gameTitle.x=100,this.gameTitle.y=-88},SettingsScreen.prototype=Object.create(d.DisplayObjectContainer.prototype),SettingsScreen.prototype.onPress=function(a){a===this.sfxButton?e.sfx.isMuted?e.sfx.unmute():e.sfx.mute():a===this.musicButton&&(e.music.isMuted?e.music.unmute():e.music.mute())},SettingsScreen.prototype.onSfxMuteToggle=function(){this.sfxButton.setIcon(e.sfx.isMuted?"button_icon_sfxOff.png":"button_icon_sfxOn.png")},SettingsScreen.prototype.onMusicMuteToggle=function(){this.musicButton.setIcon(e.music.isMuted?"button_icon_musicOff.png":"button_icon_musicOn.png")},SettingsScreen.prototype.resize=function(a,b){this.w=a,this.h=b,this.x=a/2,this.y=b/2},c.exports=SettingsScreen}),define("com/fido/ui/Dots",["require","exports","module","PIXI","../physics/Spring","com/fido/system/Ticker","./PixiTrackpad","signals"],function(a,b,c){var d=a("PIXI"),e=(a("../physics/Spring"),a("com/fido/system/Ticker"),a("./PixiTrackpad"),a("signals"));Dots=function(a){d.DisplayObjectContainer.call(this),this.deselectedAlpha=.5,this.dots=[],this.currentDot=null,this.build(a),this.onSelect=new e},Dots.prototype=Object.create(d.DisplayObjectContainer.prototype),Dots.prototype.build=function(a){this.deselectedAlpha=a.alpha||.5;for(var b=0;b<this.dots.length;b++)this.removeChild(this.dots[b]);this.dots=[];for(var c=(a.size-1)*a.padding,b=0;b<a.size;b++){var e=new d.Sprite(a.texture);e.id=b,e.alpha=this.deselectedAlpha,e.anchor.set(.5),this.addChild(e),e.x=b*a.padding-c/2,a.interactive&&(e.interactive=!0,e.buttonMode=!0,e.click=this.onDotSelected.bind(this)),this.dots.push(e)}this.select(0)},Dots.prototype.onDotSelected=function(a){this.onSelect.dispatch(a.target.id)},Dots.prototype.select=function(a){if(this.currentDot){if(this.currentDot.id===a)return;TweenLite.to(this.currentDot,.3,{alpha:this.deselectedAlpha,ease:Sine.easeOut})}this.currentDot=this.dots[a],TweenLite.to(this.currentDot,.3,{alpha:1,ease:Sine.easeOut})},c.exports=Dots}),define("com/fido/ui/Carousel",["require","exports","module","PIXI","com/fido/ui/buttons/Button","com/fido/system/Device","com/fido/ui/PixiTrackpad","com/fido/ui/Dots","signals","com/fido/system/Ticker","com/fido/utils/Utils"],function(a,b,c){var d=a("PIXI"),e=(a("com/fido/ui/buttons/Button"),a("com/fido/system/Device"),a("com/fido/ui/PixiTrackpad"),a("com/fido/ui/Dots"),a("signals"),a("com/fido/system/Ticker"),a("com/fido/utils/Utils"),function(a,b){d.DisplayObjectContainer.call(this),this.itemWidth=b.itemWidth,this.offset=b.offset||0,this.padding=b.padding,this.useMask=b.useMask,this.bounds=b.bounds,this.edgePadding=30,this.hitArea=this.bounds,this.trackpad=new PixiTrackpad({target:this}),this.trackpad.snapTo=!0,this.trackpad.size=this.itemWidth+this.padding,this.trackpad.maxSlots=a.length-1,this.trackpad.spring.damp=.6,this.trackpad.capMovement=!0,b.fitBounds?(this.trackpad.scrollMin=-a.length*this.trackpad.size+this.bounds.width/2+this.itemWidth/2-this.edgePadding,this.trackpad.scrollMax=-this.bounds.width/2+this.itemWidth/2+this.edgePadding):(this.trackpad.scrollMin=-a.length*this.trackpad.size,this.trackpad.scrollMax=0),this.trackpad.cap(),this.lastIndex=0,this.items=a,this.itemContainer=new d.DisplayObjectContainer,this.addChild(this.itemContainer);for(var c=0;c<a.length;c++){var e=a[c];this.itemContainer.addChild(e)}if(this.useMask){var f=(new d.Graphics).beginFill(16711680).drawRect(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height);this.addChild(f),this.itemContainer.mask=f}});e.prototype=Object.create(d.DisplayObjectContainer.prototype),Object.defineProperty(e.prototype,"scrollPosition",{get:function(){return this._scrollPosition},set:function(a){this._scrollPosition=a;for(var b=(this.itemWidth*this.items.length,this.itemWidth+this.padding),c=0;c<this.items.length;c++){var d=this.items[c];d.x=b*c-this._scrollPosition,d.x+=this.bounds.width/2-this.itemWidth/2+this.bounds.x,d.x+=this.offset}}}),e.prototype.updateTransform=function(){if(this.visible){this.trackpad.update(),this.scrollPosition=-this.trackpad.value;var a=0|-(this.trackpad.spring.tx/this.trackpad.size),a=0|-(this.trackpad.spring.tx/this.trackpad.size);this.dots&&this.lastIndex!=a&&(this.dots.select(a),this.lastIndex=a),this.trackpad.didMove&&(this.userActive=!0),d.DisplayObjectContainer.prototype.updateTransform.call(this)}},e.prototype.setDots=function(a){this.dots=a,this.dots.onSelect.add(this.onDotSelected,this)},e.prototype.setButtons=function(a,b){this.leftButton=a,this.rightButton=b,this.leftButton.onPress.add(this.onButtonPressed,this),this.rightButton.onPress.add(this.onButtonPressed,this)},e.prototype.onButtonPressed=function(a){a===this.leftButton?this.trackpad.previousSlot():a===this.rightButton&&this.trackpad.nextSlot()},e.prototype.onDotSelected=function(a){this.userActive=!0,this.trackpad.setSlot(a)},c.exports=e}),define("com/duck/app/overlay/screens/TutorialScreen",["require","exports","module","PIXI","com/fido/ui/buttons/Button","com/duck/app/buttons/WaterButton","com/fido/sound/SoundManager","com/fido/ui/PixiTrackpad","com/fido/system/Ticker","com/fido/ui/Carousel","com/fido/loader/Cache"],function(a,b,c){var d=a("PIXI"),e=(a("com/fido/ui/buttons/Button"),a("com/duck/app/buttons/WaterButton")),f=(a("com/fido/sound/SoundManager"),a("com/fido/ui/PixiTrackpad"),a("com/fido/system/Ticker"),a("com/fido/ui/Carousel")),g=a("com/fido/loader/Cache"),h=function(a){d.DisplayObjectContainer.call(this);var b=g.getJson("translation");this.app=a,this.bg=new d.Sprite.fromImage(ASSET_URL+"img/game/box_overlay.png"),this.bg.anchor.set(.5),this.addChild(this.bg);var c=[];this.panels=c;for(var h=0;5>h;h++){var i=new d.Sprite.fromFrame("howto_"+(h+1)+".png");i.anchor.set(0,.5),i.y=110;var j=new d.Text(b.strings["STR_GAME_HELP_"+(h+1)],{fill:"#000000",font:"52px "+window.MAIN_FONT});j.width>400&&j.scale.set(400/j.width),j.anchor.set(.5),j.x=159,j.y=156,i.addChild(j),i.helpText=j,c.push(i)}window.flipLanguage&&c.reverse();var k={itemWidth:318,padding:160,useMask:!0,bounds:new d.Rectangle(-292,0,600,292)};this.carousel=new f(c,k),this.carousel.y=-146,this.addChild(this.carousel);var l=(new d.Graphics).beginFill(5855325).drawCircle(0,0,9).generateTexture(),m={size:c.length,step:50,padding:37.5,interactive:!0,alpha:.3,texture:l};this.dots=new Dots(m),this.addChild(this.dots),this.dots.x=0,this.dots.y=175,this.dots.scale.x=.9;(new d.Graphics).beginFill(5855325).drawCircle(0,0,30).generateTexture();this.leftArrow=e.smallButton("icon_left.png"),this.addChild(this.leftArrow.view),this.rightArrow=e.smallButton("icon_right.png"),this.addChild(this.rightArrow.view),this.leftArrow.view.y=-25,this.leftArrow.view.x=-230,this.rightArrow.view.y=-25,this.rightArrow.view.x=230,this.carousel.setDots(this.dots),this.carousel.setButtons(this.leftArrow,this.rightArrow);var n={font:"66px "+window.HEADER_FONT,fill:"black",align:"center"};this.title=new d.Text(b.strings.STR_GAME_HELP,n),this.title.width>600&&this.title.scale.set(600/this.title.width),this.addChild(this.title),this.title.anchor.set(.5),this.title.y=-187,window.flipLanguage&&this.carousel.trackpad.setSlot(2)};h.prototype=Object.create(d.DisplayObjectContainer.prototype),h.prototype.onShow=function(){},h.prototype.onHidden=function(){for(var a=0;a<this.panels.length;a++){var b=this.panels[a];b.helpText.texture.baseTexture.unloadFromGPU()}b.texture.baseTexture.unloadFromGPU(),this.title.texture.baseTexture.unloadFromGPU()},h.prototype.resize=function(a,b){this.w=a,this.h=b,this.x=a/2,this.y=b/2},c.exports=h}),define("com/duck/app/overlay/screens/PopupScreen",["require","exports","module","PIXI","com/duck/app/buttons/WaterButton"],function(a,b,c){var d=a("PIXI"),e=a("com/duck/app/buttons/WaterButton");PowerupIntro=function(a){this.app=a,d.DisplayObjectContainer.call(this);var b=this;this.hasClose=!1,this.bg=new d.Sprite.fromImage(ASSET_URL+"img/game/box_overlay.png"),this.bg.anchor.set(.5),this.addChild(this.bg),this.white=(new d.Graphics).beginFill(16777215).drawRect(-283,70,580,50),this.addChild(this.white),this.alpha=0;var c={font:"66px "+window.HEADER_FONT,fill:"black",align:"center"};this.title=new d.Text(">>>",c),this.title.width>600&&this.title.scale.set(600/this.title.width),this.title.anchor.set(.5),this.title.y=-187,this.addChild(this.title);var f=" ";this.copy=new d.Text(f,{fill:"black",font:"26px "+window.MAIN_FONT,wordWrap:!0,wordWrapWidth:320}),b.addChild(this.copy),this.copy.x=-18,this.copy.y=-130,this.previewThumb=new d.Sprite.fromFrame("icon_help.png"),this.blueFrame=new d.Sprite.fromFrame("icon_help.png"),this.addChild(this.previewThumb),this.blueFrame.x=-336,this.blueFrame.y=-105,this.previewThumb.x=-159,this.previewThumb.y=38,this.previewThumb.anchor.set(.5),this.previewThumb.scale.set(2),this.continueButton=e.smallButton("icon_play.png",!0),this.continueButton.icon.scale.set(.5),this.continueButton.onPress.add(this.onPress,this),this.continueButton.view.x=233,this.continueButton.view.y=155,window.flipLanguage&&(this.continueButton.icon.scale.x*=-1),b.addChild(this.continueButton.view)},PowerupIntro.prototype=Object.create(d.DisplayObjectContainer.prototype),PowerupIntro.prototype.setData=function(a){this.title.setText(a.name.split("\n").join(" ")),this.title.scale.set(1),this.title.width>600&&this.title.scale.set(600/this.title.width),this.copy.setText(a.copy),a.icon?(this.previewThumb.scale.set(2),this.previewThumb.setTexture(a.icon.texture)):(this.previewThumb.scale.set(1),this.previewThumb.setTexture(d.Texture.fromFrame("narrative_1.png")))},PowerupIntro.prototype.onPress=function(){this.app.overlayManager.hide()},PowerupIntro.prototype.resize=function(a,b){this.w=a,this.h=b,this.x=a/2,this.y=b/2},c.exports=PowerupIntro});var swears=["xit","usa","tyv","tyl","tog","tit","syl","spy","spa","sno","sik","sex","sed","sau","rev","rap","qkk","pul","pue","pop","pik","pew","pes","pek","ost","orm","ooh","ons","nsb","nek","nei","mus","muk","mop","mac","lus","lem","kuk","kug","kop","kkk","kis","kid","jus","ibo","hys","hue","hor","hol","hoe","hap","goa","gnu","ger","gay","fra","fis","fan","fag","elg","ego","egg","dyr","sex","dom","dog","bry","sex","nai","bob","pot","pis","pik","zob","xxx","bil","bia","lul","kut","bag","kak","baf","ass","gvd","sau","xxx","arg","apo","nus","pqp","xxx","ape","apa","sex","tis","prs","fuk","sex","pau","sex","sex","sgu","sex","nus","nua","gay","pee","pat","kkk","sex","xxx","nig","del","gay","kuk","kkk","jap","nop","pis","god","fak","gay","cul","fut","fuk","sex","amo","fok","con","seg","sex","fuc","raj","fag","fck","cus","fag","huj","kat","sex","jeb","her","gay","huj","gay","kur","fis","gay","dic","gej","fan","gej","pau","fos","fak","aso","sik","pkk","gay","fut","edi","cus","bum","ass","cur","boi","cyc","bok","amk","blb","ass","ano"];define("com/duck/app/Swears",function(){}),define("com/fido/game/ScoreSubmission",["require","exports","module","signals","com/fido/ui/buttons/Button","PIXI","com/fido/ui/PixiTrackpad","signals"],function(a,b,c){var d=a("signals"),e=(a("com/fido/ui/buttons/Button"),a("PIXI")),f=a("com/fido/ui/PixiTrackpad"),d=a("signals"),g=function(){e.DisplayObjectContainer.call(this);this.letterScrollers=[],this.bg=new e.Sprite.fromFrame("initial_windows.png"),this.addChild(this.bg);for(var a=0;3>a;a++){var b=new i;this.addChild(b),b.x=135*a+24,b.y=11,b.onLetterUpdate.add(this.onWordUpdate,this),this.letterScrollers.push(b)}this.onNameUpdate=new d};g.prototype=Object.create(e.DisplayObjectContainer.prototype),g.prototype.onWordUpdate=function(){for(var a="",b=0;b<this.letterScrollers.length;b++)a+=this.letterScrollers[b].currentLetter;this.word=a,this.onNameUpdate.dispatch(a)},g.prototype.update=function(){};var h=90,i=function(){e.DisplayObjectContainer.call(this),this.letters="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),this.masky=(new e.Graphics).beginFill(16711680).drawRect(-20,-12,110,129),this.addChild(this.masky),this._openRatio=0,this.hitArea=new e.Rectangle(0,-5,89,90),this.trackpad=new f({target:this}),this.trackpad.snapTo=!0,this.trackpad.size=h,this.trackpad.maxSlots=1e8,this.trackpad.capMovement=!1,this.options=[],this.optionContainer=new e.DisplayObjectContainer,this.addChild(this.optionContainer),this.optionContainer.mask=this.masky,this.onLetterUpdate=new d,this.lastId=0,this.offset=0;for(var a=3,b=0;a>b;b++){var c=new e.DisplayObjectContainer;c.text=new e.Text("HI",{fill:"#000000",font:"104px "+window.HEADER_FONT,fill:"white",dropShadow:!0,dropShadowAngle:2*Math.PI}),c.addChild(c.text),c.text.x=35,c.text.y=47,c.text.anchor.set(.5),this.optionContainer.addChild(c),c.interactive=!0,c.buttonMode=!0,c.id=1e6,this.options.push(c)}this.lastId=999999999,this.nextButton=new e.Sprite.fromFrame("arrow_up.png"),this.nextButton.anchor.set(.5),this.nextButton.interactive=!0,this.nextButton.buttonMode=!0,this.nextButton.click=this.nextButton.tap=this.onNextPressed.bind(this),this.addChild(this.nextButton),this.nextButton.y=-43,this.nextButton.x=32,this.prevButton=new e.Sprite.fromFrame("arrow_down.png"),this.prevButton.anchor.set(.5),this.prevButton.interactive=!0,this.prevButton.buttonMode=!0,this.prevButton.click=this.prevButton.tap=this.onPrevPressed.bind(this),this.addChild(this.prevButton),this.prevButton.x=35,this.prevButton.y=158};i.prototype=Object.create(e.DisplayObjectContainer.prototype),i.prototype.updateTransform=function(){this.trackpad.update();for(var a=this.options.length*h,b=0;b<this.options.length;b++){var c=this.options[b];c.position.y=b*h+this.trackpad.valueY+100;var d=Math.floor(c.position.y/a);if(d*=this.options.length,d*=-1,d+=b,d!=c.id){c.id=d;var f=d%this.letters.length;0>f&&(f+=this.letters.length),c.letter=this.letters[f],c.text.setText(this.letters[f])}c.position.y%=a,c.position.y<0&&(c.position.y+=a),c.position.y-=h}var g=this.trackpad.spring.ty/-this.trackpad.size|0;if(this.lastId!=g){this.lastId=g;var i=g%this.options.length;0>i&&(i+=this.options.length);var j=this.options[i];this.currentLetter=j.letter,this.onLetterUpdate.dispatch(j.letter)}e.DisplayObjectContainer.prototype.updateTransform.call(this)},i.prototype.onNextPressed=function(){this.trackpad.previousSlotY()},i.prototype.onPrevPressed=function(){this.trackpad.nextSlotY()},i.prototype.onOptionPressed=function(){!this.trackpad.didMove},c.exports=g}),define("com/duck/app/overlay/screens/SubmitScreen",["require","exports","module","PIXI","./Leaderboard","com/fido/ui/PixiTrackpad","com/fido/utils/Utils","com/fido/game/system/GameServerProxy","com/fido/loader/Cache","com/duck/app/Swears","com/fido/game/ScoreSubmission","com/duck/app/buttons/WaterButton","libs/GBAPI"],function(a,b,c){var d=a("PIXI"),e=(a("./Leaderboard"),a("com/fido/ui/PixiTrackpad"),a("com/fido/utils/Utils"),a("com/fido/game/system/GameServerProxy"),a("com/fido/loader/Cache")),f=(a("com/duck/app/Swears"),a("com/fido/game/ScoreSubmission")),g=a("com/duck/app/buttons/WaterButton"),h=a("libs/GBAPI"),i=function(a){d.DisplayObjectContainer.call(this),this.app=a;var b=new d.Sprite.fromImage(ASSET_URL+"img/game/box_leaderboard.png");b.anchor.set(.5,.5),b.position.y+=20,this.addChild(b);var c={font:"66px "+window.HEADER_FONT,fill:"black",align:"center"},h=e.getJson("translation");this.title=new d.Text(h.strings.STR_GAME_SUBMIT,c),this.addChild(this.title),this.title.anchor.set(.5),this.title.y=-182,this.swearRegEx=RegExp(swears.join("|")),this.scoreSubbmission=new f,this.scoreSubbmission.x=-255,this.scoreSubbmission.y=-70,this.addChild(this.scoreSubbmission),this.scoreSubbmission.onNameUpdate.add(this.onNameUpdate,this),this.submitButton=g.smallButton("icon_enter.png",!0),this.addChild(this.submitButton.view),this.submitButton.view.x=210,this.submitButton.view.ty=95,this.submitButton.onPress.add(this.onSubmitPressed,this),this.poller=new d.Sprite.fromFrame("poller.png"),this.poller.anchor.set(.5),this.poller.updateTransform=function(){this.rotation+=.1,d.Sprite.prototype.updateTransform.call(this)},this.addChild(this.poller),this.poller.visible=!1,this.poller.scale.set(0),this.word="AAAA"};i.prototype=Object.create(d.DisplayObjectContainer.prototype),i.prototype.onSubmitPressed=function(){this.submitButton.view.interactive=!1,TweenLite.to(this.submitButton.view.scale,.4,{x:0,y:0,ease:Back.easeIn}),TweenLite.to(this.scoreSubbmission,.4,{alpha:0,ease:Sine.easeIn}),this.poller.visible=!0,TweenLite.to(this.poller.scale,.4,{x:1,y:1,ease:Elastic.easeOut,delay:.3}),h.instance.setSharedKey("1234"),h.instance.sendScore({name:this.word,score:String(this.app.gameScreen.game.score)},this.onScoreSaved.bind(this))},i.prototype.onScoreSaved=function(){TweenLite.to(this.poller.scale,.4,{x:0,y:0,ease:Back.easeIn}),this.app.overlayManager.gotoScreenByID("scores")},i.prototype.onHide=function(){},i.prototype.onNameUpdate=function(a){var b=this.swearRegEx.test(a.toLowerCase());this.word=a,b?(this.scoreSubbmission.alpha=.5,this.submitButton.view.interactive=!1,this.submitButton.view.alpha=.5):(this.scoreSubbmission.alpha=1,this.submitButton.view.interactive=!0,this.submitButton.view.alpha=1)},i.prototype.onHidden=function(){this.app.overlayManager.closeButton.view.pivot.x=0},i.prototype.onShow=function(){this.submitButton.view.interactive=!0,TweenLite.to(this.submitButton.view.scale,.1,{x:1,y:1,ease:Back.easeIn}),TweenLite.to(this.scoreSubbmission,.1,{alpha:1,ease:Sine.easeIn}),this.poller.visible=!1,TweenLite.to(this.poller.scale,.1,{x:0,y:0,ease:Elastic.easeOut}),this.app.overlayManager.closeButton.view.pivot.x=-100},i.prototype.resize=function(a,b){this.w=a,this.h=b,this.x=a/2,this.y=b/2},c.exports=i}),define("com/fido/app/transitions/DropInTransition",["require","exports","module","com/fido/physics/SimpleBouncer","com/fido/system/Ticker"],function(a,b,c){var d=a("com/fido/physics/SimpleBouncer"),e=a("com/fido/system/Ticker");DropInTransition=function(){this.bouncer=new d,this.bouncer.bounce=.6,this.bouncer.gravity=3,this.bounceCount=0},DropInTransition.constructor=DropInTransition,DropInTransition.prototype.begin=function(a,b,c){this.screenManager=a,this.currentScreen=b,this.nextScreen=c,this.currentScreen?(this.currentScreen.onHide&&this.currentScreen.onHide(),TweenLite.to(this.currentScreen,.4,{alpha:0,onComplete:this.onFadeout.bind(this)})):this.onFadeout(),e.instance.add(this.update,this)},DropInTransition.prototype.onFadeout=function(){this.currentScreen&&(this.currentScreen.onHidden&&this.currentScreen.onHidden(),this.screenManager.container.removeChild(this.currentScreen),this.currentScreen.alpha=1),this.nextScreen.alpha=1,this.nextScreen.rotation=.05,this.nextScreen.onShow&&this.nextScreen.onShow(),this.nextScreen.resize&&this.nextScreen.resize(this.screenManager.w,this.screenManager.h),this.bouncer.bounce=.6,this.bouncer.x=-600,this.nextScreen.pivot.y=-this.bouncer.x,this.bounceCount=0,this.screenManager.container.addChild(this.nextScreen)},DropInTransition.prototype.onFadein=function(){this.nextScreen.onShown&&this.nextScreen.onShown(),this.screenManager.onTransitionComplete()},DropInTransition.prototype.update=function(){var a=this.bouncer.update();this.nextScreen.pivot.y=-this.bouncer.x,a&&(this.bounceCount++,this.nextScreen.rotation*=-.6,3===this.bounceCount&&(this.bouncer.bounce=0,this.nextScreen.rotation=0,e.instance.remove(this.update,this),this.nextScreen.pivot.y=0,this.nextScreen.rotation=0,this.onFadein()))},DropInTransition.prototype.resize=function(a,b){this.w=a,this.h=b},c.exports=DropInTransition}),define("com/duck/app/overlay/OverlayManager",["require","exports","module","PIXI","signals","com/fido/app/ScreenManager","./screens/PauseScreen","./screens/LoadingScreen","./screens/LeaderboardScreen","./screens/GameoverScreen","./screens/SettingsScreen","./screens/TutorialScreen","com/duck/app/buttons/ClickButton","./screens/PopupScreen","./screens/SubmitScreen","com/fido/app/transitions/DropInTransition"],function(a,b,c){var d=a("PIXI"),e=a("signals"),f=a("com/fido/app/ScreenManager"),g=a("./screens/PauseScreen"),h=a("./screens/LoadingScreen"),i=a("./screens/LeaderboardScreen"),j=a("./screens/GameoverScreen"),k=(a("./screens/SettingsScreen"),a("./screens/TutorialScreen")),l=a("com/duck/app/buttons/ClickButton"),m=a("./screens/PopupScreen"),n=a("./screens/SubmitScreen"),o=a("com/fido/app/transitions/DropInTransition"),p=function(a){this.app=a,this.view=new d.DisplayObjectContainer,f.call(this),this.defaultTransition=new o,this.pauseScreen=new g(a),this.leaderboardScreen=new i(a),this.gameoverScreen=new j(a),this.loadingScreen=new h(a),this.tutorialScreen=new k(a),this.submitScreen=new n(a),this.popupScreen=new m(a),this.addScreen(this.leaderboardScreen,"scores"),this.addScreen(this.gameoverScreen,"gameover"),this.addScreen(this.pauseScreen,"pause"),this.addScreen(this.loadingScreen,"loading"),this.addScreen(this.tutorialScreen,"tutorial"),this.addScreen(this.submitScreen,"submit"),this.addScreen(this.popupScreen,"popup"),this.addScreen(new d.DisplayObjectContainer,"empty"),this.onShow=new e,this.onHide=new e,this.black=(new d.Graphics).beginFill(0).drawRect(0,0,100,100),this.black.alpha=.5,this.black.mousedown=function(){},this.black.touchstart=function(){},this.black.interactive=!0,this.black.hitArea=new d.Rectangle(0,0,1e4,1e4),this.view.visible=!1,this.closeButton=l.closeButton(),this.closeButton.onPress.add(this.goBack,this),this.closeButton.view.x=1e4,this.closeButton.view.y=120,this.closeButton.defaultScale=Device.mobile?1:1,this.view.addChild(this.black),this.view.addChild(this.container),this.view.addChild(this.closeButton.view),this.app.screenManager.container.filterArea=new d.Rectangle(0,0,1e4,1e4)};p.prototype=Object.create(f.prototype),p.prototype.goBack=function(){var a=this.history.pop();if(a&&"scores"===a._screenID)return this.history=[],this.hide(),void this.app.screenManager.gotoScreenByID("title");var b=this.history.pop();b?this.gotoScreen(b):this.hide()},p.prototype.show=function(a,b){this.history=[],this.gotoScreenByID(a,!0),this.onShow.dispatch(),this.view.visible=!0,b?this.view.alpha=1:(this.view.alpha=0,TweenLite.to(this.view,.3,{alpha:1})),this.closeButton.view.scale.set(0)},p.prototype.gotoScreen=function(a){void 0===a.hasClose||a.hasClose===!0?(this.closeButton.view.interactive=!0,TweenLite.to(this.closeButton.view.scale,.3,{x:this.closeButton.defaultScale,y:this.closeButton.defaultScale,ease:Back.easeOut,delay:.4})):(this.closeButton.view.interactive=!1,TweenLite.to(this.closeButton.view.scale,.3,{x:0,y:0,ease:Back.easeOut,delay:2})),f.prototype.gotoScreen.call(this,a)},p.prototype.hide=function(){this.history=[],this.closeButton.view.interactive=!1,this.gotoScreenByID("empty"),TweenLite.to(this.closeButton.view.scale,.3,{x:0,y:0,ease:Back.easeOut}),TweenLite.to(this.view,.3,{alpha:0,onComplete:function(){this.view.visible=!1,this.onHide.dispatch()}.bind(this)})},p.prototype.resize=function(a,b){this.closeButton.view.x=a/2+360-75,this.closeButton.view.y=b/2-186-10,this.black.scale.set(a/100,b/100),f.prototype.resize.call(this,a,b)},p.prototype.onFadeout=function(){this.currentScreen&&(this.currentScreen.onHidden&&this.currentScreen.onHidden(),this.container.removeChild(this.currentScreen)),this.currentScreen=this.nextScreen,this.currentScreen.alpha=0,this.currentScreen.onShow&&this.currentScreen.onShow(),this.currentScreen.resize&&this.currentScreen.resize(this.w,this.h),TweenLite.to(this.currentScreen,.4,{alpha:1,onComplete:this.onFadein.bind(this)}),this.container.addChild(this.currentScreen)
},c.exports=p}),define("APP_root",["require","exports","module","PIXI","com/fido/app/App","com/fido/system/Ticker","com/fido/system/Device","com/fido/sound/SoundManager","com/fido/loader/Cache","com/duck/app/screens/LoaderScreen","com/duck/app/screens/TitleScreen","com/duck/app/screens/LevelScreen","com/duck/app/screens/GameScreen","com/duck/app/TopMenu","com/duck/app/TestScreen","com/duck/app/Tracker","com/fido/game/system/GameSave","com/fido/game/system/GameServerProxy","com/duck/app/Background","com/duck/app/overlay/OverlayManager","com/fido/app/AssetManager","com/duck/game/Levels"],function(a,b,c){var d=a("PIXI");window.PIXI=d;var e=a("com/fido/app/App"),f=(a("com/fido/system/Ticker"),a("com/fido/system/Device")),g=a("com/fido/sound/SoundManager"),h=a("com/fido/loader/Cache"),i=a("com/duck/app/screens/LoaderScreen"),j=a("com/duck/app/screens/TitleScreen"),k=a("com/duck/app/screens/LevelScreen"),l=a("com/duck/app/screens/GameScreen"),m=a("com/duck/app/TopMenu"),n=a("com/duck/app/TestScreen"),o=a("com/duck/app/Tracker"),p=a("com/fido/game/system/GameSave"),q=a("com/fido/game/system/GameServerProxy"),r=a("com/duck/app/Background"),s=a("com/duck/app/overlay/OverlayManager"),t=a("com/fido/app/AssetManager"),u=a("com/duck/game/Levels"),v=function(){window.quick=!1;var a={loaderScreen:window.quick?null:i,forceCanvas:!1,backgroundColor:1};window.quick=!1,e.call(this,a),this.safeSize={width:960,height:640},this.maxSize={width:1136,height:670},this.isMobile=f.mobile;var b=[ASSET_URL+"img/game/game_menus.json",ASSET_URL+"img/game/menu_bg.jpg",ASSET_URL+"img/game/menu_vignette.png",ASSET_URL+"img/game/menu_vignette.png",ASSET_URL+"img/game/rage_scene.json",ASSET_URL+"img/game/fx.json",ASSET_URL+"img/game/players.json",ASSET_URL+"img/game/clients.json",ASSET_URL+"img/game/sky.jpg",ASSET_URL+"img/game/sky_night.jpg",ASSET_URL+"img/game/sky_morning.jpg",ASSET_URL+"img/localized/disney_logo.png",ASSET_URL+"img/localized/disney_logo_shadow.png",ASSET_URL+"img/localized/main_logo.png",ASSET_URL+"img/localized/main_logo_shadow.png",ASSET_URL+"img/game/shark.png",ASSET_URL+"img/game/water_tile.png",ASSET_URL+"img/game/box_leaderboard.png"],c=[ASSET_URL+"img/game/groundmorning_canvas.jpg",ASSET_URL+"img/game/groundnight_canvas.jpg",ASSET_URL+"img/game/ground_canvas.jpg"],d=[ASSET_URL+"img/game/ground_night.jpg",ASSET_URL+"img/game/ground.jpg",ASSET_URL+"img/game/ground_morning.jpg"];b=b.concat(window.WEBGL?d:c),this.loader.addPixiAssets(b),t.registerGroup("core",[ASSET_URL+"img/game/game_menus.json",ASSET_URL+"img/game/menu_bg.jpg",ASSET_URL+"img/game/players.json"]),t.registerGroup("game",[ASSET_URL+"img/game/game_world.json",ASSET_URL+"img/game/fx.json",ASSET_URL+"img/game/players.json",ASSET_URL+"img/game/clients.json",ASSET_URL+"img/game/fx.json"]),t.onAssetsLoadBegin.add(this.onAssetsLoadBegin,this),t.onAssetsLoaded.add(this.onSubAssetsLoaded,this),this.loader.addFonts(["Luckiest Guy","Irish Grover","Open Sans"]),this.onReady.add(this.onAppReady,this),g.music.addSound(ASSET_URL+"snd/game","main",{loop:!0,volume:.5}),g.sfx.addSound(ASSET_URL+"snd/shock_donald","shock"),g.sfx.addSound(ASSET_URL+"snd/buttonPress","press"),g.sfx.addSound(ASSET_URL+"snd/buttonRoll","roll"),g.sfx.addSound(ASSET_URL+"snd/levelCardPress","levelCardPress"),g.sfx.addSound(ASSET_URL+"snd/levelCardRoll","levelCardRoll"),g.sfx.addSound(ASSET_URL+"snd/navigateClick","interact"),g.sfx.addSound(ASSET_URL+"snd/customerServeWet","feed"),g.sfx.addSound(ASSET_URL+"snd/slurp","slurp"),g.sfx.addSound(ASSET_URL+"snd/slurp2","slurp2"),g.sfx.addSound(ASSET_URL+"snd/slurp3","slurp3"),g.sfx.addGroup(["slurp","slurp2","slurp3"],"slurp"),g.sfx.addSound(ASSET_URL+"snd/gameOver","gameover"),g.sfx.addSound(ASSET_URL+"snd/payBling01","bill1"),g.sfx.addSound(ASSET_URL+"snd/payBling02","bill2"),g.sfx.addGroup(["bill1","bill2"],"bills"),g.sfx.addSound(ASSET_URL+"snd/swingBar","swingBar"),g.sfx.addSound(ASSET_URL+"snd/refillMiss","refillMiss"),g.sfx.addSound(ASSET_URL+"snd/refillMeh","refillMeh"),g.sfx.addSound(ASSET_URL+"snd/refillOK","refillOk"),g.sfx.addSound(ASSET_URL+"snd/refillPerfect","refillPerfect"),g.sfx.addSound(ASSET_URL+"snd/54321","54321"),g.sfx.addSound(ASSET_URL+"snd/waterLoop","waterLoop",{loop:!0,volume:0}),g.sfx.addSound(ASSET_URL+"snd/waterOff","waterOff"),g.sfx.addSound(ASSET_URL+"snd/waterStart","waterStart"),g.sfx.addSound(ASSET_URL+"snd/powerupHoseEnding","powerupHoseEnding"),g.sfx.addSound(ASSET_URL+"snd/powerupChime","powerupGet"),g.sfx.addSound(ASSET_URL+"snd/powerupCashBonus","powerupCashBonus"),g.sfx.addSound(ASSET_URL+"snd/powerupHypno","powerupHypnoStart"),g.sfx.addSound(ASSET_URL+"snd/sharkSlap","sharkSlap"),g.sfx.addSound(ASSET_URL+"snd/donaldLevelSelect","dSelect"),g.sfx.addSound(ASSET_URL+"snd/donaldHoseStartScreech","dScreech"),g.sfx.addSound(ASSET_URL+"snd/donaldGetpay","donaldGetpay1"),g.sfx.addSound(ASSET_URL+"snd/donaldGetpay2","donaldGetpay2"),g.sfx.addSound(ASSET_URL+"snd/donaldGetpay3","donaldGetpay3"),g.sfx.addSound(ASSET_URL+"snd/donaldGetpay4","donaldGetpay4"),g.sfx.addGroup(["donaldGetpay1","donaldGetpay2","donaldGetpay3","donaldGetpay4"],"dGetPay"),g.sfx.addSound(ASSET_URL+"snd/donaldGiveDrink","dDrink1"),g.sfx.addSound(ASSET_URL+"snd/donaldGiveDrink2","dDrink2"),g.sfx.addGroup(["dDrink2","dDrink1"],"dDrink"),g.sfx.addSound(ASSET_URL+"snd/thunderZapFull","zap"),g.sfx.addSound(ASSET_URL+"snd/thunderCloud","cloud"),g.sfx.addSound(ASSET_URL+"snd/donaldPowerTank","dLaugh"),g.sfx.addSound(ASSET_URL+"snd/donaldSharkLaugh","dLaugh2"),g.sfx.addGroup(["dLaugh","dLaugh2"],"dLaughx"),q.onReady.add(this.onGameProxyReady,this),q.init(!0),this.configSetup=!1,this.loader.onProgress.add(this.onProgress,this)};v.prototype=Object.create(e.prototype),v.prototype.onProgress=function(){if(!this.configSetup){var a=h.getJson("config").config;if(a){this.configSetup=!0,window.doNotFormat=!("true"===a.FORMAT_SCORE_WITH_COMMAS),window.flipLanguage="true"===a.FLIP_LANGUAGE,window.showLeaderboards="true"===a.ENABLE_LEADERBOARDS,window.enableTracking="true"===a.ENABLE_TRACKING,window.locale=a.LOCALE,window.removeLoaderLogo="true"===a.REMOVE_LOADER_LOGO;var b="true"===a.FONTS_EXTENDED;b?(this.loader.fontsToLoad=["Bowlby One SC","Source Serif Pro"],window.HEADER_FONT="Bowlby One SC",window.MAIN_FONT="Source Serif Pro"):(this.loader.fontsToLoad=["Luckiest Guy","Irish Grover","Open Sans"],window.HEADER_FONT="Luckiest Guy",window.MAIN_FONT="Irish Grover"),o.locale=a.LOCALE,o.trackDevice(),o.trackClick()}}},v.prototype.onGameProxyReady=function(){var a={id:"duck_hydro_game_save",totalLevels:3,levelTargetScores:[1e3,5e4,1e5],startingLockStates:[2,0,0]};this.gameSave=new p(a,q),this.gameSave.onLoaded.addOnce(this.onGameSaveLoaded,this),this.gameSave.load()},v.prototype.onGameSaveLoaded=function(){this.startup()},v.prototype.onAppReady=function(){var a=h.getJson("config").config;q.setTargetFile(a.SCORE_PATH),window.showLeaderboards&&q.loadLowestScore();this.nextLevel=u[1],this.bg=new r,this.screenManager.container.addChild(this.bg),this.titleScreen=new j(this),this.gameScreen=new l(this),this.levelScreen=new k(this),this.screenManager.addScreen(this.titleScreen,"title"),this.screenManager.addScreen(this.gameScreen,"game"),this.screenManager.addScreen(this.levelScreen,"level"),this.screenManager.addScreen(new n,"test"),this.topMenu=new m(this),this.stage.addChild(this.topMenu),this.overlayManager=new s(this),this.stage.addChild(this.overlayManager.view),this.screenManager.gotoScreenByID(window.quick?"game":"title"),this.resize(this.w,this.h)},v.prototype.onAssetsLoadBegin=function(){this.overlayManager.show("loading")},v.prototype.onSubAssetsLoaded=function(){this.overlayManager.hide()},v.prototype.resize=function(a,b){this.w=a,this.h=b;var c=1;f.mobile&&(c=window.devicePixelRatio?window.devicePixelRatio:window.screen.deviceXDPI/window.screen.logicalXDPI),c>2&&(c=2);var d=a/this.safeSize.width<b/this.safeSize.height?a/this.safeSize.width:b/this.safeSize.height;d>1&&(d=1);var e=Math.min(this.maxSize.width*d,a),g=Math.min(this.maxSize.height*d,b);this.renderer.resize(e*c,g*c),this.screenManager.container.scale.set(d*c),this.screenManager.resize(e/d,g/d),this.overlayManager&&(this.overlayManager.resize(e/d,g/d),this.overlayManager.view.scale.set(d*c)),this.topMenu&&(this.topMenu.scale.set(d*c),this.topMenu.resize(e/d,g/d));var h=a/e,i=b/g;i>h?(e*=h,g*=h):(e*=i,g*=i),this.view.style.width=e+"px",this.view.style.height=g+"px",this.view.style.left=a/2-e/2+"px",this.view.style.top=b/2-g/2+"px"},d.Text.prototype.determineFontProperties=function(a){var b=d.Text.fontPropertiesCache[a];if(!b){b={};var c=d.Text.fontPropertiesCanvas,e=d.Text.fontPropertiesContext;e.font=a;var f=Math.ceil(e.measureText("|Mq").width),g=Math.ceil(e.measureText("M").width),h=2*g;g=1.4*g|0,c.width=f,c.height=h,e.fillStyle="#f00",e.fillRect(0,0,f,h),e.font=a,e.textBaseline="alphabetic",e.fillStyle="#000",e.fillText("|MÉq",0,g);var i,j,k=e.getImageData(0,0,f,h).data,l=k.length,m=4*f,n=0,o=!1;for(i=0;g>i;i++){for(j=0;m>j;j+=4)if(255!==k[n+j]){o=!0;break}if(o)break;n+=m}for(b.ascent=g-i,n=l-m,o=!1,i=h;i>g;i--){for(j=0;m>j;j+=4)if(255!==k[n+j]){o=!0;break}if(o)break;n-=m}b.descent=i-g,b.descent+=6,b.fontSize=b.ascent+b.descent,d.Text.fontPropertiesCache[a]=b}return b},c.exports=v});var Stats=function(){var a=Date.now(),b=a,c=0,d=1/0,e=0,f=0,g=1/0,h=0,i=0,j=0,k=document.createElement("div");k.id="stats",k.addEventListener("mousedown",function(a){a.preventDefault(),s(++j%2)},!1),k.style.cssText="width:80px;opacity:0.9;cursor:pointer";var l=document.createElement("div");l.id="fps",l.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",k.appendChild(l);var m=document.createElement("div");m.id="fpsText",m.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",m.innerHTML="FPS",l.appendChild(m);var n=document.createElement("div");for(n.id="fpsGraph",n.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",l.appendChild(n);74>n.children.length;){var o=document.createElement("span");o.style.cssText="width:1px;height:30px;float:left;background-color:#113",n.appendChild(o)}var p=document.createElement("div");p.id="ms",p.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",k.appendChild(p);var q=document.createElement("div");q.id="msText",q.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",q.innerHTML="MS",p.appendChild(q);var r=document.createElement("div");for(r.id="msGraph",r.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",p.appendChild(r);74>r.children.length;)o=document.createElement("span"),o.style.cssText="width:1px;height:30px;float:left;background-color:#131",r.appendChild(o);var s=function(a){switch(j=a){case 0:l.style.display="block",p.style.display="none";break;case 1:l.style.display="none",p.style.display="block"}};return{REVISION:11,domElement:k,setMode:s,begin:function(){a=Date.now()},end:function(){var j=Date.now();c=j-a,d=Math.min(d,c),e=Math.max(e,c),q.textContent=c+" MS ("+d+"-"+e+")";var k=Math.min(30,30-30*(c/200));return r.appendChild(r.firstChild).style.height=k+"px",i++,j>b+1e3&&(f=Math.round(1e3*i/(j-b)),g=Math.min(g,f),h=Math.max(h,f),m.textContent=f+" FPS ("+g+"-"+h+")",k=Math.min(30,30-30*(f/100)),n.appendChild(n.firstChild).style.height=k+"px",b=j,i=0),j},update:function(){a=this.end()}}};define("stats",function(){}),function(a,b){function c(a){return a.call.apply(a.bind,arguments)}function d(a,b){if(!a)throw Error();if(2<arguments.length){var c=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,c),a.apply(b,d)}}return function(){return a.apply(b,arguments)}}function e(){return e=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?c:d,e.apply(null,arguments)}function f(a,b){this.J=a,this.t=b||a,this.C=this.t.document}function g(a,c,d){a=a.C.getElementsByTagName(c)[0],a||(a=b.documentElement),a&&a.lastChild&&a.insertBefore(d,a.lastChild)}function h(a,b){function c(){a.C.body?b():setTimeout(c,0)}c()}function i(a,b,c){b=b||[],c=c||[];for(var d=a.className.split(/\s+/),e=0;e<b.length;e+=1){for(var f=!1,g=0;g<d.length;g+=1)if(b[e]===d[g]){f=!0;break}f||d.push(b[e])}for(b=[],e=0;e<d.length;e+=1){for(f=!1,g=0;g<c.length;g+=1)if(d[e]===c[g]){f=!0;break}f||b.push(d[e])}a.className=b.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function j(a,b){for(var c=a.className.split(/\s+/),d=0,e=c.length;e>d;d++)if(c[d]==b)return!0;return!1}function k(a){if("string"==typeof a.ma)return a.ma;var b=a.t.location.protocol;return"about:"==b&&(b=a.J.location.protocol),"https:"==b?"https:":"http:"}function l(a,b){var c=a.createElement("link",{rel:"stylesheet",href:b}),d=!1;c.onload=function(){d||(d=!0)},c.onerror=function(){d||(d=!0)},g(a,"head",c)}function m(b,c,d,e){var f=b.C.getElementsByTagName("head")[0];if(f){var g=b.createElement("script",{src:c}),h=!1;return g.onload=g.onreadystatechange=function(){h||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(h=!0,d&&d(null),g.onload=g.onreadystatechange=null,"HEAD"==g.parentNode.tagName&&f.removeChild(g))},f.appendChild(g),a.setTimeout(function(){h||(h=!0,d&&d(Error("Script load timeout")))},e||5e3),g}return null}function n(a,b){this.X=a,this.fa=b}function o(a,b,c,d){this.c=null!=a?a:null,this.g=null!=b?b:null,this.A=null!=c?c:null,this.e=null!=d?d:null}function p(a){a=Z.exec(a);var b=null,c=null,d=null,e=null;return a&&(null!==a[1]&&a[1]&&(b=parseInt(a[1],10)),null!==a[2]&&a[2]&&(c=parseInt(a[2],10)),null!==a[3]&&a[3]&&(d=parseInt(a[3],10)),null!==a[4]&&a[4]&&(e=/^[0-9]+$/.test(a[4])?parseInt(a[4],10):a[4])),new o(b,c,d,e)}function q(a,b,c,d,e,f,g,h){this.M=a,this.k=h}function r(a){this.a=a}function s(a){var b=v(a.a,/(iPod|iPad|iPhone|Android|Windows Phone|BB\d{2}|BlackBerry)/,1);return""!=b?(/BB\d{2}/.test(b)&&(b="BlackBerry"),b):(a=v(a.a,/(Linux|Mac_PowerPC|Macintosh|Windows|CrOS|PlayStation|CrKey)/,1),""!=a?("Mac_PowerPC"==a?a="Macintosh":"PlayStation"==a&&(a="Linux"),a):"Unknown")}function t(a){var b=v(a.a,/(OS X|Windows NT|Android) ([^;)]+)/,2);if(b||(b=v(a.a,/Windows Phone( OS)? ([^;)]+)/,2))||(b=v(a.a,/(iPhone )?OS ([\d_]+)/,2)))return b;if(b=v(a.a,/(?:Linux|CrOS|CrKey) ([^;)]+)/,1))for(var b=b.split(/\s/),c=0;c<b.length;c+=1)if(/^[\d\._]+$/.test(b[c]))return b[c];return(a=v(a.a,/(BB\d{2}|BlackBerry).*?Version\/([^\s]*)/,2))?a:"Unknown"}function u(a){var b=s(a),c=p(t(a)),d=p(v(a.a,/AppleWeb(?:K|k)it\/([\d\.\+]+)/,1)),e="Unknown",f=new o,f="Unknown",g=!1;return/OPR\/[\d.]+/.test(a.a)?e="Opera":-1!=a.a.indexOf("Chrome")||-1!=a.a.indexOf("CrMo")||-1!=a.a.indexOf("CriOS")?e="Chrome":/Silk\/\d/.test(a.a)?e="Silk":"BlackBerry"==b||"Android"==b?e="BuiltinBrowser":-1!=a.a.indexOf("PhantomJS")?e="PhantomJS":-1!=a.a.indexOf("Safari")?e="Safari":-1!=a.a.indexOf("AdobeAIR")?e="AdobeAIR":-1!=a.a.indexOf("PlayStation")&&(e="BuiltinBrowser"),"BuiltinBrowser"==e?f="Unknown":"Silk"==e?f=v(a.a,/Silk\/([\d\._]+)/,1):"Chrome"==e?f=v(a.a,/(Chrome|CrMo|CriOS)\/([\d\.]+)/,2):-1!=a.a.indexOf("Version/")?f=v(a.a,/Version\/([\d\.\w]+)/,1):"AdobeAIR"==e?f=v(a.a,/AdobeAIR\/([\d\.]+)/,1):"Opera"==e?f=v(a.a,/OPR\/([\d.]+)/,1):"PhantomJS"==e&&(f=v(a.a,/PhantomJS\/([\d.]+)/,1)),f=p(f),g="AdobeAIR"==e?2<f.c||2==f.c&&5<=f.g:"BlackBerry"==b?10<=c.c:"Android"==b?2<c.c||2==c.c&&1<c.g:526<=d.c||525<=d.c&&13<=d.g,new q(e,0,0,0,0,0,0,new n(g,536>d.c||536==d.c&&11>d.g))}function v(a,b,c){return(a=a.match(b))&&a[c]?a[c]:""}function w(a){this.la=a||"-"}function x(a,b){this.M=a,this.Y=4,this.N="n";var c=(b||"n4").match(/^([nio])([1-9])$/i);c&&(this.N=c[1],this.Y=parseInt(c[2],10))}function y(a){return a.N+a.Y}function z(a){var b=4,c="n",d=null;return a&&((d=a.match(/(normal|oblique|italic)/i))&&d[1]&&(c=d[1].substr(0,1).toLowerCase()),(d=a.match(/([1-9]00|normal|bold)/i))&&d[1]&&(/bold/i.test(d[1])?b=7:/[1-9]00/.test(d[1])&&(b=parseInt(d[1].substr(0,1),10)))),c+b}function A(a,b){this.d=a,this.p=a.t.document.documentElement,this.P=b,this.j="wf",this.h=new w("-"),this.ga=!1!==b.events,this.B=!1!==b.classes}function B(a){if(a.B){var b=j(a.p,a.h.e(a.j,"active")),c=[],d=[a.h.e(a.j,"loading")];b||c.push(a.h.e(a.j,"inactive")),i(a.p,c,d)}C(a,"inactive")}function C(a,b,c){a.ga&&a.P[b]&&(c?a.P[b](c.getName(),y(c)):a.P[b]())}function D(){this.w={}}function E(a,b){this.d=a,this.G=b,this.m=this.d.createElement("span",{"aria-hidden":"true"},this.G)}function F(a){g(a.d,"body",a.m)}function G(a){var b;b=[];for(var c=a.M.split(/,\s*/),d=0;d<c.length;d++){var e=c[d].replace(/['"]/g,"");b.push(-1==e.indexOf(" ")?e:"'"+e+"'")}return b=b.join(","),c="normal","o"===a.N?c="oblique":"i"===a.N&&(c="italic"),"display:block;position:absolute;top:-999px;left:-999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+b+";"+("font-style:"+c+";font-weight:"+(a.Y+"00")+";")}function H(a,b,c,d,e,f,g,h){this.Z=a,this.ja=b,this.d=c,this.s=d,this.G=h||"BESbswy",this.k=e,this.I={},this.W=f||3e3,this.ba=g||null,this.F=this.D=null,a=new E(this.d,this.G),F(a);for(var i in _)_.hasOwnProperty(i)&&(b=new x(_[i],y(this.s)),b=G(b),a.m.style.cssText=b,this.I[_[i]]=a.m.offsetWidth);a.remove()}function I(a,b,c){for(var d in _)if(_.hasOwnProperty(d)&&b===a.I[_[d]]&&c===a.I[_[d]])return!0;return!1}function J(a){var b=a.D.m.offsetWidth,c=a.F.m.offsetWidth;b===a.I.serif&&c===a.I["sans-serif"]||a.k.fa&&I(a,b,c)?Y()-a.na>=a.W?a.k.fa&&I(a,b,c)&&(null===a.ba||a.ba.hasOwnProperty(a.s.getName()))?L(a,a.Z):L(a,a.ja):K(a):L(a,a.Z)}function K(a){setTimeout(e(function(){J(this)},a),25)}function L(a,b){a.D.remove(),a.F.remove(),b(a.s)}function M(a,b,c,d){this.d=b,this.u=c,this.R=0,this.da=this.aa=!1,this.W=d,this.k=a.k}function N(a,b,c,d,f){if(c=c||{},0===b.length&&f)B(a.u);else for(a.R+=b.length,f&&(a.aa=f),f=0;f<b.length;f++){var g=b[f],h=c[g.getName()],j=a.u,k=g;j.B&&i(j.p,[j.h.e(j.j,k.getName(),y(k).toString(),"loading")]),C(j,"fontloading",k),j=null,j=new H(e(a.ha,a),e(a.ia,a),a.d,g,a.k,a.W,d,h),j.start()}}function O(a){0==--a.R&&a.aa&&(a.da?(a=a.u,a.B&&i(a.p,[a.h.e(a.j,"active")],[a.h.e(a.j,"loading"),a.h.e(a.j,"inactive")]),C(a,"active")):B(a.u))}function P(a){this.J=a,this.v=new D,this.oa=new r(a.navigator.userAgent),this.a=this.oa.parse(),this.T=this.U=0,this.Q=this.S=!0}function Q(a,b,c,d,e){var f=0==--a.U;(a.Q||a.S)&&setTimeout(function(){N(b,c,d||null,e||null,f)},0)}function R(a,b,c){this.O=a?a:b+ab,this.q=[],this.V=[],this.ea=c||""}function S(a){this.q=a,this.ca=[],this.L={}}function T(a,b){this.a=new r(navigator.userAgent).parse(),this.d=a,this.f=b}function U(a,b){this.d=a,this.f=b,this.o=[]}function V(a,b){this.d=a,this.f=b,this.o=[]}function W(a,b){this.d=a,this.f=b,this.o=[]}function X(a,b){this.d=a,this.f=b}var Y=Date.now||function(){return+new Date};f.prototype.createElement=function(a,b,c){if(a=this.C.createElement(a),b)for(var d in b)b.hasOwnProperty(d)&&("style"==d?a.style.cssText=b[d]:a.setAttribute(d,b[d]));return c&&a.appendChild(this.C.createTextNode(c)),a};var Z=/^([0-9]+)(?:[\._-]([0-9]+))?(?:[\._-]([0-9]+))?(?:[\._+-]?(.*))?$/;o.prototype.compare=function(a){return this.c>a.c||this.c===a.c&&this.g>a.g||this.c===a.c&&this.g===a.g&&this.A>a.A?1:this.c<a.c||this.c===a.c&&this.g<a.g||this.c===a.c&&this.g===a.g&&this.A<a.A?-1:0},o.prototype.toString=function(){return[this.c,this.g||"",this.A||"",this.e||""].join("")},q.prototype.getName=function(){return this.M};var $=new q("Unknown",0,0,0,0,0,0,new n(!1,!1));r.prototype.parse=function(){var a;if(-1!=this.a.indexOf("MSIE")||-1!=this.a.indexOf("Trident/")){a=s(this);var b=p(t(this)),c=null,d=v(this.a,/Trident\/([\d\w\.]+)/,1),c=p(-1!=this.a.indexOf("MSIE")?v(this.a,/MSIE ([\d\w\.]+)/,1):v(this.a,/rv:([\d\w\.]+)/,1));""!=d&&p(d),a=new q("MSIE",0,0,0,0,0,0,new n("Windows"==a&&6<=c.c||"Windows Phone"==a&&8<=b.c,!1))}else if(-1!=this.a.indexOf("Opera"))a:if(a=p(v(this.a,/Presto\/([\d\w\.]+)/,1)),p(t(this)),null!==a.c||p(v(this.a,/rv:([^\)]+)/,1)),-1!=this.a.indexOf("Opera Mini/"))a=p(v(this.a,/Opera Mini\/([\d\.]+)/,1)),a=new q("OperaMini",0,0,0,s(this),0,0,new n(!1,!1));else{if(-1!=this.a.indexOf("Version/")&&(a=p(v(this.a,/Version\/([\d\.]+)/,1)),null!==a.c)){a=new q("Opera",0,0,0,s(this),0,0,new n(10<=a.c,!1));break a}a=p(v(this.a,/Opera[\/ ]([\d\.]+)/,1)),a=null!==a.c?new q("Opera",0,0,0,s(this),0,0,new n(10<=a.c,!1)):new q("Opera",0,0,0,s(this),0,0,new n(!1,!1))}else/OPR\/[\d.]+/.test(this.a)?a=u(this):/AppleWeb(K|k)it/.test(this.a)?a=u(this):-1!=this.a.indexOf("Gecko")?(a="Unknown",b=new o,p(t(this)),b=!1,-1!=this.a.indexOf("Firefox")?(a="Firefox",b=p(v(this.a,/Firefox\/([\d\w\.]+)/,1)),b=3<=b.c&&5<=b.g):-1!=this.a.indexOf("Mozilla")&&(a="Mozilla"),c=p(v(this.a,/rv:([^\)]+)/,1)),b||(b=1<c.c||1==c.c&&9<c.g||1==c.c&&9==c.g&&2<=c.A),a=new q(a,0,0,0,s(this),0,0,new n(b,!1))):a=$;return a},w.prototype.e=function(){for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b].replace(/[\W_]+/g,"").toLowerCase());return a.join(this.la)},x.prototype.getName=function(){return this.M},E.prototype.remove=function(){var a=this.m;a.parentNode&&a.parentNode.removeChild(a)};var _={ra:"serif",qa:"sans-serif",pa:"monospace"};H.prototype.start=function(){this.D=new E(this.d,this.G),F(this.D),this.F=new E(this.d,this.G),F(this.F),this.na=Y();var a=new x(this.s.getName()+",serif",y(this.s)),a=G(a);this.D.m.style.cssText=a,a=new x(this.s.getName()+",sans-serif",y(this.s)),a=G(a),this.F.m.style.cssText=a,J(this)},M.prototype.ha=function(a){var b=this.u;b.B&&i(b.p,[b.h.e(b.j,a.getName(),y(a).toString(),"active")],[b.h.e(b.j,a.getName(),y(a).toString(),"loading"),b.h.e(b.j,a.getName(),y(a).toString(),"inactive")]),C(b,"fontactive",a),this.da=!0,O(this)},M.prototype.ia=function(a){var b=this.u;if(b.B){var c=j(b.p,b.h.e(b.j,a.getName(),y(a).toString(),"active")),d=[],e=[b.h.e(b.j,a.getName(),y(a).toString(),"loading")];c||d.push(b.h.e(b.j,a.getName(),y(a).toString(),"inactive")),i(b.p,d,e)}C(b,"fontinactive",a),O(this)},P.prototype.load=function(a){this.d=new f(this.J,a.context||this.J),this.S=!1!==a.events,this.Q=!1!==a.classes;var b=new A(this.d,a),c=[],d=a.timeout;b.B&&i(b.p,[b.h.e(b.j,"loading")]),C(b,"loading");var g,c=this.v,h=this.d,j=[];for(g in a)if(a.hasOwnProperty(g)){var k=c.w[g];k&&j.push(k(a[g],h))}for(c=j,this.T=this.U=c.length,a=new M(this.a,this.d,b,d),d=0,g=c.length;g>d;d++)h=c[d],h.K(this.a,e(this.ka,this,h,b,a))},P.prototype.ka=function(a,b,c,d){var e=this;d?a.load(function(a,b,d){Q(e,c,a,b,d)}):(a=0==--this.U,this.T--,a&&0==this.T?B(b):(this.Q||this.S)&&N(c,[],{},null,a))};var ab="//fonts.googleapis.com/css";R.prototype.e=function(){if(0==this.q.length)throw Error("No fonts to load!");if(-1!=this.O.indexOf("kit="))return this.O;for(var a=this.q.length,b=[],c=0;a>c;c++)b.push(this.q[c].replace(/ /g,"+"));return a=this.O+"?family="+b.join("%7C"),0<this.V.length&&(a+="&subset="+this.V.join(",")),0<this.ea.length&&(a+="&text="+encodeURIComponent(this.ea)),a};var bb={latin:"BESbswy",cyrillic:"&#1081;&#1103;&#1046;",greek:"&#945;&#946;&#931;",khmer:"&#x1780;&#x1781;&#x1782;",Hanuman:"&#x1780;&#x1781;&#x1782;"},cb={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},db={i:"i",italic:"i",n:"n",normal:"n"},eb=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;S.prototype.parse=function(){for(var a=this.q.length,b=0;a>b;b++){var c=this.q[b].split(":"),d=c[0].replace(/\+/g," "),e=["n4"];if(2<=c.length){var f,g=c[1];if(f=[],g)for(var g=g.split(","),h=g.length,i=0;h>i;i++){var j;if(j=g[i],j.match(/^[\w-]+$/)){j=eb.exec(j.toLowerCase());var k=void 0;if(null==j)k="";else{if(k=void 0,k=j[1],null==k||""==k)k="4";else var l=cb[k],k=l?l:isNaN(k)?"4":k.substr(0,1);j=j[2],k=[null==j||""==j?"n":db[j],k].join("")}j=k}else j="";j&&f.push(j)}0<f.length&&(e=f),3==c.length&&(c=c[2],f=[],c=c?c.split(","):f,0<c.length&&(c=bb[c[0]])&&(this.L[d]=c))}for(this.L[d]||(c=bb[d])&&(this.L[d]=c),c=0;c<e.length;c+=1)this.ca.push(new x(d,e[c]))}};var fb={Arimo:!0,Cousine:!0,Tinos:!0};T.prototype.K=function(a,b){b(a.k.X)},T.prototype.load=function(a){var b=this.d;"MSIE"==this.a.getName()&&1!=this.f.blocking?h(b,e(this.$,this,a)):this.$(a)},T.prototype.$=function(a){for(var b=this.d,c=new R(this.f.api,k(b),this.f.text),d=this.f.families,e=d.length,f=0;e>f;f++){var g=d[f].split(":");3==g.length&&c.V.push(g.pop());var h="";2==g.length&&""!=g[1]&&(h=":"),c.q.push(g.join(h))}d=new S(d),d.parse(),l(b,c.e()),a(d.ca,d.L,fb)},U.prototype.H=function(a){var b=this.d;return k(this.d)+(this.f.api||"//f.fontdeck.com/s/css/js/")+(b.t.location.hostname||b.J.location.hostname)+"/"+a+".js"},U.prototype.K=function(a,b){var c=this.f.id,d=this.d.t,e=this;c?(d.__webfontfontdeckmodule__||(d.__webfontfontdeckmodule__={}),d.__webfontfontdeckmodule__[c]=function(a,c){for(var d=0,f=c.fonts.length;f>d;++d){var g=c.fonts[d];e.o.push(new x(g.name,z("font-weight:"+g.weight+";font-style:"+g.style)))}b(a)},m(this.d,this.H(c),function(a){a&&b(!1)})):b(!1)},U.prototype.load=function(a){a(this.o)},V.prototype.H=function(a){var b=k(this.d);return(this.f.api||b+"//use.typekit.net")+"/"+a+".js"},V.prototype.K=function(a,b){var c=this.f.id,d=this.d.t,e=this;c?m(this.d,this.H(c),function(a){if(a)b(!1);else{if(d.Typekit&&d.Typekit.config&&d.Typekit.config.fn){a=d.Typekit.config.fn;for(var c=0;c<a.length;c+=2)for(var f=a[c],g=a[c+1],h=0;h<g.length;h++)e.o.push(new x(f,g[h]));try{d.Typekit.load({events:!1,classes:!1})}catch(i){}}b(!0)}},2e3):b(!1)},V.prototype.load=function(a){a(this.o)},W.prototype.K=function(a,b){var c=this,d=c.f.projectId,e=c.f.version;if(d){var f=c.d.t;m(this.d,c.H(d,e),function(e){if(e)b(!1);else{if(f["__mti_fntLst"+d]&&(e=f["__mti_fntLst"+d]()))for(var g=0;g<e.length;g++)c.o.push(new x(e[g].fontfamily));b(a.k.X)}}).id="__MonotypeAPIScript__"+d}else b(!1)},W.prototype.H=function(a,b){var c=k(this.d),d=(this.f.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,"");return c+"//"+d+"/"+a+".js"+(b?"?v="+b:"")},W.prototype.load=function(a){a(this.o)},X.prototype.load=function(a){var b,c,d=this.f.urls||[],e=this.f.families||[],f=this.f.testStrings||{};for(b=0,c=d.length;c>b;b++)l(this.d,d[b]);for(d=[],b=0,c=e.length;c>b;b++){var g=e[b].split(":");if(g[1])for(var h=g[1].split(","),i=0;i<h.length;i+=1)d.push(new x(g[0],h[i]));else d.push(new x(g[0]))}a(d,f)},X.prototype.K=function(a,b){return b(a.k.X)};var gb=new P(this);gb.v.w.custom=function(a,b){return new X(b,a)},gb.v.w.fontdeck=function(a,b){return new U(b,a)},gb.v.w.monotype=function(a,b){return new W(b,a)},gb.v.w.typekit=function(a,b){return new V(b,a)},gb.v.w.google=function(a,b){return new T(b,a)},this.WebFont||(this.WebFont={},this.WebFont.load=e(gb.load,gb),this.WebFontConfig&&gb.load(this.WebFontConfig))}(this,document),define("webfontloader",function(){}),define("libs/gameConfig/isl",function(){}),window.ASSET_URL="media/",window.TRANSLATION_URL="strings/",config={app:"com/fortieth/FortiethApp"},window.console||(window.console={log:function(){}}),window.console.log||(window.console.log=function(){}),require.config({baseUrl:"js/",paths:{PIXI:"libs/pixi.dev",TWEEN:"libs/TweenLite.min",TIMELINE:"libs/TimelineLite.min",EASEPACK:"libs/EasePack.min",CSSPACK:"libs/CSSPlugin.min",HOWLER:"libs/howler.min",signals:"../tools/node_modules/signals/dist/signals",APP_root:"com/duck/app/DuckApp",stats:"libs/stats.min",webfontloader:"libs/webfontloader"}}),hasCanvasSupport()?require(["TWEEN","TIMELINE","EASEPACK","CSSPACK","HOWLER","PIXI","APP_root","stats","com/fido/system/Device","webfontloader","libs/gameConfig/isl"],function(a,b,c,d,e,f,g,h,i){function j(){document.getElementById("container");i.iOS&&i.iOS_version<7||window.scrollTo(0,0),k.resize(window.innerWidth,window.innerHeight)}if(runISL(),window.validAddress){var k=new g;window.app=k;var l=document.getElementById("container");l.appendChild(k.view),l.style.position="absolute",l.style.zIndex=30,l.style.background="black",k.view.style.position="absolute",k.view.style.zIndex=30,k.view.style.top=0,k.view.style.left=0,window.addEventListener("resize",function(){j()}),j()}}):require(["com/fido/app/Fallback"],function(){new Fallback(document.body)}),define("Boot",function(){});